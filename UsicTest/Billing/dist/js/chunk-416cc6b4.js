(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-416cc6b4"],{"21d7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"row"},[t.isExcelFile?t._e():a("div",{staticClass:"col-md-12"},[a("tg-list",{attrs:{IsShowAction:!0,showCheckBox:!0,ModuleName:"Billing",listType:["List"],RenderRowActionMethod:t.renderActions,SubModuleCode:"Billing",IdentityColumn:"WORK_CODE_ID",HeaderText:t.$t("RateCode"),ListData:t.WorkCodeCategoryData,HeaderData:t.Headers,callbackfunction:t.FetchData,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,LegendArray:[],SortExp:t.sortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["STATUS_ID"==i.column.COLUMN_NAME?[1001==i.row.STATUS_ID?a("span",[a("em",{staticClass:"fa fa-check text-success  fa-2x",staticStyle:{color:"#000000"}})]):a("span",[a("em",{staticClass:" fa fa-times  text-danger  fa-2x"})])]:t._e(),"CREATE_DATE"==i.column.COLUMN_NAME?[a("span",[t._v(t._s(t.$d(i.row.CREATE_DATE)))])]:t._e(),"DEFAULT_RATE"==i.column.COLUMN_NAME?[a("span",[t._v(t._s(i.row.DEFAULT_RATE.toFixed(2)))])]:t._e()]}}],null,!1,3920280391)})],1)]),t.showAddModel?a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Rate Code Category")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.CloseAddWorkCode}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body p-4"},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",{staticClass:"w-100",staticStyle:{"max-width":"900px"}},[a("dynamic-form",{attrs:{schema:t.FormSchema,buttons:t.buttons},scopedSlots:t._u([{key:"tgslot-Content",fn:function(e){var i=e.data;return[a("div",{staticClass:"form-group"},[a("ckeditor",{attrs:{editor:t.editor},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}}),a("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i.error))])],1)]}}],null,!1,2492591821)}),a("div",{staticClass:"text-left text-danger mt-2"},[t._v(" "+t._s(t.$t("MandatoryString"))+" ")])],1)])])])])])]):t._e(),t.isEditWorkCode?a("AddWorkCode",{attrs:{callbackfunction:t.FetchData,editDetail:t.EditPlanDetail,refCode:t.refCode},on:{CloseAddWorkCode:t.CloseAddWorkCode}}):t._e()],1)},s=[],o=(a("14d9"),a("88a7"),a("271a"),a("5494"),a("9769"));let l=[{fieldName:"RateCode",fieldType:"text",fieldIcon:"fa fa-users",paramName:"WORK_CODE",fieldSearchConditionName:["WORK_CODE"],isSearch:!1,value:"",listOptions:[]},{fieldName:"SearchByCategory",fieldType:"ddl-check",fieldIcon:"fa fa-user",fieldSearchConditionName:["WORK_CODE_CATEGORY_ID"],paramName:"WORK_CODE_CATEGORY_ID",isSearch:!1,value:"",listOptions:[]}],d=[{title:"ExportToExcel",iconClass:"iconClass: 'fa fa-file-excel-o",callbackfunction:"ExportToExcel",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{id:"InactiveMultiple",title:"Inactive",iconClass:"fa-close",callbackfunction:"InactiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!0},{id:"ActiveMultiple",title:"Active",iconClass:"fa-check",callbackfunction:"ActiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!0},{title:"Add",iconClass:"fa-plus",callbackfunction:"AddWorkRecord",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!1},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!1,isvisible:!0,isEnabledOnSelectedRow:!0}],r=[{title:"Edit",callbackfunction:"EditRecord",icon:"fa fa-pencil text-success action-icon",additionalSpan:""}];async function n(t){var e=t;const a="";await o["a"].GetWorkCodeCategoryList(a).then(t=>{if(""!=t.data&&t.data.length){const a=JSON.parse(t.data);a.forEach(t=>{let a={name:t.WORK_CODE_CATEGORY,value:t.WORK_CODE_CATEGORY_ID};e.leftSearchFields[1].listOptions.push(a)})}})}var c={buttons:d,listActions:r,leftsearchSchema:l,bindleftCommonSearchdropdown:n},u=a("a985"),h={components:{AddWorkCode:u["a"]},data(){return{isExcelFile:!1,ExcelPanel:[],categoryId:[],isEditWorkCode:!1,editor:this.CLASSIC_EDITOR,editorData:"",recordId:0,noRecord:!1,isLoading:!0,WorkCodeCategoryData:[],filteredHeaders:[],TotalRecords:0,listheaderbuttons:c.buttons,listActions:c.listActions,leftSearchFields:c.leftsearchSchema,ShowManageView:!1,ShowAddCustomReportView:!1,PageSize:10,pageNum:1,PageNumber:1,isPaged:1,TotalPages:0,searchCondition:"",conditionForInstantSearch:"",SortBy:"",SortExp:"",privilegeParams:null,refCode:"",EditPlanDetail:[],Headers:[{COLUMN_NAME:"WORK_CODE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("RateCode"),DISPLAY_ORDER:1},{COLUMN_NAME:"CATEGORY_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CATEGORY_NAME"),DISPLAY_ORDER:2},{COLUMN_NAME:"DEFAULT_RATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("DefaultRate"),DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"WORK_DESCRIPTION",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("DESCRIPTION"),DISPLAY_ORDER:3},{COLUMN_NAME:"CREATE_DATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedDate"),DISPLAY_ORDER:3,settings:{isInSlot:!0}},{COLUMN_NAME:"CREATED_BY_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CREATED_BY"),DISPLAY_ORDER:3},{COLUMN_NAME:"STATUS_ID",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("Status"),DISPLAY_ORDER:4,settings:{isInSlot:!0}}],Item:[],showAddModel:!1}},async created(){var t=this;await t.FetchData(),c.bindleftCommonSearchdropdown(this)},methods:{FetchData:async function(){var t=this;t.isLoading=!0;var e=`pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&search=${t.searchCondition}&categoryId=${t.categoryId}`;await o["a"].GetWorkCodeList(e).then(e=>{if(t.Headers.forEach(e=>{e.COLUMN_NAME===t.SortBy&&(e.SortExp=t.SortExp)}),null!=e.data&&""!=e.data){var a=JSON.parse(e.data);a.forEach(t=>{t.CREATE_DATE&&(t.CREATE_DATE=new Date(t.CREATE_DATE))}),t.WorkCodeCategoryData=a,e.data.length>0&&(t.TotalRecords=a[0].TOTAL),t.noRecord=!1}else t.WorkCodeCategoryData=[],t.TotalRecords=0,t.noRecord=!0,t.isLoading=!1})},AddWorkRecord:function(){var t=this;t.refCode="",t.isEditWorkCode=!0},CloseAddWorkCode(){this.EditPlanDetail=null,this.isEditWorkCode=!1},triggerEditReport(){this.CloseAddWorkCode()},renderActions(t){let e=[];return this.listActions.forEach(t=>{let a={...t};a.isVisible=!0,e.push(a)}),e},actionButtonClick(t,e,a,i,s){switch(t){case"EditRecord":this.EditCategory(e);break}},EditCategory(t){var e=this;e.refCode="Update",e.EditPlanDetail=t,e.isEditWorkCode=!0},commonHeaderButtonClick(t){switch(t.callbackfunction){case"commonDeleteData":this.commonDeleteData();break;case"ActiveMultipleListing":this.CommonUpdateStatus("Active");break;case"InactiveMultipleListing":this.CommonUpdateStatus("Inactive");break;case"AddWorkRecord":this.AddWorkRecord();break;case"ExportToExcel":this.Download();break}},Download:async function(){var t=this,e=`pageSize=${t.TotalRecords}&pageNum=${t.PageNumber}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&search=${t.searchCondition}`;JSON.stringify(e);await o["a"].GetWorkCodeList(e).then((function(e){""!=e.data&&null!=e.data&&e.data.length>0&&t.ConvertJSONToCSV(e.data,"Rate Code",!0)}))},ConvertJSONToCSV:function(t,e,a){const i=JSON.parse(t),s=["WORK_CODE_ID","DEFAULT_RATE","STATUS_ID","TOTAL","WORK_CODE_CATEGORY_ID","RCOUNT"],o={ROWNUMBER:"Sr No",WORK_CODE:"Rate Code ",CATEGORY_NAME:"Category Name",WORK_DESCRIPTION:"Description",CREATED_BY_NAME:"Create By Name",CREATE_DATE:"Create Date",COMPANY_ID:"Company Id",STATUS_NAME:"Status"};if(Array.isArray(i)&&0!==i.length)if(i.length>0){const t=Object.keys(i[0]),l=t.filter(t=>!s.includes(t)),d=l.map(t=>o[t]||t),r=i.map(t=>d.map(e=>{const a=l[d.indexOf(e)];let i=void 0!==t[a]&&null!==t[a]?String(t[a]):"";return(i.includes(",")||i.includes("\n")||i.includes('"'))&&(i=`"${i.replace(/"/g,'""')}"`),i}).join(",")),n=(a?[d.join(",")]:[]).concat(r).join("\n"),c=new Blob([n],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");u.setAttribute("href",URL.createObjectURL(c)),u.setAttribute("download",e+".csv"),u.click()}else console.log("No valid data to convert.");else console.warn("No valid data to convert.")},commonDeleteData:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?(e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Report"),(function(){var t={ids:a,moduleName:"BILLING",refCode:"TALYGEN_BE_WORK_CODE"},i=JSON.stringify(t);o["a"].CommonCommonDelete(i).then((async function(t){200==t.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("RateCode")]),"success",!0,e.$t("Alert")),await e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("RateCode")]),"failure",!0,e.$t("Alert"))}))})),e.FetchData()):e.ShowAlert(e.$t("Selectanyrecordtodelete"),"failure",!0,e.$t("Alert"))},CommonUpdateStatus:async function(t){var e=this;t="Active"==t?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((async function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&(e.listheaderbuttons[1].isdisabled=!1,e.listheaderbuttons[2].isdisabled=!1,e.listheaderbuttons[4].isdisabled=!1,e.confirmR(e.$t("AreYouSureToUpdateStatus"),!0,e.$t("update")+"  "+e.$t("status"),(async function(){var i={ID:a,StatusId:t,IsFor:"TALYGEN_BE_WORK_CODE",Module:"BILLING",Submodule:"TALYGEN_BE_WORK_CODE"},s=JSON.stringify(i);o["a"].CommonUpdateStatus(s).then(async t=>{200==t.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.listheaderbuttons[1].isdisabled=!0,e.listheaderbuttons[2].isdisabled=!0,e.listheaderbuttons[4].isdisabled=!0,e.ShowAlert(e.$t("RecordUpdatedSuccessfully"),"success",!0,e.$t("Alert")),await e.FetchData())})})))},pagerMethod(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},leftCommonSearch:async function(t){if(this.PageNumber=t.PageNumber,this.isPaged=1,""!=t.searchCondition&&"undefined"!=typeof t.searchCondition){let e=t.searchConditionJson;const a=/(WORK_CODE|WORK_CODE_CATEGORY_ID)\s*(?:LIKE\s+'?%?|=)\s*([^%')\s]+).*?/i,i=e.match(a),s=i[1],o=i[2];switch(s){case"WORK_CODE":this.searchCondition=o;break;case"WORK_CODE_CATEGORY_ID":this.categoryId=o;break}}else this.categoryId="",this.searchCondition="";this.FetchData()}},getStatusClass:function(t){var e="";switch(t){case"Active":e="fa fa-check text-black";break;case"Inactive":e="fa fa-check text-muted";break;default:e=""}return e}},C=h,E=a("0c7c"),A=Object(E["a"])(C,i,s,!1,null,null,null);e["default"]=A.exports},a985:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),t.isEditWorkCode?a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s("Update"===t.refCode?t.$t("updateratecode"):t.$t("addratecode"))+" ")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.CloseAddWorkCode}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"validatePlan",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.$t("MandatoryString")}})],1)])])]):t._e()],1)])},s=[],o=(a("14d9"),a("9769")),l={props:{callbackfunction:{type:Function,required:!1},refCode:{type:String,required:!1},editDetail:{type:Object,required:!1}},data(){return{isLoading:!1,isEditWorkCode:!0,Id:0,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("RateCode"),name:"RateCode",value:"",placeholder:this.$t("RateCode"),validationRules:{required:!0},disabled:!1},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:this.$t("Status"),config:{options:[{value:"1001",name:this.$t("Active")},{value:"1002",name:this.$t("Inactive")}]},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Category"),name:"Category",value:"",placeholder:this.$t("Select"),config:{options:[]},validationRules:{required:!0}},{astype:"NumericField",label:this.$t("DefaultRate"),name:"DefaultRate",value:"",placeholder:this.$t("DefaultRate"),validationRules:{required:!1},disabled:!1}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:this.$t("DESCRIPTION"),validationRules:{required:!0,max:6e3}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>"+this.$t("Save"),onClick:this.SaveData},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.CloseAddWorkCode}]}},mounted(){this.GetCategoryList(),this.editDetail&&Object.keys(this.editDetail).length>0&&"Update"==this.refCode&&this.BindEditDetail(this.editDetail)},methods:{BindEditDetail(t){var e=this;e.Id=t.WORK_CODE_ID,e.$refs.validatePlan.updateProperty("RateCode","value",t.WORK_CODE),e.$refs.validatePlan.updateProperty("Status","value",t.STATUS_ID),e.$refs.validatePlan.updateProperty("Description","value",t.WORK_DESCRIPTION),e.$refs.validatePlan.updateProperty("Category","value",t.WORK_CODE_CATEGORY_ID),e.$refs.validatePlan.updateProperty("DefaultRate","value",t.DEFAULT_RATE)},GetCategoryList(){this.isLoading=!0;const t=this,e=`companyId=${t.GetUserInfo.CompanyId}&loggedinUserID=${t.GetUserInfo.ID}&pageSize=10&pageNum=1&sortBy=&sortExp=&search=`;o["a"].GetWorkCodeCategoryList(e).then(e=>{if(e.data){const a=JSON.parse(e.data);a.forEach(e=>{t.FormSchema[1].Data[0].config.options.push({name:e.WORK_CODE_CATEGORY,value:e.WORK_CODE_CATEGORY_ID}),t.$refs.validatePlan.UpdateKeyValue()})}}).catch(t=>{console.error("Error fetching category list:",t)}).finally(()=>{this.isLoading=!1})},async SaveData(){this.isLoading=!0;try{const e=await this.$refs.validatePlan.validateForm.validate();if(!e)return void(this.isLoading=!1);const a=this.$refs.validatePlan.getPropertyValue("RateCode","value"),i=this.$refs.validatePlan.getPropertyValue("Status","value"),s=this.$refs.validatePlan.getPropertyValue("Description","value"),l=this.$refs.validatePlan.getPropertyValue("Category","value"),d=this.$refs.validatePlan.getPropertyValue("DefaultRate","value"),r={id:this.Id,name:a,description:s,status:i,categoryId:l,DefaultRate:d},n=JSON.stringify(r);var t="name="+a;if(!this.Id){const e=await o["a"].ISExistWorkCode(t);if("Exist"===e.data.message)return void this.ShowAlert(this.$t("AlreadyExists",[this.$t("RateCode")]),"failure",!0,this.$t("Alert"))}const c=await o["a"].SaveUpdateWork(n);1==c.data&&this.ShowAlert(this.$t("AddedSuccess",[this.$t("RateCode")]),"Success",!0,this.$t("Alert")),2==c.data&&this.ShowAlert(this.$t("UpdatedSuccess",[this.$t("RateCode")]),"Success",!0,this.$t("Alert")),this.callbackfunction&&this.callbackfunction(),this.CloseAddWorkCode()}catch(e){console.error("Error saving data:",e)}finally{this.isLoading=!1}},CloseAddWorkCode(){this.editDetail=null,this.$emit("CloseAddWorkCode")}}},d=l,r=a("0c7c"),n=Object(r["a"])(d,i,s,!1,null,null,null);e["a"]=n.exports}}]);
//# sourceMappingURL=chunk-416cc6b4.js.map