(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e1d9f80"],{"2b19":function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,".fc_parentchild li p.shape_oval.shape_ovalnew{height:auto!important;padding:10px}p.shape_oval.shape_ovalnew table th{font-size:13px;font-weight:600}p.shape_oval.shape_ovalnew table td{font-size:12px;font-weight:400;padding:0;line-height:8px}",""]),e.exports=t},"2ce0":function(e,t,o){"use strict";o("cdee")},"418c":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("div",{staticClass:"my-popups"},[o("loader",{attrs:{"is-visible":e.isLoading}}),o("div",{staticClass:"modal d-block"},[o("div",{staticClass:"modal-dialog modal-dialog-centered"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[o("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("BillingConditions")))]),o("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseModal}},[o("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),o("div",{staticClass:"modal-body csscontrol_popup",staticStyle:{padding:"0"}},[o("div",{staticClass:"container-fluid p-0 main-content"},[o("div",{staticClass:"row",staticStyle:{margin:"0"}},[o("div",{staticClass:"right-content",staticStyle:{padding:"20px",width:"100% !important","margin-bottom":"24px"}},[o("div",{staticClass:"form-group mb-4"},[e._m(0),o("input",{directives:[{name:"model",rawName:"v-model",value:e.conditionName,expression:"conditionName"}],class:["form-control",{"is-invalid":e.showError&&!e.conditionName}],attrs:{disabled:e.isEditMode,placeholder:"Enter condition name",required:""},domProps:{value:e.conditionName},on:{input:function(t){t.target.composing||(e.conditionName=t.target.value)}}}),e.showError&&!e.conditionName?o("div",{staticClass:"invalid-feedback text-danger small"},[e._v(" "+e._s(e.$t("MandatoryFieldConditionName"))+" ")]):e._e()]),o("div",{staticClass:"form-group mb-4"},[o("label",{staticStyle:{"font-weight":"600",color:"#495057","margin-bottom":"8px"}},[e._v("Condition Logic:")]),o("div",{staticClass:"conditionbg"},[e._v(" "+e._s(e.conditionText)+" ")])]),o("div",{staticClass:"condition-builder border"},e._l(e.conditionBlocks,(function(t,a){return o("div",{key:a,staticClass:"condition-block"},[a>0?o("div",{staticClass:"or-separator",staticStyle:{"text-align":"center",margin:"5px 0"}},[o("button",{staticClass:"btn btn-info",staticStyle:{border:"none","border-radius":"6px!important","font-weight":"600"},attrs:{type:"button",disabled:e.isEditMode},on:{click:function(t){return e.toggleJoinOperator(a)}}},[e._v(" "+e._s(t.joinWithPrevious||"OR")+" ")])]):e._e(),o("div",{staticClass:"block-header",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"5px"}},[o("h6",{staticStyle:{"font-weight":"600",color:"#495057",margin:"0"}},[e._v("Block "+e._s(a+1))]),o("div",{staticClass:"d-flex"},[o("button",{staticClass:"btn btn-sm btn-info",style:{border:"none",borderRadius:"8px!important",padding:"4px 12px",marginRight:"8px"},attrs:{type:"button",disabled:e.isEditMode},on:{click:function(t){return e.toggleBlockOperator(a)}}},[e._v(" "+e._s(t.operator||"AND")+" ")])])]),o("div",{staticClass:"block-conditions"},e._l(t.conditions,(function(t,a){return o("div",{key:a,staticClass:"condition-row",staticStyle:{display:"flex","align-items":"center","margin-bottom":"5px",gap:"10px"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.field,expression:"row.field"}],staticClass:"form-control",staticStyle:{flex:"1"},attrs:{disabled:e.isEditMode},on:{change:[function(o){var a=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"field",o.target.multiple?a:a[0])},function(o){return e.handleFieldChange(t)}]}},[o("option",{attrs:{value:"",disabled:""}},[e._v("Select Field")]),e._l(e.groupedOptions,(function(t,a){return o("optgroup",{key:a,attrs:{label:a}},e._l(t,(function(t){return o("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(e.$t(t.label))+" ")])})),0)}))],2),o("select",{directives:[{name:"model",rawName:"v-model",value:t.operator,expression:"row.operator"}],staticClass:"form-control",staticStyle:{flex:"0.5"},attrs:{disabled:e.isEditMode},on:{change:[function(o){var a=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"operator",o.target.multiple?a:a[0])},function(o){return e.handleDropdownValue(t)}]}},[o("option",{attrs:{value:"",disabled:""}},[e._v("Operator")]),e._l(t.operatorList||[],(function(t){return o("option",{key:t.OPERATOR_ID,domProps:{value:t.OPERATOR_ID}},[e._v(" "+e._s(t.OPERATOR_DISPLAY_NAME)+" ")])}))],2),o("div",{staticClass:"d-flex",staticStyle:{flex:"1",overflow:"visible!important","min-width":"320px"}},["date"!==t.sqlType||e.isValueHidden(t)||e.isShowIsWeekDay(t)?e._e():o("v-date-picker",{staticClass:"timedate input-group mr-2",attrs:{mode:"date"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.inputValue,i=t.togglePopover;return[o("input",{class:{"form-control":!0},attrs:{placeholder:"MM/DD/YYYY",disabled:e.isEditMode},domProps:{value:a},on:{click:function(e){return i()}}}),o("div",{staticClass:"input-group-append",on:{click:function(e){return i()}}},[o("span",{staticClass:"input-group-text"},[o("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"row.value"}}),"date"!==t.sqlType||e.isValueHidden(t)||!e.isValueToVisible(t)||e.isShowIsWeekDay(t)?e._e():o("v-date-picker",{staticClass:"timedate input-group",attrs:{mode:"date"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.inputValue,i=t.togglePopover;return[o("input",{class:{"form-control":!0},attrs:{placeholder:"MM/DD/YYYY",disabled:e.isEditMode},domProps:{value:a},on:{click:function(e){return i()}}}),o("div",{staticClass:"input-group-append",on:{click:function(e){return i()}}},[o("span",{staticClass:"input-group-text"},[o("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.valueTo,callback:function(o){e.$set(t,"valueTo",o)},expression:"row.valueTo"}}),"time"!==t.sqlType||e.isValueHidden(t)||e.isShowIsWeekDay(t)?e._e():o("v-date-picker",{staticClass:"timedate input-group mr-2",attrs:{mode:"time"},scopedSlots:e._u([{key:"default",fn:function(a){a.inputValue;var i=a.togglePopover;return[o("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"row.value"}],staticClass:"form-control",attrs:{placeholder:"HH:mm",disabled:e.isEditMode},domProps:{value:t.value},on:{click:function(e){return i()},input:function(o){o.target.composing||e.$set(t,"value",o.target.value)}}}),o("div",{staticClass:"input-group-append",on:{click:i}},[o("span",{staticClass:"input-group-text"},[o("em",{staticClass:"fa fa-clock"})])])]}}],null,!0),model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"row.value"}}),"time"!==t.sqlType||e.isValueHidden(t)||!e.isValueToVisible(t)||e.isShowIsWeekDay(t)?e._e():o("v-date-picker",{staticClass:"timedate input-group mr-2",attrs:{mode:"time"},scopedSlots:e._u([{key:"default",fn:function(a){a.inputValue;var i=a.togglePopover;return[o("input",{directives:[{name:"model",rawName:"v-model",value:t.valueTo,expression:"row.valueTo"}],staticClass:"form-control",attrs:{placeholder:"HH:mm",disabled:e.isEditMode},domProps:{value:t.valueTo},on:{click:function(e){return i()},input:function(o){o.target.composing||e.$set(t,"valueTo",o.target.value)}}}),o("div",{staticClass:"input-group-append",on:{click:i}},[o("span",{staticClass:"input-group-text"},[o("em",{staticClass:"fa fa-clock"})])])]}}],null,!0),model:{value:t.valueTo,callback:function(o){e.$set(t,"valueTo",o)},expression:"row.valueTo"}}),"select"!==t.sqlType&&"bool"!==t.sqlType||e.isValueHidden(t)||e.isValueToVisible(t)||e.isMultiSelectOperator(t)?e._e():o("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"row.value"}],staticClass:"form-control p-1",attrs:{disabled:e.isEditMode},on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",o.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"",disabled:""}},[e._v(e._s(e.$t("Select")))]),e._l(t.valueOptions||[],(function(t){return o("option",{key:t.id,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2),"select"===t.sqlType&&e.isMultiSelectOperator(t)&&!e.isValueHidden(t)?o("Multiselect",{attrs:{options:t.valueOptions||[],multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,searchable:!0,"show-no-results":!1,"internal-search":!0,label:"name","track-by":"value",placeholder:e.$t("Select"),disabled:e.isEditMode},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"row.value"}}):e._e(),e.isShowIsWeekDay(t)?o("div",{staticClass:"d-flex gap-3 flex-wrap"},e._l(e.weekDaysList,(function(i){return o("div",{key:i.value+"-"+a,staticClass:"custom-control custom-checkbox"},[o("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:e.isEditMode,id:"chk-"+a+"-"+i.value},domProps:{checked:e.getDayChecked(t.daysOfWeek,i.value)},on:{change:function(o){return e.toggleDay(t,i.value)}}}),o("label",{staticClass:"custom-control-label",attrs:{for:"chk-"+a+"-"+i.value}},[e._v(e._s(i.label))])])})),0):e._e(),e.isValueHidden(t)||"select"==t.sqlType||"date"==t.sqlType||"time"==t.sqlType||"bool"==t.sqlType?e._e():o("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"row.value"}],staticClass:"form-control p-1 mr-2",attrs:{disabled:e.isEditMode,placeholder:"Value"},domProps:{value:t.value},on:{input:function(o){o.target.composing||e.$set(t,"value",o.target.value)}}}),e.isValueToVisible(t)&&"select"!=t.sqlType&&"date"!=t.sqlType&&"time"!=t.sqlType&&"bool"!=t.sqlType?o("input",{directives:[{name:"model",rawName:"v-model",value:t.valueTo,expression:"row.valueTo"}],staticClass:"form-control p-1",attrs:{disabled:e.isEditMode,placeholder:"Value To"},domProps:{value:t.valueTo},on:{input:function(o){o.target.composing||e.$set(t,"valueTo",o.target.value)}}}):e._e()],1)])})),0)])})),0),e.isShowServiceDetail&&"isModalAddRule"!==e.closeModalType?o("div",{staticClass:"col-lg-12 mt-3 mb-3 p-0"},[o("div",{staticClass:"form-check form-switch col-md-6 mt-0 p-0 form-group"},[o("label",{staticClass:"mr-2",attrs:{for:"peakHoursSwitch"}},[e._v(e._s(e.$t("Apply"))+" "+e._s(e.$t("Rate"))+":")]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 float-left"},[o("label",{staticClass:"switch"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.rateToggle,expression:"form.rateToggle"}],staticClass:"form-check-input custom-control-input dynamic",attrs:{type:"checkbox",id:"peakHoursSwitch",disabled:e.isEditMode},domProps:{checked:Array.isArray(e.form.rateToggle)?e._i(e.form.rateToggle,null)>-1:e.form.rateToggle},on:{change:[function(t){var o=e.form.rateToggle,a=t.target,i=!!a.checked;if(Array.isArray(o)){var l=null,s=e._i(o,l);a.checked?s<0&&e.$set(e.form,"rateToggle",o.concat([l])):s>-1&&e.$set(e.form,"rateToggle",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.form,"rateToggle",i)},e.fncApplyRate]}}),o("span",{staticClass:"slider round",staticStyle:{cursor:"default"}},[o("span",{staticClass:"slider-yes"},[e._v(e._s(e.$t("Yes")))]),o("span",{staticClass:"slider-no"},[e._v(e._s(e.$t("No")))])])])])])]),e.form.rateToggle&&"Dependent"!=e.serviceType?o("div",{staticClass:"input-group mt-3"},[o("span",[o("label",{staticClass:"form-check form-check-inline"},[o("div",{staticClass:"custom-control custom-radio custom-control-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.isLeaf,expression:"form.isLeaf"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"fixedRate",value:"true",disabled:e.isEditMode},domProps:{checked:e._q(e.form.isLeaf,"true")},on:{change:[function(t){return e.$set(e.form,"isLeaf","true")},e.chkisLeafRule]}}),e.isCheckExtraFeatureUSICBILLING?o("label",{staticClass:"custom-control-label",attrs:{for:"IsLeafNode"}},[e._v(e._s(e.$t("IsLeafNode")))]):o("label",{staticClass:"custom-control-label",attrs:{for:"Fixed"}},[e._v(e._s(e.$t("Fixed")))])])]),o("label",{staticClass:"form-check form-check-inline"},[o("div",{staticClass:"custom-control custom-radio custom-control-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.addAdder,expression:"form.addAdder"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"usageBasedRate",value:"true",disabled:e.isEditMode},domProps:{checked:e._q(e.form.addAdder,"true")},on:{change:[function(t){return e.$set(e.form,"addAdder","true")},e.onAdderChecked]}}),e.isCheckExtraFeatureUSICBILLING?o("label",{staticClass:"custom-control-label",attrs:{for:"AddAdder"}},[e._v(e._s(e.$t("AddAdder")))]):o("label",{staticClass:"custom-control-label",attrs:{for:"UsageBased"}},[e._v(e._s(e.$t("UsageBased")))])])])])]):e._e()]):e._e(),e.isShowServiceDetail&&e.form.rateToggle&&"Dependent"!=e.serviceType?o("div",{staticClass:"col-12 d-flex p-0"},[e.showIsLeafFlag?o("div",{staticClass:"col-lg-4"},[o("div",{staticClass:"form-group"},[o("label",[e._v(e._s(e.$t("ClientServiceFlag"))+":")]),o("br"),o("div",{staticClass:"flag-selector"},[o("span",{staticClass:"flag-icon",style:{color:e.form.selectedFlag.color,pointerEvents:"none",opacity:.5,cursor:"not-allowed"},on:{click:e.isLeafTogglePopup}},[o("i",{staticClass:"fas fa-flag"})]),e.form.showPopup?o("div",{staticClass:"popup"},[o("div",{staticClass:"popup-header"},[o("span",[e._v("Flag Condition")]),o("button",{staticClass:"close-btn",on:{click:function(t){e.form.showPopup=!1}}},[e._v("×")])]),o("div",{staticClass:"flags"},e._l(e.flags,(function(t){return o("span",{key:t.value,staticClass:"flag-option",style:{color:t.color},on:{click:function(o){return e.isLeafSelectFlag(t)}}},[o("i",{staticClass:"fas fa-flag"})])})),0)]):e._e()])])]):e._e(),e.showIsLeafWorkCode?o("div",{staticClass:"col-lg-4"},[o("div",{staticClass:"form-group"},[o("label",[e._v(e._s(e.$t("RateCode"))+":")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.form.workCodeId,expression:"form.workCodeId"}],staticClass:"form-control p-1",attrs:{disabled:e.isEditMode},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"workCodeId",t.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:"",value:""}},[e._v(e._s(e.$t("Select"))+" ")]),e._l(e.workCodeList,(function(t){return o("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)])]):e._e()]):e._e(),e.isShowServiceDetail&&e.form.rateToggle&&"Dependent"!=e.serviceType?o("div",{staticClass:"col-12 d-flex flex-wrap p-0"},[e.showAdderType?o("div",{staticClass:"col-lg-10 p-0"},[o("div",{staticClass:"form-group"},[o("div",{staticClass:"custom-control custom-radio custom-control-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.adderType,expression:"form.adderType"}],staticClass:"custom-control-input",attrs:{type:"radio",value:"T",disabled:e.isEditMode,id:"adderTier"},domProps:{checked:e._q(e.form.adderType,"T")},on:{change:[function(t){return e.$set(e.form,"adderType","T")},function(t){return e.onAdderTypeSelected("T")}]}}),o("label",{staticClass:"custom-control-label",attrs:{for:"adderTier"}},[e._v(e._s(e.$t("TierWiseAdder")))])]),o("div",{staticClass:"custom-control custom-radio custom-control-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.adderType,expression:"form.adderType"}],staticClass:"custom-control-input",attrs:{type:"radio",value:"P",disabled:e.isEditMode,id:"adderPeriodic"},domProps:{checked:e._q(e.form.adderType,"P")},on:{change:[function(t){return e.$set(e.form,"adderType","P")},function(t){return e.onAdderTypeSelected("P")}]}}),o("label",{staticClass:"custom-control-label",attrs:{for:"adderPeriodic"}},[e._v(e._s(e.$t("PeriodicAdder")))])]),o("div",{staticClass:"custom-control custom-radio custom-control-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.adderType,expression:"form.adderType"}],staticClass:"custom-control-input",attrs:{type:"radio",value:"M",disabled:e.isEditMode,id:"adderSlab"},domProps:{checked:e._q(e.form.adderType,"M")},on:{change:[function(t){return e.$set(e.form,"adderType","M")},function(t){return e.onAdderTypeSelected("M")}]}}),o("label",{staticClass:"custom-control-label",attrs:{for:"adderSlab"}},[e._v(e._s(e.$t("MatchingAdder")))])]),o("div",{staticClass:"custom-control custom-radio custom-control-inline"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.adderType,expression:"form.adderType"}],staticClass:"custom-control-input",attrs:{type:"radio",value:"C",disabled:e.isEditMode,id:"adderCustom"},domProps:{checked:e._q(e.form.adderType,"C")},on:{change:[function(t){return e.$set(e.form,"adderType","C")},function(t){return e.onAdderTypeSelected("C")}]}}),o("label",{staticClass:"custom-control-label",attrs:{for:"adderCustom"}},[e._v(e._s(e.$t("ProceedingAdder")))])])])]):e._e()]):e._e(),e.showAddAdderTypeTable&&e.isShowServiceDetail&&e.form.rateToggle&&"Dependent"!=e.serviceType?o("div",{staticClass:"col-12 p-0"},[o("div",{staticClass:"listing"},[o("div",{staticClass:"table-responsive overflowauto"},[o("table",{staticClass:"table table-bordered dt-responsive nowrap mb-0 mt-0"},[o("thead",{staticClass:"thead-bg"},[o("tr",[o("th",{attrs:{width:"20%"}},[e._v(e._s(e.$t("Units")))]),o("th",{attrs:{width:"10%"}},[e._v(e._s(e.$t("From")))]),o("th",{attrs:{width:"10%"}},[e._v(e._s(e.$t("To")))]),o("th",{staticStyle:{display:"none"},attrs:{width:"10%"}},[e._v(e._s(e.$t("Amount")))]),o("th",{attrs:{width:"10%"}},[e._v(e._s(e.$t("RateCode")))]),e.showRepeatAfter?o("th",{attrs:{width:"10%"}},[e._v(e._s(e.$t("RepeatAfter")))]):e._e(),e.showFlag?o("th",{staticClass:"text-center",attrs:{width:"5%"}}):e._e()])]),o("tbody",e._l(e.form.adderRows,(function(t,a){return o("tr",{key:a},[o("td",[0==a?o("select",{directives:[{name:"model",rawName:"v-model",value:t.unit,expression:"adder.unit"}],staticClass:"form-control p-1",attrs:{disabled:e.isEditMode},on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"unit",o.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"",disabled:"",selected:""}},[e._v(" "+e._s(e.$t("Select")))]),e._l(e.usageMeasurementList,(function(t){return o("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e()]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.from,expression:"adder.from"}],staticClass:"form-control p-1",attrs:{type:"number",disabled:e.isEditMode},domProps:{value:t.from},on:{input:function(o){o.target.composing||e.$set(t,"from",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"adder.to"}],class:["form-control p-1",t.toInvalid?"border-danger":""],attrs:{type:"text",disabled:e.isEditMode},domProps:{value:t.to},on:{input:[function(o){o.target.composing||e.$set(t,"to",o.target.value)},function(t){return e.onToValueChange(t.target.value,a)}]}})]),o("td",{staticStyle:{display:"none"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"adder.amount"}],staticClass:"form-control p-1",attrs:{disabled:e.isEditMode,type:"number"},domProps:{value:t.amount},on:{input:function(o){o.target.composing||e.$set(t,"amount",o.target.value)}}})]),o("td",[o("select",{directives:[{name:"model",rawName:"v-model",value:t.workCodeBefore,expression:"adder.workCodeBefore"}],staticClass:"form-control p-1",attrs:{disabled:e.isEditMode},on:{change:function(o){var a=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"workCodeBefore",o.target.multiple?a:a[0])}}},[o("option",{attrs:{value:"",disabled:"",selected:""}},[e._v(" "+e._s(e.$t("Select")))]),e._l(e.workCodeList,(function(t){return o("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)]),e.showRepeatAfter?o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatAfter,expression:"adder.repeatAfter"}],staticClass:"form-control p-1",attrs:{type:"number",disabled:e.isEditMode},domProps:{value:t.repeatAfter},on:{input:function(o){o.target.composing||e.$set(t,"repeatAfter",o.target.value)}}})]):e._e(),e.showFlag?o("td",{staticClass:"text-center single-action service-flag-data"},[o("span",{staticClass:"flag-icon",class:{disabled:e.isDisabled},style:{color:t.selectedFlag.color,pointerEvents:"none",opacity:.5,cursor:"not-allowed"},on:{click:function(o){return e.isAdderTogglePopup(t)}}},[o("i",{staticClass:"fas fa-flag"})]),t.showPopup?o("div",{staticClass:"popup"},[o("div",{staticClass:"popup-header"},[o("span",[e._v("Flag Condition")]),o("button",{staticClass:"close-btn",on:{click:function(e){t.showPopup=!1}}},[e._v("×")])]),o("div",{staticClass:"flags"},e._l(e.flags,(function(a){return o("span",{key:a.value,staticClass:"flag-option",style:{color:a.color},on:{click:function(o){return e.isAdderSelectFlag(t,a)}}},[o("i",{staticClass:"fas fa-flag"})])})),0)]):e._e()]):e._e()])})),0)])])])]):e._e(),e.form.rateToggle&&"Dependent"==e.serviceType?o("div",{staticClass:"col-12 d-flex flex-wrap p-0"},[o("div",{staticClass:"col-md-7"},[o("Multiselect",{attrs:{multiple:!0,disabled:e.isEditMode,options:e.serviceDdlList,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,searchable:!0,"show-no-results":!1,"internal-search":!0,label:"name","track-by":"value",placeholder:e.$t("Select")},model:{value:e.form.dependentOnServices,callback:function(t){e.$set(e.form,"dependentOnServices",t)},expression:"form.dependentOnServices"}})],1),o("div",{staticClass:"col-md-5"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dependentPrice,expression:"form.dependentPrice"}],staticClass:"form-control",attrs:{type:"text",disabled:e.isEditMode},domProps:{value:e.form.dependentPrice},on:{input:function(t){t.target.composing||e.$set(e.form,"dependentPrice",t.target.value)}}})])]):e._e()])])])])]),e.openRuleMode?o("div",{staticClass:"modal d-block show",attrs:{role:"dialog","aria-modal":"true"}},[o("div",{staticClass:"modal-dialog modal-dialog-centered"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[o("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("Alert")))]),o("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseRuleModel}},[o("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),o("div",{staticClass:"heading-border ml-2 mt-2"},[o("h5",{staticClass:"h5"},[o("span",[e._v(e._s(e.$t("Thisservicewasalreadyconsumed")))])])]),o("div",{staticClass:"modal-body"},[e._l(e.getRuleConditions,(function(t,a){return o("div",{key:a},[o("span",[e._v(e._s(a+1)+".")]),e._v("  "),o("span",[o("b",[e._v(e._s(t.RULE_NAME))])])])})),o("p",{staticClass:"mt-2"},[e._v(e._s(e.$t("overwriteallservicesusedinbillingrulemessage")))])],2),o("div",{staticClass:"modal-footer"},[o("div",{staticClass:"col-12 mt-3"},[o("div",{staticClass:"row flex-row-reverse"},[o("div",{staticClass:"col-lg-6 text-right"},[o("a",{staticClass:"btn btn-success  mr-2",attrs:{title:e.$t("Yes")},on:{click:function(t){return e.saveAddRule()}}},[o("i",{staticClass:"fa fa-check pr-2"}),e._v(e._s(e.$t("Yes"))+" ")]),o("a",{staticClass:"btn btn-primary mr-2",attrs:{href:"javascript:;",title:e.$t("Close")},on:{click:e.CloneService}},[o("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("No"))+" ")]),o("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:e.$t("Cancel")},on:{click:function(t){return e.CloseRuleModel()}}},[o("i",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel"))+" ")])]),o("div",{staticClass:"col-lg-6"},[o("div",{staticClass:"py-2 text-danger"},[e._v(" "+e._s(e.$t("MandatoryString")))])])])])])])])]):e._e(),o("div",{staticClass:"my-popups"},[o("loader",{attrs:{"is-visible":e.isLoading}}),e.isCloneModel?o("div",{staticClass:"modal d-block"},[o("div",{staticClass:"modal-dialog modal-dialog-centered"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[o("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("Alert"))+" ")]),o("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseCloneModel}},[o("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),o("div",{staticClass:"modal-body"},[o("dynamic-form",{ref:"validateClone",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema,mandatorytext:e.$t("MandatoryString")}})],1)])])]):e._e()],1)])])],1),e.rateCode?o("RateCode",{on:{CloseAddWorkCode:e.CloseAddWorkCode}}):e._e()],1)},i=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("label",{staticStyle:{"font-weight":"600",color:"#495057","margin-bottom":"8px"}},[e._v(" Condition Name:"),o("span",{staticStyle:{color:"#dc3545"}},[e._v("*")])])}],l=(o("14d9"),o("5377"),o("9769")),s=o("a985"),r={components:{RateCode:s["a"]},props:{serviceDetailForBillingRule:{type:Array,required:!1},reqFrom:{type:String,required:!1},conditionId:{type:String,required:!1},viewType:{type:String,required:!1},nodeName:{type:String,required:!1},configurationId:{type:String,required:!1},serviceRuleItem:{type:Array,required:!1},billingServiceId:{type:String,required:!1},closeModalType:{type:String,required:!1}},data(){return{openRuleMode:!1,isLoading:!1,isCloneModel:!1,operator:[],FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("ConditionName"),name:"ServiceName",value:"",placeholder:"",validationRules:{required:!0},disabled:!1}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>"+this.$t("Save"),onClick:this.CreateClone},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.CloseCloneModel}],form:{conditionId:0,conditions:[{relation:"",openingBracket:"(",field:"",operator:"",value:"",valueTo:"",daysOfWeek:"",closingBracket:")"}],isLeaf:!1,workCodeId:"",addAdder:!1,addAdderTypeTable:!1,adderType:"",adderRows:[{unit:"",from:0,to:"∞",toInvalid:!1,workCodeBefore:"",repeatAfter:"",workCodeAfter:"",selectedFlag:{value:"N",color:"grey"},showPopup:!1}],selectedFlag:{value:"N",color:"grey"},showPopup:!1,rateToggle:!1,isUpdateRule:!1,dependentOnServices:null,dependentPrice:0},conditionBlocks:[{operator:"AND",joinWithPrevious:"OR",conditions:[{field:"",operator:"",value:"",valueTo:"",daysOfWeek:"",operatorList:[]}]}],serviceName:"",showAdder:!1,conditionName:"",showError:!1,showAdderType:!1,serviceType:"",billingFrequency:"",showRepeatAfter:!1,showWorkCode:!1,showFlag:!1,usageMeasurementList:[],workCodeList:[],meterReadingList:[],companyClientList:[],groupedOptions:{},expandedGroups:{},showIsLeafFlag:!1,showIsLeafWorkCode:!1,configurationId:0,isEditMode:!1,showAddAdderTypeTable:!1,isCheckExtraFeatureUSICBILLING:!1,weekDaysList:[{label:"Sun",value:"1"},{label:"Mon",value:"2"},{label:"Tue",value:"3"},{label:"Wed",value:"4"},{label:"Thu",value:"5"},{label:"Fri",value:"6"},{label:"Sat",value:"7"}],flags:[{value:"R",color:"red"},{value:"Y",color:"gold"},{value:"G",color:"green"},{value:"N",color:"grey"}],isShowServiceDetail:!1,rateCode:!1,isRateCode:!1,getRuleConditions:[],getServiceId:0,serviceDdlList:[]}},mounted(){for(const e in this.groupedOptions)this.$set(this.expandedGroups,e,!0)},computed:{flatGroupedOptions(){const e=[];for(const t in this.groupedOptions)if(e.push({isGroup:!0,groupName:t}),this.expandedGroups[t]){const o=this.groupedOptions[t];o.forEach(o=>{e.push({...o,isGroup:!1,groupName:t})})}return e},fieldLabelMap(){const e={};return Object.values(this.groupedOptions).flat().forEach(t=>{e[t.value]=this.$t(t.label)}),e},fieldSqlConditionMap(){const e={};return Object.values(this.groupedOptions).flat().forEach(t=>{e[t.value]=t.joinFieldName}),e},conditionText(){return this.conditionBlocks.map((e,t)=>{const o=e.conditions.filter(e=>e.field).map((t,o)=>{var a,i,l,s;const r=this.fieldLabelMap[t.field]||t.field||"";if(!t.field)return"[Select Field]";if(!t.operator)return r+" [Select Operator]";let n="";if(t.operatorList&&Array.isArray(t.operatorList)){const e=t.operatorList.find(e=>e.OPERATOR_ID===t.operator);n=e?e.OPERATOR_DISPLAY_NAME:t.operator}else n="[Loading Operators...]";var d="";const c=null===(a=n)||void 0===a?void 0:a.toLowerCase(),u=["is empty","is not empty","is off day","is duplicate"],p=!u.includes(c);if(p)if("select"==t.sqlType&&"not equal to one of multiple possible values"!==c&&"equal to one of multiple possible values"!==c){var v;const e=null===(v=t.valueOptions)||void 0===v?void 0:v.find(e=>e.value===t.value);d=e?e.name:t.value||"[Select Value]"}else if("select"!=t.sqlType||"not equal to one of multiple possible values"!==c&&"equal to one of multiple possible values"!==c)if("bool"===t.sqlType){var f;const e=null===(f=t.valueOptions)||void 0===f?void 0:f.find(e=>e.value===t.value);d=e?e.name:t.value||"[Select Value]"}else if("date"==t.sqlType)t.value&&""!=t.value?("string"===typeof t.value&&(t.value=new Date(t.value)),d=""+this.$d(t.value)||""):d="[Select Date]";else if("time"==t.sqlType)if(t.value&&""!=t.value){const e=/^(0?[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i;if(e.test(t.value))d=t.value;else{var m;const e=new Date(t.value),o=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});t.value=o,d=null!==(m=t.value)&&void 0!==m?m:""}}else d="[Select Time]";else{var h;d=null!==(h=t.value)&&void 0!==h?h:"[Enter Value]"}else if(t.value&&Array.isArray(t.value)&&t.value.length>0){const e=Array.isArray(t.value)?t.value:[t.value],o=e.map(e=>{var o;const a=null===(o=t.valueOptions)||void 0===o?void 0:o.find(t=>t.value===e.value);return a?a.name:e.name||e.value});d=o.join(", ")}else d="[Select Values]";else d="";var g="";if("between"===(null===(i=n)||void 0===i?void 0:i.toLowerCase())||"date range"===(null===(l=n)||void 0===l?void 0:l.toLowerCase()))if("date"==t.sqlType)t.valueTo&&""!=t.valueTo?("string"===typeof t.valueTo&&(t.valueTo=new Date(t.valueTo)),g=" AND "+this.$d(t.valueTo)||!1):g=" AND [Select Date]";else if("time"==t.sqlType)if(t.valueTo&&""!=t.valueTo){const e=/^(0?[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i;if(e.test(t.valueTo)){var C;g=null!==(C=" AND "+t.valueTo)&&void 0!==C?C:""}else{var y;const e=new Date(t.valueTo),o=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});t.valueTo=o,g=null!==(y=" AND "+t.valueTo)&&void 0!==y?y:""}}else g=" AND [Select Time]";else if("date"!=t.sqlType&&"time"!=t.sqlType){var b;if(t.valueTo&&""!=t.valueTo)g=null!==(b=" AND "+t.valueTo)&&void 0!==b?b:"";else g=" AND [Enter Value]"}var _="";if("is week end"===(null===(s=n)||void 0===s?void 0:s.toLowerCase().trim())){const e=(t.daysOfWeek||"").split(",").filter(Boolean);if(e.length>0){const t=e.map(e=>{const t=this.weekDaysList.find(t=>t.value===e);return t?t.label:e});_=` (${t.join(", ")})`}else _=" ([Select Days])"}const w=o>0?` ${e.operator||"AND"} `:"";return`${w}${r} ${n} ${d}${g}${_}`}).join("");return o?`(${o})`:""}).filter(e=>e).map((e,t,o)=>{if(0===t)return e;const a=this.conditionBlocks[t].joinWithPrevious||"OR";return`${"AND"===a?" AND ":" OR "}${e}`}).join("")}},created:async function(){var e=this;this.serviceRuleItem&&this.serviceRuleItem.ruleCondition&&(this.form.selectedFlag=this.serviceRuleItem.ruleCondition.selectedFlag?this.serviceRuleItem.ruleCondition.selectedFlag:{value:"N",color:"grey"},this.form.workCodeId=this.serviceRuleItem.ruleCondition.rateCode?this.serviceRuleItem.ruleCondition.rateCode:""),e.configurationId=this.configurationId,await e.GetRuleListingByServiceId(e.conditionId),await e.GetBillingRuleFieldList(),e.BindWorkCode(),"ViewBillingConditionForService"===e.reqFrom&&(e.isShowServiceDetail=!1,e.isRateCode=!0,setTimeout((function(){e.isEditMode=!0,e.BindRuleConditions(e.conditionId)}),200)),e.toggleGroup(),"isModalAddRule"!==e.closeModalType&&(e.checkSlabCondition(),e.GetAddonMapByServiceId()),e.syncConditionBlocks()},methods:{CloseModal(){"isRuleServiceUpdateFormVisible"===this.closeModalType?this.$parent.isRuleServiceUpdateFormVisible=!1:this.$parent.isModalAddRule=!1},fncApplyRate(){console.log("rateToggle",this.form.rateToggle)},async GetRuleListingByServiceId(e){var t=this,o="serviceId="+(e>0?e:0);l["a"].GetRuleListingByServiceId(o).then(e=>{null!=e.data&&"[]"!=e.data?t.getRuleConditions=JSON.parse(e.data):t.getRuleConditions=[]})},RateCodeModel(){var e=this;e.rateCode=!0},CloseAddWorkCode(){this.rateCode=!1,this.BindWorkCode()},getDayChecked(e,t){return!!e&&e.split(",").includes(t)},toggleDay(e,t){let o=(e.daysOfWeek||"").split(",").filter(Boolean);const a=o.indexOf(t);a>=0?o.splice(a,1):o.push(t),e.daysOfWeek=o.join(",")},isMultiSelectOperator(e){var t;const o=(e.operatorList||[]).find(t=>t.OPERATOR_ID===e.operator);if(!o)return!1;const a=null===(t=o.OPERATOR_DISPLAY_NAME)||void 0===t?void 0:t.toLowerCase();return"equal to one of multiple possible values"===a||"not equal to one of multiple possible values"===a},isValueHidden(e){var t;const o=(e.operatorList||[]).find(t=>t.OPERATOR_ID===e.operator);if(!o)return!1;const a=null===(t=o.OPERATOR_DISPLAY_NAME)||void 0===t?void 0:t.toLowerCase();return"is empty"===a||"is not empty"===a||"is off day"===a||"is duplicate"===a},isShowIsWeekDay(e){var t;const o=(e.operatorList||[]).find(t=>t.OPERATOR_ID===e.operator);if(!o)return!1;const a=null===(t=o.OPERATOR_DISPLAY_NAME)||void 0===t?void 0:t.toLowerCase();return"is week end"===a},isValueToVisible(e){var t;if(!e.operator)return!1;const o=(e.operatorList||[]).find(t=>t.OPERATOR_ID===e.operator);if(!o)return!1;const a=null===(t=o.OPERATOR_DISPLAY_NAME)||void 0===t?void 0:t.toLowerCase();return"between"===a||"date range"===a},checkSlabCondition:async function(){var e=this,t=e.billingServiceId;const o="serviceId="+t,a=await l["a"].GetServiceTypeById(o);if(null!=a.data[0].SERVICE_TYPE_CODE){e.serviceType=a.data[0].SERVICE_TYPE_CODE;var i=a.data[0].METER_TYPE_ID,s=a.data[0].USAGE_MEASUREMENT_ID;e.GetDDLUsageMeasurement(i,s),"Dependent"==e.serviceType&&e.getServicelistForDependency()}},getServicelistForDependency:function(){var e=this,t="id=&moduleName=&type=BILLING_RULE_SERVICE_NAME&search=&refId=";l["a"].GetDDLData(t).then(t=>{if(t.data){var o=t.data;if(null!=o){e.serviceDdlList=t.data.DATA;let o=[];e.serviceDdlList.forEach((function(t){e.form.dependentOnServices.includes(t.value)&&o.push(t)})),e.form.dependentOnServices=[...o]}}})},BindRuleConditions:async function(e){const t=this,o="serviceId="+e,a=await l["a"].GetRuleConditionById(o);if(a&&a.data&&a.data.length>0){t.conditionName=a.data[0].SERVICE_NAME;const e=Object.values(t.groupedOptions).flat();t.form.conditions=await Promise.all(a.data.map(async o=>{const a=e.find(e=>e.value===o.TEMPLATE_ID);let i=[],s=[],r=null!==o.FIRST_VALUE&&void 0!==o.FIRST_VALUE?o.FIRST_VALUE:"",n=null!==o.SECOND_VALUE&&void 0!==o.SECOND_VALUE?o.SECOND_VALUE:"",d=(null===a||void 0===a?void 0:a.sqlType)||"";if(a){var c;const e=await l["a"].GetOperator(`dataType=${a.sqlType}&customField=${a.value}`);i=(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.DATA)||[]}if("select"==a.sqlType&&"lookup"!=a.picklistOptions.toLowerCase()){if(a.picklistOptions&&""!==a.picklistOptions.trim()){var u;const e=a.picklistOptions.split(",").map(e=>({first_value:null,name:e.trim(),value:e.trim().replace(/\s+/g,"-"),second_value:null}));s=e;const t=i.find(e=>e.OPERATOR_ID===o.OPERATOR_ID),l=["equal to one of multiple possible values","not equal to one of multiple possible values"],n=t&&l.includes(null===(u=t.OPERATOR_DISPLAY_NAME)||void 0===u?void 0:u.toLowerCase());if(n){const e=r.split(",").map(e=>e.trim());r=s.filter(t=>e.includes(String(t.value)))}else{const e=s.find(e=>String(e.value)===String(r));r=e&&void 0!==e.value?e.value:r}}}else if("select"===d&&"lookup"==a.picklistOptions.toLowerCase()){var p,v;const e=await l["a"].GetDDLData(`id=&moduleName=&type=${a.fieldCode}&search=`);s=(null===e||void 0===e||null===(p=e.data)||void 0===p?void 0:p.DATA)||[];const t=i.find(e=>e.OPERATOR_ID===o.OPERATOR_ID),n=["equal to one of multiple possible values","not equal to one of multiple possible values"],d=t&&n.includes(null===(v=t.OPERATOR_DISPLAY_NAME)||void 0===v?void 0:v.toLowerCase());if(d){const e=r.split(",").map(e=>e.trim());r=s.filter(t=>e.includes(String(t.value)))}else{const e=s.find(e=>String(e.value)===String(r));r=e&&void 0!==e.value?e.value:r}}else if("bool"===d){var f=t.MakeArray(a.picklistOptions,"radio");f.length>0&&(s=f)}else isNaN(r)||""===r||(r=Number(r));return{relation:o.RELATION_WITH_PARENT||"",openingBracket:o.OPENING_BRACKETS||"",field:o.TEMPLATE_ID||"",operator:o.OPERATOR_ID||"",value:r,valueTo:n,daysOfWeek:o.DaysofTheWeek,closingBracket:o.CLOSING_BRACKETS||"",operatorList:i,valueOptions:s,sqlType:d}})),t.syncConditionBlocks()}},GetAddonMapByServiceId:async function(){var e=this;e.form.isUpdateRule=!0;var t=`serviceId=${e.conditionId}&nodeName=${e.nodeName}&configId=${e.configurationId}`;await l["a"].GetAddonMapByServiceId(t).then((function(t){t.data.length>0&&((t.data[0].IsAddon||t.data[0].IsLeafNode)&&(e.form.rateToggle=!0),e.form.addAdder=t.data[0].IsAddon,e.form.isLeaf=t.data[0].IsLeafNode,e.form.workCodeId=t.data[0].WorkCode,e.form.dependentPrice=t.data[0].AddonAmount,e.form.dependentOnServices=""!=t.data[0].DependentOnService?t.data[0].DependentOnService.split(","):"",e.form.selectedFlag=e.flags.find(e=>e.value===t.data[0].ClientServiceFlag)||{value:"N",color:"grey"},e.form.adderType=t.data[0].AddonType||"",e.onAdderTypeSelected(e.form.adderType),e.form.addAdder?(e.onAdderChecked(),e.showAddAdderTypeTable=!0):e.form.isLeaf&&(e.chkisLeafRule(),e.showAddAdderTypeTable=!1),e.form.adderRows=[],t.data.forEach(t=>{t.ServiceAddonMap.forEach(o=>{e.form.adderRows.push({unit:t.UnitOfMeasure||"",from:void 0!==o.AddonFromValue?o.AddonFromValue:0,to:0!==o.AddonToValue?o.AddonToValue:"∞",toInvalid:!1,workCodeBefore:o.WorkCode||"",repeatAfter:o.RepeatAfter||"",workCodeAfter:o.RepeatWorkCode||"",selectedFlag:e.flags.find(e=>e.value===o.ServiceFlag)||{value:"N",color:"grey"},showPopup:!1,addonId:t.AddonId,addonMapId:o.AddonMapId})})}))}))},CheckFeaturesForCompany:async function(e){var t=this,o="featureCode="+e;await l["a"].CheckExtraFeatures(o).then((function(o){"USICBILLING"==e&&(1==o.data?t.isCheckExtraFeatureUSICBILLING=!0:t.isCheckExtraFeatureUSICBILLING=!1)}))},handleFieldChange:function(e){const t=Object.values(this.groupedOptions).flat(),o=t.find(t=>t.value===e.field);if(!o)return;this.$set(e,"sqlType",o.sqlType);const a="dataType="+o.sqlType+"&customField="+o.value;l["a"].GetOperator(a).then(t=>{const o=t.data;null!=o&&(this.$set(e,"operatorList",o.DATA),e.operator="",e.value="",e.valueTo="")})},handleDropdownValue:function(e){var t=this;const o=Object.values(this.groupedOptions).flat(),a=o.find(t=>t.value===e.field);if(a)if(this.$set(e,"sqlType",a.sqlType),this.$set(e,"valueOptions",[]),this.$set(e,"value",""),this.$set(e,"valueTo",""),"select"==a.sqlType&&"lookup"!=a.picklistOptions.toLowerCase()){if(a.picklistOptions&&""!==a.picklistOptions.trim()){const t=a.picklistOptions.split(",").map(e=>({first_value:null,name:e.trim(),value:e.trim().replace(/\s+/g,"-"),second_value:null}));this.$set(e,"valueOptions",t)}}else if("select"==a.sqlType&&"lookup"==a.picklistOptions.toLowerCase()){var i=`id=&moduleName=&type=${a.fieldCode}&search=`;l["a"].GetDDLData(i).then(t=>{if(t.data){var o=t.data;null!=o&&this.$set(e,"valueOptions",t.data.DATA)}})}else if("bool"==a.sqlType){var s=t.MakeArray(a.picklistOptions,"radio");s.length>0&&this.$set(e,"valueOptions",s)}},isLeafTogglePopup(){this.form.showPopup=!this.form.showPopup},isLeafSelectFlag(e){this.form.selectedFlag=e,this.form.showPopup=!1},isAdderTogglePopup(e){e.showPopup=!e.showPopup},isAdderSelectFlag(e,t){e.selectedFlag=t,e.showPopup=!1},toggleGroup(e){const t=e||"Client";this.$set(this.expandedGroups,t,!this.expandedGroups[t])},GetBillingRuleFieldList:async function(){await l["a"].GetBillingRuleFieldList().then(e=>{if("Success"==e.data.status&&null!=e.data.result.AVAILABLE_FIELDS){var t;const o=(null===(t=e.data.result.AVAILABLE_FIELDS)||void 0===t?void 0:t[0])||[],a={};o.forEach(e=>{const t=e.SubModule;Array.isArray(null===e||void 0===e?void 0:e.CustomFields)&&e.CustomFields.length>0&&(a[t]=e.CustomFields.map(e=>{var t;return{value:(null===e||void 0===e?void 0:e.CustomFieldId)||"",columnName:(null===e||void 0===e?void 0:e.FieldName)||"",label:(null===e||void 0===e?void 0:e.DisplayName)||"",tableName:(null===e||void 0===e?void 0:e.TableName)||"",sqlType:(null===e||void 0===e||null===(t=e.dttype)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.DataTypeCode)||"",picklistOptions:(null===e||void 0===e?void 0:e.picklist_options)||"",dtCode:(null===e||void 0===e?void 0:e.dt_code)||"",dropdownType:(null===e||void 0===e?void 0:e.dropdown_type)||"",fieldCode:(null===e||void 0===e?void 0:e.field_code)||"",joinFieldName:(null===e||void 0===e?void 0:e.JoinFieldName)||""}}))}),Object.keys(a).length>0&&(this.groupedOptions=a)}})},GetDDLUsageMeasurement:function(e,t){var o=this,a="id=&moduleName=&type=UTILITY_UNIT_OF_MEASUREMENTS&search=&refId="+e;l["a"].GetDDLData(a).then(e=>{if(e.data){var a=e.data;null!=a&&(o.usageMeasurementList=e.data.DATA,o.form.adderRows[0].unit=t)}})},BindWorkCode:function(){var e=this,t=e.configurationId,o="id=&moduleName=&type=WORK_CODE_BY_PLAN_ID&search=&refId="+t;l["a"].GetDDLData(o).then(t=>{if(t.data){var o=t.data;null!=o&&(e.workCodeList=t.data.DATA)}})},onToValueChange(e,t){if("∞"===e)this.form.adderRows[t].to=1/0;else if(""===e.trim())this.form.adderRows[t].to="";else{const o=Number(e);this.form.adderRows[t].to=isNaN(o)?"":o}},removeConditionRow:function(e){this.form.conditions.length>1&&this.form.conditions.splice(e,1)},removeAdderRow:function(e){this.form.adderRows.length>1&&this.form.adderRows.splice(e,1)},addConditionRow(){this.form.conditions.push({relation:"",openingBracket:"(",field:"",operator:"",value:"",valueTo:"",daysOfWeek:"",closingBracket:")"})},addAdderRow(){const e=this.form.adderRows[this.form.adderRows.length-1];e.from>=0&&"∞"==e.to?e.toInvalid=!0:(e.toInvalid=!1,this.form.adderRows.push({unit:"",from:Number(e.to)+1,to:"∞",workCodeBefore:"",toInvalid:!1,repeatAfter:"",workCodeAfter:"",selectedFlag:{value:"N",color:"grey"},showPopup:!1}))},Close:function(){var e=this;e.$parent.isRuleServiceUpdateFormVisible=!1},chkisLeafRule(){this.showAdder=this.form.isLeaf,this.showIsLeafFlag=this.showAdder,this.showIsLeafWorkCode=this.showAdder,this.form.addAdder=!1,this.showAdderType=!1,this.showAddAdderTypeTable=!1,this.form.isLeaf||(this.showAdderType=!1,this.form.adderType=!1,this.showAddAdderTypeTable=!1)},onAdderChecked(){this.showAdderType=this.form.addAdder,this.showIsLeafFlag=!1,this.showIsLeafWorkCode=!1,this.form.isLeaf=!1,this.form.addAdder||(this.form.adderType=!1,this.showAddAdderTypeTable=!1)},onAdderTypeSelected(e){"T"==e?(this.showRepeatAfter=!1,this.showWorkCode=!1,this.showFlag=!0):"P"==e?(this.showRepeatAfter=!0,this.showWorkCode=!1,this.showFlag=!1):"M"==e?(this.showRepeatAfter=!1,this.showWorkCode=!1,this.showFlag=!0):"C"==e&&(this.showRepeatAfter=!1,this.showWorkCode=!1,this.showFlag=!1),this.form.adderType&&(this.showAddAdderTypeTable=!0)},formatDate(e){if(!e)return null;const t=new Date(e),o=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${o}-${a}-${i}`},databaseConditionText(){return this.form.conditions.map((e,t)=>{const o=t>0?` ${e.relation||"AND"} `:"",a=e.openingBracket||"",i=e.closingBracket||"",l=this.fieldSqlConditionMap[e.field]||e.field||"";let s="",r="";if(e.operatorList&&Array.isArray(e.operatorList)){const t=e.operatorList.find(t=>t.OPERATOR_ID===e.operator);s=t?t.OPERATOR_SQL_NAME||t.OPERATOR_EXPRESSION:e.operator,r=t&&t.OPERATOR_DISPLAY_NAME||""}else s=e.operator,r=e.operatorDisplay||"";s=(s||"").toLowerCase();const n=(r||"").trim().toLowerCase();if("not equal to one of multiple possible values"===n||"equal to one of multiple possible values"===n){const t=Array.isArray(e.value)?e.value:[e.value],r=t.map(t=>{var o;const a="object"===typeof t&&null!==t?t.value:t,i=null===(o=e.valueOptions)||void 0===o?void 0:o.find(e=>e.value===a),l=i?i.value:a;return isNaN(l)?`'${l}'`:l}),n=r.join(", ");return`${o}${a}${l} ${s.toUpperCase()} (${n})${i}`}if("is week end"===s||"is working day"===s){const t=(e.daysOfWeek||"").split(",").filter(Boolean).join(","),s=`DATEPART(DW, ${l}) IN (${t})`;return`${o}${a}${s}${i}`}if("is lowest"===s)return`${o}${a}${l} IS LOWEST${i}`;if("is highest"===s)return`${o}${a}${l} IS HIGHEST${i}`;if("is not lowest"===s)return`${o}${a}${l} IS NOT LOWEST${i}`;if("is not highest"===s)return`${o}${a}${l} IS NOT HIGHEST${i}`;if(["minutesdiff","hoursdiff","daydiff","monthdiff","yeardiff"].includes(s)){const t={minutesdiff:"minute",hoursdiff:"hour",daydiff:"day",monthdiff:"month",yeardiff:"year"},r=t[s],n=this.fieldSqlConditionMap[e.additionalField]||e.additionalField,d=e.additionalOperator||"=";return`${o}${a}DATEDIFF(${r}, ${l}, ${n}) ${d} ${e.value}${i}`}if("has with"===s){const t=this.fieldSqlConditionMap[e.hasWithField]||e.hasWithField,s=e.hasWithOperator||"=";return`${o}${a}${l} HAS WITH ${t} ${s} '${e.value}'${i}`}if(("between"===s||"daterange"===s)&&e.valueTo){if("time"===e.sqlType||"datetime"===e.sqlType){const t=e.value?`'${e.value}'`:"''",s=e.valueTo?`'${e.valueTo}'`:"''";return`${o}${a}(CONVERT(time, ${l}) >= ${t} AND CONVERT(time, ${l}) <= ${s})${i}`}if("date"===e.sqlType){const t=e.value instanceof Date?e.value:new Date(e.value),s=e.valueTo instanceof Date?e.valueTo:new Date(e.valueTo),r=this.formatDate(t),n=this.formatDate(s);return`${o}${a}${l} BETWEEN '${r}' AND '${n}'${i}`}return`${o}${a}${l} BETWEEN ${e.value} AND ${e.valueTo}${i}`}let d="";if("nvarchar"===e.sqlType||"string"===e.sqlType)if(s.includes("starts with"))s="LIKE",d=`'${e.value}%'`;else if(s.includes("ends with"))s="LIKE",d=`'%${e.value}'`;else if(s.includes("like"))s="LIKE",d=`'%${e.value}%'`;else if(s.includes("in")){s="IN";const t=Array.isArray(e.value)?e.value:(e.value||"").split(",");d=`(${t.map(e=>`'${e.trim()}'`).join(",")})`}else d=`'${e.value}'`;else if("date"===e.sqlType&&e.value){const t=e.value instanceof Date?e.value:new Date(e.value);d=`'${this.formatDate(t)}'`}else"bool"===e.sqlType?d=e.value?1:0:"equal to"===n&&"select"===e.sqlType?"string"===typeof e.value&&(d=`'${e.value}'`||""):d=e.value||"";return`${o}${a}${l} ${s.toUpperCase()} ${d}${i}`}).join("")},CloneService(){var e=this;e.isCloneModel=!0},CloseCloneModel(){this.isCloneModel=!1},CloseRuleModel(){this.openRuleMode=!1},RuleModel(){this.syncFormConditions(),Number(this.conditionId)>0&&Array.isArray(this.getRuleConditions)&&this.getRuleConditions.length>0&&"fromBillingService"===this.reqFrom?this.openRuleMode=!0:this.saveAddRule()},async saveAddRule(){var e=this;if(this.showError=!0,!this.conditionName)return;0!=e.conditionId&&(this.form.conditionId=e.conditionId),1==this.form.rateToggle&&(this.form.isLeaf=!0);const t=this.conditionText,o=this.databaseConditionText();Array.isArray(this.form.conditions)&&this.form.conditions.forEach(e=>{if("date"===e.sqlType&&(e.value&&(e.value=this.formatDate(e.value)),e.valueTo&&(e.valueTo=this.formatDate(e.valueTo))),null!==e&&void 0!==e&&e.operator&&Array.isArray(e.value)&&e.value.length>0){var t,o;const a=e.operator,i=e.operatorList.find(e=>e.OPERATOR_ID===a);!i||"equal to one of multiple possible values"!==(null===(t=i.OPERATOR_DISPLAY_NAME)||void 0===t?void 0:t.toLowerCase())&&"Not Equal to one of multiple possible values"!==(null===(o=i.OPERATOR_DISPLAY_NAME)||void 0===o?void 0:o.toLowerCase())||(e.value=e.value.map(e=>e.value).join(","))}});const a=JSON.parse(JSON.stringify(this.form));a.adderRows.forEach(e=>{"∞"!==e.to&&e.to!==1/0||(e.to=null)});const i=JSON.stringify(a);var s={objData:i,ruleCondition:t,conditionName:this.conditionName,configuration_id:e.configurationId,sqlcondition:o};await l["a"].SaveAddRule(s).then(t=>{null!=t.data&&("Success"==t.data.Status&&"1"==t.data.Result?(e.Close(),"serviceRuleCondition"==e.viewType&&(e.ShowAlert(e.$t("AddedSuccess",[e.$t("BillingRule")]),"Success",!0,e.$t("Alert")),e.$parent.getConditionRecords()),"fromBillingService"!=e.reqFrom&&"addBillingService"!=e.reqFrom||(e.ShowAlert(e.$t("AddedSuccess",[e.$t("BillingCondition")]),"Success",!0,e.$t("Alert")),e.$parent.FetchData()),e.isLoading=!1,this.$emit("rule-saved",i)):"Success"==t.data.Status&&"3"==t.data.Result?(e.Close(),"fromBillingService"==e.reqFrom||"addBillingService"==e.reqFrom?(e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("BillingCondition")]),"Success",!0,e.$t("Alert")),e.$parent.FetchData()):e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("BillingRule")]),"Success",!0,e.$t("Alert")),e.isLoading=!1,this.$emit("rule-saved",i)):"2"==t.data.Result?"fromBillingService"==e.reqFrom||"addBillingService"==e.reqFrom?this.ShowAlert(this.$t("AlreadyExists",[this.$t("BillingCondition")]),"failure",!0,this.$t("Alert")):this.ShowAlert(this.$t("AlreadyExists",[this.$t("BillingRule")]),"failure",!0,this.$t("Alert")):"fromBillingService"==e.reqFrom||"addBillingService"==e.reqFrom?(e.ShowAlert(e.$t("ErrorWhileSaving",[e.$t("BillingCondition")]),"danger",!0,e.$t("Alert")),e.isLoading=!1):(e.ShowAlert(e.$t("ErrorWhileSaving",[e.$t("BillingRule")]),"danger",!0,e.$t("Alert")),e.isLoading=!1))})},addFieldToCondition(e){if(!e.isGroup&&this.conditionBlocks.length>0&&this.conditionBlocks[0].conditions.length>0){const t=this.conditionBlocks[0].conditions[0];if(t.field){this.addCondition(0);const t=this.conditionBlocks[0].conditions[this.conditionBlocks[0].conditions.length-1];t.field=e.value,t.sqlType=e.sqlType,this.handleFieldChange(t)}else t.field=e.value,t.sqlType=e.sqlType,this.handleFieldChange(t)}},toggleBlockOperator(e){const t=this.conditionBlocks[e];t.operator="AND"===t.operator?"OR":"AND"},toggleJoinOperator(e){const t=this.conditionBlocks[e];t&&(t.joinWithPrevious="AND"===t.joinWithPrevious?"OR":"AND")},removeBlock(e){this.conditionBlocks.length>1&&this.conditionBlocks.splice(e,1)},addCondition(e){const t=this.conditionBlocks[e];t.conditions.push({field:"",operator:"",value:"",valueTo:"",daysOfWeek:"",operatorList:[],valueOptions:[],sqlType:""})},removeCondition(e,t){const o=this.conditionBlocks[e];o.conditions.length>1&&o.conditions.splice(t,1)},addBlock(){this.conditionBlocks.push({operator:"AND",joinWithPrevious:"OR",conditions:[{field:"",operator:"",value:"",operatorList:[]}]})},syncConditionBlocks(){if(!(this.form.conditions&&this.form.conditions.length>0))return;const e=[];let t=null,o="";const a=()=>{if(t&&t.conditions.length>0){const o=(t._relations||[]).filter(e=>e&&""!==e.trim()).map(e=>e.toUpperCase());o.length>0?t.operator=o[0]:t.operator=t.operator||"AND",delete t._relations,e.push(t)}};this.form.conditions.forEach((i,l)=>{const s=(i.openingBracket||"").toString(),r=(i.closingBracket||"").toString(),n=(i.relation||"").toString().toUpperCase(),d=s.includes("("),c=r.includes(")");!d&&t||(a(),t={operator:"AND",joinWithPrevious:e.length>0?o||"OR":"",conditions:[],_relations:[]},o=n||o),t.conditions.push({field:i.field||"",operator:i.operator||"",value:i.value,valueTo:i.valueTo,daysOfWeek:i.daysOfWeek||"",operatorList:i.operatorList||[],valueOptions:i.valueOptions||[],sqlType:i.sqlType||""}),t.conditions.length>1&&t._relations.push(n),c&&(t.joinWithPrevious=e.length>0?o||"OR":"",o="",a(),t=null)}),a(),0===e.length?this.conditionBlocks=[{operator:"AND",joinWithPrevious:"",conditions:this.form.conditions.map(e=>({field:e.field||"",operator:e.operator||"",value:e.value,valueTo:e.valueTo,daysOfWeek:e.daysOfWeek||"",operatorList:e.operatorList||[],valueOptions:e.valueOptions||[],sqlType:e.sqlType||""}))}]:this.conditionBlocks=e},CreateClone:function(){var e=this,t=e.$refs.validateClone.getPropertyValue("ServiceName","value"),o=e.conditionId,a=`serviceId=${o}&serviceName=${t}`;l["a"].CloneBillingService(a).then(t=>{"Success"==t.data.status?(this.ShowAlert(this.$t("AddedSuccess",[this.$t("Service")]),"Success",!0,this.$t("Alert")),e.$refs.validateClone.updateProperty("ServiceName","value",""),e.CloseCloneModel(),e.CloseRuleModel()):this.ShowAlert(this.$t("ErrorWhileSaving",[this.$t("Service")]),"danger",!0,this.$t("Alert"))})},syncFormConditions(){this.form.conditions=[],this.conditionBlocks.forEach((e,t)=>{e.conditions.forEach((o,a)=>{o.field&&o.operator&&""!==o.value&&null!==o.value&&void 0!==o.value&&this.form.conditions.push({relation:a>0?e.operator:t>0?e.joinWithPrevious||"OR":"",openingBracket:0===t&&0===a?"(":"",field:o.field,operator:o.operator,value:o.value,valueTo:o.valueTo||"",daysOfWeek:o.daysOfWeek||"",closingBracket:a===e.conditions.length-1?")":"",operatorList:o.operatorList||[],valueOptions:o.valueOptions||[],sqlType:o.sqlType||""})})})}}},n=r,d=(o("2ce0"),o("0c7c")),c=Object(d["a"])(n,a,i,!1,null,"843e3e30",null);t["a"]=c.exports},4206:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"chartContainer",class:e.chartClass,attrs:{id:e.chartId}})},i=[],l=(o("8560"),{name:"RBillingFlowChart",props:{data:{type:Array,required:!0},chartId:{type:String,default:"BillingFlowChart"},chartClass:{type:String,default:"RBillingflowChart"}},data(){return{globalServiceText:1}},mounted(){this.buildFlowChart()},methods:{buildFlowChart(){const e=this.$refs.chartContainer;e.innerHTML="";const t=document.createElement("ul");t.className="fc_parentchild";const o=document.createElement("li");o.className="arrowdown";const a=this.buildNodeStructure(null,0);o.appendChild(a),t.appendChild(o);const i=[...this.data].sort(this.naturalSort);i.forEach(e=>{const o=document.createElement("li"),a=document.createElement("ul");e.nodeName&&-1!==e.nodeName.indexOf(".")?a.className="fc_subchild":o.className="arrowdown";const i=this.buildNodeStructure(e,e.displayOrder||0);if(o.appendChild(i),e.isLeafNode&&!e.isAddOn||e.isAddOn){const t=this.buildFlowChartRightNew(e);o.appendChild(t)}t.appendChild(o)}),e.appendChild(t),this.adjustWidth(e)},naturalSort(e,t){const o=(e.nodeName||"").split(".").map(Number),a=(t.nodeName||"").split(".").map(Number),i=Math.max(o.length,a.length);for(let l=0;l<i;l++){const e=o[l]||0,t=a[l]||0;if(e!==t)return e-t}return 0},buildNodeStructure(e,t){const o=document.createElement("p");o.className=t<=0?"shape_oval":"shape_polygan";const a=document.createElement("span");var i;if(a.style.fontWeight="700",a.style.marginTop=t<=0?"25px":"0px",!e||!e.serviceName)return a.textContent=(null===(i=this.$t)||void 0===i?void 0:i.call(this,"Start"))||"Start",o.appendChild(a),o;let l=e.serviceName||"";var s,r;l.includes("~GLOBAL~")?l=l.replace(/~NODENAME~/g,(null===(s=this.$t)||void 0===s?void 0:s.call(this,"GlobalService"))||"GlobalService").replace(/~GLOBAL~/g,String(this.globalServiceText++)):l=l.replace(/~NODENAME~/g,(null===(r=this.$t)||void 0===r?void 0:r.call(this,"NodeName"))||"NodeName");const n=l.split("AND");return n.forEach((e,t)=>{if(t>0){const e=document.createElement("span");e.textContent="And",e.style.fontWeight=400,o.appendChild(e)}const a=document.createElement("span");a.textContent=e.trim(),a.title=e.trim(),a.style.fontWeight="bold",o.appendChild(a)}),o},buildFlowChartRightNew(e){const t=document.createElement("ul");t.className="fc_subchild";const o=(t,o="&nbsp;",a="")=>{const i=document.createElement("li");i.className="arrowright";const l=document.createElement("p");null==e.addOnType||""==e.addOnType?l.className="shape_oval":l.className="shape_oval shape_ovalnew",a&&l.classList.add(a),""!==a&&null==t&&(t="Flag");const s=document.createElement("span");s.className="textbetweenline",s.innerHTML=o;const r=document.createElement("span");return r.style.marginTop="25px",r.style.fontWeight="bold",r.innerHTML=t,l.appendChild(s),null!=e.addOnType&&""!=e.addOnType||l.appendChild(r),i.appendChild(l),i},a=e=>{if(e.isLimit){const t=e.limit||0,o=e.dayLimit||0;if(t>0&&o>0)return`Limit: ${t}<br/>Days: ${o}`;if(t>0)return"Limit: "+t;if(o>0)return"Days: "+o}return"&nbsp;"},i=this.getFlagClass(e.clientServiceFlag);if("C"===e.addOnType&&e.isLeafNode&&e.isAddOn){const l=o(e.addonWorkCode||e.workCodeName,a(e),i);t.appendChild(l)}if("C"!==e.addOnType){let l=null,s=null;if(null!=e.addonDetail){l=document.createElement("table"),l.className="slab-table";const t=document.createElement("thead"),o=document.createElement("tr");["From","To","Rate Code"].forEach(e=>{const t=document.createElement("th");t.textContent=e,o.appendChild(t)}),t.appendChild(o),l.appendChild(t),s=document.createElement("tbody"),l.appendChild(s);let a=[];try{a=JSON.parse(e.addonDetail)}catch(r){console.error("Invalid addonDetail JSON",r),a=[]}a.forEach(e=>{const t=e&&e.hasOwnProperty("addon_to_value")&&null!==e.addon_to_value?e.addon_to_value:"∞",o=e.work_code,a=document.createElement("tr"),i=document.createElement("td");i.textContent=e.addon_from_value,a.appendChild(i);const l=document.createElement("td");l.textContent=t,a.appendChild(l);const r=document.createElement("td"),n=document.createElement("span");n.className="slab-label",n.textContent=o,r.appendChild(n),a.appendChild(r),s.appendChild(a)})}const n=o(e.addonWorkCode||e.workCodeName,a(e),i);l&&n.querySelector("p").appendChild(l),t.appendChild(n)}const l=e.isAddOn?e.addonWorkCodeId:e.workCodeId,s=(e.billingLimitWorkCode||[]).find(e=>e.workCodeId===l);return s&&this.buildFlowChartChild(t,s,e.billingLimitWorkCode,l),t},buildFlowChartChild(e,t,o,a){if(!t)return;const i=document.createElement("p");i.className="shape_oval";const l=document.createElement("span");l.className="textbetweenline",t.limit>0&&t.daysLimit>0?l.innerHTML=`Limit: ${t.limit}<br/>Days: ${t.daysLimit}`:t.limit>0?l.innerHTML="Limit: "+t.limit:t.daysLimit>0?l.innerHTML="Days: "+t.daysLimit:l.innerHTML="&nbsp;";const s=document.createElement("span");s.style.marginTop="25px",s.style.fontWeight="bold",s.textContent=t.alternateWorkCode,i.appendChild(l),i.appendChild(s);const r=document.createElement("li");r.className="arrowright",r.appendChild(i),e.appendChild(r);const n=o.find(e=>e.workCodeId===t.alternateWorkCodeId);n&&n.workCodeId!==a&&this.buildFlowChartChild(e,n,o,t.alternateWorkCodeId)},getFlagClass(e){switch(String(e||"").trim()){case"R":return"oval_red";case"G":return"oval_green";case"Y":return"oval_yellow";default:return""}},adjustWidth(e){const t=Array.from(e.querySelectorAll("ul.fc_subchild")).map(e=>e.querySelectorAll("li.arrowright").length),o=Math.max(...t,4);e.style.width=Math.max(window.innerWidth-100,350*o)+"px"}}}),s=l,r=(o("45a0"),o("0c7c")),n=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=n.exports},"45a0":function(e,t,o){"use strict";o("c016")},4631:function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,".flag-selector .popup[data-v-843e3e30]{position:absolute;top:28px;left:0;background:#fff;border:1px solid #d1d5db;border-radius:6px;padding:12px 14px;z-index:1000;min-width:200px;box-shadow:0 6px 14px rgba(0,0,0,.1)}.flag-selector .popup-header[data-v-843e3e30]{display:flex;justify-content:space-between;align-items:center;font-weight:800;color:#1f2937;margin-bottom:10px;font-size:18px}.flag-selector .close-btn[data-v-843e3e30]{border:none;background:none;cursor:pointer;color:#6b7280;font-size:18px;line-height:1}.flag-selector .flags[data-v-843e3e30]{display:flex;gap:16px;align-items:center}.flag-selector .flag-option[data-v-843e3e30]{cursor:pointer;font-size:24px;padding:0;line-height:1}",""]),e.exports=t},5377:function(e,t,o){"use strict";var a=o("da84"),i=o("83ab"),l=o("edd0"),s=o("ad6d"),r=o("d039"),n=a.RegExp,d=n.prototype,c=i&&r((function(){var e=!0;try{n(".","d")}catch(c){e=!1}var t={},o="",a=e?"dgimsy":"gimsy",i=function(e,a){Object.defineProperty(t,e,{get:function(){return o+=a,!0}})},l={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in e&&(l.hasIndices="d"),l)i(s,l[s]);var r=Object.getOwnPropertyDescriptor(d,"flags").get.call(t);return r!==a||o!==a}));c&&l(d,"flags",{configurable:!0,get:s})},5616:function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,'.outer{float:left;width:100%;box-sizing:border-box;background:#fff;padding:50px}.outer .container{float:left;text-align:center;list-style-type:none;position:relative;padding:20px 5px 0 5px;transition:all .5s;-webkit-transition:all .5s;-moz-transition:all .5s}.outer .container:after,.outer .container:before{content:"";position:absolute;top:0;right:50%;border-top:1px solid #000;width:50%;height:20px}.outer .container:after{right:auto;left:50%;border-left:1px solid #000}.outer .container:only-child:after,.outer .container:only-child:before{display:none}.outer .container:only-child{padding-top:0}.outer .container:first-child:before,.outer .container:last-child:after{border:0 none}.outer .container:last-child:before{border-right:1px solid #000}.outer .maintree .maintree:before{content:"";position:absolute;top:0;left:50%;border-left:1px solid #000;width:0;height:32px}*,.fc_parentchild{margin:0;padding:0}.fc_parentchild{width:100%;float:left;height:auto}.fc_parentchild li{width:auto;float:left;height:auto;display:flex;clear:both;margin-bottom:60px;position:relative;align-content:center;align-items:center}.fc_parentchild li p.shape_oval{background-color:#d9c8b8;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/oval_default.png);border:none;border-radius:36px/62px;height:70px;list-style:outside none none;margin:0 31px 0 75px;width:120px;border-radius:0}.fc_parentchild li p.shape_oval,.fc_parentchild li p.shape_polygan{color:rgba(0,0,0,.8);background-repeat:no-repeat;background-size:100% 100%;background-position:50%;position:relative;text-align:center;vertical-align:middle;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block}.fc_parentchild li p.shape_polygan{background-color:#badefc;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/fc_diamond.png);border:none;z-index:100;border-radius:0;min-height:110px;list-style:none;margin:0 0 0 10px;width:250px;padding:20px 50px}.fc_parentchild li:last-child p:before{border:none!important}.fc_parentchild li p{float:left}.fc_parentchild li p span{display:block;line-height:20px;overflow:hidden;text-overflow:ellipsis;width:100%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;font-size:12px}.fc_subchild li p img{left:50%;margin-left:-12px;position:absolute;top:-35px}.fc_subchild li p.hoctagon{background-color:#c7d6d5;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/hoctagen.png);background-repeat:no-repeat;background-position:top;color:#000;height:76px;margin:0;padding-top:24px;position:relative;width:188px;background-size:100% auto}.fc_subchild li p.hoctagon span{display:block;padding:0 10px;text-align:center}.fc_subchild li p.shape_oval span{display:inline-block;padding:0 10px;text-align:center}.textbetweenline{color:#2a2a2a;font-size:12px!important;left:-50px;line-height:14px!important;margin:0;padding:0!important;position:absolute;text-align:left!important;top:0;width:auto;font-weight:400}.fc_parentchild li.arrowdown:last-child:after{border-left:6px solid transparent}.fc_subchild li.arrowright.Dparent:after{top:40%}.imgdownarrow{left:129px;position:absolute;top:110px;z-index:100}.fc_parentchild li.arrowdown{margin-bottom:0;padding-bottom:60px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/FlowChart_DownArrow.png);background-repeat:no-repeat;background-position:129px bottom}.fc_parentchild li.arrowdown:last-child{background:none}.fc_subchild{float:left;margin-left:0}.fc_subchild li{clear:none;float:left;margin:19px 0;padding-left:60px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/FlowChart_RightArrow.png);background-position:0}.fc_subchild li,.fc_subchild li p.shape_oval{display:inline-block;background-repeat:no-repeat}.fc_subchild li p.shape_oval{background-color:#ffe0a4;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/oval_default.png);background-size:100% 100%;background-position:50%;border:none;border-radius:36px/62px;height:70px;position:relative;list-style:outside none none;margin:0;text-align:center;vertical-align:middle;width:auto;min-width:120px;border-radius:0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.fc_subchild li p.shape_oval.oval_red{background-color:#d02828}.fc_subchild li p.shape_oval.oval_yellow{background-color:#ffc107}.fc_subchild li p.shape_oval.oval_green{background-color:#28a745}.buttonsdlt{display:initial;float:right;padding-right:5px}a.nodetablecollapse i{padding:0 2px!important}',""]),e.exports=t},8560:function(e,t,o){var a=o("5616");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=o("499e").default;i("13a2cced",a,!0,{sourceMap:!1,shadowMode:!1})},a985:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("div",{staticClass:"my-popups"},[o("loader",{attrs:{"is-visible":e.isLoading}}),e.isEditWorkCode?o("div",{staticClass:"modal d-block"},[o("div",{staticClass:"modal-dialog modal-dialog-centered"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[o("h5",{staticClass:"modal-title"},[e._v(" "+e._s("Update"===e.refCode?e.$t("updateratecode"):e.$t("addratecode"))+" ")]),o("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseAddWorkCode}},[o("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),o("div",{staticClass:"modal-body"},[o("dynamic-form",{ref:"validatePlan",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema,mandatorytext:e.$t("MandatoryString")}})],1)])])]):e._e()],1)])},i=[],l=(o("14d9"),o("9769")),s={props:{callbackfunction:{type:Function,required:!1},refCode:{type:String,required:!1},editDetail:{type:Object,required:!1}},data(){return{isLoading:!1,isEditWorkCode:!0,Id:0,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("RateCode"),name:"RateCode",value:"",placeholder:this.$t("RateCode"),validationRules:{required:!0},disabled:!1},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:this.$t("Status"),config:{options:[{value:"1001",name:this.$t("Active")},{value:"1002",name:this.$t("Inactive")}]},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Category"),name:"Category",value:"",placeholder:this.$t("Select"),config:{options:[]},validationRules:{required:!0}},{astype:"NumericField",label:this.$t("DefaultRate"),name:"DefaultRate",value:"",placeholder:this.$t("DefaultRate"),validationRules:{required:!1},disabled:!1}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:this.$t("DESCRIPTION"),validationRules:{required:!0,max:6e3}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>"+this.$t("Save"),onClick:this.SaveData},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.CloseAddWorkCode}]}},mounted(){this.GetCategoryList(),this.editDetail&&Object.keys(this.editDetail).length>0&&"Update"==this.refCode&&this.BindEditDetail(this.editDetail)},methods:{BindEditDetail(e){var t=this;t.Id=e.WORK_CODE_ID,t.$refs.validatePlan.updateProperty("RateCode","value",e.WORK_CODE),t.$refs.validatePlan.updateProperty("Status","value",e.STATUS_ID),t.$refs.validatePlan.updateProperty("Description","value",e.WORK_DESCRIPTION),t.$refs.validatePlan.updateProperty("Category","value",e.WORK_CODE_CATEGORY_ID),t.$refs.validatePlan.updateProperty("DefaultRate","value",e.DEFAULT_RATE)},GetCategoryList(){this.isLoading=!0;const e=this,t=`companyId=${e.GetUserInfo.CompanyId}&loggedinUserID=${e.GetUserInfo.ID}&pageSize=10&pageNum=1&sortBy=&sortExp=&search=`;l["a"].GetWorkCodeCategoryList(t).then(t=>{if(t.data){const o=JSON.parse(t.data);o.forEach(t=>{e.FormSchema[1].Data[0].config.options.push({name:t.WORK_CODE_CATEGORY,value:t.WORK_CODE_CATEGORY_ID}),e.$refs.validatePlan.UpdateKeyValue()})}}).catch(e=>{console.error("Error fetching category list:",e)}).finally(()=>{this.isLoading=!1})},async SaveData(){this.isLoading=!0;try{const t=await this.$refs.validatePlan.validateForm.validate();if(!t)return void(this.isLoading=!1);const o=this.$refs.validatePlan.getPropertyValue("RateCode","value"),a=this.$refs.validatePlan.getPropertyValue("Status","value"),i=this.$refs.validatePlan.getPropertyValue("Description","value"),s=this.$refs.validatePlan.getPropertyValue("Category","value"),r=this.$refs.validatePlan.getPropertyValue("DefaultRate","value"),n={id:this.Id,name:o,description:i,status:a,categoryId:s,DefaultRate:r},d=JSON.stringify(n);var e="name="+o;if(!this.Id){const t=await l["a"].ISExistWorkCode(e);if("Exist"===t.data.message)return void this.ShowAlert(this.$t("AlreadyExists",[this.$t("RateCode")]),"failure",!0,this.$t("Alert"))}const c=await l["a"].SaveUpdateWork(d);1==c.data&&this.ShowAlert(this.$t("AddedSuccess",[this.$t("RateCode")]),"Success",!0,this.$t("Alert")),2==c.data&&this.ShowAlert(this.$t("UpdatedSuccess",[this.$t("RateCode")]),"Success",!0,this.$t("Alert")),this.callbackfunction&&this.callbackfunction(),this.CloseAddWorkCode()}catch(t){console.error("Error saving data:",t)}finally{this.isLoading=!1}},CloseAddWorkCode(){this.editDetail=null,this.$emit("CloseAddWorkCode")}}},r=s,n=o("0c7c"),d=Object(n["a"])(r,a,i,!1,null,null,null);t["a"]=d.exports},ad6d:function(e,t,o){"use strict";var a=o("825a");e.exports=function(){var e=a(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},c016:function(e,t,o){var a=o("2b19");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=o("499e").default;i("a2889e42",a,!0,{sourceMap:!1,shadowMode:!1})},cdee:function(e,t,o){var a=o("4631");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=o("499e").default;i("33245ed6",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-1e1d9f80.js.map