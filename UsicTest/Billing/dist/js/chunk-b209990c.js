(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b209990c"],{"371d":function(e,t,i){var s=i("91a3");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("499e").default;a("beaf3a60",s,!0,{sourceMap:!1,shadowMode:!1})},7206:function(e,t,i){"use strict";i("371d")},"750f":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return l}));i("88a7"),i("271a"),i("5494");var s=i("c427");const a={getClientList(e){return s["a"].instance.get("/lookups/clients-group-by-account?"+e)},getUtilityList(e){return s["a"].instance.get("/lookups/talygen-utilities-by-client?"+e)},getFlagList(){return s["a"].instance.get("/lookups/GetFlagList")},async GetStateList(e){return await s["a"].instance.get("/lookups/state-list-by-country-code?"+e)},async GetFlagType(e){return await s["a"].instance.get("/lookups/flag-type")},async GetCostCenters(e){return await s["a"].instance.get("/lookups/cost-centers")},async GetFlagRecords(e){return await s["a"].instance.get("/GetFlagRecords?"+e)},SaveColumnItems(e){return s["a"].instance.post("/lookups/SaveColumnItems",e)},DoNotProcessLineItems(e){return s["a"].instance.post("/lookups/DoNotProcessLineItems",e)},async GetFieldsListBySetupId(e){return await s["a"].instance.get("/lookups/GetFieldsListBySetupId?"+e)},async LoadFlagFieldDropDown(e){return await s["a"].instance.get("/lookups/LoadFlagFieldDropDown?"+e)},async GetSbaIdListByUtilityId(e){return await s["a"].instance.get("/lookups/GetSbaIdListByUtilityId?"+e)},GetTicketTypes(){return s["a"].instance.get("/lookups/GetTicketTypes")},GetStatusCodes(){return s["a"].instance.get("/lookups/GetStatusCodes")},async LoadAdditionalInfoByClientId(e){return await s["a"].instance.get("/lookups/LoadAdditionalInfoByClientId?"+e)},async GetExceptionRecord(e){return await s["a"].instance.get("/lookups/GetExceptionRecord?"+e)},UpdateException(e){return s["a"].instance.post("/lookups/UpdateException",e)},async GetCDC_CodePagedList(e){return await s["a"].instance.get("/lookups/GetCDC_CodePagedList?"+e)},CommonUpdateStatus(e){return s["a"].instance.post("/lookups/CommonUpdateStatus",e)},async ViewTicketImage(e){return await s["a"].instance.get("/lookups/ViewTicketImage?"+e)},async GetBilledUnbilledRecords(e){return await s["a"].instance.get("/GetBilledUnbilledRecordsListing?"+e)},async GetUnprocessedRecords(e){return await s["a"].instance.get("/GetUnprocessedRecords?"+e)},async GetTicketLog(e){return await s["a"].instance.get("/GetTicketLog?"+e)},async GetChildTicketLog(e){return await s["a"].instance.get("/GetChildTicketLog?"+e)},async GetChildTicketLogNew(e){return await s["a"].instance.get("/GetChildTicketLogNew?"+e)},GetWorkCodeData(){return s["a"].instance.get("/lookups/GetWorkCodeData")},async GetDivisionDropdownData(e){return await s["a"].instance.get("/lookups/GetDivisionDropdownData?"+e)},async GetActivityIdDropdownListByTicketNumber(e){return await s["a"].instance.get("/lookups/GetActivityIdDropdownListByTicketNumber?"+e)},async GetInvoiceLineItem(e){return await s["a"].instance.get("/lookups/GetInvoiceLineItem?"+e)},async LoadRateByWorkCode(e){return await s["a"].instance.get("/lookups/LoadRateByWorkCode?"+e)},async ChildTicketLogNew(e){return await s["a"].instance.get("/lookups/ChildTicketLogNew?"+e)},async LoadClientDivisionList(e){return await s["a"].instance.get("/lookups/client-divisions?"+e)},UpdateInvoiceLineItem(e){return s["a"].instance.post("/lookups/UpdateInvoiceLineItem",e)},async ChildTicketLog(e){return await s["a"].instance.get("/lookups/ChildTicketLog?"+e)},async ChildTicketLogNew(e){return await s["a"].instance.get("/lookups/ChildTicketLogNew?"+e)},SaveAndProcessLineItemsForInvoice(e){return s["a"].instance.post("/lookups/SaveAndProcessLineItemsForInvoice",e)},async GetAuditRecords(e){return await s["a"].instance.get("/ClientInvoice/AuditRecords?"+e)},async GetBulkMoveListing(e){return await s["a"].instance.get("/GetBulkMoveListing?"+e)},async GetBulkMoveQueueList(e){return await s["a"].instance.get("/GetBulkMoveQueueList?"+e)},async getUserList(e){return await s["a"].instance.get("/lookups/GetUserList?"+e)},async LoadClientDivisionListByUtilityIds(e){return await s["a"].instance.get("/lookups/LoadDivisionListByUtilityId?"+e)},async LoadInvoiceNumberList(e){return await s["a"].instance.get("/lookups/LoadInvoiceNumberList?"+e)},ValidateBMUtilitySbaIdInvoiceNo(e){return s["a"].instance.post("/lookups/ValidateBMUtilitySbaIdInvoiceNo",e)},UpdateContractAndUtility(e){return s["a"].instance.post("/lookups/UpdateContractAndUtility",e)},async UploadFile(e){return s["a"].instance.post("/lookups/UploadFile?",e)},async GetBulkMoveAdvanceListing(e){return await s["a"].instance.get("/GetBulkMoveAdvanceListing?"+e)},BulkMoveAdvancePostData(e){return s["a"].instance.post("/lookups/BulkMoveAdvancePostData",e)},UpdateAdvanceBulkMoveLineIds(e){return s["a"].instance.post("/lookups/UpdateAdvanceBulkMoveLineIds",e)},async SetupListing(e){return await s["a"].instance.get("/GetSetupListing?"+e)},async GetSetupUpdateRecords(e){return await s["a"].instance.get("/GetSetupUpdateRecords?"+e)},SubmitTemplateMapping(e){return s["a"].instance.post("/SubmitTemplateMapping",e)},UpdateTemplateMapping(e){return s["a"].instance.post("/UpdateTemplateMapping",e)},DeleteColumn(e){return s["a"].instance.post("/DeleteColumn",e)},async DeleteItems(e){return await s["a"].instanceCommon.post("/Common/Delete?"+e)},async ImportSetupDataFromExcel(e){return await s["a"].instance.get("/ImportSetupDataFromExcel?"+e)},async GetSetupTemplate(e){return await s["a"].instance.get("/GetSetupTemplate?"+e)},async GetPaymentTerm(e){return await s["a"].instance.get("/ClientInvoice/GetPaymentTerm?"+e)},async LoadParentChildClientList(e){return await s["a"].instance.get("/BillingRule/LoadParentChildClientList?"+e)},async GetCompanyByParentCompanyId(e){return await s["a"].instance.get("/BillingRule/GetCompanyByParentCompanyId?"+e)},async LoadInvoiceMemoPo(e){return await s["a"].instance.get("/ClientInvoice/LoadInvoiceMemoPo?"+e)},async LoadLineItems(e){return await s["a"].instance.get("/ClientInvoice/LoadLineItems?"+e)},async GetConfigurationValueByKey(e){return await s["a"].instance.get("/BillingRule/GetConfigurationValueByKey?"+e)},async LoadTemplateBySetupId(e){return await s["a"].instance.get("/BillingRule/LoadTemplateBySetupId?"+e)},async LoadFields(e){return await s["a"].instance.get("/ClientInvoice/LoadFields?"+e)},async GetDiscount(e){return await s["a"].instance.get("/ClientInvoice/GetDiscount?"+e)},async AddDiscount(e){return await s["a"].instance.post("/ClientInvoice/AddDiscount",e)},async SaveWorkCode(e){return await s["a"].instance.post("/ClientInvoice/SaveWorkCode",null,{params:{workCodeId:e.workCodeId,workCode:e.workCode,lineIds:e.lineIds,reqFrom:e.reqFrom,allInvoice:e.allInvoice,xmlData:e.xmlData,isAdder:e.isAdder,adderName:e.adderName,lineBatchId:e.lineBatchId,invoiceBillId:e.invoiceBillId}})},async GetNoteList(e){return await s["a"].instance.get("/Client/NoteList?"+e)},async GetNoteById(e){return await s["a"].instance.get("/Client/EditNote?"+e)},async DeleteNote(e){return await s["a"].instance.post("/Client/DeleteNote",e)},async AddNoteUtilityDivision(e){return await s["a"].instance.post("/Client/AddNoteUtilityDivision",e)},async MarkAsNonVisible(e){return await s["a"].instance.post("/ClientInvoice/MarkAsNonVisible",e)},async SaveInvoice(e){return await s["a"].instance.post("/ClientInvoice/Save",e)},async GetTemplateListing(e){return await s["a"].instance.get("/GetTemplateListing?"+e)},async GetSetupList(e){return await s["a"].instance.get("/GetTemplateRecords?"+e)},async SaveTemplate(e){return await s["a"].instance.post("/SaveTemplate",e)},async GetTemplateFieldMapping(e){return await s["a"].instance.get("/TemplateFieldMapping?"+e)}},l={async getLookupItems({type:e,category:t,search:i,page:a=1,limit:l=50,filters:n={}}){const r=new URLSearchParams({type:e,page:a.toString(),limit:l.toString()});return i&&i.length>=2&&r.append("search",i),t&&r.append("category",t),Object.entries(n).forEach(([e,t])=>{null!==t&&void 0!==t&&""!==t&&r.append(`filters[${e}]`,t.toString())}),s["a"].instance.get("/lookup?"+r)},async getLookupItem(e,t){return s["a"].instance.get(`/lookup/${e}/${t}`)},async getSupportedTypes(){return s["a"].instance.get("/lookup/types")}}},"91a3":function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,".searchable-select[data-v-719e3da8]{width:100%}",""]),e.exports=t},"9f3d":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"searchable-select"},[i("Autocomplete",{attrs:{value:e.internalValue,"model-value":e.internalValue,items:e.displayItems,"all-items":e.allItems,loading:e.loading,placeholder:e.placeholder,label:e.label,disabled:e.disabled,clearable:e.clearable,density:e.density,variant:e.variant,multiple:e.multiple,"item-title":e.itemTitle,"item-value":e.itemValue,"menu-props":e.menuProps,"no-data-text":e.noDataText,"hide-details":e.hideDetails,"error-messages":e.errorMessages,rules:e.rules,"min-search-length":e.minSearchLength,"max-visible-chips":e.maxVisibleChips,"action-buttons":e.actionButtons,"item-fields":e.itemFields,"group-fields":e.groupFields,"max-render-items":e.maxRenderItems,"lazy-load":e.lazyLoad,"status-field-config":e.statusFieldConfig},on:{input:e.onSelectionChange,"update:model-value":e.onSelectionChange,"update:search":e.onSearch,focus:e.onFocus,blur:e.onBlur,search:e.onSearch}})],1)},a=[],l=(i("14d9"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"custom-autocomplete",class:{"is-disabled":e.disabled,"has-error":e.hasError}},[e.label?i("label",{staticClass:"form-label"},[e._v(e._s(e.label))]):e._e(),e.multiple?i("div",{staticClass:"autocomplete-wrapper"},[i("div",{staticClass:"input-group"},[i("div",{staticClass:"form-control autocomplete-chips-container",class:{"is-invalid":e.hasError,"form-control-sm":"compact"===e.density,"form-control-lg":"comfortable"===e.density}},[i("div",{staticClass:"d-flex flex-wrap align-items-center"},[e._l(e.visibleChips,(function(t,s){return[s<e.maxVisibleChipsCount?i("span",{key:e.getItemValue(t),staticClass:"badge badge-primary mr-1 mb-1 pl-2 autocomplete-chip",attrs:{title:e.getChipText(t)}},[i("span",{staticClass:"autocomplete-chip-text",domProps:{innerHTML:e._s(e.getChipText(t))}}),i("button",{staticClass:"close ml-1 autocomplete-chip-close",attrs:{type:"button",tabindex:"-1","aria-label":"Remove "+e.getChipText(t).replace(/<[^>]*>/g,"")},on:{click:function(i){i.stopPropagation(),e.removeItem(e.getItemValue(t))}}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()]})),e.remainingChipsCount>0?i("span",{staticClass:"badge badge-secondary mr-1 mb-1 pl-2 autocomplete-chip autocomplete-chip-more",attrs:{title:e.remainingChipsCount+" more selected"}},[i("span",{staticClass:"autocomplete-chip-text"},[e._v("+ "+e._s(e.remainingChipsCount)+" more")])]):e._e(),i("input",{ref:"input",staticClass:"autocomplete-input-inline",attrs:{type:"text",placeholder:0===e.selectedItems.length?e.placeholder:"",disabled:e.disabled},domProps:{value:e.searchTerm},on:{input:e.onInput,focus:e.onFocus,blur:e.onBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleEnter.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-down",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-up",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.closeMenu.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"backspace",void 0,t.key,void 0)?null:e.handleBackspace.apply(null,arguments)}]}})],2)]),i("div",{staticClass:"input-group-append"},[e.clearable&&e.currentValue&&(!Array.isArray(e.currentValue)||e.currentValue.length>0)?i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",tabindex:"-1"},on:{click:e.clearSelection}},[i("i",{staticClass:"fa fa-times"})]):e._e(),i("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",class:{active:e.isMenuOpen},attrs:{type:"button",tabindex:"-1"},on:{click:e.toggleMenu}},[i("i",{staticClass:"fa",class:e.loading?"fa-spinner fa-spin":"fa-chevron-down"})])])]),e.isMenuOpen?i("div",{ref:"menu",staticClass:"autocomplete-menu",style:{maxHeight:e.menuMaxHeight+"px"},on:{scroll:e.onMenuScroll}},[e.hasActionButtons?i("div",{staticClass:"autocomplete-actions p-2 border-bottom"},[i("div",{staticClass:"d-flex flex-wrap gap-1"},[e.actionButtons.selectAll?i("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button",disabled:e.disabled||e.allSelected},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.selectAll(t)}}},[i("i",{staticClass:"fa fa-check-square mr-1"}),e._v(" Select All ")]):e._e(),e.actionButtons.active?i("button",{staticClass:"btn btn-sm btn-outline-success",class:{active:"active"===e.filterStatus},attrs:{type:"button",disabled:e.disabled},on:{click:function(t){return e.filterByStatus("active")}}},[i("i",{staticClass:"fa fa-check-circle mr-1"}),e._v(" Active ")]):e._e(),e.actionButtons.inactive?i("button",{staticClass:"btn btn-sm btn-outline-secondary",class:{active:"inactive"===e.filterStatus},attrs:{type:"button",disabled:e.disabled},on:{click:function(t){return e.filterByStatus("inactive")}}},[i("i",{staticClass:"fa fa-times-circle mr-1"}),e._v(" Inactive ")]):e._e(),e.actionButtons.clear?i("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button",disabled:e.disabled||!e.hasSelectedItems},on:{click:e.clearSelection}},[i("i",{staticClass:"fa fa-times mr-1"}),e._v(" Clear ")]):e._e()])]):e._e(),e.loading&&!e.hasItems?i("div",{staticClass:"autocomplete-loading"},[e._m(1),i("div",{staticClass:"mt-2 text-muted small"},[e._v("Loading...")])]):!e.loading&&!e.hasItems&&e.searchTerm.length>=e.minSearchLength?i("div",{staticClass:"autocomplete-no-data"},[i("i",{staticClass:"fa fa-search text-muted",staticStyle:{"font-size":"2rem"}}),i("div",{staticClass:"mt-2 text-muted"},[e._v(e._s(e.noDataText))]),i("div",{staticClass:"text-muted small"},[e._v("Try adjusting your search terms")])]):e.hasGrouping?i("div",{staticClass:"autocomplete-grouped"},e._l(e.paginatedGroupedItems,(function(t,s){return i("div",{key:t.group||s,staticClass:"autocomplete-group"},[i("div",{staticClass:"autocomplete-group-header"},[e.groupFields.length>0?i("div",{staticClass:"d-flex flex-column"},[i("div",{staticClass:"font-weight-bold font-14"},[e._v(e._s(t.group))]),i("div",{staticClass:"small text-muted mt-1 d-none"},e._l(e.groupFields,(function(s,a){return i("span",{key:s},[a>0?i("span",[e._v(" • ")]):e._e(),e.getGroupFieldValue(t,s)?i("span",[e._v(e._s(s)+": "+e._s(e.getGroupFieldValue(t,s)))]):e._e()])})),0)]):i("div",[e._v(e._s(t.group))])]),i("ul",{staticClass:"list-group list-group-flush"},e._l(t.items,(function(t,a){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:e.getFlatIndex(s,a)===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=e.getFlatIndex(s,a)}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("div",{staticClass:"autocomplete-checkbox-wrapper mr-2"},[i("input",{staticClass:"autocomplete-checkbox",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t,i)}}}),e.isSelected(t)?i("i",{staticClass:"fa fa-check autocomplete-check-icon"}):e._e()]):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-secondary mr-2",staticStyle:{"font-size":"0.75rem"}},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)},domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)}},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-success ml-2",staticStyle:{"font-size":"1.1rem"}}):e._e()])])})),0)])})),0):i("ul",{staticClass:"list-group list-group-flush"},e._l(e.paginatedDisplayItems,(function(t,s){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:s===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=s}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("input",{staticClass:"mr-2",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t)}}}):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-primary mr-2"},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400"},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-primary ml-2"}):e._e()])])})),0)]):e._e()]):i("div",{staticClass:"autocomplete-wrapper"},[i("div",{staticClass:"input-group"},[i("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":e.hasError,"form-control-sm":"compact"===e.density,"form-control-lg":"comfortable"===e.density},attrs:{type:"text",placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.displayText},on:{input:e.onInput,focus:e.onFocus,blur:e.onBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleEnter.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-down",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-up",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.closeMenu.apply(null,arguments)}]}}),i("div",{staticClass:"input-group-append"},[e.clearable&&e.selectedValue?i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",tabindex:"-1"},on:{click:e.clearSelection}},[i("i",{staticClass:"fa fa-times"})]):e._e(),i("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",class:{active:e.isMenuOpen},attrs:{type:"button",tabindex:"-1"},on:{click:e.toggleMenu}},[i("i",{staticClass:"fa",class:e.loading?"fa-spinner fa-spin":"fa-chevron-down"})])])]),e.isMenuOpen?i("div",{ref:"menu",staticClass:"autocomplete-menu",style:{maxHeight:e.menuMaxHeight+"px"},on:{scroll:e.onMenuScroll}},[e.loading&&!e.hasItems?i("div",{staticClass:"autocomplete-loading"},[e._m(0),i("div",{staticClass:"mt-2 text-muted small"},[e._v("Loading...")])]):!e.loading&&!e.hasItems&&e.searchTerm.length>=e.minSearchLength?i("div",{staticClass:"autocomplete-no-data"},[i("i",{staticClass:"fa fa-search text-muted",staticStyle:{"font-size":"2rem"}}),i("div",{staticClass:"mt-2 text-muted"},[e._v(e._s(e.noDataText))]),i("div",{staticClass:"text-muted small"},[e._v("Try adjusting your search terms")])]):e.hasGrouping?i("div",{staticClass:"autocomplete-grouped"},e._l(e.paginatedGroupedItems,(function(t,s){return i("div",{key:t.group||s,staticClass:"autocomplete-group"},[i("div",{staticClass:"autocomplete-group-header"},[e.groupFields.length>0?i("div",{staticClass:"d-flex flex-column"},[i("div",{staticClass:"font-weight-bold font-14"},[e._v(e._s(t.group))]),i("div",{staticClass:"small text-muted mt-1 d-none"},e._l(e.groupFields,(function(t,s){return i("span",{key:t},[s>0?i("span",[e._v(" • ")]):e._e()])})),0)]):i("div",[e._v(e._s(t.group))])]),i("ul",{staticClass:"list-group list-group-flush"},e._l(t.items,(function(t,a){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:e.getFlatIndex(s,a)===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=e.getFlatIndex(s,a)}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("div",{staticClass:"autocomplete-checkbox-wrapper mr-2"},[i("input",{staticClass:"autocomplete-checkbox",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t,i)}}}),e.isSelected(t)?i("i",{staticClass:"fa fa-check autocomplete-check-icon"}):e._e()]):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-secondary mr-2",staticStyle:{"font-size":"0.75rem"}},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)},domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)}},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-success ml-2",staticStyle:{"font-size":"1.1rem"}}):e._e()])])})),0)])})),0):i("ul",{staticClass:"list-group list-group-flush"},e._l(e.paginatedDisplayItems,(function(t,s){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:s===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=s}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("input",{staticClass:"mr-2",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t)}}}):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-primary mr-2"},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400"},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-primary ml-2"}):e._e()])])})),0)]):e._e()]),!e.hideDetails&&e.hasError?i("div",{staticClass:"invalid-feedback d-block"},e._l(e.errorMessagesArray,(function(t,s){return i("div",{key:s},[e._v(e._s(t))])})),0):e._e()])}),n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"spinner-border spinner-border-sm text-primary",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"spinner-border spinner-border-sm text-primary",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])}],r={name:"Autocomplete",props:{value:{type:[String,Number,Array],default:null},modelValue:{type:[String,Number,Array],default:null},items:{type:Array,default:()=>[]},allItems:{type:Array,default:null},loading:{type:Boolean,default:!1},placeholder:{type:String,default:"Search and select..."},label:{type:String,default:null},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},density:{type:String,default:"default",validator:e=>["compact","comfortable","default"].includes(e)},variant:{type:String,default:"outlined",validator:e=>["outlined","filled","underlined","solo","solo-inverted","solo-filled"].includes(e)},multiple:{type:Boolean,default:!1},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},noDataText:{type:String,default:"No data available"},hideDetails:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:null},rules:{type:Array,default:()=>[]},menuProps:{type:Object,default:()=>({maxHeight:300})},minSearchLength:{type:Number,default:0},maxVisibleChips:{type:Number,default:null},actionButtons:{type:Object,default:()=>({selectAll:!1,active:!1,inactive:!1,clear:!1})},itemFields:{type:Array,default:()=>[]},groupFields:{type:Array,default:()=>[]},maxRenderItems:{type:Number,default:100},lazyLoad:{type:Boolean,default:!1},statusFieldConfig:{type:Object,default:()=>({fieldName:"status",activeValues:["active","Active","true","1"],inactiveValues:["inactive","Inactive","false","0"],activeColor:"#28a745",inactiveColor:"#dc3545"})}},data(){return{isMenuOpen:!1,searchTerm:"",highlightedIndex:-1,renderedItemCount:this.maxRenderItems,filterStatus:null}},computed:{currentValue(){return null!==this.value&&void 0!==this.value?this.value:this.modelValue},selectedValue(){return this.multiple?null:this.currentValue},displayItems(){return this.items.map(e=>({...e,title:this.getItemText(e),value:this.getItemValue(e)}))},groupedItems(){if(this.items.length>0&&Array.isArray(this.items[0].items))return this.items.map(e=>({...e,raw:e,group:e.group||e.groupName||""}));const e={},t={};return this.displayItems.forEach(i=>{const s=this.getItemGroup(i)||"Other";e[s]||(e[s]=[],i.raw?t[s]={...i.raw}:t[s]={...i}),e[s].push(i)}),Object.keys(e).map(i=>({group:i,items:e[i],raw:t[i]}))},hasGrouping(){return 0!==this.items.length&&(!!Array.isArray(this.items[0].items)||(!!(this.groupFields&&this.groupFields.length>0)||this.displayItems.some(e=>this.getItemGroup(e))))},flatDisplayItems(){return this.hasGrouping?this.groupedItems.flatMap(e=>e.items):this.displayItems},hasItems(){return this.displayItems.length>0},menuMaxHeight(){return this.menuProps&&this.menuProps.maxHeight||300},selectedItems(){if(!this.multiple)return[];const e=this.currentValue,t=Array.isArray(e)?e:e?[e]:[];if(0===t.length)return[];let i=this.allItems&&this.allItems.length>0?this.allItems:this.items;i.length>0&&Array.isArray(i[0].items)&&(i=i.flatMap(e=>e.items||[]));const s=i.filter(e=>{const i=this.getItemValue(e);return t.some(e=>String(e)===String(i))});return s.map(e=>({...e,title:this.getItemText(e),value:this.getItemValue(e)}))},displayText(){if(this.multiple)return"";const e=this.currentValue;if(!e)return this.searchTerm;const t=this.displayItems.find(t=>String(this.getItemValue(t))===String(e));return t?this.getItemText(t):this.searchTerm},hasError(){return this.errorMessages&&this.errorMessages.length>0||this.rules&&this.rules.length>0&&this.validateRules().length>0},errorMessagesArray(){return this.errorMessages?Array.isArray(this.errorMessages)?this.errorMessages:[this.errorMessages]:this.validateRules()},visibleChips(){return this.selectedItems},maxVisibleChipsCount(){return null!==this.maxVisibleChips&&void 0!==this.maxVisibleChips?this.maxVisibleChips:this.selectedItems.length},remainingChipsCount(){return null===this.maxVisibleChips||void 0===this.maxVisibleChips?0:Math.max(0,this.selectedItems.length-this.maxVisibleChips)},hasActionButtons(){return this.actionButtons&&(this.actionButtons.selectAll||this.actionButtons.active||this.actionButtons.inactive||this.actionButtons.clear)},allSelected(){if(!this.multiple)return!1;const e=this.filteredDisplayItems,t=Array.isArray(this.currentValue)?this.currentValue:[];return e.length>0&&e.every(e=>{const i=this.getItemValue(e);return t.some(e=>String(e)===String(i))})},hasSelectedItems(){if(!this.multiple)return!1;const e=Array.isArray(this.currentValue)?this.currentValue:[];return e.length>0},filteredDisplayItems(){let e=this.displayItems;return this.filterStatus&&(e=e.filter(e=>{const t=this.getItemFieldValue(e,"status")||this.getItemFieldValue(e,"Status")||this.getItemFieldValue(e,"isActive"),i=String(t).toLowerCase().trim();return"active"===this.filterStatus?"active"===i||"true"===i||"1"===i:"inactive"!==this.filterStatus||("inactive"===i||"false"===i||"0"===i)})),e},paginatedDisplayItems(){return this.lazyLoad&&this.filteredDisplayItems.length>this.renderedItemCount?this.filteredDisplayItems.slice(0,this.renderedItemCount):this.filteredDisplayItems},paginatedGroupedItems(){if(!this.hasGrouping)return[];let e=this.groupedItems;if(this.filterStatus&&(e=e.map(e=>({...e,items:e.items.filter(e=>{const t=this.getItemFieldValue(e,"status")||this.getItemFieldValue(e,"Status")||this.getItemFieldValue(e,"isActive"),i=String(t).toLowerCase().trim();return"active"===this.filterStatus?"active"===i||"true"===i||"1"===i:"inactive"!==this.filterStatus||("inactive"===i||"false"===i||"0"===i)})})).filter(e=>e.items.length>0)),this.lazyLoad){let t=0;const i=[];for(const s of e){if(t>=this.renderedItemCount)break;const e=this.renderedItemCount-t;i.push({...s,items:s.items.slice(0,e)}),t+=s.items.length}return i}return e}},watch:{items(){this.highlightedIndex=-1},hasGrouping(){this.highlightedIndex=-1},modelValue:{handler(e,t){this.multiple||!e&&this.searchTerm&&(this.searchTerm="")},immediate:!0,deep:!0},value:{handler(e,t){this.multiple||!e&&this.searchTerm&&(this.searchTerm="")},immediate:!0,deep:!0}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeDestroy(){document.removeEventListener("click",this.handleClickOutside)},methods:{getItemText(e){return e.raw?e.raw.text||e.raw.title||e.raw[this.itemTitle]||"":e.text||e.title||e[this.itemTitle]||""},getItemValue(e){let t;if(t=e.raw?void 0!==e.raw.value&&null!==e.raw.value?e.raw.value:void 0!==e.raw[this.itemValue]&&null!==e.raw[this.itemValue]?e.raw[this.itemValue]:null:void 0!==e.value&&null!==e.value?e.value:void 0!==e[this.itemValue]&&null!==e[this.itemValue]?e[this.itemValue]:null,null===t||void 0===t){const i=this.items.findIndex(t=>t===e||e.raw&&t===e.raw);i>-1?t="item-"+i:(console.warn("Autocomplete: Item has no value and could not determine index",e),t=`item-${Date.now()}-${Math.random()}`)}return t},getItemDescription(e){return e.raw?e.raw.description||e.raw.subtitle||"":e.description||e.subtitle||""},getItemGroup(e){if(e.raw){if(this.groupFields&&this.groupFields.length>0){const t=e.raw[this.groupFields[0]];if(void 0!==t&&null!==t&&""!==t)return String(t)}return e.raw.group||e.raw.groupName?e.raw.group||e.raw.groupName:""}if(this.groupFields&&this.groupFields.length>0){const t=e[this.groupFields[0]];if(void 0!==t&&null!==t&&""!==t)return String(t)}return e.group||e.groupName?e.group||e.groupName:""},getItemFieldValue(e,t){return e.raw?e.raw[t]||"":e[t]||""},getGroupFieldValue(e,t){return e.raw?e.raw[t]||"":e[t]||""},isSelected(e){const t=this.getItemValue(e),i=this.currentValue;if(this.multiple){const e=Array.isArray(i)?i:i?[i]:[];return e.some(e=>String(e)===String(t))}return null!==i&&void 0!==i&&String(i)===String(t)},onInput(e){this.searchTerm=e.target.value,this.isMenuOpen=!0,this.$emit("update:search",this.searchTerm),this.$emit("search",this.searchTerm)},onFocus(){this.isMenuOpen=!0,this.$emit("focus")},onBlur(){setTimeout(()=>{if(!this.multiple&&this.selectedValue){const e=this.displayItems.find(e=>this.getItemValue(e)===this.selectedValue);e&&this.searchTerm!==this.getItemText(e)&&(this.searchTerm="")}this.$emit("blur")},200)},toggleMenu(){this.disabled||(this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&this.$nextTick(()=>{var e;null===(e=this.$refs.input)||void 0===e||e.focus()}))},closeMenu(){this.isMenuOpen=!1,this.highlightedIndex=-1},selectItem(e,t){t&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),console.log("selectItem called for single item:",e),console.log("Item value:",this.getItemValue(e));const i=this.getItemValue(e),s=this.currentValue;if(this.multiple){const e=Array.isArray(s)?[...s]:s?[s]:[],t=[...e],a=t.findIndex(e=>String(e)===String(i));console.log("Current selected values:",t),console.log("Item value to toggle:",i),console.log("Index found:",a),a>-1?(t.splice(a,1),console.log("Removed item. New selection:",t)):(t.push(i),console.log("Added single item. New selection:",t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t)}else this.searchTerm="",this.isMenuOpen=!1,this.$emit("input",i),this.$emit("update:modelValue",i),this.$emit("change",i)},removeItem(e){if(this.multiple){const t=this.currentValue,i=Array.isArray(t)?[...t]:[],s=i.findIndex(t=>String(t)===String(e));s>-1&&(i.splice(s,1),this.$emit("input",i),this.$emit("update:modelValue",i),this.$emit("change",i))}},clearSelection(){this.multiple?(this.$emit("input",[]),this.$emit("update:modelValue",[]),this.$emit("change",[])):(this.searchTerm="",this.$emit("input",null),this.$emit("update:modelValue",null),this.$emit("change",null)),this.isMenuOpen=!1},getFlatIndex(e,t){let i=0;for(let s=0;s<e;s++)i+=this.groupedItems[s].items.length;return i+t},getItemFromFlatIndex(e){if(!this.hasGrouping)return this.displayItems[e];let t=0;for(const i of this.groupedItems){if(e<t+i.items.length)return i.items[e-t];t+=i.items.length}return null},handleEnter(){if(this.isMenuOpen&&this.highlightedIndex>=0){const e=this.hasGrouping?this.getItemFromFlatIndex(this.highlightedIndex):this.displayItems[this.highlightedIndex];e&&this.selectItem(e,null)}else this.isMenuOpen&&1===this.flatDisplayItems.length&&this.selectItem(this.flatDisplayItems[0],null)},navigateDown(){if(!this.isMenuOpen)return void(this.isMenuOpen=!0);const e=this.flatDisplayItems.length-1;this.highlightedIndex<e&&(this.highlightedIndex++,this.scrollToHighlighted())},navigateUp(){this.highlightedIndex>0&&(this.highlightedIndex--,this.scrollToHighlighted())},scrollToHighlighted(){this.$nextTick(()=>{if(this.$refs.menu){const e=this.$refs.menu.querySelectorAll(".autocomplete-item");e[this.highlightedIndex]&&e[this.highlightedIndex].scrollIntoView({block:"nearest",behavior:"smooth"})}})},handleBackspace(){if(this.multiple&&""===this.searchTerm){const e=this.currentValue,t=Array.isArray(e)?e:[];t.length>0&&this.removeItem(t[t.length-1])}},handleClickOutside(e){this.$el&&!this.$el.contains(e.target)&&this.closeMenu()},validateRules(){if(!this.rules||0===this.rules.length)return[];const e=[],t=this.currentValue;return this.rules.forEach(i=>{if("function"===typeof i){const s=i(t);!0!==s&&void 0!==s&&e.push(s)}}),e},selectAll(e){if(e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),console.log("selectAll called - this should only be called from the Select All button"),!this.multiple)return;const t=this.filteredDisplayItems,i=t.map(e=>this.getItemValue(e)),s=Array.isArray(this.currentValue)?this.currentValue:[],a=[...new Set([...s,...i])];console.log("Select All - all values:",a),this.$emit("input",a),this.$emit("update:modelValue",a),this.$emit("change",a)},filterByStatus(e){this.filterStatus===e?this.filterStatus=null:this.filterStatus=e,this.renderedItemCount=this.maxRenderItems,this.highlightedIndex=-1},formatItemFields(e){if(!this.itemFields||0===this.itemFields.length)return"";const t=this.itemFields.map((t,i)=>{const s=this.getItemFieldValue(e,t);if(!s&&0!==s)return"";if(t.toLowerCase()===this.statusFieldConfig.fieldName.toLowerCase()){const e=String(s).toLowerCase().trim(),t=this.statusFieldConfig.activeValues.some(t=>String(t).toLowerCase()===e),i=this.statusFieldConfig.inactiveValues.some(t=>String(t).toLowerCase()===e);let a="";if(t?a=this.statusFieldConfig.activeColor:i&&(a=this.statusFieldConfig.inactiveColor),a)return`<span style="color: ${a};">${s}</span>`}return String(s)}).filter(e=>""!==e);if(0===t.length)return"";if(1===t.length)return t[0];if(2===t.length)return`${t[0]} - ${t[1]}`;if(t.length>=3){const e=t.slice(0,2).filter(e=>e).join(" - "),i=t.slice(2).filter(e=>e).join(", ");return i?`${e} (${i})`:e}return""},getChipText(e){return this.itemFields&&this.itemFields.length>0&&this.formatItemFields(e)||this.getItemText(e)},onMenuScroll(e){if(!this.lazyLoad)return;const t=e.target,i=t.scrollHeight-t.scrollTop-t.clientHeight;i<50&&this.renderedItemCount<this.filteredDisplayItems.length&&(this.renderedItemCount=Math.min(this.renderedItemCount+this.maxRenderItems,this.filteredDisplayItems.length))}}},o=r,u=i("0c7c"),c=Object(u["a"])(o,l,n,!1,null,null,null),d=c.exports,m=i("750f");function h(e,t){let i;return function(...s){const a=()=>{clearTimeout(i),e(...s)};clearTimeout(i),i=setTimeout(a,t)}}var p={name:"SearchableSelect",components:{Autocomplete:d},props:{value:{type:[String,Number,Array],default:null},items:{type:Array,default:()=>null},type:{type:String,required:!1,default:null},category:{type:String,default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"Search and select..."},label:{type:String,default:null},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},density:{type:String,default:"default",validator:e=>["compact","comfortable","default"].includes(e)},variant:{type:String,default:"outlined",validator:e=>["outlined","filled","underlined","solo","solo-inverted","solo-filled"].includes(e)},minSearchLength:{type:Number,default:2},debounceMs:{type:Number,default:300},pageSize:{type:Number,default:50},maxItems:{type:Number,default:1e3},noDataText:{type:String,default:"No data available"},hideDetails:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:null},rules:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},maxVisibleChips:{type:Number,default:null},actionButtons:{type:Object,default:()=>({selectAll:!1,active:!1,inactive:!1,clear:!1})},itemFields:{type:Array,default:()=>[]},groupFields:{type:Array,default:()=>[]},maxRenderItems:{type:Number,default:100},lazyLoad:{type:Boolean,default:!1},statusFieldConfig:{type:Object,default:()=>({fieldName:"status",activeValues:["active","Active","true","1"],inactiveValues:["inactive","Inactive","false","0"],activeColor:"#28a745",inactiveColor:"#dc3545"})},onChange:{type:Function,default:null}},data(){return{remoteItems:[],loading:!1,searchTerm:"",currentPage:1,hasMore:!1,totalItems:0}},computed:{internalValue:{get(){const e=null!==this.value&&void 0!==this.value?this.value:this.multiple?[]:null;return e},set(e){console.log("=== internalValue setter ==="),console.log("Setting internalValue to:",e),console.log("Current value prop:",this.value),console.log("Emitting input event (Vue 2 v-model) with:",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e)}},useLocalItems(){return null!==this.items&&void 0!==this.items&&Array.isArray(this.items)},normalizedLocalItems(){if(!this.useLocalItems)return[];if(this.items.length>0&&this.items[0].items&&Array.isArray(this.items[0].items)){const e=[];return this.items.forEach(t=>{t.items&&Array.isArray(t.items)&&t.items.forEach(i=>{e.push({...i,group:t.group||t.groupName||""})})}),e}return this.items},allItems(){let e;return e=this.useLocalItems?this.normalizedLocalItems:this.remoteItems,e.map((e,t)=>{const i=void 0!==e.value&&null!==e.value?e.value:void 0!==e.id&&null!==e.id?e.id:"item-"+t;let s="";return this.groupFields&&this.groupFields.length>0&&(s=e[this.groupFields[0]]||""),s||(s=e.group||e.groupName||""),{raw:e,text:e.text||e.name||e.label||"",value:i,description:e.description||e.subtitle||"",category:e.category||"",group:s,title:e.text||e.name||e.label||"",subtitle:e.description||e.subtitle||""}})},displayItems(){let e;return e=this.useLocalItems?this.filterLocalItems(this.searchTerm):this.remoteItems,e.map((e,t)=>{const i=void 0!==e.value&&null!==e.value?e.value:void 0!==e.id&&null!==e.id?e.id:"item-"+t;let s="";return this.groupFields&&this.groupFields.length>0&&(s=e[this.groupFields[0]]||""),s||(s=e.group||e.groupName||""),{raw:e,text:e.text||e.name||e.label||"",value:i,description:e.description||e.subtitle||"",category:e.category||"",group:s,title:e.text||e.name||e.label||"",subtitle:e.description||e.subtitle||""}})},hasItems(){return this.displayItems.length>0},itemTitle(){return"title"},itemValue(){return"value"},menuProps(){return{maxHeight:300,virtual:!0,itemHeight:48}}},methods:{filterLocalItems(e=""){if(!this.useLocalItems)return[];const t=this.normalizedLocalItems;if(!e||""===e.trim())return t;const i=e.toLowerCase();return t.filter(e=>{const t=(e.text||e.name||e.label||"").toLowerCase(),s=(e.description||e.subtitle||"").toLowerCase();return t.includes(i)||s.includes(i)})},async loadItems(e="",t=1,i=!1){if(this.useLocalItems){const t=this.filterLocalItems(e);return this.totalItems=t.length,this.hasMore=!1,void this.$emit("search",{search:e,results:t.length,total:t.length})}if(this.type){if(!this.loading){this.loading=!0;try{const s=await m["b"].getLookupItems({type:this.type,category:this.category,search:e,page:t,limit:this.pageSize,filters:this.filters});if(s&&s.data){const a=s.data,l=a.result||a.data||a,n=l.items||l.DATA||l||[];this.remoteItems=i?[...this.remoteItems,...n]:n,this.currentPage=l.page||t,this.hasMore=!!l.hasMore,this.totalItems=l.total||l.TOTAL||n.length,this.$emit("search",{search:e,results:n.length,total:this.totalItems})}else console.error("Lookup API error:",s),this.remoteItems=[]}catch(s){console.error("Error loading lookup items:",s),this.remoteItems=[]}finally{this.loading=!1}}}else console.warn("SearchableSelect: type prop is required when items prop is not provided")},onSearch(e){if(this.searchTerm=e,this.useLocalItems){const t=this.filterLocalItems(e);this.$emit("search",{search:e,results:t.length,total:t.length})}else this.debouncedLoadItems(e,1,!1)},onSelectionChange(e){const t=this.multiple&&!Array.isArray(e)?[e]:e;this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t),this.onChange&&"function"===typeof this.onChange&&this.onChange(t)},onFocus(){this.$emit("focus"),this.useLocalItems||0===this.remoteItems.length&&this.searchTerm.length<this.minSearchLength&&this.loadItems("",1,!1)},onBlur(){this.$emit("blur")},removeItem(e){if(this.multiple){const t=(this.modelValue||[]).filter(t=>t!==e);this.$emit("update:modelValue",t)}},loadMore(){this.hasMore&&!this.loading&&this.loadItems(this.searchTerm,this.currentPage+1,!0)},clear(){this.useLocalItems?this.searchTerm="":(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},refresh(){this.loadItems(this.searchTerm,1,!1)}},watch:{items:{handler(e){if(this.useLocalItems){const e=this.filterLocalItems(this.searchTerm);this.totalItems=e.length,this.$forceUpdate()}},deep:!0,immediate:!0},type(){this.useLocalItems||(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},category(){this.useLocalItems||(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},filters:{handler(){this.useLocalItems||(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},deep:!0},value:{handler:async function(e,t){if(console.log("=== SearchableSelect value watcher ==="),console.log("New value:",e,"type:",Array.isArray(e)?"array":typeof e),console.log("Old value:",t),console.log("=== End watcher ==="),!this.useLocalItems&&e&&0===this.remoteItems.length&&!this.loading&&this.type)try{this.loading=!0;const e=await m["b"].getLookupItems({type:this.type,category:this.category,search:"",page:1,limit:this.pageSize,filters:this.filters});if(e&&e.data){const t=e.data,i=t.result||t.data||t;this.remoteItems=i.items||i.DATA||i||[],this.totalItems=i.total||i.TOTAL||this.remoteItems.length,this.hasMore=!!i.hasMore}}catch(i){console.error("Error loading initial items:",i)}finally{this.loading=!1}},immediate:!0}},created(){this.debouncedLoadItems=h(this.loadItems,this.debounceMs)},mounted(){if(this.useLocalItems){const e=this.filterLocalItems(this.searchTerm);this.totalItems=e.length}else 0===this.minSearchLength&&this.type&&this.loadItems("",1,!1)}},g=p,y=(i("7206"),Object(u["a"])(g,s,a,!1,null,"719e3da8",null));t["a"]=y.exports}}]);
//# sourceMappingURL=chunk-b209990c.js.map