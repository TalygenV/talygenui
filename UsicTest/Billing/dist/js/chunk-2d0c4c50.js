(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4c50"],{"3bf1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"RateSchedule",SubModuleCode:"",LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:[],IdentityColumn:"RATE_SCHEDULE_ID",listType:["List"],ListData:t.RateScheduleData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,IsSearchFieldsOnTop:"true",ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),HeaderText:t.$t("RateSchedule")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["CREATED_AT"==i.column.COLUMN_NAME?[a("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(i.row.CREATED_AT))+" ")])]:t._e(),"MODIFIED_AT"==i.column.COLUMN_NAME?[a("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(i.row.MODIFIED_AT))+" ")])]:t._e(),"STATUS"==i.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action"},[a("div",{staticClass:"cstm-drop-btn"},[a("select",{directives:[{name:"model",rawName:"v-model",value:i.row.STATUS_ID,expression:"data.row.STATUS_ID"}],class:1001==i.row.STATUS_ID?"ddlupdatestatus w-80 btn-success":"ddlupdatestatus w-80 btn-danger",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(i.row,"STATUS_ID",e.target.multiple?a:a[0])},function(e){return t.UpdataStatus(i.row.STATUS_ID,i.row.RATE_SCHEDULE_ID)}]}},[a("option",{attrs:{value:"1001",selected:"selected"}},[t._v(t._s(t.$t("Active")))]),a("option",{attrs:{value:"1002"}},[t._v(t._s(t.$t("Inactive")))])])])])]:t._e()]}}])}),t.isShowAddRate?a("AddRate",{attrs:{EditData:t.EditData}}):t._e(),t.isBulkUpdateRate?a("BulkUpdateRate",{attrs:{EditData:t.EditData}}):t._e(),t.isCopyRate?a("Copy",{attrs:{EditData:t.EditData}}):t._e()],1)},s=[],l=(a("14d9"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("addrate")))]),a("span",{staticClass:"user-guide"},[a("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[a("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),a("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[a("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[a("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgHiringAddDepartment"))}})])])]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"ResourceRate",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.MandatoryString},on:{OnSubmit:t.onSubmit}})],1)])])])],1)}),o=[],n=a("9769"),r={props:{EditData:{type:Array,required:!1}},data(){return{isLoading:!1,MandatoryString:"Fields marked with an asterisk (*) are mandatory.",companyId:null,userId:null,PageSize:100,PageNumber:1,searchCondition:"",GroupNewData:[],UtiltityNames:[],StateNames:[],WorkCodes:[],StatusData:[],FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("ContractCompanyName"),name:"Contract",value:"",placeholder:this.$t("Select Contract"),validationRules:{required:!0},config:{options:[],onChange:this.GetUtiltityNames},visibility:!0},{astype:"SelectField",label:this.$t("UtilityName"),name:"UtilityName",value:"",placeholder:this.$t("Select Utility Name"),validationRules:{required:!0},config:{options:[]},visibility:!0},{astype:"SelectField",label:this.$t("State"),name:"State",value:"",placeholder:this.$t("Select State"),validationRules:{required:!0},config:{options:[]},visibility:!0},{astype:"SelectField",label:this.$t("WorkCode"),name:"WorkCode",value:"",placeholder:this.$t("Select Work Code"),validationRules:{required:!0},config:{options:[]},visibility:!0},{astype:"DateField",label:this.$t("Start Date (M/D/YYYY)"),name:"StartDate",value:new Date,visibility:!0,placeholder:this.$t("StartDate"),config:{format:"MM/DD/YYYY"},validationRules:{required:!0}},{astype:"DateField",label:this.$t("End Date (M/D/YYYY)"),name:"EndDate",value:new Date,visibility:!0,placeholder:this.$t("EndDate"),config:{format:"MM/DD/YYYY"},validationRules:{required:!0}},{astype:"NumericField",label:this.$t("Rate"),name:"Rate",value:"",placeholder:this.$t("Enter Rate"),validationRules:{required:!0},config:{options:[]},visibility:!0},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:this.$t("Select Status"),validationRules:{},config:{options:[]},visibility:!0},{astype:"TextField",label:this.$t("CustomerWorkCode"),name:"CustomerWorkCode",value:"",placeholder:this.$t("Enter Customer Work Code"),validationRules:{},config:{options:[]},visibility:!0}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",placeholder:this.$t("Enter Comment"),validationRules:{}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",isVisible:!0},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;t.userId=t.GetUserInfo.ID,t.companyId=t.GetUserInfo.CompanyId,t.GetParentClientGroupNew(),t.GetStateListByCountryId(),t.GetWorkCodes(),t.GetStatusList(),t.EditData.RATE_SCHEDULE_ID>0&&(t.FormSchema[0].Data[0].value=t.EditData.CLIENT_ID,t.FormSchema[0].Data[6].value=t.EditData.AMOUNT,t.FormSchema[0].Data[8].value=t.EditData.Billing_Code,await t.GetUtiltityNames("client","",t.EditData.CLIENT_ID),setTimeout(()=>{var e;setTimeout(()=>{var e;t.FormSchema[0].Data[1].value=null===(e=t.EditData.UTILITY_ID)||void 0===e?void 0:e.toString()},1e3);const a=t.StateNames.find(e=>e.ISO_CODE_3==t.EditData.STATE_CODE);t.FormSchema[0].Data[2].value=a.STATE_ID,t.FormSchema[0].Data[3].value=null===(e=t.EditData.WORKCODE_ID)||void 0===e?void 0:e.toString(),t.FormSchema[0].Data[7].value=t.EditData.STATUS_ID},500),t.FormSchema[1].Data[0].value=t.EditData.COMMENT,t.FormSchema[0].Data[4].value=t.$options.filters.formatDate(t.EditData.START_DATE)(t.FormSchema)[0].Data[5].value=t.$options.filters.formatDate(t.EditData.END_DATE))},methods:{GetParentClientGroupNew(){var t=this,e=`pageSize=${t.PageSize}&pageNum=${t.PageNumber}&reqFrom='CUSTOM'&search=${t.searchCondition}&userId=${t.GetUserInfo.ID}`;n["a"].GetParentClientGroupNew(e).then(e=>{t.ClientNameData=t.convertApiTreeToFlatList(e.data.result),t.ClientNameData.forEach((e,a)=>{t.FormSchema[0].Data[0].config.options.push({name:e.CHILD_NAME,value:e.CHILD_USER_ID})}),t.$refs.ResourceRate.UpdateKeyValue()})},convertApiTreeToFlatList(t){let e=[];function a(t){e.push({CHILD_USER_ID:t.parenT_ID,CHILD_NAME:t.parenT_NAME,PARENT_ID:null}),t.children&&t.children.length>0&&t.children.forEach(a=>{e.push({CHILD_USER_ID:a.chilD_USER_ID,CHILD_NAME:a.chilD_NAME,PARENT_ID:t.parenT_ID})})}return t.forEach(t=>a(t)),e},GetUtiltityNames:async function(t,e,a){var i=this;if("client"==t)var s="clientId="+a;else s="clientId="+e.value;await n["a"].GetUtiltityNames(s).then(t=>{t.data.result.length>0&&(i.FormSchema[0].Data[1].config.options=[],i.UtiltityNames=JSON.parse(t.data.result),i.UtiltityNames.forEach((t,e)=>{i.FormSchema[0].Data[1].config.options.push({name:""+t.TEXT,value:""+t.VALUE})}),i.$refs.ResourceRate.UpdateKeyValue(),i.isLoading=!1),i.isLoading=!1})},GetStateListByCountryId:function(){var t=this,e="countryId=223&includeCandaState=true";n["a"].GetStateListByCountryId(e).then(e=>{e.data.result.length>0&&(t.FormSchema[0].Data[1].config.options=[],t.StateNames=e.data.result,t.StateNames.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({name:""+e.STATE_NAME,value:""+e.STATE_ID})}),t.$refs.ResourceRate.UpdateKeyValue(),t.isLoading=!1),t.isLoading=!1})},GetWorkCodes:function(){var t=this;n["a"].GetWorkCodes().then(e=>{e.data.result.length>0&&(t.FormSchema[0].Data[3].config.options=[],t.WorkCodes=e.data.result,t.WorkCodes.forEach((e,a)=>{t.FormSchema[0].Data[3].config.options.push({name:""+e.Text,value:""+e.Value})}),t.$refs.ResourceRate.UpdateKeyValue(),t.isLoading=!1),t.isLoading=!1})},GetStatusList(){var t=this;t.isLoading=!0;try{n["a"].GetClientStatusList().then(e=>{null!=JSON.parse(e.data)&&(t.StatusData=JSON.parse(e.data),t.StatusData.forEach((e,a)=>{t.FormSchema[0].Data[7].config.options.push({name:""+e.STATUS,value:""+e.STATUS_ID})}),t.$refs.ResourceRate.UpdateKeyValue()),t.isLoading=!1})}catch(e){t.isLoading=!1}},onSubmit(t,e){var a=this;a=this;const i=a.$refs.ResourceRate.validateForm.validate();if(i){var s={RateScheduleId:a.EditData.RATE_SCHEDULE_ID>0?a.EditData.RATE_SCHEDULE_ID:0,ClientId:t.Contract,UtilityId:t.UtilityName,WorkCodeId:t.WorkCode,Rate:t.Rate,StartDate:t.StartDate,EndDate:t.EndDate,State:t.State,Comment:t.Comment,Notes:t.Comment,StatusId:t.Status,BCode:t.CustomerWorkCode},l=JSON.stringify(s);encodeURIComponent(l);n["a"].AddUpdateRate(l).then(t=>{if(null!=t.data){const e=JSON.parse(t.data)[0];1===parseInt(e.RESULT)?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("RateSchedule")]),"success",!0,a.$t("Alert")),a.Close()):2==e.Success?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("RateSchedule")]),"Success",!0,a.$t("Alert")),a.Close()):0==e.Success&&"EXISTS"==e.Error?a.ShowAlert(a.$t("AlreadyExists",[a.$t("RateSchedule")]),"warning",!0,a.$t("Alert")):a.ShowAlert(a.$t("UnknownError"),"failure",a.$t("Alert"))}})}},Close:function(){this.$parent.FetchData(),this.$parent.isShowAddRate=!1}}},d=r,c=a("0c7c"),u=Object(c["a"])(d,l,o,!1,null,null,null),h=u.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Update")))]),a("span",{staticClass:"user-guide"},[a("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[a("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),a("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[a("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[a("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgHiringAddDepartment"))}})])])]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"ResourceRate",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.MandatoryString},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},m=[],D={props:{EditData:{type:Array,required:!1}},data(){return{isLoading:!1,MandatoryString:"Fields marked with an asterisk (*) are mandatory.",companyId:null,userId:null,PageSize:100,PageNumber:1,searchCondition:"",GroupNewData:[],UtiltityNames:[],StateNames:[],WorkCodes:[],StatusData:[],FormSchema:[{layoutType:"four",Data:[{astype:"toggleField",label:this.$t("Want to Update Rate"),name:"isvisible",value:"",placeholder:"",config:{onChange:this.RateRadion},visibility:!0},{astype:"NumericField",label:this.$t("Rate"),name:"Rate",value:"",placeholder:this.$t("Enter Rate"),validationRules:{required:!0},config:{options:[]},visibility:!0,disabled:!0},{astype:"toggleField",label:this.$t("Want to Update End Date"),name:"isvisible",value:"",placeholder:"",config:{onChange:this.RadionEnddate},visibility:!0},{astype:"DateField",label:this.$t("End Date (M/D/YYYY)"),name:"EndDate",value:new Date,visibility:!0,placeholder:this.$t("EndDate"),config:{format:"MM/DD/YYYY"},validationRules:{required:!0},visibility:!0,disabled:!0}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Update",isVisible:!0},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;t.userId=t.GetUserInfo.ID,t.companyId=t.GetUserInfo.CompanyId},methods:{RateRadion(t){const e=this;e.FormSchema[0].Data[1].disabled=!t,t?e.EditData.length>0&&(e.FormSchema[0].Data[1].value=e.EditData[0].AMOUNT||""):e.FormSchema[0].Data[1].value=""},RadionEnddate(t){const e=this;e.FormSchema[0].Data[3].disabled=!t,t?e.EditData.length>0&&(e.FormSchema[0].Data[3].value=e.$options.filters.formatDate(e.EditData[0].END_DATE)):e.FormSchema[0].Data[3].value=""},onSubmit(t,e){var a=this;a=this;const i=a.$refs.ResourceRate.validateForm.validate();if(i){var s={RateScheduleId:a.EditData.map(t=>t.RATE_SCHEDULE_ID).join(","),ClientId:a.EditData.length>0&&a.EditData[0].CLIENT_ID>0?a.EditData[0].CLIENT_ID:0,Rate:t.Rate,EndDate:t.EndDate},l=JSON.stringify(s);encodeURIComponent(l);n["a"].BulkUpdateRate(l).then(t=>{if(null!=t.data){const e=JSON.parse(t.data)[0];1===parseInt(e.RESULT)?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("RateSchedule")]),"success",!0,a.$t("Alert")),a.Close()):a.ShowAlert(a.$t("UnknownError"),"failure",a.$t("Alert"))}})}},Close:function(){this.$parent.FetchData(),this.$parent.isBulkUpdateRate=!1}}},p=D,E=Object(c["a"])(p,S,m,!1,null,null,null),C=E.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Update")))]),a("span",{staticClass:"user-guide"},[a("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[a("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),a("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[a("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[a("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgHiringAddDepartment"))}})])])]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"ResourceRate",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.MandatoryString},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},A=[],v={props:{EditData:{type:Array,required:!1}},data(){return{isLoading:!1,MandatoryString:"Fields marked with an asterisk (*) are mandatory.",companyId:null,userId:null,PageSize:100,PageNumber:1,searchCondition:"",GroupNewData:[],UtiltityNames:[],StateNames:[],WorkCodes:[],StatusData:[],FormSchema:[{layoutType:"double",Data:[{astype:"DateField",label:this.$t("Start Date (M/D/YYYY)"),name:"StartDate",value:new Date,visibility:!0,placeholder:this.$t("StartDate"),config:{format:"MM/DD/YYYY"},validationRules:{required:!0},visibility:!0,disabled:!1},{astype:"DateField",label:this.$t("End Date (M/D/YYYY)"),name:"EndDate",value:new Date,visibility:!0,placeholder:this.$t("EndDate"),config:{format:"MM/DD/YYYY"},validationRules:{required:!0},visibility:!0,disabled:!1},{astype:"RadioField",label:this.$t("previous records End Date will be updated as"),name:"PreviousRecords",visibility:!0,disabled:!1,value:"",config:{options:[{value:"1",name:"One Time"}]}},{astype:"RadioField",label:this.$t("Do you want to mark previous Records as Inactive?"),name:"RecordsInactive",visibility:!0,disabled:!1,value:"",config:{options:[{value:"1",name:"One Time"}]}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",placeholder:this.$t("Enter Comment"),validationRules:{}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Set New Dates",isVisible:!0}]}},created:async function(){var t=this;t.userId=t.GetUserInfo.ID,t.companyId=t.GetUserInfo.CompanyId},methods:{onSubmit(t,e){var a=this;a=this;const i=a.$refs.ResourceRate.validateForm.validate();if(i){var s={RateScheduleId:a.EditData.map(t=>t.RATE_SCHEDULE_ID).join(","),ClientId:a.EditData.length>0&&a.EditData[0].CLIENT_ID>0?a.EditData[0].CLIENT_ID:0,StartDate:t.StartDate,EndDate:t.EndDate,Comment:t.Comment},l=JSON.stringify(s);encodeURIComponent(l);n["a"].BulkUpdateRate(l).then(t=>{if(null!=t.data){const e=JSON.parse(t.data)[0];1===parseInt(e.RESULT)?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("RateSchedule")]),"success",!0,a.$t("Alert")),a.Close()):a.ShowAlert(a.$t("UnknownError"),"failure",a.$t("Alert"))}})}},Close:function(){this.$parent.FetchData(),this.$parent.isCopyRate=!1}}},R=v,I=Object(c["a"])(R,f,A,!1,null,null,null),_=I.exports;let g=[{title:"Inactive",iconClass:"fa fa-close",callbackfunction:"Inactive",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"",isEnabledOnSelectedRow:!0},{title:"Add Rate Schedule",iconClass:"fa-plus",callbackfunction:"AddRateSchedule",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:""},{title:"Update",iconClass:"fa fa-pencil",callbackfunction:"Update",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:""},{title:"Copy Rate",iconClass:"fa fa-files-o",callbackfunction:"CopyRate",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:""},{title:"Export To Excel",iconClass:"fa fa-file-excel-o",callbackfunction:"ExportToExcel",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:""},{title:"View History",iconClass:"fa fa-eye",callbackfunction:"ViewHistory",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:""},{title:"Remove",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"DeleteMultiple",isEnabledOnSelectedRow:!0}],b=[{fieldName:"Client",fieldType:"ddl-multilevel",fieldIcon:"fa-user",fieldSearchConditionName:["RATE_SCH.client_id"],isSearch:!1,value:null,listOptions:[]},{fieldName:"WORKCODE",fieldType:"ddl-check",fieldIcon:"fa fa-circle-o-notch",fieldSearchConditionName:["RATE_SCH.workcode"],isSearch:!1,value:"",listOptions:[]},{fieldName:"STATE",fieldType:"ddl-check",fieldIcon:"fa fa-map-marker",fieldSearchConditionName:["RATE_SCH.state"],isSearch:!1,value:"",listOptions:[]},{fieldName:"UTILITY NAME",fieldType:"text",fieldIcon:"fa fa-user",fieldSearchConditionName:["INFO.company_name"],isSearch:!1,value:"",listOptions:[]}],y=[{title:"Edit",callbackfunction:"Edit",href:"javascript:void(0)",icon:"fa fa-pencil text-success action-icon",additionalSpan:"",isvisible:!0,isdisabled:!1}];function T(t,e){var a=t;if("Client"==e){var i=`pageSize=${a.PageSize}&pageNum=${a.PageNumber}&reqFrom='CUSTOM'&search=${a.searchCondition}&userId=${a.GetUserInfo.ID}`;n["a"].GetParentClientGroupNew(i).then(t=>{ClientNameData.length>0&&(a.leftSearchFields[0].listOptions=[],ClientNameData.forEach(t=>{let e={value:""+t.CHILD_USER_ID,name:t.CHILD_NAME};a.leftSearchFields[0].listOptions.push(e)}))})}"WORKCODE"==e&&n["a"].GetWorkCodes().then(t=>{t.data.result.length>0&&(a.leftSearchFields[1].listOptions=[],t.data.result.forEach(t=>{let e={value:""+t.Value,name:t.Text};a.leftSearchFields[1].listOptions.push(e)}))}),"STATE"==e&&n["a"].GetStateListByCountryId(i).then(t=>{if(t.data.result.length>0){a.leftSearchFields[2].listOptions=[];const e=t.data.result;e.forEach(t=>{let e={value:""+t.STATE_ID,name:t.STATE_NAME};a.leftSearchFields[2].listOptions.push(e)})}})}var N={buttons:g,leftsearchSchema:b,listActions:y,bindleftCommonSearchdropdown:T},L=a("25ca"),U={components:{AddRate:h,BulkUpdateRate:C,Copy:_},data(){return{isLoading:!1,Headers:[{COLUMN_NAME:"CLIENT_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Client",DISPLAY_ORDER:1},{COLUMN_NAME:"WORK_CODE",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Code",DISPLAY_ORDER:2},{COLUMN_NAME:"UTILITY_NAME",DATA_TYPE:"Date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Utility Name",DISPLAY_ORDER:3},{COLUMN_NAME:"STATE_NAME",DATA_TYPE:"Date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"State",DISPLAY_ORDER:4,settings:{isInSlot:!1}},{COLUMN_NAME:"Billing_Code",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Customer Work Code",DISPLAY_ORDER:5},{COLUMN_NAME:"AMOUNT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Rate",DISPLAY_ORDER:6},{COLUMN_NAME:"STATUS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:7,settings:{isInSlot:!0}},{COLUMN_NAME:"START_DATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Start Date",DISPLAY_ORDER:8},{COLUMN_NAME:"END_DATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"End Date",DISPLAY_ORDER:9},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created AT",DISPLAY_ORDER:10,settings:{isInSlot:!0}},{COLUMN_NAME:"CREATED_BY",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created By",DISPLAY_ORDER:11},{COLUMN_NAME:"MODIFIED_BY",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Modified By",DISPLAY_ORDER:12},{COLUMN_NAME:"MODIFIED_AT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Modified Date",DISPLAY_ORDER:13,settings:{isInSlot:!0}}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",TotalRecords:0,CurrentPage:1,TotalPages:0,noRecords:!1,searchCondition:"",RateScheduleData:[],listheaderbuttons:N.buttons,listActions:N.listActions,leftSearchFields:N.leftsearchSchema,CompanyId:null,UserId:null,searchBy:"",search:"",isShowAddRate:!1,isBulkUpdateRate:!1,isCopyRate:!1,EditData:[],clientId:""}},created:async function(){var t=this;t.CompanyId=this.GetUserInfo.CompanyId,t.UserId=this.GetUserInfo.ID,await t.FetchData(),N.bindleftCommonSearchdropdown(this,"Client"),N.bindleftCommonSearchdropdown(this,"WORKCODE"),N.bindleftCommonSearchdropdown(this,"STATE")},methods:{actionButtonClick:function(t,e){switch(t){case"Edit":this.EditAddRate(e.RATE_SCHEDULE_ID);break}},leftCommonSearch:function(t){if(this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition)if(""!=t.searchConditionJson){const e=t.searchConditionJson.split("=")[1];this.fav=e}else this.searchCondition=t.searchCondition;else this.searchCondition="";this.FetchData()},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"Inactive":this.UpdataStatus(1002,"");break;case"AddRateSchedule":this.AddRateSchedule();break;case"Update":this.BulkUpdateRate();break;case"CopyRate":this.CopyRate();break;case"ExportToExcel":this.ExportToExcel();break;case"ViewHistory":this.ViewHistory();break;case"commonDeleteData":this.commonDeleteData();break}},CopyRate(){var t=this;t.EditData=[],t.isCopyRate=!0},BulkUpdateRate(){var t=this,e="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((async function(){e.length>0&&(e+=","),e+=$(this).val()}));let a=e.split(",").map(Number);e.length>0?(t.EditData=t.RateScheduleData.filter(t=>a.includes(t.RATE_SCHEDULE_ID)),t.isBulkUpdateRate=!0):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"failure",!0,t.$t("Alert"))},AddRateSchedule(){var t=this;t.EditData=[],t.isShowAddRate=!0},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.FetchData()},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Edit":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)}),a},FetchData:async function(){var t=this,e="";t.isLoading=!0;e=`clientId=${t.clientId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageNum=${t.PageNumber}&pageSize=${t.PageSize}&Search=${t.searchCondition}&userDate=${Date.now()}`;await n["a"].GetRateSechduleList(e).then(e=>{e.data.result.length>0?(t.isLoading=!1,t.RateScheduleData=JSON.parse(e.data.result),t.TotalRecords=t.RateScheduleData[0].TOTAL_RECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecords=!1):(t.RateScheduleData=[],t.noRecords=!0,t.TotalRecords=0,t.isLoading=!1)})},UpdataStatus(t,e){var a=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),a.confirmR(a.$t("AreYouSureToUpdateStatus"),!0,!1,(function(s){var l={ID:i||e,StatusId:t,IsFor:"TALYGEN_BE_RATE_SCHEDULE",Module:"RateSchedule",Submodule:"Rate Schedule"},o=JSON.stringify(l);n["a"].CommonUpdateStatus(o).then(async t=>{200==t.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),a.listheaderbuttons[1].isdisabled=!0,a.listheaderbuttons[2].isdisabled=!0,a.listheaderbuttons[3].isdisabled=!0,a.ShowAlert(a.$t("RecordUpdatedSuccessfully"),"success",!0,a.$t("Alert")),a.RuleFlagListing())})}))},commonDeleteData:function(t){var e=this,a="";e.isLoading=!0,null==t?$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a=t,null!=a?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("RateSchedule"),(function(){var t=`ids=${a}&tablename=TALYGEN_BE_RATE_SCHEDULE&primaryKey=RATE_SCHEDULE_ID`;n["a"].Delete(t).then((function(t){200==t.status?(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("RateSchedule")]),"success",!0,e.$t("Alert")),e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("RateSchedule")]),"Success",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete")),e.isLoading=!1},EditAddRate(t){var e=this;e.EditData=e.RateScheduleData.find(e=>e.RATE_SCHEDULE_ID===t),e.isShowAddRate=!0},ViewHistory(){this.$router.push({path:"/RateSchedule/RateScheduleHistory"})},async ExportToExcel(){var t=this;t.isLoading=!0,t.PageSize=t.TotalRecords,await t.FetchData(),t.PageSize=10;var e={"Client Name":"","Rate Schdule Id":"","Work Code":"","Utility Name":"",Rate:"",State:""},a=[];try{var i=t.RateScheduleData;i.forEach((function(t){var i=Object.assign({},e);i["Client Name"]=t.CLIENT_NAME||"",i["Rate Schdule Id"]=t.RATE_SCHEDULE_ID||"",i["Work Code"]=t.WORK_CODE||"",i["Utility Name"]=t.UTILITY_NAME||"",i["Rate"]=t.AMOUNT||"",i["State"]=t.STATE_NAME||"",a.push(i)}))}catch(s){console.error("Invalid JSON string in GetExcelListing:",s)}if(a.length>0){const t=L["a"].json_to_sheet([]),e=L["a"].book_new(),i=(new Date).toLocaleString("en-US"),s=[["RateSchedule Report","","","",i]];L["a"].sheet_add_aoa(t,s,{origin:"A1"}),t["!merges"]=[{s:{r:0,c:0},e:{r:0,c:3}}],t["A1"].s={font:{bold:!0,size:20,color:{rgb:"000000"}},alignment:{horizontal:"left"}},t["E1"].s={font:{bold:!0,size:20,color:{rgb:"000000"}},alignment:{horizontal:"right"}};const l=Object.keys(a[0]);L["a"].sheet_add_aoa(t,[l],{origin:"A2"}),L["a"].sheet_add_json(t,a,{origin:"A3",skipHeader:!0});const o=L["a"].decode_range(t["!ref"]);for(let a=o.s.c;a<=o.e.c;++a){const e=L["a"].encode_cell({c:a,r:1});t[e]&&(t[e].s={font:{bold:!0,size:18,color:{rgb:"000000"}},fill:{fgColor:{rgb:"D3D3D3"}},alignment:{horizontal:"center"}})}const n=l.map(t=>({wpx:Math.max(10*t.length,...a.map(e=>10*(e[t]||"").toString().length))}));t["!cols"]=n,L["a"].book_append_sheet(e,t,"RateSchedule List"),L["b"](e,"RateSchedule-List.xlsx")}else console.error("No data available to export");t.isLoading=!1}}},k=U,M=Object(c["a"])(k,i,s,!1,null,null,null);e["default"]=M.exports}}]);
//# sourceMappingURL=chunk-2d0c4c50.js.map