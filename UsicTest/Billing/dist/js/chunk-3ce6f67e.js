(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ce6f67e"],{"0447":function(e,t,i){"use strict";i("f165")},"05c4":function(e,t,i){"use strict";i("b47a")},"1d91":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("input",{attrs:{type:"hidden"},domProps:{value:e.showFromInvoice}}),i("input",{attrs:{type:"hidden"},domProps:{value:e.showHistory}}),e.flowData.length>0?i("div",[i("RBillingFlowChart",{attrs:{data:e.flowData,"chart-id":"RflowChartNew","chart-class":"outer"}})],1):i("div",{staticClass:"text-danger text-center",staticStyle:{"padding-top":"50%"}},[e._v("No Data Found")])])},s=[],o=i("4206"),l=i("9769"),n={name:"FlowChartWrapper",components:{RBillingFlowChart:o["a"]},props:{configurationId:{type:[String,Number],required:!1}},data(){return{flowData:[],showHistory:0,showFromInvoice:"1"}},created:async function(){var e=this;"1"===e.showFromInvoice&&e.fetchFlowData(e.configurationId,e.showHistory)},methods:{fetchFlowData:async function(e,t="0"){var i="configId="+e+"&clientId=&includeParentNode=true&showHistory="+t;const a=await l["a"].ShowFlowchartNew(i);a&&a.data&&a.data.length>0&&(this.flowData=a.data)}}},r=n,c=(i("2602"),i("0c7c")),d=Object(c["a"])(r,a,s,!1,null,"5ac33973",null);t["a"]=d.exports},2602:function(e,t,i){"use strict";i("e398")},"2b19":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".fc_parentchild li p.shape_oval.shape_ovalnew{height:auto!important;padding:10px}p.shape_oval.shape_ovalnew table th{font-size:13px;font-weight:600}p.shape_oval.shape_ovalnew table td{font-size:12px;font-weight:400;padding:0;line-height:8px}",""]),e.exports=t},"2d10":function(e,t,i){"use strict";i("cabf")},"30a3":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".my-popups .modal-dialog[data-v-bb51e944]{max-width:90%}.bg-f5f5f5[data-v-bb51e944]{background-color:#f5f5f5}.thead-bg[data-v-bb51e944]{background-color:#f8f9fa}.text-danger[data-v-bb51e944]{color:#dc3545!important}",""]),e.exports=t},"371d":function(e,t,i){var a=i("91a3");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("beaf3a60",a,!0,{sourceMap:!1,shadowMode:!1})},"41dc":function(e,t,i){var a=i("d711");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("7c07af58",a,!0,{sourceMap:!1,shadowMode:!1})},4206:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"chartContainer",class:e.chartClass,attrs:{id:e.chartId}})},s=[],o=(i("8560"),{name:"RBillingFlowChart",props:{data:{type:Array,required:!0},chartId:{type:String,default:"BillingFlowChart"},chartClass:{type:String,default:"RBillingflowChart"}},data(){return{globalServiceText:1}},mounted(){this.buildFlowChart()},methods:{buildFlowChart(){const e=this.$refs.chartContainer;e.innerHTML="";const t=document.createElement("ul");t.className="fc_parentchild";const i=document.createElement("li");i.className="arrowdown";const a=this.buildNodeStructure(null,0);i.appendChild(a),t.appendChild(i);const s=[...this.data].sort(this.naturalSort);s.forEach(e=>{const i=document.createElement("li"),a=document.createElement("ul");e.nodeName&&-1!==e.nodeName.indexOf(".")?a.className="fc_subchild":i.className="arrowdown";const s=this.buildNodeStructure(e,e.displayOrder||0);if(i.appendChild(s),e.isLeafNode&&!e.isAddOn||e.isAddOn){const t=this.buildFlowChartRightNew(e);i.appendChild(t)}t.appendChild(i)}),e.appendChild(t),this.adjustWidth(e)},naturalSort(e,t){const i=(e.nodeName||"").split(".").map(Number),a=(t.nodeName||"").split(".").map(Number),s=Math.max(i.length,a.length);for(let o=0;o<s;o++){const e=i[o]||0,t=a[o]||0;if(e!==t)return e-t}return 0},buildNodeStructure(e,t){const i=document.createElement("p");i.className=t<=0?"shape_oval":"shape_polygan";const a=document.createElement("span");var s;if(a.style.fontWeight="700",a.style.marginTop=t<=0?"25px":"0px",!e||!e.serviceName)return a.textContent=(null===(s=this.$t)||void 0===s?void 0:s.call(this,"Start"))||"Start",i.appendChild(a),i;let o=e.serviceName||"";var l,n;o.includes("~GLOBAL~")?o=o.replace(/~NODENAME~/g,(null===(l=this.$t)||void 0===l?void 0:l.call(this,"GlobalService"))||"GlobalService").replace(/~GLOBAL~/g,String(this.globalServiceText++)):o=o.replace(/~NODENAME~/g,(null===(n=this.$t)||void 0===n?void 0:n.call(this,"NodeName"))||"NodeName");const r=o.split("AND");return r.forEach((e,t)=>{if(t>0){const e=document.createElement("span");e.textContent="And",e.style.fontWeight=400,i.appendChild(e)}const a=document.createElement("span");a.textContent=e.trim(),a.title=e.trim(),a.style.fontWeight="bold",i.appendChild(a)}),i},buildFlowChartRightNew(e){const t=document.createElement("ul");t.className="fc_subchild";const i=(t,i="&nbsp;",a="")=>{const s=document.createElement("li");s.className="arrowright";const o=document.createElement("p");null==e.addOnType||""==e.addOnType?o.className="shape_oval":o.className="shape_oval shape_ovalnew",a&&o.classList.add(a),""!==a&&null==t&&(t="Flag");const l=document.createElement("span");l.className="textbetweenline",l.innerHTML=i;const n=document.createElement("span");return n.style.marginTop="25px",n.style.fontWeight="bold",n.innerHTML=t,o.appendChild(l),null!=e.addOnType&&""!=e.addOnType||o.appendChild(n),s.appendChild(o),s},a=e=>{if(e.isLimit){const t=e.limit||0,i=e.dayLimit||0;if(t>0&&i>0)return`Limit: ${t}<br/>Days: ${i}`;if(t>0)return"Limit: "+t;if(i>0)return"Days: "+i}return"&nbsp;"},s=this.getFlagClass(e.clientServiceFlag);if("C"===e.addOnType&&e.isLeafNode&&e.isAddOn){const o=i(e.addonWorkCode||e.workCodeName,a(e),s);t.appendChild(o)}if("C"!==e.addOnType){let o=null,l=null;if(null!=e.addonDetail){o=document.createElement("table"),o.className="slab-table";const t=document.createElement("thead"),i=document.createElement("tr");["From","To","Rate Code"].forEach(e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)}),t.appendChild(i),o.appendChild(t),l=document.createElement("tbody"),o.appendChild(l);let a=[];try{a=JSON.parse(e.addonDetail)}catch(n){console.error("Invalid addonDetail JSON",n),a=[]}a.forEach(e=>{const t=e&&e.hasOwnProperty("addon_to_value")&&null!==e.addon_to_value?e.addon_to_value:"∞",i=e.work_code,a=document.createElement("tr"),s=document.createElement("td");s.textContent=e.addon_from_value,a.appendChild(s);const o=document.createElement("td");o.textContent=t,a.appendChild(o);const n=document.createElement("td"),r=document.createElement("span");r.className="slab-label",r.textContent=i,n.appendChild(r),a.appendChild(n),l.appendChild(a)})}const r=i(e.addonWorkCode||e.workCodeName,a(e),s);o&&r.querySelector("p").appendChild(o),t.appendChild(r)}const o=e.isAddOn?e.addonWorkCodeId:e.workCodeId,l=(e.billingLimitWorkCode||[]).find(e=>e.workCodeId===o);return l&&this.buildFlowChartChild(t,l,e.billingLimitWorkCode,o),t},buildFlowChartChild(e,t,i,a){if(!t)return;const s=document.createElement("p");s.className="shape_oval";const o=document.createElement("span");o.className="textbetweenline",t.limit>0&&t.daysLimit>0?o.innerHTML=`Limit: ${t.limit}<br/>Days: ${t.daysLimit}`:t.limit>0?o.innerHTML="Limit: "+t.limit:t.daysLimit>0?o.innerHTML="Days: "+t.daysLimit:o.innerHTML="&nbsp;";const l=document.createElement("span");l.style.marginTop="25px",l.style.fontWeight="bold",l.textContent=t.alternateWorkCode,s.appendChild(o),s.appendChild(l);const n=document.createElement("li");n.className="arrowright",n.appendChild(s),e.appendChild(n);const r=i.find(e=>e.workCodeId===t.alternateWorkCodeId);r&&r.workCodeId!==a&&this.buildFlowChartChild(e,r,i,t.alternateWorkCodeId)},getFlagClass(e){switch(String(e||"").trim()){case"R":return"oval_red";case"G":return"oval_green";case"Y":return"oval_yellow";default:return""}},adjustWidth(e){const t=Array.from(e.querySelectorAll("ul.fc_subchild")).map(e=>e.querySelectorAll("li.arrowright").length),i=Math.max(...t,4);e.style.width=Math.max(window.innerWidth-100,350*i)+"px"}}}),l=o,n=(i("45a0"),i("0c7c")),r=Object(n["a"])(l,a,s,!1,null,null,null);t["a"]=r.exports},"42c0":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"#RflowChartNew[data-v-5ac33973]{width:unset!important}",""]),e.exports=t},"45a0":function(e,t,i){"use strict";i("c016")},"54ba":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".textalignright[data-v-1de5fea2]{text-align:right}.paddingright5[data-v-1de5fea2]{padding-right:5px}.partition[data-v-1de5fea2]{display:none!important}",""]),e.exports=t},5616:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'.outer{float:left;width:100%;box-sizing:border-box;background:#fff;padding:50px}.outer .container{float:left;text-align:center;list-style-type:none;position:relative;padding:20px 5px 0 5px;transition:all .5s;-webkit-transition:all .5s;-moz-transition:all .5s}.outer .container:after,.outer .container:before{content:"";position:absolute;top:0;right:50%;border-top:1px solid #000;width:50%;height:20px}.outer .container:after{right:auto;left:50%;border-left:1px solid #000}.outer .container:only-child:after,.outer .container:only-child:before{display:none}.outer .container:only-child{padding-top:0}.outer .container:first-child:before,.outer .container:last-child:after{border:0 none}.outer .container:last-child:before{border-right:1px solid #000}.outer .maintree .maintree:before{content:"";position:absolute;top:0;left:50%;border-left:1px solid #000;width:0;height:32px}*,.fc_parentchild{margin:0;padding:0}.fc_parentchild{width:100%;float:left;height:auto}.fc_parentchild li{width:auto;float:left;height:auto;display:flex;clear:both;margin-bottom:60px;position:relative;align-content:center;align-items:center}.fc_parentchild li p.shape_oval{background-color:#d9c8b8;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/oval_default.png);border:none;border-radius:36px/62px;height:70px;list-style:outside none none;margin:0 31px 0 75px;width:120px;border-radius:0}.fc_parentchild li p.shape_oval,.fc_parentchild li p.shape_polygan{color:rgba(0,0,0,.8);background-repeat:no-repeat;background-size:100% 100%;background-position:50%;position:relative;text-align:center;vertical-align:middle;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;display:inline-block}.fc_parentchild li p.shape_polygan{background-color:#badefc;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/fc_diamond.png);border:none;z-index:100;border-radius:0;min-height:110px;list-style:none;margin:0 0 0 10px;width:250px;padding:20px 50px}.fc_parentchild li:last-child p:before{border:none!important}.fc_parentchild li p{float:left}.fc_parentchild li p span{display:block;line-height:20px;overflow:hidden;text-overflow:ellipsis;width:100%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;font-size:12px}.fc_subchild li p img{left:50%;margin-left:-12px;position:absolute;top:-35px}.fc_subchild li p.hoctagon{background-color:#c7d6d5;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/hoctagen.png);background-repeat:no-repeat;background-position:top;color:#000;height:76px;margin:0;padding-top:24px;position:relative;width:188px;background-size:100% auto}.fc_subchild li p.hoctagon span{display:block;padding:0 10px;text-align:center}.fc_subchild li p.shape_oval span{display:inline-block;padding:0 10px;text-align:center}.textbetweenline{color:#2a2a2a;font-size:12px!important;left:-50px;line-height:14px!important;margin:0;padding:0!important;position:absolute;text-align:left!important;top:0;width:auto;font-weight:400}.fc_parentchild li.arrowdown:last-child:after{border-left:6px solid transparent}.fc_subchild li.arrowright.Dparent:after{top:40%}.imgdownarrow{left:129px;position:absolute;top:110px;z-index:100}.fc_parentchild li.arrowdown{margin-bottom:0;padding-bottom:60px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/FlowChart_DownArrow.png);background-repeat:no-repeat;background-position:129px bottom}.fc_parentchild li.arrowdown:last-child{background:none}.fc_subchild{float:left;margin-left:0}.fc_subchild li{clear:none;float:left;margin:19px 0;padding-left:60px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/FlowChart_RightArrow.png);background-position:0}.fc_subchild li,.fc_subchild li p.shape_oval{display:inline-block;background-repeat:no-repeat}.fc_subchild li p.shape_oval{background-color:#ffe0a4;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/billingRule/oval_default.png);background-size:100% 100%;background-position:50%;border:none;border-radius:36px/62px;height:70px;position:relative;list-style:outside none none;margin:0;text-align:center;vertical-align:middle;width:auto;min-width:120px;border-radius:0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.fc_subchild li p.shape_oval.oval_red{background-color:#d02828}.fc_subchild li p.shape_oval.oval_yellow{background-color:#ffc107}.fc_subchild li p.shape_oval.oval_green{background-color:#28a745}.buttonsdlt{display:initial;float:right;padding-right:5px}a.nodetablecollapse i{padding:0 2px!important}',""]),e.exports=t},"5b69":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".textalignright[data-v-0cb7f220]{text-align:right}.paddingright5[data-v-0cb7f220]{padding-right:5px}.partition[data-v-0cb7f220]{display:none!important}",""]),e.exports=t},"5ce5":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".textalignright[data-v-cb0b8504]{text-align:right}.paddingright5[data-v-cb0b8504]{padding-right:5px}",""]),e.exports=t},"5fd7":function(e,t,i){"use strict";i("d594")},6539:function(e,t,i){var a=i("ff69");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("d3f7d9da",a,!0,{sourceMap:!1,shadowMode:!1})},"6c4c":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".my-popups .modal-dialog[data-v-4b2989cc]{max-width:95%}",""]),e.exports=t},7206:function(e,t,i){"use strict";i("371d")},8560:function(e,t,i){var a=i("5616");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("13a2cced",a,!0,{sourceMap:!1,shadowMode:!1})},"8c39":function(e,t,i){"use strict";i("ac0b")},"90e9":function(e,t,i){var a=i("54ba");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("1939c5ab",a,!0,{sourceMap:!1,shadowMode:!1})},"91a3":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".searchable-select[data-v-719e3da8]{width:100%}",""]),e.exports=t},"9ec5":function(e,t,i){"use strict";i("90e9")},a28a:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".textalignright[data-v-17984c0a]{text-align:right}.paddingright5[data-v-17984c0a]{padding-right:5px}",""]),e.exports=t},ac0b:function(e,t,i){var a=i("de6b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("efe8ea20",a,!0,{sourceMap:!1,shadowMode:!1})},b47a:function(e,t,i){var a=i("a28a");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("630727ae",a,!0,{sourceMap:!1,shadowMode:!1})},b587:function(e,t,i){"use strict";i("6539")},b91c:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("div",{staticClass:"modal my-popups right fade show d-block"},[i("div",{staticClass:"modal-dialog modal-dialog-right"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header mheader-user"},[i("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),i("h4",{staticClass:"modal-title"},[e._v(e._s(e.modelDetail.RULE_NAME?e.modelDetail.RULE_NAME:e.modelDetail.BILLING_RULE_NAME)+" ")])]),i("div",{staticClass:"modal-body p-0"},[e.modelDetail.CONFIGURATION_ID?i("div",{staticClass:"tab-content",staticStyle:{"overflow-x":"hidden",height:"800px","max-height":"800px"}},[i("FlowChartWrapper",{attrs:{configurationId:e.modelDetail.CONFIGURATION_ID.toString()}})],1):e._e()])])])])])},s=[],o=i("1d91"),l={components:{FlowChartWrapper:o["a"]},props:{modelDetail:{type:[Object,Array],required:!0}},data(){return{configId:""}},created(){var e;this.configId=(null===(e=this.modelDetail.CONFIGURATION_ID)||void 0===e?void 0:e.toString())||""},methods:{close(){this.$parent.modelopen=!1}}},n=l,r=i("0c7c"),c=Object(r["a"])(n,a,s,!1,null,"3846242c",null);t["a"]=c.exports},bb21:function(e,t,i){"use strict";i("c5d1")},c016:function(e,t,i){var a=i("2b19");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("a2889e42",a,!0,{sourceMap:!1,shadowMode:!1})},c5d1:function(e,t,i){var a=i("6c4c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("115fc806",a,!0,{sourceMap:!1,shadowMode:!1})},ca80:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"main-content"},[i("loader",{attrs:{"is-visible":e.isLoading}}),i("div",{staticClass:"padding-t_10 p-0",attrs:{id:"reportstabsdata"}},[i("div",{staticClass:"left-menu-tab mt-2"},[i("div",{staticClass:"col-md-12 p-0"},[i("div",{staticClass:"theme-primary partition"},[i("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("Billing")))])])]),i("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab nav-tabs"},e._l(e.tabsWithLocalization,(function(t){return i("li",{key:t.id,class:{"nav-item":!0,active:e.currentTab&&e.currentTab.id===t.id},on:{click:function(i){return e.changeTab(t)}}},[i("span",{class:{"nav-link left-menu":!0,active:e.currentTab&&e.currentTab.id===t.id}},[i("i",{staticClass:"p-1",class:t.icon}),e._v(" "+e._s(t.displayName)+" ")])])})),0)]),i("div",{staticClass:"right-content"},[i("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[e._m(0),e.currentTab?i("div",{staticClass:"col-md-12 p-0"},[1===e.currentTab.id?i("FlagRecords"):e._e(),2===e.currentTab.id?i("BilledUnbilledRecords"):e._e(),3===e.currentTab.id?i("BulkMove"):e._e(),4===e.currentTab.id?i("BulkMoveAdvance"):e._e(),5===e.currentTab.id?i("TicketLog"):e._e(),6===e.currentTab.id?i("UnprocessedRecords"):e._e(),7===e.currentTab.id?i("PreviewInvoice"):e._e()],1):e._e()])])])],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"expand-list"},[i("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[i("i",{staticClass:"icon-solid arrow-solid-left text-white",staticStyle:{"font-size":"9pt"}})])])}],o=(i("14d9"),i("4892")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("loader",{attrs:{"is-visible":e.isLoading}}),i("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!0,ModuleName:"BillingValidationData",SubModuleCode:"FlagRecords",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("FlagRecords"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchFlagRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["FLAG_REASON"==a.column.COLUMN_NAME?[i("span",{class:e.getFlagClass(a.row.FLAG),attrs:{title:a.row.FLAG_REASON}},[e._v(" "+e._s(a.row.FLAG_REASON)+" ")])]:e._e(),"TRANSMIT_DATE"==a.column.COLUMN_NAME?[a.row.TRANSMIT_DATE?i("span",[e._v(" "+e._s(e.formatDate(a.row.TRANSMIT_DATE))+" ")]):e._e()]:e._e(),"WORK_DATE"==a.column.COLUMN_NAME?[a.row.WORK_DATE?i("span",[e._v(" "+e._s(e.formatDate(a.row.WORK_DATE))+" ")]):e._e()]:e._e(),"PROCESS_DATE"==a.column.COLUMN_NAME?[a.row.PROCESS_DATE?i("span",{attrs:{title:a.row.PROCESS_DATE}},[e._v(" "+e._s(e.formatDate(a.row.PROCESS_DATE))+" ")]):i("span",[e._v("--")])]:e._e(),"MINUTES_WORKED"==a.column.COLUMN_NAME?[i("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(a.row.MINUTES_WORKED))])]:e._e(),"FEET_LOCATED"==a.column.COLUMN_NAME?[i("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(a.row.FEET_LOCATED))])]:e._e()]}}])}),e.IsChangeLineItem?i("ManageColumnItems",{attrs:{ColumnIds:e.ColumnIds,reqFrom:e.reqFrom}}):e._e(),e.IsEditException?i("EditException",{attrs:{ColumnIds:e.ColumnIds,ClientId:e.ClientId,IsProcessed:e.IsProcessed,requestFrom:e.requestFrom}}):e._e(),i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),e.IsViewTicket?i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("TicketImage")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"col-md-12"},[e.TicketContent?i("div",{staticClass:"listing"},[i("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.TicketContent)}})]):i("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)])],1)},n=[],r=i("750f");let c=[{title:"Process",iconClass:"fa fa-money",callbackfunction:"Process",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{title:"DoNotBill",iconClass:"fa fa-times",callbackfunction:"DoNotBill",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{title:"Update",iconClass:"fa fa-pencil",callbackfunction:"Update",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{title:"FlagSummary_Report",iconClass:"fa fa-flag",callbackfunction:"FlagSummaryReport",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0}],d=[{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"ClientIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"UtilityName",fieldType:"searchableselect",fieldIcon:"fa fa-building",paramName:"utilityName",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"State",fieldType:"ddl-radio",fieldIcon:"fa fa-map-marker",paramName:"State",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Flag",fieldType:"ddl-radio",fieldIcon:"fa fa-flag",paramName:"serviceId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"TicketNo",fieldType:"text",fieldIcon:"fa fa-ticket",paramName:"ticketNumber",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"CostCenters",fieldType:"ddl-radio",fieldIcon:"fa fa-sitemap",paramName:"costCenterId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"WorkDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"WorkDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"ProcessDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"ProcessDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}}],u=[{COLUMN_NAME:"UTILITY_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"UtilityName",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:2},{COLUMN_NAME:"TICKETTYPE",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketType",DISPLAY_ORDER:3},{COLUMN_NAME:"WORK_DONE_FOR",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkDoneFor",DISPLAY_ORDER:4},{COLUMN_NAME:"FLAG_REASON",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"FlagReason",DISPLAY_ORDER:5,settings:{isInSlot:!0}},{COLUMN_NAME:"TRANSMIT_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TransmitDate",DISPLAY_ORDER:6,settings:{isInSlot:!0}},{COLUMN_NAME:"WORK_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work_Date",DISPLAY_ORDER:7,settings:{isInSlot:!0}},{COLUMN_NAME:"FEEDNAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"feed_name",DISPLAY_ORDER:8},{COLUMN_NAME:"TERM_CODE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TermCode",DISPLAY_ORDER:9},{COLUMN_NAME:"MINUTES_WORKED",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"MinutesWorked",DISPLAY_ORDER:10,settings:{isInSlot:!0}},{COLUMN_NAME:"FEET_LOCATED",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"FeetLocated",DISPLAY_ORDER:11,settings:{isInSlot:!0}},{COLUMN_NAME:"STATUS_CODE",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"StatusCode",DISPLAY_ORDER:12},{COLUMN_NAME:"TYPEOFWORK",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TypeofWork",DISPLAY_ORDER:13},{COLUMN_NAME:"PROCESS_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ProcessedDate",DISPLAY_ORDER:14,settings:{isInSlot:!0}}],m=[{title:"TicketImage",icon:"fa fa-ticket text-primary action-icon",additionalSpan:"",callbackfunction:"ViewTicketImage"},{title:"Edit",icon:"fa fa-pencil text-success text-success action-icon",additionalSpan:"",callbackfunction:"EditRecord"}];async function h(e){var t=e;try{const e="countryId=223&includeCandaState=true",i=await r["a"].GetStateList(e);if(i.data){const e=i.data.map(e=>({name:e.STATE_NAME,value:e.ISO_CODE_3}));t.leftSearchFields.find(e=>"State"===e.fieldName).listOptions=e}}catch(i){console.error("Error loading states:",i)}try{const e=await r["a"].GetFlagType();if(e.data){const i=e.data.map(e=>({name:e.SERVICE_NAME,value:e.SERVICE_ID}));t.leftSearchFields.find(e=>"Flag"===e.fieldName).listOptions=i}}catch(i){console.error("Error loading flags:",i)}try{const e=await r["a"].GetCostCenters();if(e.data){const i=e.data.map(e=>({name:e.TEXT,value:e.VALUE}));t.leftSearchFields.find(e=>"CostCenters"===e.fieldName).listOptions=i}}catch(i){console.error("Error loading cost centers:",i)}}var p={buttons:c,leftsearchSchema:d,headerSchema:u,listActions:m,bindleftCommonSearchdropdown:h},f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"searchable-select"},[i("Autocomplete",{attrs:{value:e.internalValue,"model-value":e.internalValue,items:e.displayItems,"all-items":e.allItems,loading:e.loading,placeholder:e.placeholder,label:e.label,disabled:e.disabled,clearable:e.clearable,density:e.density,variant:e.variant,multiple:e.multiple,"item-title":e.itemTitle,"item-value":e.itemValue,"menu-props":e.menuProps,"no-data-text":e.noDataText,"hide-details":e.hideDetails,"error-messages":e.errorMessages,rules:e.rules,"min-search-length":e.minSearchLength,"max-visible-chips":e.maxVisibleChips,"action-buttons":e.actionButtons,"item-fields":e.itemFields,"group-fields":e.groupFields,"max-render-items":e.maxRenderItems,"lazy-load":e.lazyLoad,"status-field-config":e.statusFieldConfig},on:{input:e.onSelectionChange,"update:model-value":e.onSelectionChange,"update:search":e.onSearch,focus:e.onFocus,blur:e.onBlur,search:e.onSearch}})],1)},g=[],v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"custom-autocomplete mt-3",class:{"is-disabled":e.disabled,"has-error":e.hasError}},[e.label?i("label",{staticClass:"form-label"},[e._v(e._s(e.label))]):e._e(),e.multiple?i("div",{staticClass:"autocomplete-wrapper"},[i("div",{staticClass:"input-group"},[i("div",{staticClass:"form-control autocomplete-chips-container",class:{"is-invalid":e.hasError,"form-control-sm":"compact"===e.density,"form-control-lg":"comfortable"===e.density}},[i("div",{staticClass:"d-flex flex-wrap align-items-center"},[e._l(e.visibleChips,(function(t,a){return[a<e.maxVisibleChipsCount?i("span",{key:e.getItemValue(t),staticClass:"badge badge-primary mr-1 mb-1 pl-2 autocomplete-chip",attrs:{title:e.getChipText(t)}},[i("span",{staticClass:"autocomplete-chip-text",domProps:{innerHTML:e._s(e.getChipText(t))}}),i("button",{staticClass:"close ml-1 autocomplete-chip-close",attrs:{type:"button",tabindex:"-1","aria-label":"Remove "+e.getChipText(t).replace(/<[^>]*>/g,"")},on:{click:function(i){i.stopPropagation(),e.removeItem(e.getItemValue(t))}}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()]})),e.remainingChipsCount>0?i("span",{staticClass:"badge badge-secondary mr-1 mb-1 pl-2 autocomplete-chip autocomplete-chip-more",attrs:{title:e.remainingChipsCount+" more selected"}},[i("span",{staticClass:"autocomplete-chip-text"},[e._v("+ "+e._s(e.remainingChipsCount)+" more")])]):e._e(),i("input",{ref:"input",staticClass:"autocomplete-input-inline",attrs:{type:"text",placeholder:0===e.selectedItems.length?e.placeholder:"",disabled:e.disabled},domProps:{value:e.searchTerm},on:{input:e.onInput,focus:e.onFocus,blur:e.onBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleEnter.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-down",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-up",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.closeMenu.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"backspace",void 0,t.key,void 0)?null:e.handleBackspace.apply(null,arguments)}]}})],2)]),i("div",{staticClass:"input-group-append"},[e.clearable&&e.currentValue&&(!Array.isArray(e.currentValue)||e.currentValue.length>0)?i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",tabindex:"-1"},on:{click:e.clearSelection}},[i("i",{staticClass:"fa fa-times"})]):e._e(),i("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",class:{active:e.isMenuOpen},attrs:{type:"button",tabindex:"-1"},on:{click:e.toggleMenu}},[i("i",{staticClass:"fa",class:e.loading?"fa-spinner fa-spin":"fa-chevron-down"})])])]),e.isMenuOpen?i("div",{ref:"menu",staticClass:"autocomplete-menu",style:{maxHeight:e.menuMaxHeight+"px"},on:{scroll:e.onMenuScroll}},[e.hasActionButtons?i("div",{staticClass:"autocomplete-actions p-2 border-bottom"},[i("div",{staticClass:"d-flex flex-wrap gap-1"},[e.actionButtons.selectAll?i("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button",disabled:e.disabled||e.allSelected},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.selectAll(t)}}},[i("i",{staticClass:"fa fa-check-square mr-1"}),e._v(" Select All ")]):e._e(),e.actionButtons.active?i("button",{staticClass:"btn btn-sm btn-outline-success",class:{active:"active"===e.filterStatus},attrs:{type:"button",disabled:e.disabled},on:{click:function(t){return e.filterByStatus("active")}}},[i("i",{staticClass:"fa fa-check-circle mr-1"}),e._v(" Active ")]):e._e(),e.actionButtons.inactive?i("button",{staticClass:"btn btn-sm btn-outline-secondary",class:{active:"inactive"===e.filterStatus},attrs:{type:"button",disabled:e.disabled},on:{click:function(t){return e.filterByStatus("inactive")}}},[i("i",{staticClass:"fa fa-times-circle mr-1"}),e._v(" Inactive ")]):e._e(),e.actionButtons.clear?i("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button",disabled:e.disabled||!e.hasSelectedItems},on:{click:e.clearSelection}},[i("i",{staticClass:"fa fa-times mr-1"}),e._v(" Clear ")]):e._e()])]):e._e(),e.loading&&!e.hasItems?i("div",{staticClass:"autocomplete-loading"},[e._m(1),i("div",{staticClass:"mt-2 text-muted small"},[e._v("Loading...")])]):!e.loading&&!e.hasItems&&e.searchTerm.length>=e.minSearchLength?i("div",{staticClass:"autocomplete-no-data"},[i("i",{staticClass:"fa fa-search text-muted",staticStyle:{"font-size":"2rem"}}),i("div",{staticClass:"mt-2 text-muted"},[e._v(e._s(e.noDataText))]),i("div",{staticClass:"text-muted small"},[e._v("Try adjusting your search terms")])]):e.hasGrouping?i("div",{staticClass:"autocomplete-grouped"},e._l(e.paginatedGroupedItems,(function(t,a){return i("div",{key:t.group||a,staticClass:"autocomplete-group"},[i("div",{staticClass:"autocomplete-group-header"},[e.groupFields.length>0?i("div",{staticClass:"d-flex flex-column"},[i("div",{staticClass:"font-weight-bold"},[e._v(e._s(t.group))]),i("div",{staticClass:"small text-muted mt-1"},e._l(e.groupFields,(function(a,s){return i("span",{key:a},[s>0?i("span",[e._v(" • ")]):e._e(),e.getGroupFieldValue(t,a)?i("span",[e._v(e._s(a)+": "+e._s(e.getGroupFieldValue(t,a)))]):e._e()])})),0)]):i("div",[e._v(e._s(t.group))])]),i("ul",{staticClass:"list-group list-group-flush"},e._l(t.items,(function(t,s){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:e.getFlatIndex(a,s)===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=e.getFlatIndex(a,s)}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("div",{staticClass:"autocomplete-checkbox-wrapper mr-2"},[i("input",{staticClass:"autocomplete-checkbox",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t,i)}}}),e.isSelected(t)?i("i",{staticClass:"fa fa-check autocomplete-check-icon"}):e._e()]):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-secondary mr-2",staticStyle:{"font-size":"0.75rem"}},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)},domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)}},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-success ml-2",staticStyle:{"font-size":"1.1rem"}}):e._e()])])})),0)])})),0):i("ul",{staticClass:"list-group list-group-flush"},e._l(e.paginatedDisplayItems,(function(t,a){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:a===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=a}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("input",{staticClass:"mr-2",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t)}}}):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-primary mr-2"},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400"},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-primary ml-2"}):e._e()])])})),0)]):e._e()]):i("div",{staticClass:"autocomplete-wrapper"},[i("div",{staticClass:"input-group"},[i("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":e.hasError,"form-control-sm":"compact"===e.density,"form-control-lg":"comfortable"===e.density},attrs:{type:"text",placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.displayText},on:{input:e.onInput,focus:e.onFocus,blur:e.onBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleEnter.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-down",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-up",void 0,t.key,void 0)?null:(t.preventDefault(),e.navigateUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.closeMenu.apply(null,arguments)}]}}),i("div",{staticClass:"input-group-append"},[e.clearable&&e.selectedValue?i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",tabindex:"-1"},on:{click:e.clearSelection}},[i("i",{staticClass:"fa fa-times"})]):e._e(),i("button",{staticClass:"btn btn-outline-secondary dropdown-toggle",class:{active:e.isMenuOpen},attrs:{type:"button",tabindex:"-1"},on:{click:e.toggleMenu}},[i("i",{staticClass:"fa",class:e.loading?"fa-spinner fa-spin":"fa-chevron-down"})])])]),e.isMenuOpen?i("div",{ref:"menu",staticClass:"autocomplete-menu",style:{maxHeight:e.menuMaxHeight+"px"},on:{scroll:e.onMenuScroll}},[e.loading&&!e.hasItems?i("div",{staticClass:"autocomplete-loading"},[e._m(0),i("div",{staticClass:"mt-2 text-muted small"},[e._v("Loading...")])]):!e.loading&&!e.hasItems&&e.searchTerm.length>=e.minSearchLength?i("div",{staticClass:"autocomplete-no-data"},[i("i",{staticClass:"fa fa-search text-muted",staticStyle:{"font-size":"2rem"}}),i("div",{staticClass:"mt-2 text-muted"},[e._v(e._s(e.noDataText))]),i("div",{staticClass:"text-muted small"},[e._v("Try adjusting your search terms")])]):e.hasGrouping?i("div",{staticClass:"autocomplete-grouped"},e._l(e.paginatedGroupedItems,(function(t,a){return i("div",{key:t.group||a,staticClass:"autocomplete-group"},[i("div",{staticClass:"autocomplete-group-header"},[e.groupFields.length>0?i("div",{staticClass:"d-flex flex-column"},[i("div",{staticClass:"font-weight-bold"},[e._v(e._s(t.group))]),i("div",{staticClass:"small text-muted mt-1"},e._l(e.groupFields,(function(a,s){return i("span",{key:a},[s>0?i("span",[e._v(" • ")]):e._e(),e.getGroupFieldValue(t,a)?i("span",[e._v(e._s(a)+": "+e._s(e.getGroupFieldValue(t,a)))]):e._e()])})),0)]):i("div",[e._v(e._s(t.group))])]),i("ul",{staticClass:"list-group list-group-flush"},e._l(t.items,(function(t,s){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:e.getFlatIndex(a,s)===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=e.getFlatIndex(a,s)}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("div",{staticClass:"autocomplete-checkbox-wrapper mr-2"},[i("input",{staticClass:"autocomplete-checkbox",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t,i)}}}),e.isSelected(t)?i("i",{staticClass:"fa fa-check autocomplete-check-icon"}):e._e()]):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-secondary mr-2",staticStyle:{"font-size":"0.75rem"}},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)},domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400",class:{"text-dark":e.isSelected(t)}},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-success ml-2",staticStyle:{"font-size":"1.1rem"}}):e._e()])])})),0)])})),0):i("ul",{staticClass:"list-group list-group-flush"},e._l(e.paginatedDisplayItems,(function(t,a){return i("li",{key:e.getItemValue(t),staticClass:"list-group-item autocomplete-item",class:{active:a===e.highlightedIndex,selected:e.isSelected(t)},staticStyle:{cursor:"pointer"},on:{click:function(i){return i.preventDefault(),e.selectItem(t,i)},mouseenter:function(t){e.highlightedIndex=a}}},[i("div",{staticClass:"d-flex align-items-center"},[e.multiple?i("input",{staticClass:"mr-2",attrs:{type:"checkbox",tabindex:"-1"},domProps:{checked:e.isSelected(t)},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.selectItem(t)}}}):e._e(),t.raw&&t.raw.category?i("span",{staticClass:"badge badge-primary mr-2"},[e._v(" "+e._s(t.raw.category)+" ")]):e._e(),i("div",{staticClass:"flex-grow-1"},[e.itemFields.length>0?i("div",{staticClass:"font-weight-400",domProps:{innerHTML:e._s(e.formatItemFields(t))}}):i("div",{staticClass:"font-weight-400"},[e._v(e._s(e.getItemText(t)))]),!e.itemFields.length&&e.getItemDescription(t)?i("div",{staticClass:"text-muted small mt-1"},[e._v(e._s(e.getItemDescription(t)))]):e._e()]),e.isSelected(t)&&!e.multiple?i("i",{staticClass:"fa fa-check text-primary ml-2"}):e._e()])])})),0)]):e._e()]),!e.hideDetails&&e.hasError?i("div",{staticClass:"invalid-feedback d-block"},e._l(e.errorMessagesArray,(function(t,a){return i("div",{key:a},[e._v(e._s(t))])})),0):e._e()])},I=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"spinner-border spinner-border-sm text-primary",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"spinner-border spinner-border-sm text-primary",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])}],C={name:"Autocomplete",props:{value:{type:[String,Number,Array],default:null},modelValue:{type:[String,Number,Array],default:null},items:{type:Array,default:()=>[]},allItems:{type:Array,default:null},loading:{type:Boolean,default:!1},placeholder:{type:String,default:"Search and select..."},label:{type:String,default:null},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},density:{type:String,default:"default",validator:e=>["compact","comfortable","default"].includes(e)},variant:{type:String,default:"outlined",validator:e=>["outlined","filled","underlined","solo","solo-inverted","solo-filled"].includes(e)},multiple:{type:Boolean,default:!1},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},noDataText:{type:String,default:"No data available"},hideDetails:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:null},rules:{type:Array,default:()=>[]},menuProps:{type:Object,default:()=>({maxHeight:300})},minSearchLength:{type:Number,default:0},maxVisibleChips:{type:Number,default:null},actionButtons:{type:Object,default:()=>({selectAll:!1,active:!1,inactive:!1,clear:!1})},itemFields:{type:Array,default:()=>[]},groupFields:{type:Array,default:()=>[]},maxRenderItems:{type:Number,default:100},lazyLoad:{type:Boolean,default:!1},statusFieldConfig:{type:Object,default:()=>({fieldName:"status",activeValues:["active","Active","true","1"],inactiveValues:["inactive","Inactive","false","0"],activeColor:"#28a745",inactiveColor:"#dc3545"})}},data(){return{isMenuOpen:!1,searchTerm:"",highlightedIndex:-1,renderedItemCount:this.maxRenderItems,filterStatus:null}},computed:{currentValue(){return null!==this.value&&void 0!==this.value?this.value:this.modelValue},selectedValue(){return this.multiple?null:this.currentValue},displayItems(){return this.items.map(e=>({...e,title:this.getItemText(e),value:this.getItemValue(e)}))},groupedItems(){if(this.items.length>0&&Array.isArray(this.items[0].items))return this.items.map(e=>({...e,raw:e,group:e.group||e.groupName||""}));const e={},t={};return this.displayItems.forEach(i=>{const a=this.getItemGroup(i)||"Other";e[a]||(e[a]=[],i.raw?t[a]={...i.raw}:t[a]={...i}),e[a].push(i)}),Object.keys(e).map(i=>({group:i,items:e[i],raw:t[i]}))},hasGrouping(){return 0!==this.items.length&&(!!Array.isArray(this.items[0].items)||(!!(this.groupFields&&this.groupFields.length>0)||this.displayItems.some(e=>this.getItemGroup(e))))},flatDisplayItems(){return this.hasGrouping?this.groupedItems.flatMap(e=>e.items):this.displayItems},hasItems(){return this.displayItems.length>0},menuMaxHeight(){return this.menuProps&&this.menuProps.maxHeight||300},selectedItems(){if(!this.multiple)return[];const e=this.currentValue,t=Array.isArray(e)?e:e?[e]:[];if(0===t.length)return[];let i=this.allItems&&this.allItems.length>0?this.allItems:this.items;i.length>0&&Array.isArray(i[0].items)&&(i=i.flatMap(e=>e.items||[]));const a=i.filter(e=>{const i=this.getItemValue(e);return t.some(e=>String(e)===String(i))});return a.map(e=>({...e,title:this.getItemText(e),value:this.getItemValue(e)}))},displayText(){if(this.multiple)return"";const e=this.currentValue;if(!e)return this.searchTerm;const t=this.displayItems.find(t=>String(this.getItemValue(t))===String(e));return t?this.getItemText(t):this.searchTerm},hasError(){return this.errorMessages&&this.errorMessages.length>0||this.rules&&this.rules.length>0&&this.validateRules().length>0},errorMessagesArray(){return this.errorMessages?Array.isArray(this.errorMessages)?this.errorMessages:[this.errorMessages]:this.validateRules()},visibleChips(){return this.selectedItems},maxVisibleChipsCount(){return null!==this.maxVisibleChips&&void 0!==this.maxVisibleChips?this.maxVisibleChips:this.selectedItems.length},remainingChipsCount(){return null===this.maxVisibleChips||void 0===this.maxVisibleChips?0:Math.max(0,this.selectedItems.length-this.maxVisibleChips)},hasActionButtons(){return this.actionButtons&&(this.actionButtons.selectAll||this.actionButtons.active||this.actionButtons.inactive||this.actionButtons.clear)},allSelected(){if(!this.multiple)return!1;const e=this.filteredDisplayItems,t=Array.isArray(this.currentValue)?this.currentValue:[];return e.length>0&&e.every(e=>{const i=this.getItemValue(e);return t.some(e=>String(e)===String(i))})},hasSelectedItems(){if(!this.multiple)return!1;const e=Array.isArray(this.currentValue)?this.currentValue:[];return e.length>0},filteredDisplayItems(){let e=this.displayItems;return this.filterStatus&&(e=e.filter(e=>{const t=this.getItemFieldValue(e,"status")||this.getItemFieldValue(e,"Status")||this.getItemFieldValue(e,"isActive"),i=String(t).toLowerCase().trim();return"active"===this.filterStatus?"active"===i||"true"===i||"1"===i:"inactive"!==this.filterStatus||("inactive"===i||"false"===i||"0"===i)})),e},paginatedDisplayItems(){return this.lazyLoad&&this.filteredDisplayItems.length>this.renderedItemCount?this.filteredDisplayItems.slice(0,this.renderedItemCount):this.filteredDisplayItems},paginatedGroupedItems(){if(!this.hasGrouping)return[];let e=this.groupedItems;if(this.filterStatus&&(e=e.map(e=>({...e,items:e.items.filter(e=>{const t=this.getItemFieldValue(e,"status")||this.getItemFieldValue(e,"Status")||this.getItemFieldValue(e,"isActive"),i=String(t).toLowerCase().trim();return"active"===this.filterStatus?"active"===i||"true"===i||"1"===i:"inactive"!==this.filterStatus||("inactive"===i||"false"===i||"0"===i)})})).filter(e=>e.items.length>0)),this.lazyLoad){let t=0;const i=[];for(const a of e){if(t>=this.renderedItemCount)break;const e=this.renderedItemCount-t;i.push({...a,items:a.items.slice(0,e)}),t+=a.items.length}return i}return e}},watch:{items(){this.highlightedIndex=-1},hasGrouping(){this.highlightedIndex=-1},modelValue:{handler(e,t){this.multiple||!e&&this.searchTerm&&(this.searchTerm="")},immediate:!0,deep:!0},value:{handler(e,t){this.multiple||!e&&this.searchTerm&&(this.searchTerm="")},immediate:!0,deep:!0}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeDestroy(){document.removeEventListener("click",this.handleClickOutside)},methods:{getItemText(e){return e.raw?e.raw.text||e.raw.title||e.raw[this.itemTitle]||"":e.text||e.title||e[this.itemTitle]||""},getItemValue(e){let t;if(t=e.raw?void 0!==e.raw.value&&null!==e.raw.value?e.raw.value:void 0!==e.raw[this.itemValue]&&null!==e.raw[this.itemValue]?e.raw[this.itemValue]:null:void 0!==e.value&&null!==e.value?e.value:void 0!==e[this.itemValue]&&null!==e[this.itemValue]?e[this.itemValue]:null,null===t||void 0===t){const i=this.items.findIndex(t=>t===e||e.raw&&t===e.raw);i>-1?t="item-"+i:(console.warn("Autocomplete: Item has no value and could not determine index",e),t=`item-${Date.now()}-${Math.random()}`)}return t},getItemDescription(e){return e.raw?e.raw.description||e.raw.subtitle||"":e.description||e.subtitle||""},getItemGroup(e){if(e.raw){if(this.groupFields&&this.groupFields.length>0){const t=e.raw[this.groupFields[0]];if(void 0!==t&&null!==t&&""!==t)return String(t)}return e.raw.group||e.raw.groupName?e.raw.group||e.raw.groupName:""}if(this.groupFields&&this.groupFields.length>0){const t=e[this.groupFields[0]];if(void 0!==t&&null!==t&&""!==t)return String(t)}return e.group||e.groupName?e.group||e.groupName:""},getItemFieldValue(e,t){return e.raw?e.raw[t]||"":e[t]||""},getGroupFieldValue(e,t){return e.raw?e.raw[t]||"":e[t]||""},isSelected(e){const t=this.getItemValue(e),i=this.currentValue;if(this.multiple){const e=Array.isArray(i)?i:i?[i]:[];return e.some(e=>String(e)===String(t))}return null!==i&&void 0!==i&&String(i)===String(t)},onInput(e){this.searchTerm=e.target.value,this.isMenuOpen=!0,this.$emit("update:search",this.searchTerm),this.$emit("search",this.searchTerm)},onFocus(){this.isMenuOpen=!0,this.$emit("focus")},onBlur(){setTimeout(()=>{if(!this.multiple&&this.selectedValue){const e=this.displayItems.find(e=>this.getItemValue(e)===this.selectedValue);e&&this.searchTerm!==this.getItemText(e)&&(this.searchTerm="")}this.$emit("blur")},200)},toggleMenu(){this.disabled||(this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&this.$nextTick(()=>{var e;null===(e=this.$refs.input)||void 0===e||e.focus()}))},closeMenu(){this.isMenuOpen=!1,this.highlightedIndex=-1},selectItem(e,t){t&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),console.log("selectItem called for single item:",e),console.log("Item value:",this.getItemValue(e));const i=this.getItemValue(e),a=this.currentValue;if(this.multiple){const e=Array.isArray(a)?[...a]:a?[a]:[],t=[...e],s=t.findIndex(e=>String(e)===String(i));console.log("Current selected values:",t),console.log("Item value to toggle:",i),console.log("Index found:",s),s>-1?(t.splice(s,1),console.log("Removed item. New selection:",t)):(t.push(i),console.log("Added single item. New selection:",t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t)}else this.searchTerm="",this.isMenuOpen=!1,this.$emit("input",i),this.$emit("update:modelValue",i),this.$emit("change",i)},removeItem(e){if(this.multiple){const t=this.currentValue,i=Array.isArray(t)?[...t]:[],a=i.findIndex(t=>String(t)===String(e));a>-1&&(i.splice(a,1),this.$emit("input",i),this.$emit("update:modelValue",i),this.$emit("change",i))}},clearSelection(){this.multiple?(this.$emit("input",[]),this.$emit("update:modelValue",[]),this.$emit("change",[])):(this.searchTerm="",this.$emit("input",null),this.$emit("update:modelValue",null),this.$emit("change",null)),this.isMenuOpen=!1},getFlatIndex(e,t){let i=0;for(let a=0;a<e;a++)i+=this.groupedItems[a].items.length;return i+t},getItemFromFlatIndex(e){if(!this.hasGrouping)return this.displayItems[e];let t=0;for(const i of this.groupedItems){if(e<t+i.items.length)return i.items[e-t];t+=i.items.length}return null},handleEnter(){if(this.isMenuOpen&&this.highlightedIndex>=0){const e=this.hasGrouping?this.getItemFromFlatIndex(this.highlightedIndex):this.displayItems[this.highlightedIndex];e&&this.selectItem(e,null)}else this.isMenuOpen&&1===this.flatDisplayItems.length&&this.selectItem(this.flatDisplayItems[0],null)},navigateDown(){if(!this.isMenuOpen)return void(this.isMenuOpen=!0);const e=this.flatDisplayItems.length-1;this.highlightedIndex<e&&(this.highlightedIndex++,this.scrollToHighlighted())},navigateUp(){this.highlightedIndex>0&&(this.highlightedIndex--,this.scrollToHighlighted())},scrollToHighlighted(){this.$nextTick(()=>{if(this.$refs.menu){const e=this.$refs.menu.querySelectorAll(".autocomplete-item");e[this.highlightedIndex]&&e[this.highlightedIndex].scrollIntoView({block:"nearest",behavior:"smooth"})}})},handleBackspace(){if(this.multiple&&""===this.searchTerm){const e=this.currentValue,t=Array.isArray(e)?e:[];t.length>0&&this.removeItem(t[t.length-1])}},handleClickOutside(e){this.$el&&!this.$el.contains(e.target)&&this.closeMenu()},validateRules(){if(!this.rules||0===this.rules.length)return[];const e=[],t=this.currentValue;return this.rules.forEach(i=>{if("function"===typeof i){const a=i(t);!0!==a&&void 0!==a&&e.push(a)}}),e},selectAll(e){if(e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),console.log("selectAll called - this should only be called from the Select All button"),!this.multiple)return;const t=this.filteredDisplayItems,i=t.map(e=>this.getItemValue(e)),a=Array.isArray(this.currentValue)?this.currentValue:[],s=[...new Set([...a,...i])];console.log("Select All - all values:",s),this.$emit("input",s),this.$emit("update:modelValue",s),this.$emit("change",s)},filterByStatus(e){this.filterStatus===e?this.filterStatus=null:this.filterStatus=e,this.renderedItemCount=this.maxRenderItems,this.highlightedIndex=-1},formatItemFields(e){if(!this.itemFields||0===this.itemFields.length)return"";const t=this.itemFields.map((t,i)=>{const a=this.getItemFieldValue(e,t);if(!a&&0!==a)return"";if(t.toLowerCase()===this.statusFieldConfig.fieldName.toLowerCase()){const e=String(a).toLowerCase().trim(),t=this.statusFieldConfig.activeValues.some(t=>String(t).toLowerCase()===e),i=this.statusFieldConfig.inactiveValues.some(t=>String(t).toLowerCase()===e);let s="";if(t?s=this.statusFieldConfig.activeColor:i&&(s=this.statusFieldConfig.inactiveColor),s)return`<span style="color: ${s};">${a}</span>`}return String(a)}).filter(e=>""!==e);if(0===t.length)return"";if(1===t.length)return t[0];if(2===t.length)return`${t[0]} - ${t[1]}`;if(t.length>=3){const e=t.slice(0,2).filter(e=>e).join(" - "),i=t.slice(2).filter(e=>e).join(", ");return i?`${e} (${i})`:e}return""},getChipText(e){return this.itemFields&&this.itemFields.length>0&&this.formatItemFields(e)||this.getItemText(e)},onMenuScroll(e){if(!this.lazyLoad)return;const t=e.target,i=t.scrollHeight-t.scrollTop-t.clientHeight;i<50&&this.renderedItemCount<this.filteredDisplayItems.length&&(this.renderedItemCount=Math.min(this.renderedItemCount+this.maxRenderItems,this.filteredDisplayItems.length))}}},S=C,y=i("0c7c"),A=Object(y["a"])(S,v,I,!1,null,null,null),T=A.exports;function D(e,t){let i;return function(...a){const s=()=>{clearTimeout(i),e(...a)};clearTimeout(i),i=setTimeout(s,t)}}var _={name:"SearchableSelect",components:{Autocomplete:T},props:{value:{type:[String,Number,Array],default:null},items:{type:Array,default:()=>null},type:{type:String,required:!1,default:null},category:{type:String,default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"Search and select..."},label:{type:String,default:null},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},density:{type:String,default:"default",validator:e=>["compact","comfortable","default"].includes(e)},variant:{type:String,default:"outlined",validator:e=>["outlined","filled","underlined","solo","solo-inverted","solo-filled"].includes(e)},minSearchLength:{type:Number,default:2},debounceMs:{type:Number,default:300},pageSize:{type:Number,default:50},maxItems:{type:Number,default:1e3},noDataText:{type:String,default:"No data available"},hideDetails:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:null},rules:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},maxVisibleChips:{type:Number,default:null},actionButtons:{type:Object,default:()=>({selectAll:!1,active:!1,inactive:!1,clear:!1})},itemFields:{type:Array,default:()=>[]},groupFields:{type:Array,default:()=>[]},maxRenderItems:{type:Number,default:100},lazyLoad:{type:Boolean,default:!1},statusFieldConfig:{type:Object,default:()=>({fieldName:"status",activeValues:["active","Active","true","1"],inactiveValues:["inactive","Inactive","false","0"],activeColor:"#28a745",inactiveColor:"#dc3545"})},onChange:{type:Function,default:null}},data(){return{remoteItems:[],loading:!1,searchTerm:"",currentPage:1,hasMore:!1,totalItems:0}},computed:{internalValue:{get(){const e=null!==this.value&&void 0!==this.value?this.value:this.multiple?[]:null;return e},set(e){console.log("=== internalValue setter ==="),console.log("Setting internalValue to:",e),console.log("Current value prop:",this.value),console.log("Emitting input event (Vue 2 v-model) with:",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e)}},useLocalItems(){return null!==this.items&&void 0!==this.items&&Array.isArray(this.items)},normalizedLocalItems(){if(!this.useLocalItems)return[];if(this.items.length>0&&this.items[0].items&&Array.isArray(this.items[0].items)){const e=[];return this.items.forEach(t=>{t.items&&Array.isArray(t.items)&&t.items.forEach(i=>{e.push({...i,group:t.group||t.groupName||""})})}),e}return this.items},allItems(){let e;return e=this.useLocalItems?this.normalizedLocalItems:this.remoteItems,e.map((e,t)=>{const i=void 0!==e.value&&null!==e.value?e.value:void 0!==e.id&&null!==e.id?e.id:"item-"+t;let a="";return this.groupFields&&this.groupFields.length>0&&(a=e[this.groupFields[0]]||""),a||(a=e.group||e.groupName||""),{raw:e,text:e.text||e.name||e.label||"",value:i,description:e.description||e.subtitle||"",category:e.category||"",group:a,title:e.text||e.name||e.label||"",subtitle:e.description||e.subtitle||""}})},displayItems(){let e;return e=this.useLocalItems?this.filterLocalItems(this.searchTerm):this.remoteItems,e.map((e,t)=>{const i=void 0!==e.value&&null!==e.value?e.value:void 0!==e.id&&null!==e.id?e.id:"item-"+t;let a="";return this.groupFields&&this.groupFields.length>0&&(a=e[this.groupFields[0]]||""),a||(a=e.group||e.groupName||""),{raw:e,text:e.text||e.name||e.label||"",value:i,description:e.description||e.subtitle||"",category:e.category||"",group:a,title:e.text||e.name||e.label||"",subtitle:e.description||e.subtitle||""}})},hasItems(){return this.displayItems.length>0},itemTitle(){return"title"},itemValue(){return"value"},menuProps(){return{maxHeight:300,virtual:!0,itemHeight:48}}},methods:{filterLocalItems(e=""){if(!this.useLocalItems)return[];const t=this.normalizedLocalItems;if(!e||""===e.trim())return t;const i=e.toLowerCase();return t.filter(e=>{const t=(e.text||e.name||e.label||"").toLowerCase(),a=(e.description||e.subtitle||"").toLowerCase();return t.includes(i)||a.includes(i)})},async loadItems(e="",t=1,i=!1){if(this.useLocalItems){const t=this.filterLocalItems(e);return this.totalItems=t.length,this.hasMore=!1,void this.$emit("search",{search:e,results:t.length,total:t.length})}if(this.type){if(!this.loading){this.loading=!0;try{const a=await r["b"].getLookupItems({type:this.type,category:this.category,search:e,page:t,limit:this.pageSize,filters:this.filters});if(a&&a.data){const s=a.data,o=s.result||s.data||s,l=o.items||o.DATA||o||[];this.remoteItems=i?[...this.remoteItems,...l]:l,this.currentPage=o.page||t,this.hasMore=!!o.hasMore,this.totalItems=o.total||o.TOTAL||l.length,this.$emit("search",{search:e,results:l.length,total:this.totalItems})}else console.error("Lookup API error:",a),this.remoteItems=[]}catch(a){console.error("Error loading lookup items:",a),this.remoteItems=[]}finally{this.loading=!1}}}else console.warn("SearchableSelect: type prop is required when items prop is not provided")},onSearch(e){if(this.searchTerm=e,this.useLocalItems){const t=this.filterLocalItems(e);this.$emit("search",{search:e,results:t.length,total:t.length})}else this.debouncedLoadItems(e,1,!1)},onSelectionChange(e){const t=this.multiple&&!Array.isArray(e)?[e]:e;this.$emit("input",t),this.$emit("update:modelValue",t),this.$emit("change",t),this.onChange&&"function"===typeof this.onChange&&this.onChange(t)},onFocus(){this.$emit("focus"),this.useLocalItems||0===this.remoteItems.length&&this.searchTerm.length<this.minSearchLength&&this.loadItems("",1,!1)},onBlur(){this.$emit("blur")},removeItem(e){if(this.multiple){const t=(this.modelValue||[]).filter(t=>t!==e);this.$emit("update:modelValue",t)}},loadMore(){this.hasMore&&!this.loading&&this.loadItems(this.searchTerm,this.currentPage+1,!0)},clear(){this.useLocalItems?this.searchTerm="":(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},refresh(){this.loadItems(this.searchTerm,1,!1)}},watch:{items:{handler(e){if(this.useLocalItems){const e=this.filterLocalItems(this.searchTerm);this.totalItems=e.length,this.$forceUpdate()}},deep:!0,immediate:!0},type(){this.useLocalItems||(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},category(){this.useLocalItems||(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},filters:{handler(){this.useLocalItems||(this.remoteItems=[],this.searchTerm="",this.currentPage=1,this.hasMore=!1,this.totalItems=0)},deep:!0},value:{handler:async function(e,t){if(console.log("=== SearchableSelect value watcher ==="),console.log("New value:",e,"type:",Array.isArray(e)?"array":typeof e),console.log("Old value:",t),console.log("=== End watcher ==="),!this.useLocalItems&&e&&0===this.remoteItems.length&&!this.loading&&this.type)try{this.loading=!0;const e=await r["b"].getLookupItems({type:this.type,category:this.category,search:"",page:1,limit:this.pageSize,filters:this.filters});if(e&&e.data){const t=e.data,i=t.result||t.data||t;this.remoteItems=i.items||i.DATA||i||[],this.totalItems=i.total||i.TOTAL||this.remoteItems.length,this.hasMore=!!i.hasMore}}catch(i){console.error("Error loading initial items:",i)}finally{this.loading=!1}},immediate:!0}},created(){this.debouncedLoadItems=D(this.loadItems,this.debounceMs)},mounted(){if(this.useLocalItems){const e=this.filterLocalItems(this.searchTerm);this.totalItems=e.length}else 0===this.minSearchLength&&this.type&&this.loadItems("",1,!1)}},b=_,E=(i("7206"),Object(y["a"])(b,f,g,!1,null,"719e3da8",null)),L=E.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),i("div",{staticClass:"modal d-block"},[i("div",{staticClass:"modal-dialog modal-dialog-centered"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Manage")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),i("span",{staticClass:"user-guide"},[i("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[i("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),i("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},["lineitem"!=e.reqFrom&&e.IsSbaSelect?i("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[i("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Invoice_Change_File_Value"))}})]):i("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[i("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Invoice_Change_File_Value_Invoice"))}})])])])]),i("div",{staticClass:"modal-body"},[i("dynamic-form",{ref:"dynamicform",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},k=[],R={props:{ColumnIds:{type:String,required:!0},reqFrom:{type:String,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("fieldName"),name:"FieldName",value:"",placeholder:"",config:{options:[],onChange:this.GetFieldType},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Value"),name:"Value_Select",value:"",placeholder:"",visibility:!0,config:{options:[]},validationRules:{required:!0}},{astype:"NumericField",label:this.$t("Value"),name:"Value_Number",visibility:!1,value:"",validationRules:{required:!0},disabled:!1},{astype:"DateField",label:this.$t("Value"),name:"Value_Date",visibility:!1,value:"",placeholder:"",config:{format:"MM/DD/YYYY",minDate:new Date,onChange:this.setTimerDate,maxDate:!1},validationRules:{required:!0}},{astype:"SearchableSelectField",label:this.$t("CONTRACTNAME"),name:"ContractName",value:"",placeholder:"",visibility:!1,isSearch:!1,actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],groupFields:["groupText"],isMultiple:!1,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},onChange:this.onSelectionChange},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("UtilityName"),name:"UtilityName",value:"",visibility:!1,placeholder:"",config:{options:[],onChange:this.onSelectionUtilityChange},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("sba_id"),name:"SBAId",value:"",visibility:!1,placeholder:"",config:{options:[]},validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save and Process"},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],FieldOptions:[],DataType:"nvarchar",SelectedValue:"",IsSbaSelect:!1,SbaOptions:[]}},created:async function(){await this.GetFieldsListBySetupId(),await this.fetchclientlist()},methods:{onSelectionChange(e,t){var i=this;i.isLoading=!0;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];if(e.data){var a=e.data;null!=a&&(a.forEach(e=>{let i={name:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.$refs.dynamicform.updateProperty("UtilityName","config.options",t),i.$refs.dynamicform.UpdateKeyValue(),i.UtilityId=i.$refs.dynamicform.getPropertyValue("UtilityId","value"),i.GetSbaIdListByUtilityId())}}).catch(e=>{i.isLoading=!1,i.UtilityList=[],i.$refs.dynamicform.updateProperty("UtilityName","config.options",UtilityList),i.$refs.dynamicform.UpdateKeyValue()}).finally(()=>{i.isLoading=!1})},onSelectionUtilityChange(e,t){var i=this;i.UtilityId=t.value,i.GetSbaIdListByUtilityId()},GetFieldType:async function(e,t,i){var a=this;if(t.value){let e=t.value,i=a.FieldOptions.filter(t=>t.TEMPLATE_ID===e);a.DataType=i[0].DATA_TYPE,a.SelectedValue=i[0].COLUMN_NAME,"sba_id"==a.SelectedValue||"SBA_ID"==a.SelectedValue?(a.IsSbaSelect=!0,a.$refs.dynamicform.updateProperty("Value_Number","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Date","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Select","visibility",!1),a.$refs.dynamicform.updateProperty("ContractName","visibility",!0),a.$refs.dynamicform.updateProperty("UtilityName","visibility",!0),a.$refs.dynamicform.updateProperty("SBAId","visibility",!0),await a.fetchclientlist()):(a.IsSbaSelect=!1,"nvarchar"==a.DataType?(a.$refs.dynamicform.updateProperty("Value_Number","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Date","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Select","visibility",!0),a.$refs.dynamicform.UpdateKeyValue(),await a.LoadFlagFieldDropDown()):"bigint"==a.DataType||"int"==a.DataType||"float"==a.DataType||"decimal"==a.DataType?(a.$refs.dynamicform.updateProperty("Value_Date","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Select","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Number","visibility",!0)):"datetime"==a.DataType&&(a.$refs.dynamicform.updateProperty("Value_Select","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Number","visibility",!1),a.$refs.dynamicform.updateProperty("Value_Date","visibility",!0)),a.$refs.dynamicform.updateProperty("ContractName","visibility",!1),a.$refs.dynamicform.updateProperty("UtilityName","visibility",!1),a.$refs.dynamicform.updateProperty("SBAId","visibility",!1)),a.$refs.dynamicform.UpdateKeyValue()}},LoadFlagFieldDropDown:function(){var e=this;let t=[];var i="reqFrom="+e.SelectedValue;r["a"].LoadFlagFieldDropDown(i).then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.NAME,value:e.VALUE};t.push(i)}),e.$refs.dynamicform.updateProperty("Value_Select","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetSbaIdListByUtilityId:function(){var e=this;let t=[];e.SbaOptions=[];var i="UtilityId="+e.UtilityId;r["a"].GetSbaIdListByUtilityId(i).then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.NAME,value:e.VALUE};t.push(i)}),e.$refs.dynamicform.updateProperty("SBAId","config.options",t),e.SbaOptions=t,e.$refs.dynamicform.UpdateKeyValue())}})},GetFieldsListBySetupId:function(){var e=this;let t=[];var i="setupId=32&reqFrom=catchall";r["a"].GetFieldsListBySetupId(i).then(i=>{if(i.data){var a=i.data;e.FieldOptions=i.data,null!=a&&(a.forEach(e=>{let i={name:e.COLUMN_NAME,value:e.TEMPLATE_ID};t.push(i)}),e.$refs.dynamicform.updateProperty("FieldName","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.$refs.dynamicform.updateProperty("ContractName","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue()}).catch(t=>{e.isLoading=!1,e.clientList=[],e.$refs.dynamicform.updateProperty("ContractName","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue(),console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},Close:function(){this.$parent.IsChangeLineItem=!1},onSubmit(e,t){var i=this,a=0,s="",o="",l="";let n=i.FieldOptions.filter(t=>t.TEMPLATE_ID===e.FieldName);if(o=n[0].COLUMN_NAME,e.SBAId){let t=i.SbaOptions.filter(t=>t.value===e.SBAId);l=t[0].name}"catchall"!=i.reqFrom||"SBA_ID"!=o&&"sba_id"!=o?e.Value_Date?s=e.Value_Date:e.Value_Number?s=e.Value_Number:e.Value_Select&&(s=e.Value_Select):(a=e.SBAId,s=l);var c=0;"unprocessed"==i.reqFrom&&(c=1);let d=t.replace(/<[^>]*>/g,"").trim();var u="Save"==d?i.reqFrom:"savaandprocess",m={value:s,fieldName:o,lineIds:i.ColumnIds,reqFrom:u,setClient:c,beSbaId:a};r["a"].SaveColumnItems(m).then((async function(e){"Success"==e.data.msg?(i.ShowAlert(i.$t("RecordUpdatedSuccessfully"),"success",!0,i.$t("Alert")),"unprocessed"==i.reqFrom?await i.$parent.FetchUnprocessedRecords():await i.$parent.FetchFlagRecords(),i.Close()):i.ShowAlert(i.$t("ErrorWhileProcessingRequest"),"failure",!0,i.$t("Alert"))}))}}},M=R,O=Object(y["a"])(M,N,k,!1,null,null,null),P=O.exports,w=i("993a"),F={name:"FlagRecords",components:{SearchableSelect:L,ManageColumnItems:P,EditException:w["a"]},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:p.buttons,leftSearchFields:p.leftsearchSchema,listActions:p.listActions,Headers:p.headerSchema,searchCondition:"",selectedUtilities:[],groupedUtilities:[],IsChangeLineItem:!1,ColumnIds:"",reqFrom:"catchall",IsEditException:!1,ClientId:"",IsProcessed:0,TicketNumber:"",TransmissionId:"",IsViewTicket:!1,TicketContent:"",requestFrom:""}},created:async function(){var e,t=this;(null===(e=t.leftSearchFields)||void 0===e?void 0:e.length)>0&&(t.leftSearchFields[0].onChange=t.onSelectionChange),t.Headers.forEach(e=>{e.DISPLAY_NAME=t.$t(e.DISPLAY_NAME)}),p.bindleftCommonSearchdropdown(this),await t.fetchclientlist()},methods:{leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:(this.searchCondition=e.searchCondition||"",this.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]):this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/WorkDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`WorkDateFrom=${i}&WorkDateTo=${a}`})),this.searchCondition=this.searchCondition.replace(/ProcessDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`ProcessDateFrom=${i}&ProcessDateTo=${a}`}))),this.FetchFlagRecords()},onSelectionChange(e,t){var i=this;i.isLoading=!0;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.UTILITY_NAME,groupText:null,groupValue:null,metaData:null,text:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=t,i.groupedUtilities=i.UtilityList)}).catch(e=>{i.isLoading=!1,i.UtilityList=[],i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).finally(()=>{i.isLoading=!1})},renderActions:function(e){var t=this;let i=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"TicketImage":t.isVisible=!0;break;case"Edit":t.isVisible=!0;break;default:t.isVisible=!0}i.push(t)}),i},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchFlagRecords()},actionButtonClick:function(e,t){switch(e){case"ViewTicketImage":this.viewTicketImage(t);break;case"EditRecord":this.editRecord(t);break}},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"Process":this.ProcessColumnItems();break;case"DoNotBill":this.DoNotProcessLineItems();break;case"Update":this.ChangeColumnItems();break;case"FlagSummaryReport":this.FlagSummaryReport();break}},ProcessColumnItems:function(e){var t=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?t.confirmR(t.$t("ConfirmProcessFlagRecords"),!0,!1,(function(){var e={value:"",fieldName:"",lineIds:i,reqFrom:"process",setClient:0,beSbaId:0};r["a"].SaveColumnItems(e).then((async function(e){"Success"==e.data.msg?(t.ShowAlert(t.$t("RecordUpdatedSuccessfully"),"success",!0,t.$t("Alert")),await t.FetchFlagRecords()):t.ShowAlert(t.$t("DeletedError",[t.$t("WorkCode")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("SelectanyrecordtoChangeFlagRecords"),"warning",!0,t.$t("Alert"))},DoNotProcessLineItems:function(e){var t=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?t.confirmR(t.$t("ConfirmPurgesFlagRecords"),!0,!1,(function(){var e={value:"",fieldName:"",lineIds:i};r["a"].DoNotProcessLineItems(e).then((async function(e){"Success"==e.data.msg?(t.ShowAlert(t.$t("RecordUpdatedSuccessfully"),"success",!0,t.$t("Alert")),await t.FetchFlagRecords()):t.ShowAlert(t.$t("DeletedError",[t.$t("WorkCode")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("SelectanyrecordtoChangeFlagRecords"),"warning",!0,t.$t("Alert"))},ChangeColumnItems:function(e){var t=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?(t.ColumnIds=i,t.IsChangeLineItem=!t.IsChangeLineItem):t.ShowAlert(t.$t("SelectanyrecordtoChangeFlagRecords"),"warning",!0,t.$t("Alert"))},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchFlagRecords()},FetchFlagRecords:function(){var e=this;e.isLoading=!0;var t=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}`;e.searchCondition&&(t+="&"+e.searchCondition),r["a"].GetFlagRecords(t).then(t=>{e.isLoading=!1,t.data.result&&(e.ListingData=JSON.parse(t.data.result)),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach(e=>{e.TRANSMIT_DATE&&(e.TRANSMIT_DATE=new Date(e.TRANSMIT_DATE)),e.WORK_DATE&&(e.WORK_DATE=new Date(e.WORK_DATE)),e.PROCESS_DATE&&(e.PROCESS_DATE=new Date(e.PROCESS_DATE))}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)}).catch(t=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0,console.error("Error fetching flag records:",t)}),setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},getFlagClass(e){if(!e)return"";const t=e.toUpperCase().trim();return"R"===t?"bg-danger py-1 px-1 text-white w-100 d-block text-center":"Y"===t?"bg-warning py-1 px-1 text-white w-100 d-block text-center":"G"===t?"bg-success py-1 px-1 text-white w-100 d-block text-center":""},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return t.toLocaleDateString()},CloseTemplate:function(){var e=this;e.IsViewTicket=!1},viewTicketImage:async function(e){var t=this;t.TicketNumber=e.TICKETNUMBER,t.TransmissionId=e.TRANSMISSION_ID,t.IsViewTicket=!t.IsViewTicket;var i=`TicketNumber=${t.TicketNumber}&TransmissionId=${t.TransmissionId}`;await r["a"].ViewTicketImage(i).then(e=>{e.data.length>0&&(t.TicketContent=e.data[0].RAW_IMAGE)})},editRecord(e){var t=this;t.ColumnIds=e.COLUMN_ID,t.ClientId=e.CLIENT_ID,t.IsEditException=!t.IsEditException},fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=e.clientList,e.groupedUtilities=e.clientList}).catch(t=>{e.isLoading=!1,e.clientList=[],e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=[],console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},fetchStatelist:function(){var e=this;e.isLoading=!0,r["a"].getStateList().then(t=>{e.isLoading=!1,e.stateList=t.data})},fetchFlaglist:function(){var e=this;e.isLoading=!0,r["a"].getFlagList().then(t=>{e.isLoading=!1,e.flagList=t.data})}}},x=F,U=(i("0447"),Object(y["a"])(x,l,n,!1,null,"cb0b8504",null)),B=U.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("loader",{attrs:{"is-visible":e.isLoading}}),i("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!1,ModuleName:"BillingValidationData",SubModuleCode:"BilledUnbilledRecords",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("BilledUnbilledRecords"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchBilledUnbilledRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["COST"==a.column.COLUMN_NAME?[i("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(e.formatCurrency(a.row.COST)))])]:e._e(),"DATEOFINV"==a.column.COLUMN_NAME?[a.row.DATEOFINV||a.row.DATEOFINV?i("span",{attrs:{title:a.row.DATEOFINV||a.row.DATEOFINV}},[e._v(" "+e._s(e.formatDate(a.row.DATEOFINV||a.row.DATEOFINV))+" ")]):i("span",[e._v("--")])]:e._e(),"DATEOFWORK"==a.column.COLUMN_NAME?[a.row.DATEOFWORK||a.row.DATEOFWORK?i("span",{attrs:{title:a.row.DATEOFWORK||a.row.DATEOFWORK}},[e._v(" "+e._s(e.formatDate(a.row.DATEOFWORK||a.row.DATEOFWORK))+" ")]):i("span",[e._v("--")])]:e._e(),"FREQUENCY"==a.column.COLUMN_NAME?[i("span",[e._v(e._s(e.getFrequencyName(a.row.FREQUENCY)))])]:e._e()]}}])}),e.IsEditInvoiceItem?i("EditInvoiceLineItem",{attrs:{columnId:e.columnId,ClientId:e.ClientId,TicketNumber:e.TicketNumber,lineItemId:e.lineItemId,IsProcessed:e.IsProcessed,IsAdd:e.IsAdd,ticketType:e.ticketType,isTicketMannual:e.isTicketMannual}}):e._e(),i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),e.IsViewTicket?i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("TicketImage")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"col-md-12"},[e.TicketContent?i("div",{staticClass:"listing"},[i("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.TicketContent)}})]):i("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)])],1)},Y=[];let W=[],K=[{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"ClientIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"UtilityName",fieldType:"searchableselect",fieldIcon:"fa fa-building",paramName:"utilityName",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"Division",fieldType:"searchableselect",fieldIcon:"fa fa-sitemap",paramName:"divisionIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"Type",fieldType:"ddl-radio",fieldIcon:"fa fa-list",paramName:"searchType",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[{name:"Billed Records",value:"B"},{name:"Unbilled Records",value:"UB"}]},{fieldName:"TicketNo",fieldType:"text",fieldIcon:"fa fa-ticket",paramName:"ticketNumber",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"State",fieldType:"ddl-radio",fieldIcon:"fa fa-map-marker",paramName:"State",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"WorkDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"WorkDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"ProcessDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"ProcessDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"CostCenters",fieldType:"ddl-radio",fieldIcon:"fa fa-sitemap",paramName:"costCenterIds",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Frequency",fieldType:"ddl-radio",fieldIcon:"fa fa-repeat",paramName:"frequency",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[{name:"Weekly",value:"week"},{name:"Bi-Weekly",value:"biweek"},{name:"Monthly",value:"month"},{name:"Quarterly",value:"quarterly"},{name:"Half yearly",value:"halfyear"},{name:"Annually",value:"annual"},{name:"Custom Date",value:"custom"},{name:"Daily",value:"daily"}]}],G=[{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:1},{COLUMN_NAME:"ACTIVITY_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ActivityId",DISPLAY_ORDER:2},{COLUMN_NAME:"TRANSMISSION_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TransmissionId",DISPLAY_ORDER:3},{COLUMN_NAME:"CONTRACT_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ClientName",DISPLAY_ORDER:4},{COLUMN_NAME:"UTIL_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"UtilId",DISPLAY_ORDER:5},{COLUMN_NAME:"SBA",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"sba_id",DISPLAY_ORDER:6},{COLUMN_NAME:"DIVISION_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"DivisionId",DISPLAY_ORDER:7},{COLUMN_NAME:"WORKCODE_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WorkCode",DISPLAY_ORDER:8},{COLUMN_NAME:"COST",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Cost",DISPLAY_ORDER:9,settings:{isInSlot:!0}},{COLUMN_NAME:"SERVICE_CONDITION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ServiceCondition",DISPLAY_ORDER:10},{COLUMN_NAME:"CDC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"CDCTermCode",DISPLAY_ORDER:11},{COLUMN_NAME:"DATEOFINV",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ProcessDate",DISPLAY_ORDER:12,settings:{isInSlot:!0}},{COLUMN_NAME:"DATEOFWORK",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkedDate",DISPLAY_ORDER:13,settings:{isInSlot:!0}},{COLUMN_NAME:"FREQUENCY",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Frequency",DISPLAY_ORDER:14,settings:{isInSlot:!0}}],q=[{title:"TicketImage",icon:"fa fa-ticket text-primary action-icon",additionalSpan:"",callbackfunction:"ViewTicketImage"},{title:"Edit",icon:"fa fa-pencil text-success text-success action-icon",additionalSpan:"",callbackfunction:"EditRecord"}];async function z(e){var t=e;try{const e="countryId=223&includeCandaState=true",i=await r["a"].GetStateList(e);if(i.data){const e=i.data.map(e=>({name:e.STATE_NAME,value:e.ISO_CODE_3}));t.leftSearchFields.find(e=>"State"===e.fieldName).listOptions=e}}catch(i){console.error("Error loading states:",i)}try{const e=await r["a"].GetCostCenters();if(e.data){const i=e.data.map(e=>({name:e.TEXT,value:e.VALUE}));t.leftSearchFields.find(e=>"CostCenters"===e.fieldName).listOptions=i}}catch(i){console.error("Error loading cost centers:",i)}}var H={buttons:W,leftsearchSchema:K,headerSchema:G,listActions:q,bindleftCommonSearchdropdown:z},Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),i("div",{staticClass:"modal d-block"},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Edit")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),i("span",{staticClass:"user-guide"},[i("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[i("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser"))+" ")]),i("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[i("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[i("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Edit_Line_Item"))}})])])])]),i("div",{staticClass:"modal-body"},[i("dynamic-form",{ref:"dynamicform",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-TicketImage",fn:function(){return[i("span",[i("a",{staticClass:"form-control border-0 px-0 viewicon text-primary",staticStyle:{width:"25px"},attrs:{href:"javascript:;"},on:{click:e.viewTicketImage}},[i("i",{staticClass:"fa fa-eye fa-size"})])])]},proxy:!0}])})],1)])])]),i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),e.IsViewTicket?i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("TicketImage")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"col-md-12"},[e.TicketContent?i("div",{staticClass:"listing"},[i("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.TicketContent)}})]):i("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)])],1)},j=[],J={props:{columnId:{type:Number,required:!0},ClientId:{type:Number,required:!0},IsProcessed:{type:Number,default:0},lineItemId:{type:Number,required:!0},IsAdd:{type:Boolean,required:!0},ticketType:{type:String,required:!0},isTicketMannual:{type:String,required:!0},TicketNumber:{type:String,required:!0}},data(){return{isLoading:!1,isProcessed:0,oldModel:"",oldValues:{},changedValues:{},EditRequestFrom:"",FormSchema:[{layoutType:"triple",Data:[{astype:"RadioField",label:"",name:"customlineitem",value:this.IsTicketMannual,visibility:this.IsAdd,config:{options:[{name:this.$t("TicketNumber"),value:"T"},{name:this.$t("Manual"),value:"M"}]},onChange:this.onCustomLineItemChange},{astype:"TextField",label:this.$t("TicketNumber"),name:"TicketNumber",value:"",visibility:!0,validationRules:{required:!0,max:500},disabled:!0},{astype:"SelectField",label:this.$t("ActivityId"),name:"ActivityId",value:"",visibility:!0,config:{options:[]},validationRules:{required:!0},disabled:!0},{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",visibility:!0,config:{rows:3},disabled:!0},{astype:"SelectField",label:this.$t("StatusCode"),name:"Status",value:"",visibility:!0,config:{options:[]},validationRules:{required:!0}},{astype:"SearchableSelectField",label:this.$t("ContractName"),name:"ClientId",value:"",visibility:!0,isSearch:!1,actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],groupFields:["groupText"],isMultiple:!1,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},onChange:this.onSelectionChange},validationRules:{required:!1},disabled:!0},{astype:"TextField",label:this.$t("TicketId"),name:"TicketId",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("LocatorName"),name:"LocatorName",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("StreetName"),name:"StreetName",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("FeedName"),name:"FeedName",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("TransmissionId"),name:"TransmissionId",value:"",visibility:!0,disabled:!0},{astype:"SelectField",label:this.$t("TicketType"),name:"TicketType",value:"",visibility:!0,config:{options:[]}},{astype:"TextField",label:this.$t("WorkArea"),name:"WorkArea",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("CallDate"),name:"CallDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("TransmitDate"),name:"TransmitDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("LocatorStartDate"),name:"LocatorStartDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("ParseDate"),name:"ParseDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("County"),name:"County",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("State"),name:"State",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("CallerName"),name:"CallerName",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("CallerPhone"),name:"CallerPhone",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("WorkDoneFor"),name:"WorkDoneFor",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("Excavator"),name:"Excavator",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("TypeofWork"),name:"TypeOfWork",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("LocatorEndDate"),name:"LocatorEndDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("InitialStatusDate"),name:"InitialStatusDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("LegalDuedate"),name:"LegalDuedate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("TicketStartDate"),name:"TicketStartDate",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("UtilityName"),name:"UtilityName",value:"",visibility:!0,disabled:!0},{astype:"NumericField",label:this.$t("FeetLocated"),name:"FeetLocated",value:"",visibility:!0,onKeyUp:this.calculateNetTotal},{astype:"NumericField",label:this.$t("MinutesWorked"),name:"MinutesWorked",value:"",visibility:!0},{astype:"TextField",label:this.$t("Emergency"),name:"Emergency",value:"",visibility:!0,disabled:!0},{astype:"SlotField",label:this.$t("TicketImage"),name:"TicketImage",value:"",visibility:!0},{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",config:{rows:3}},{astype:"SelectField",label:this.$t("Utlityid"),name:"UtilityId",value:"",visibility:!0,config:{options:[]},validationRules:{required:!0},onChange:this.onSelectionUtilityChange},{astype:"SelectField",label:this.$t("sba_id"),name:"SbaId",value:"",visibility:!0,config:{options:[]}},{astype:"SelectField",label:this.$t("CostCenters"),name:"DistrictCode",value:"",visibility:!0,config:{options:[]},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("WorkCode"),name:"WorkCodeId",value:"",visibility:!0,config:{options:[],onChange:this.onWorkCodeChange},validationRules:{required:!1}},{astype:"SelectField",label:this.$t("Division"),name:"DivisionId",value:"",visibility:!0,config:{options:[]}},{astype:"NumericField",label:this.$t("UnitRate"),name:"UnitRate",value:"",visibility:!1,validationRules:{required:!0},onKeyUp:this.calculateNetTotalManual},{astype:"NumericField",label:this.$t("UnitQuantity"),name:"UnitQuantity",value:"",visibility:!1,validationRules:{required:!0},onKeyUp:this.calculateNetTotalManual},{astype:"TextField",label:this.$t("NetTotal"),name:"NetTotalManual",value:"0.00",visibility:!1,disabled:!0},{astype:"NumericField",label:this.$t("Rate"),name:"UnitAmountTotal",value:"",visibility:0!=this.columnId&&null!=this.columnId,onKeyUp:this.calculateNetTotal},{astype:"TextField",label:this.$t("TermCode"),name:"TermCode",value:"",visibility:!0},{astype:"SelectField",label:this.$t("AdderName"),name:"AdderNameLineItem",value:"",visibility:!0,config:{options:[]},disabled:!0,onChange:this.onAdderNameChange},{astype:"NumericField",label:this.$t("AdderUnitCost"),name:"AdderUnitCost",value:"",visibility:!0,disabled:!0,onKeyUp:this.calculateNetTotal},{astype:"TextField",label:this.$t("AdderUnit"),name:"AdderUnit",value:"",visibility:!0,disabled:!0},{astype:"TextField",label:this.$t("NetTotal"),name:"NetTotal",value:"",visibility:!0,disabled:!0}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save And Close"},{type:"submit",class:"btn btn-primary",text:"<i class='fa fa-save pr-2'></i>Save And Reprocess"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],FieldOptions:[],DataType:"nvarchar",SelectedValue:"",IsViewTicket:!1,TicketContent:"",TransmissionId:"",DivisionId:"",currentAction:"CatchAll",UtilityId:"",ServiceId:"",LocateId:"",AfterHours:"",UtilityAbbrev:"",FlagReason:""}},created:async function(){var e=this;await e.GetStatusCodes(),await e.GetTicketTypes(),await e.GetActivityIdDropdownListByTicketNumber(),await e.GetWorkCodeData(),await e.GetDivisionDropdownData(),await e.LoadAdditionalInfoByClientId(),await e.GetSbaIdListByUtilityId(),await e.GetCostCenters(),await e.fetchclientlist(),await e.GetInvoiceLineItem()},methods:{GetInvoiceLineItem:async function(){var e=this;e.isLoading=!0;var t=`lineBatchId=&billID=0&lineItemId=${e.lineItemId}&columnId=${e.columnId}&ticketType=${e.ticketType}&isTicketMannual=${e.isTicketMannual}`;r["a"].GetInvoiceLineItem(t).then(t=>{if(t.data){var i,a,s=t.data[0];e.TransmissionId=s.TRANSMISSION_ID,e.DivisionId=s.DIVISION_ID,e.UtilityId=s.CLIENT_ADDITIONAL_ID,e.$refs.dynamicform.updateProperty("TicketNumber","value",s.TICKETNUMBER),e.$refs.dynamicform.updateProperty("ActivityId","value",s.ACTIVITY_ID),e.$refs.dynamicform.updateProperty("Description","value",s.DESCRIPTION),e.$refs.dynamicform.updateProperty("Status","value",s.STATUS),e.$refs.dynamicform.updateProperty("ClientId","value",s.CLIENT_ID),e.$refs.dynamicform.updateProperty("TicketId","value",s.TICKET_ID),e.$refs.dynamicform.updateProperty("LocatorName","value",s.LOCATOR_NAME),e.$refs.dynamicform.updateProperty("StreetName","value",s.STREETNAME),e.$refs.dynamicform.updateProperty("FeedName","value",s.FEEDNAME),e.$refs.dynamicform.updateProperty("TransmissionId","value",s.TRANSMISSION_ID),e.$refs.dynamicform.updateProperty("TicketType","value",s.TICKETTYPE),e.$refs.dynamicform.updateProperty("WorkArea","value",s.WORK_AREA),e.$refs.dynamicform.updateProperty("CallDate","value",e.$options.filters.formatDateTime(s.CALL_DATE)),e.$refs.dynamicform.updateProperty("TransmitDate","value",e.$options.filters.formatDateTime(s.TRANSMIT_DATE)),e.$refs.dynamicform.updateProperty("LocatorStartDate","value",e.$options.filters.formatDateTime(s.WORK_DATE)),e.$refs.dynamicform.updateProperty("ParseDate","value",e.$options.filters.formatDateTime(s.PARSE_DATE)),e.$refs.dynamicform.updateProperty("County","value",s.COUNTY),e.$refs.dynamicform.updateProperty("State","value",s.STATE),e.$refs.dynamicform.updateProperty("CallerName","value",s.CALLER_NAME),e.$refs.dynamicform.updateProperty("CallerPhone","value",s.CALLER_PHONE),e.$refs.dynamicform.updateProperty("WorkDoneFor","value",s.WORK_DONE_FOR),e.$refs.dynamicform.updateProperty("Excavator","value",s.EXCAVATOR),e.$refs.dynamicform.updateProperty("TypeOfWork","value",s.TYPEOFWORK),e.$refs.dynamicform.updateProperty("LocatorEndDate","value",s.CLOSED_DATE?e.$options.filters.formatDateTime(s.CLOSED_DATE):null),e.$refs.dynamicform.updateProperty("InitialStatusDate","value",e.$options.filters.formatDateTime(s.INITIAL_STATUS_DATE)),e.$refs.dynamicform.updateProperty("LegalDuedate","value",s.LEGAL_DUE_DATE?e.$options.filters.formatDateTime(s.LEGAL_DUE_DATE):null),e.$refs.dynamicform.updateProperty("TicketStartDate","value",e.$options.filters.formatDateTime(s.OUR_DUE_DATE)),e.$refs.dynamicform.updateProperty("UtilityName","value",s.UTILITY_NAME),e.$refs.dynamicform.updateProperty("FeetLocated","value",s.FEET_LOCATED),e.$refs.dynamicform.updateProperty("MinutesWorked","value",s.MINUTES_WORKED),e.$refs.dynamicform.updateProperty("Emergency","value",s.EMERGENCY),e.$refs.dynamicform.updateProperty("Comment","value",s.REMARKS),e.$refs.dynamicform.updateProperty("UtilityId","value",s.CLIENT_ADDITIONAL_ID),e.$refs.dynamicform.updateProperty("SbaId","value",s.BE_SBA_ID),e.$refs.dynamicform.updateProperty("DistrictCode","value",s.DISTRICT_CODE),e.$refs.dynamicform.updateProperty("WorkCodeId","value",s.WORK_CODE_ID),e.$refs.dynamicform.updateProperty("DivisionId","value",s.DIVISION_ID),e.$refs.dynamicform.updateProperty("UnitRate","value",s.UNIT_RATE),e.$refs.dynamicform.updateProperty("UnitQuantity","value",s.UNIT_WORKED),e.$refs.dynamicform.updateProperty("UnitAmountTotal","value",s.UNIT_TOTAL_AMOUNT),e.$refs.dynamicform.updateProperty("TermCode","value",s.TERM_CODE),e.$refs.dynamicform.updateProperty("AdderNameLineItem","value",s.ADDER_NAME),e.$refs.dynamicform.updateProperty("AdderUnitCost","value",s.ADDER_UNIT_COST),e.$refs.dynamicform.updateProperty("AdderUnit","value",s.ADDER_UNIT),e.$refs.dynamicform.updateProperty("NetTotal","value",null!==(i=s.AMOUNT)&&void 0!==i?i:s.UNIT_TOTAL_AMOUNT),e.ServiceId=s.SERVICECODE,e.LocateId=s.LOCATE_ID,e.AfterHours=s.AFTER_HOURS,e.UtilityAbbrev=s.UTILITY_ABBREV,e.FlagReason=s.FLAG_REASON,e.oldValues={TicketNumber:s.TICKETNUMBER,ActivityId:s.ACTIVITY_ID,Description:s.DESCRIPTION,Status:s.STATUS,ClientId:s.CLIENT_ID,TicketId:s.TICKET_ID,LocatorName:s.LOCATOR_NAME,StreetName:s.STREETNAME,FeedName:s.FEEDNAME,TransmissionId:s.TRANSMISSION_ID,TicketType:s.TICKETTYPE,WorkArea:s.WORK_AREA,CallDate:e.$options.filters.formatDateTime(s.CALL_DATE),TransmitDate:e.$options.filters.formatDateTime(s.TRANSMIT_DATE),LocatorStartDate:e.$options.filters.formatDateTime(s.WORK_DATE),ParseDate:e.$options.filters.formatDateTime(s.PARSE_DATE),County:s.COUNTY,State:s.STATE,CallerName:s.CALLER_NAME,CallerPhone:s.CALLER_PHONE,WorkDoneFor:s.WORK_DONE_FOR,Excavator:s.EXCAVATOR,TypeOfWork:s.TYPEOFWORK,LocatorEndDate:e.$options.filters.formatDateTime(s.CLOSED_DATE),InitialStatusDate:e.$options.filters.formatDateTime(s.INITIAL_STATUS_DATE),LegalDuedate:e.$options.filters.formatDateTime(s.LEGAL_DUE_DATE),TicketStartDate:e.$options.filters.formatDateTime(s.OUR_DUE_DATE),UtilityName:s.UTILITY_NAME,FeetLocated:s.FEET_LOCATED,MinutesWorked:s.MINUTES_WORKED,Emergency:s.EMERGENCY,TicketImage:s.TICKETIMAGE,Comment:s.REMARKS,UtilityId:s.CLIENT_ADDITIONAL_ID,SbaId:s.SBA_ID,DistrictCode:s.DISTRICT_CODE,WorkCodeId:s.WORK_CODE_ID,DivisionId:s.DIVISION_ID,UnitRate:s.UNIT_RATE,UnitQuantity:s.UNIT_WORKED,NetTotalManual:"0.00",UnitAmountTotal:s.UNIT_TOTAL_AMOUNT,TermCode:s.TERM_CODE,AdderNameLineItem:s.ADDER_NAME,AdderUnitCost:s.ADDER_UNIT_COST,AdderUnit:s.ADDER_UNIT,NetTotal:null!==(a=s.AMOUNT)&&void 0!==a?a:s.UNIT_TOTAL_AMOUNT,customlineitem:e.IsTicketMannual,ServiceId:s.SERVICECODE,LocateId:s.LOCATE_ID,AfterHours:s.AFTER_HOURS,UtilityAbbrev:s.UTILITY_ABBREV,FlagReason:s.FLAG_REASON},e.onCustomLineItemChange(e.IsTicketMannual)}e.isLoading=!1}).catch(()=>{e.isLoading=!1})},onSelectionUtilityChange(e,t){var i=this;i.UtilityId=t.value,i.GetSbaIdListByUtilityId()},fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.$refs.dynamicform.updateProperty("ClientId","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue()}).catch(t=>{e.isLoading=!1,e.clientList=[],e.$refs.dynamicform.updateProperty("ClientId","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue(),console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},GetStatusCodes:async function(){var e=this;let t=[];r["a"].GetStatusCodes().then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.TEXT,value:e.VALUE};t.push(i)}),e.$refs.dynamicform.updateProperty("StatusCode","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetWorkCodeData:async function(){var e=this;r["a"].GetWorkCodeData().then(t=>{if(t.data){var i=t.data;e.$refs.dynamicform.updateProperty("WorkCodeId","config.options",i),e.$refs.dynamicform.updateProperty("AdderNameLineItem","config.options",i),e.$refs.dynamicform.UpdateKeyValue()}})},GetDivisionDropdownData:async function(){var e=this,t="ClientId="+e.ClientId;r["a"].GetDivisionDropdownData(t).then(t=>{if(t.data){var i=t.data.map(e=>({name:e.NAME,value:e.DIVISIONS_ID}));e.$refs.dynamicform.updateProperty("DivisionId","config.options",i),e.$refs.dynamicform.UpdateKeyValue()}})},GetTicketTypes:async function(){var e=this;let t=[];r["a"].GetTicketTypes().then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.TYPE_NAME,value:e.TYPE_ID};t.push(i)}),e.$refs.dynamicform.updateProperty("TicketType","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},LoadAdditionalInfoByClientId:async function(){var e=this;let t=[];var i="ClientId="+e.ClientId;r["a"].LoadAdditionalInfoByClientId(i).then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),e.$refs.dynamicform.updateProperty("UtilityId","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetActivityIdDropdownListByTicketNumber:async function(){var e=this;let t=[];var i=`ClientId=${e.ClientId}&ticketNumber=${e.TicketNumber}`;r["a"].GetActivityIdDropdownListByTicketNumber(i).then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.NAME,value:e.ACTIVITY_ID};t.push(i)}),e.$refs.dynamicform.updateProperty("ActivityId","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetSbaIdListByUtilityId:async function(){var e=this;let t=[];var i="UtilityId="+e.UtilityId;r["a"].GetSbaIdListByUtilityId(i).then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.NAME,value:e.VALUE};t.push(i)}),e.$refs.dynamicform.updateProperty("SBAId","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetCostCenters:async function(){var e=this;let t=[];r["a"].GetCostCenters().then(i=>{if(i.data){var a=i.data;null!=a&&(a.forEach(e=>{let i={name:e.TEXT,value:e.VALUE};t.push(i)}),e.$refs.dynamicform.updateProperty("DistrictCode","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},onCustomLineItemChange:function(e){var t=this;"M"===e||"F"===t.IsTicketFlatFee?(t.$refs.dynamicform.updateProperty("UnitRate","visibility",!0),t.$refs.dynamicform.updateProperty("UnitQuantity","visibility",!0),0!=t.columnId&&null!=t.columnId||t.$refs.dynamicform.updateProperty("NetTotalManual","visibility",!0),t.setTicketFieldsVisibility(!1),t.$refs.dynamicform.updateProperty("AdderNameLineItem","disabled",!0),t.$refs.dynamicform.updateProperty("AdderUnitCost","disabled",!0),"F"===t.IsTicketFlatFee&&(t.$refs.dynamicform.updateProperty("UnitQuantity","visibility",!1),t.$refs.dynamicform.updateProperty("WorkCodeId","disabled",!0),t.$refs.dynamicform.updateProperty("WorkCodeId","value","FF"))):(t.setTicketFieldsVisibility(!0),t.$refs.dynamicform.updateProperty("UnitRate","visibility",!1),t.$refs.dynamicform.updateProperty("UnitQuantity","visibility",!1),t.$refs.dynamicform.updateProperty("NetTotalManual","visibility",!1),t.AdderUnit>0&&(t.$refs.dynamicform.updateProperty("AdderNameLineItem","disabled",!1),t.$refs.dynamicform.updateProperty("AdderUnitCost","disabled",!1)))},setTicketFieldsVisibility:function(e){var t=["TicketNumber","ActivityId","Description","Status","ClientId","TicketId","LocatorName","StreetName","FeedName","TransmissionId","TicketType","WorkArea","CallDate","TransmitDate","LocatorStartDate","ParseDate","County","State","CallerName","CallerPhone","WorkDoneFor","Excavator","TypeOfWork","LocatorEndDate","InitialStatusDate","LegalDuedate","TicketStartDate","UtilityName","FeetLocated","MinutesWorked","Emergency","TicketImage","Comment","UtilityId","SbaId"];t.forEach(t=>{this.$refs.dynamicform.updateProperty(t,"visibility",e)})},onActivityIdChange:function(e){var t=this;if(t.ActivityId=e,t.TicketNumber&&e){var i=`TicketNumber=${t.TicketNumber}&ActivityId=${e}&ClientId=${t.ClientId}`;r["a"].GetInvoiceLineItem(i).then(e=>{e.data&&t.GetInvoiceLineItem()})}},onSelectionChange(e,t){var i=this;i.isLoading=!0;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];if(e.data){var a=e.data;null!=a&&(a.forEach(e=>{let i={name:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.$refs.dynamicform.updateProperty("UtilityId","config.options",t),i.$refs.dynamicform.UpdateKeyValue(),i.UtilityId=i.$refs.dynamicform.getPropertyValue("UtilityId","value"),i.GetSbaIdListByUtilityId())}}).catch(e=>{i.isLoading=!1,i.UtilityList=[],i.$refs.dynamicform.updateProperty("UtilityId","config.options",UtilityList),i.$refs.dynamicform.UpdateKeyValue()}).finally(()=>{i.isLoading=!1})},onWorkCodeChange:function(e,t,i){var a=this,s=`clientId=${a.ClientId}&workCodeId=${t.value}&divisionId=${a.DivisionId}`;r["a"].LoadRateByWorkCode(s).then(e=>{if(e.data){var t=parseFloat(e.data[0].WORK_RATE).toFixed(2);"M"===a.IsTicketMannual?(a.$refs.dynamicform.updateProperty("UnitRate","value",t),a.calculateNetTotalManual()):(a.$refs.dynamicform.updateProperty("UnitAmountTotal","value",t),a.calculateNetTotal())}})},onAdderNameChange:function(e){var t=this,i=`clientId=${t.ClientId}&workCodeId=${e}&divisionId=${t.DivisionId}`;r["a"].LoadRateByWorkCode(i).then(e=>{if(e.data){var i=parseFloat(e.data).toFixed(2);t.$refs.dynamicform.updateProperty("AdderUnitCost","value",i),t.calculateNetTotal()}})},calculateNetTotal:function(){var e=this,t=parseFloat(e.$refs.dynamicform.getPropertyValue("UnitAmountTotal","value")||0),i=parseFloat(e.$refs.dynamicform.getPropertyValue("AdderUnitCost","value")||0),a=parseFloat(e.AdderUnit||0),s=t+i*a;e.$refs.dynamicform.updateProperty("NetTotal","value",s.toFixed(2))},calculateNetTotalManual:function(){var e=this,t=parseFloat(e.$refs.dynamicform.getPropertyValue("UnitRate","value")||0),i=parseFloat(e.$refs.dynamicform.getPropertyValue("UnitQuantity","value")||0);0===t&&(t=0),0===i&&(i=0);var a=i*t,s=parseFloat(Math.round(100*a)/100).toFixed(2);isNaN(s)||e.$refs.dynamicform.updateProperty("NetTotalManual","value",s)},onSubmit(e,t){var i=this;i.isLoading=!0,i.UpdateChangedValues(e);var a=JSON.stringify(i.MakeJsonForProcessLog(e));let s=t.replace(/<[^>]*>/g,"").trim(),o="Save And Close"===s?1:0;var l={columnId:i.columnId,SetupId:"",BatchId:"",BillId:0,IsAdd:i.IsAdd,IsReadOnlyForReport:"",IsTicketMannual:i.isTicketMannual,IsTicketFlatFee:i.ticketType,LineItemId:i.lineItemId,DateOfInvoiceLine:"",InvoiceBatchId:"",RecordOnSearchTicketNumer:"yes",TicketNumber:e.TicketNumber,ActivityId:e.ActivityId,Description:e.Description,Status:e.Status,ClientId:e.ClientId,TicketId:e.TicketId,LocatorName:e.LocatorName,StreetName:e.StreetName,FeedName:e.FeedName,TransmissionId:e.TransmissionId,TicketType:e.TicketType,WorkArea:e.WorkArea,CallDate:e.CallDate,TransmitDate:e.TransmitDate,WorkDate:e.LocatorStartDate,ParseDate:e.ParseDate,County:e.County,State:e.State,CallerName:e.CallerName,CallerPhone:e.CallerPhone,WorkDoneFor:e.WorkDoneFor,Excavator:e.Excavator,TypeOfWork:e.TypeOfWork,ClosedDate:e.LocatorEndDate,InitialStatusDate:e.InitialStatusDate,LegalDuedate:e.LegalDuedate,OurDueDate:e.TicketStartDate,UtilityName:e.UtilityName,FeetLocated:e.FeetLocated,MinutesWorked:e.MinutesWorked,Emergency:e.Emergency,Comment:e.Comment,ClientAdditionalId:e.UtilityId,SbaId:e.SbaId,DistrictCode:e.DistrictCode,WorkCodeId:e.WorkCodeId,DivisionId:e.DivisionId,UnitRate:e.UnitRate,UnitQuantity:e.UnitQuantity,UnitAmountTotal:e.UnitAmountTotal,TermCode:e.TermCode,AdderNameLineItem:e.AdderNameLineItem,AdderUnitCost:e.AdderUnitCost,AdderUnit:e.AdderUnit,NetTotal:e.NetTotal,ServiceId:i.ServiceId,LocateId:i.LocateId,AfterHours:i.AfterHours,UtilityAbbrev:i.UtilityAbbrev,FlagReason:i.FlagReason,ProcessLogJson:a,newStringifyModel:JSON.stringify(e),oldStringifyModel:JSON.stringify(i.oldValues),isSaveClicked:o};r["a"].UpdateInvoiceLineItem(l).then(e=>{i.isLoading=!1,e.data&&"Success"===e.data.msg?(i.ShowAlert(i.$t("RecordUpdatedSuccessfully"),"success",!0,i.$t("Alert")),1!=o&&0!=o||(i.$parent.FetchBilledUnbilledRecords(),i.Close())):e.data&&"invalid"===e.data.msgFor?(e.data.invalidKey&&e.data.invalidKey.forEach((function(e){i.$refs.dynamicform.showError(e.ctrId,e.ctrMsg)})),i.ShowAlert(e.data.msg,"failure",!0,i.$t("Alert"))):i.ShowAlert(e.data.msg,e.data.msgFor,!0,i.$t("Alert"))}).catch(()=>{i.isLoading=!1,i.ShowAlert(i.$t("ErrorWhileProcessingRequest"),"failure",!0,i.$t("Alert"))})},UpdateChangedValues(e){var t="{";for(var i in e)e[i]!==this.oldValues[i]&&(t+='"'+i+'":'+JSON.stringify(e[i])+",");"{"===t?this.$refs.dynamicform.updateProperty("Comment","value",""):(t=t.substr(0,t.length-1)+"}",this.$refs.dynamicform.updateProperty("Comment","value",t))},MakeJsonForProcessLog(e){var t=[];for(var i in e)e[i]!==this.oldValues[i]&&"Comment"!==i&&t.push({ControlName:i,OldData:this.oldValues[i]||"",NewData:e[i]||""});return t},viewTicketImage:function(){var e=this;e.IsViewTicket=!0;var t=`TicketNumber=${e.TicketNumber}&TransmissionId=${e.TransmissionId}`;r["a"].ViewTicketImage(t).then(t=>{t.data&&t.data.length>0&&(e.TicketContent=t.data[0].RAW_IMAGE)})},CloseTemplate:function(){this.IsViewTicket=!1},Close:function(){this.$parent.IsEditInvoiceItem=!1}}},X=J,Z=Object(y["a"])(X,Q,j,!1,null,null,null),ee=Z.exports,te={name:"BilledUnbilledRecords",components:{EditInvoiceLineItem:ee},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:H.buttons,leftSearchFields:H.leftsearchSchema,listActions:H.listActions,Headers:H.headerSchema,searchCondition:"",frequencyList:[],IsEditInvoiceItem:"",columnId:"",lineItemId:"",ClientId:"",IsProcessed:1,IsAdd:!1,ticketType:"N",isTicketMannual:"N",TicketNumber:"",IsViewTicket:!1,TicketContent:"",selectedId:""}},created:async function(){var e,t=this;(null===(e=t.leftSearchFields)||void 0===e?void 0:e.length)>0&&(t.leftSearchFields[0].onChange=t.onSelectionChange,t.leftSearchFields[1].onChange=t.onSelectionUtilityChange),t.Headers.forEach(e=>{e.DISPLAY_NAME=t.$t(e.DISPLAY_NAME)}),H.bindleftCommonSearchdropdown(this),await t.fetchclientlist()},methods:{leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/WorkDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`WorkDateFrom=${i}&WorkDateTo=${a}`})),this.searchCondition=this.searchCondition.replace(/ProcessDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`ProcessDateFrom=${i}&ProcessDateTo=${a}`}))),this.FetchBilledUnbilledRecords()},renderActions:function(e){var t=this;let i=[];return t.listActions.forEach(t=>{let a={...t};switch(a.title){case"TicketImage":a.isVisible=!0;break;case"Edit":"CLBSND"===e.STATUS_CODE?(a.isVisible=!0,a.isDisabled=!0):(a.isVisible=!0,a.isDisabled=!1);break;default:a.isVisible=!0}i.push(a)}),i},CloseTemplate:function(){var e=this;e.IsViewTicket=!1},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchBilledUnbilledRecords()},actionButtonClick:function(e,t){switch(e){case"ViewTicketImage":this.viewTicketImage(t);break;case"EditRecord":this.editRecord(t);break}},commonHeaderButtonClick:function(e){},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchBilledUnbilledRecords()},FetchBilledUnbilledRecords:function(){var e=this;e.isLoading=!0;var t=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}`;e.searchCondition&&(t+="&"+e.searchCondition),r["a"].GetBilledUnbilledRecords(t).then(t=>{e.isLoading=!1,t.data.result&&(e.ListingData=JSON.parse(t.data.result)),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach(e=>{e.DATEOFINV&&(e.DATEOFINV=new Date(e.DATEOFINV)),e.DATEOFWORK&&(e.DATEOFWORK=new Date(e.DATEOFWORK))}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)}).catch(t=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0,console.error("Error fetching flag records:",t)}),setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return t.toLocaleDateString()},formatCurrency(e){return e||0===e?parseFloat(e).toFixed(2):"0.00"},getFrequencyName(e){if(!e)return"";const t=this.frequencyList.find(t=>t.Value==e||t.value==e);return t?t.Name||t.name||"":e},viewTicketImage:async function(e){var t=this;t.TicketNumber=e.TICKETNUMBER,t.TransmissionId=e.TRANSMISSION_ID,t.IsViewTicket=!t.IsViewTicket;var i=`TicketNumber=${t.TicketNumber}&TransmissionId=${t.TransmissionId}`;await r["a"].ViewTicketImage(i).then(e=>{e.data.length>0&&(t.TicketContent=e.data[0].RAW_IMAGE)})},editRecord(e){var t=this;t.columnId=e.TRAN_NO,t.lineItemId=e.COLUMN_ID,t.ClientId=e.CLIENT_ID,t.TicketNumber=e.TICKETNUMBER,t.IsEditInvoiceItem=!t.IsEditInvoiceItem},fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=e.clientList,e.groupedUtilities=e.clientList}).catch(t=>{e.isLoading=!1,e.clientList=[],e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=[],console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},onSelectionChange(e,t){var i=this;i.isLoading=!0,i.selectedId=t;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.UTILITY_NAME,groupText:null,groupValue:null,metaData:null,text:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=t)}).catch(e=>{i.isLoading=!1,i.SelectedUtilityList=[],i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).finally(()=>{i.isLoading=!1})},onSelectionUtilityChange(e,t){var i=this;i.isLoading=!0;let a=t.map(e=>""+e).join(",");var s=`clientId=${i.selectedId}&utilityIds=${a}`;r["a"].LoadClientDivisionList(s).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.NOTE,groupText:null,groupValue:null,metaData:null,text:e.NOTE,value:e.ID};t.push(i)}),i.leftSearchFields.find(e=>"Division"===e.fieldName).listOptions=t)}).catch(e=>{i.isLoading=!1,i.DivisionList=[],i.leftSearchFields.find(e=>"Division"===e.fieldName).listOptions=[]}).finally(()=>{i.isLoading=!1})}}},ie=te,ae=(i("ed76"),Object(y["a"])(ie,V,Y,!1,null,"5e7d1952",null)),se=ae.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("loader",{attrs:{"is-visible":e.isLoading}}),i("div",{staticClass:"col-md-12 p-0 mt-2"},[i("div",{staticClass:"ticketsmallfix theme-primary partition p-actions-expand ",staticStyle:{overflow:"visible"}},[i("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("BulkMove")))]),i("span",{staticClass:"p-actions float-right"},[i("a",{staticClass:"p-action-btn text-white",attrs:{title:"Bulk Move",href:"javascript:;"},on:{click:e.bulkMoveAction}},[i("em",{staticClass:"fa fa-arrows"}),i("br"),i("span",[e._v(e._s(e.$t("BulkMove")))])]),i("a",{staticClass:"p-action-btn text-white",attrs:{title:"Delete",href:"javascript:;"},on:{click:e.deleteAction}},[i("em",{staticClass:"fa fa-trash"}),i("br"),i("span",[e._v(e._s(e.$t("Delete")))])]),i("a",{staticClass:"p-action-btn text-white",attrs:{title:"View Queue List",href:"javascript:;"},on:{click:e.viewQueueListAction}},[i("em",{staticClass:"fa fa-eye"}),i("br"),i("span",[e._v(e._s(e.$t("ViewQueueList")))])])])])]),i("div",{staticClass:"border p-3 float-left w-100"},[i("dynamic-form",{ref:"dynamicform",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema,mandatorytext:e.MandatoryString},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-SampleFile",fn:function(t){t.data;return[i("div",{staticClass:"col-lg-12 col-xl-12 p-0"},[i("div",{staticClass:"form-group",attrs:{id:"divFiles"}},[i("div",{staticClass:"input-group mb-3"},[i("div",{staticClass:"form-control"},[i("span",{staticClass:"text-truncate"},[e._v("Download BulkMoveAdvanceSampleFile.xls")])]),i("div",{staticClass:"input-group-append"},[i("a",{staticClass:"input-group-text",attrs:{href:"https://cogniterblob.blob.core.windows.net/cg-usic-llc-310896/Upload/UserProfileImage/0f0cf000-22f8-40d0-ab1a-34fbcb382d96.xlsx",title:"Download",checkprivilege:"no"}},[i("i",{staticClass:"fa fa-download action-icon"})])])])])])]}}])}),i("div",{staticClass:"heading-border mt-3"},[i("h5",{staticClass:"h5"},[i("span",[e._v(e._s(e.$t("Ticket")))])])]),i("div",{staticClass:"row mb-2 mt-2"},[i("div",{staticClass:"col-12 mb-2"},[i("div",{staticClass:"d-inline-block mr-2"},[i("button",{staticClass:"btn btn-success text-white",attrs:{type:"button"},on:{click:e.selectAllLineItems}},[i("i",{staticClass:"fa fa-check pr-2",staticStyle:{width:"20px"}}),e._v(e._s(e.$t("SelectAllLineItems"))+" ")])]),i("div",{staticClass:"d-inline-block"},[i("span",{staticClass:"legend-upcoming colorboxsquare"}),e._v(e._s(e.$t("InvoiceSentMessageOnBulkMove"))+" ")])])]),i("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!1,showCheckBox:!0,ModuleName:"BillingValidationData",SubModuleCode:"BulkMove",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("BulkMove"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:[],TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchBulkMoveRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:!1},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["COST"==a.column.COLUMN_NAME?[i("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(e.formatCurrency(a.row.COST)))])]:e._e(),"DATEOFINV"==a.column.COLUMN_NAME?[a.row.DATEOFINV?i("span",{attrs:{title:a.row.DATEOFINV}},[e._v(" "+e._s(e.formatDate(a.row.DATEOFINV))+" ")]):i("span",[e._v("--")])]:e._e(),"DATEOFWORK"==a.column.COLUMN_NAME?[a.row.DATEOFWORK?i("span",{attrs:{title:a.row.DATEOFWORK}},[e._v(" "+e._s(e.formatDate(a.row.DATEOFWORK))+" ")]):i("span",[e._v("--")])]:e._e()]}}])})],1),e.IsChangeLineItem?i("ChangeClientAndUtility",{attrs:{lineItemIds:e.ColumnIds,ticketNumberList:e.SelectedTicketNumbers,activityIdList:e.SelectedActivityIds,requestFrom:e.requestFrom,oldClientList:e.selectedClientId,oldUtilityList:e.SelectedUtilityList,workDateFrom:e.WorkDateFrom,workDateTo:e.WorkDateTo,BulkMoveBatchId:e.BulkMoveBatchId}}):e._e(),e.IsViewQueueList?i("BulkMoveQueue",{attrs:{ReqFrom:e.ReqFrom}}):e._e()],1)},le=[];i("b7ef");let ne=[],re=[],ce=[{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:1},{COLUMN_NAME:"ACTIVITY_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ActivityId",DISPLAY_ORDER:2},{COLUMN_NAME:"TRANSMISSION_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TransmissionId",DISPLAY_ORDER:3},{COLUMN_NAME:"CONTRACT_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ContractName",DISPLAY_ORDER:4},{COLUMN_NAME:"UTIL_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"UtilId",DISPLAY_ORDER:5},{COLUMN_NAME:"SBA_DESC",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"sba_id",DISPLAY_ORDER:6},{COLUMN_NAME:"DIVISION_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"DivisionId",DISPLAY_ORDER:7},{COLUMN_NAME:"WORKCODE_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WorkCode",DISPLAY_ORDER:8},{COLUMN_NAME:"COST",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Cost",DISPLAY_ORDER:9,settings:{isInSlot:!0}},{COLUMN_NAME:"SERVICE_CONDITION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ServiceCondition",DISPLAY_ORDER:10},{COLUMN_NAME:"DATEOFINV",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ProcessDate",DISPLAY_ORDER:11,settings:{isInSlot:!0}},{COLUMN_NAME:"DATEOFWORK",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"LocatorStartDate",DISPLAY_ORDER:12,settings:{isInSlot:!0}}],de=[];var ue={buttons:ne,leftsearchSchema:re,headerSchema:ce,listActions:de},me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-popups"},[i("div",{staticClass:"modal d-block"},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("BulkMove")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),i("span",{staticClass:"user-guide"},[i("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseBulkMove",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[i("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser"))+" ")]),i("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseBulkMove"}},[i("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarBulkMove"}},[i("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Bulk_move_line_item"))}})])])])]),i("div",{staticClass:"modal-body"},[i("dynamic-form",{ref:"bulkMoveForm",attrs:{buttons:e.buttons,schema:e.formSchema,lang:"en"},on:{OnSubmit:e.onSubmit}}),i("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])],1)])])]),i("transition",{attrs:{name:"modal"}},[e.showConfirmationDialog?i("div",{staticClass:"my-popups"},[i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("BulkMove")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cancelConfirmation}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"text-center"},[i("p",[e._v(e._s(e.confirmationMessage))])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-success",on:{click:e.confirmBulkMove}},[i("em",{staticClass:"fa fa-check pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Yes"))+" ")]),i("button",{staticClass:"btn btn-danger",on:{click:e.cancelConfirmation}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("No"))+" ")])])])])])]):e._e()]),i("transition",{attrs:{name:"modal"}},[e.showSuccessDialog?i("div",{staticClass:"my-popups"},[i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("BulkMove")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closeSuccessDialog}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"bg-f5f5f5 p-2 border-bottom"},[i("span",[e._v(e._s(e.$t("BulkMoveSuccessMessagePopUp")))])]),i("div",{staticClass:"bg-f5f5f5 p-2"},[i("span",[e._v(e._s(e.successMessage))])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-success",on:{click:e.closeSuccessDialog}},[i("em",{staticClass:"fa fa-check pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("OK"))+" ")])])])])])]):e._e()]),i("transition",{attrs:{name:"modal"}},[e.showSameRecordsDialog?i("div",{staticClass:"my-popups"},[i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-xl"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("BulkMove")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closeSameRecordsDialog}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"bg-f5f5f5 p-2 border-bottom"},[i("span",{staticClass:"text-danger"},[e._v(e._s(e.sameRecordsMessage))])]),i("div",{staticClass:"bg-f5f5f5 p-2"},[i("div",{staticClass:"table-responsive"},[i("table",{staticClass:"table table-bordered"},[i("thead",{staticClass:"thead-bg"},[i("tr",[i("th",[e._v(e._s(e.$t("Client")))]),i("th",[e._v(e._s(e.$t("Utility")))]),i("th",[e._v(e._s(e.$t("TicketNumber")))]),i("th",[e._v(e._s(e.$t("ActivityId")))]),i("th",[e._v(e._s(e.$t("SBA")))]),i("th",[e._v(e._s(e.$t("Division")))])])]),i("tbody",e._l(e.sameRecordsData,(function(t){return i("tr",{key:t.id},[i("td",[e._v(e._s(t.CONTRACT_NAME))]),i("td",[e._v(e._s(t.UTIL_ID))]),i("td",[e._v(e._s(t.TicketNumber))]),i("td",[e._v(e._s(t.activity_id))]),i("td",[e._v(e._s(t.SBA_DESC))]),i("td",[e._v(e._s(t.DIVISION_NAME))])])})),0)])])])])])])])]):e._e()])],1)},he=[],pe={name:"ChangeClientAndUtility",props:{requestFrom:{type:String,default:""},ticketNumberList:{type:String,default:""},activityIdList:{type:String,default:""},oldClientList:{type:String,default:""},oldUtilityList:{type:String,default:""},workDateFrom:{type:String,default:""},workDateTo:{type:String,default:""},lineItemIds:{type:String,default:""},BulkMoveBatchId:{type:String,default:""}},data(){return{isLoading:!1,formSchema:[{layoutType:"double",Data:[{astype:"SearchableSelectField",label:this.$t("CONTRACTNAME"),name:"ClientName",value:"",placeholder:"",visibility:!0,isSearch:!1,actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],groupFields:["groupText"],isMultiple:!1,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},onChange:this.onSelectionChange},validationRules:{required:!0}},{astype:"SelectField",label:"Utility Name",name:"UtilityName",visibility:!0,value:"",placeholder:"Select utility",config:{options:[],onChange:this.onSelectionUtilityChange},validationRules:{required:!0}},{astype:"SelectField",label:"SBA",name:"SbaId",visibility:!0,value:"",placeholder:"Select SBA",config:{options:[]},validationRules:{required:!0}},{astype:"SelectField",label:"Division",name:"DivisionId",visibility:!0,value:"",placeholder:"Select division",config:{options:[],onChange:this.onDivisionChange},validationRules:{required:!0}},{astype:"SelectField",label:"Invoice Number",name:"InvoiceNumber",visibility:!0,value:"",placeholder:"Select invoice number",config:{options:[]},validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:"cancelForm"}],showSuccessDialog:!1,showSameRecordsDialog:!1,showConfirmationDialog:!1,successMessage:"",sameRecordsMessage:"",sameRecordsData:[],confirmationMessage:"",selectedClientIds:[],selectedClientNames:[],clientId:"",selectedFormData:null,SbaOptions:[]}},created(){this.loadInitialData()},methods:{loadInitialData(){this.fetchClientList()},fetchClientList(){this.isLoading=!0,r["a"].getClientList({reqFrom:"CUSTOM"}).then(e=>{if(this.isLoading=!1,e.data&&e.data.items){const t=e.data.items.map(e=>({description:null,displayValue:e.text||e.CHILD_NAME,groupText:e.groupText||e.PARENT_NAME,groupValue:null,metaData:null,text:e.text||e.CHILD_NAME,value:e.value||e.CHILD_USER_ID}));this.$refs.bulkMoveForm.updateProperty("ClientName","config.options",t),this.$refs.bulkMoveForm.UpdateKeyValue()}}).catch(e=>{this.isLoading=!1,console.error("Error fetching client list:",e)})},onSelectionChange(e,t){var i=this;if(i.clientId=t,t){i.isLoading=!0;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];if(e.data){var a=e.data;null!=a&&a.forEach(e=>{let i={name:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)})}i.clearDependentFields(),i.$refs.bulkMoveForm.updateProperty("UtilityName","config.options",t),i.$refs.bulkMoveForm.UpdateKeyValue()}).catch(e=>{i.isLoading=!1,i.clearDependentFields(),console.error("Error loading utilities:",e)})}else i.clearDependentFields()},async onSelectionUtilityChange(e,t){var i=this;t&&t.value?(i.UtilityId=t.value,i.$refs.bulkMoveForm.updateProperty("SbaId","config.options",[]),i.$refs.bulkMoveForm.updateProperty("SbaId","value",""),i.$refs.bulkMoveForm.updateProperty("DivisionId","config.options",[]),i.$refs.bulkMoveForm.updateProperty("DivisionId","value",""),i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),i.$refs.bulkMoveForm.UpdateKeyValue(),await i.GetSbaIdListByUtilityId(),await i.LoadDivisionList()):i.clearDependentFields()},GetSbaIdListByUtilityId:function(){var e=this;let t=[];e.SbaOptions=[];var i="UtilityId="+e.UtilityId;r["a"].GetSbaIdListByUtilityId(i).then(i=>{if(i.data){var a=i.data;null!=a&&a.forEach(e=>{let i={name:e.NAME,value:e.SBA_ID};t.push(i)})}e.$refs.bulkMoveForm.updateProperty("SbaId","value",""),e.$refs.bulkMoveForm.updateProperty("SbaId","config.options",t),e.SbaOptions=t,e.$refs.bulkMoveForm.updateProperty("DivisionId","config.options",[]),e.$refs.bulkMoveForm.updateProperty("DivisionId","value",""),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),e.$refs.bulkMoveForm.UpdateKeyValue()}).catch(t=>{console.error("Error loading SBA data:",t),e.$refs.bulkMoveForm.updateProperty("SbaId","config.options",[]),e.$refs.bulkMoveForm.updateProperty("SbaId","value",""),e.$refs.bulkMoveForm.updateProperty("DivisionId","config.options",[]),e.$refs.bulkMoveForm.updateProperty("DivisionId","value",""),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),e.$refs.bulkMoveForm.UpdateKeyValue()})},LoadDivisionList(){var e=this;e.isLoading=!0;var t=`clientId=${e.clientId}&utilityIds=${e.UtilityId}`;r["a"].LoadClientDivisionListByUtilityIds(t).then(t=>{e.isLoading=!1;let i=[];var a=t.data;null!=a&&a.forEach(e=>{let t={name:e.NAME,value:e.VALUE};i.push(t)}),e.$refs.bulkMoveForm.updateProperty("DivisionId","value",""),e.$refs.bulkMoveForm.updateProperty("DivisionId","config.options",i),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),e.$refs.bulkMoveForm.UpdateKeyValue()}).catch(t=>{e.isLoading=!1,e.$refs.bulkMoveForm.updateProperty("DivisionId","config.options",[]),e.$refs.bulkMoveForm.updateProperty("DivisionId","value",""),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),e.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),e.$refs.bulkMoveForm.UpdateKeyValue(),console.error("Error loading divisions:",t)})},onDivisionChange(e,t){var i=this;if(t&&t.value){i.isLoading=!0;var a=`clientId=${i.clientId}&divisionId=${t.value}&type=division`;r["a"].LoadInvoiceNumberList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&a.forEach(e=>{let i={name:e.NAME,value:e.BILL_ID};t.push(i)}),i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",t),i.$refs.bulkMoveForm.UpdateKeyValue()}).catch(e=>{i.isLoading=!1,i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),i.$refs.bulkMoveForm.UpdateKeyValue(),console.error("Error loading invoice numbers:",e)})}else i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),i.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),i.$refs.bulkMoveForm.UpdateKeyValue()},clearDependentFields(){this.$refs.bulkMoveForm.updateProperty("UtilityName","config.options",[]),this.$refs.bulkMoveForm.updateProperty("SbaId","config.options",[]),this.$refs.bulkMoveForm.updateProperty("DivisionId","config.options",[]),this.$refs.bulkMoveForm.updateProperty("InvoiceNumber","config.options",[]),this.$refs.bulkMoveForm.updateProperty("UtilityName","value",""),this.$refs.bulkMoveForm.updateProperty("SbaId","value",""),this.$refs.bulkMoveForm.updateProperty("DivisionId","value",""),this.$refs.bulkMoveForm.updateProperty("InvoiceNumber","value",""),this.$refs.bulkMoveForm.UpdateKeyValue()},onSubmit(e){this.validateBulkMoveConditions(e)},validateBulkMoveConditions(e){this.oldUtilityList===e.UtilityName&&this.activityIdList&&e.SbaId&&e.InvoiceNumber?(this.isLoading=!0,r["a"].ValidateBMUtilitySbaIdInvoiceNo({ClientId:e.ClientName,UtilityName:e.UtilityName,BillId:e.InvoiceNumber,SbaId:this.getSbaText(e.SbaId),BeSbaId:e.SbaId,DivisionId:e.DivisionId,LineItemIds:this.lineItemIds,TicketNumber:this.ticketNumberList,ActivityId:this.activityIdList,WorkDateFrom:this.workDateFrom,WorkDateTo:this.workDateTo}).then(t=>{this.isLoading=!1,"failure"!==t.data.flag||"Invalid"!==t.data.StatusCode&&"Error"!==t.data.StatusCode&&"Exception"!==t.data.StatusCode?this.showBulkMoveConfirmation(e):this.showAlert("BulkMove cannot be used on the same Utility, Sba_Id, and Invoice#.","warning")}).catch(e=>{this.isLoading=!1,this.showAlert(this.$t("ErrorWhileProcessingRequest"),"failure"),console.error("Validation error:",e)})):this.showBulkMoveConfirmation(e)},showBulkMoveConfirmation(e){this.selectedFormData=e,this.confirmationMessage=this.$t("BulkMoveConfirmMoveMessage").replace("{0}",this.selectedClientNames.join(", ")),this.showConfirmationDialog=!0},cancelConfirmation(){this.showConfirmationDialog=!1,this.selectedFormData=null},confirmBulkMove(){this.showConfirmationDialog=!1,this.performBulkMove(this.selectedFormData),this.selectedFormData=null},performBulkMove(e){this.isLoading=!0;var t=this;const i=this.getSbaText(e.SbaId),a={UtilityName:e.UtilityName,ClientId:e.ClientName,SbaId:i,BeSbaId:e.SbaId,DivisionId:e.DivisionId,LineItemIds:this.lineItemIds,ReqFrom:this.requestFrom,TicketNumber:this.ticketNumberList,ActivityId:this.activityIdList,OldClient:this.oldClientList,OldUtility:this.oldUtilityList,WorkDateFrom:this.workDateFrom,WorkDateTo:this.workDateTo,BillId:e.InvoiceNumber,AllInvoice:this.selectAllData?JSON.stringify(this.selectAllData):"",IsSelectedChecked:!0,BulkMoveBatchId:this.BulkMoveBatchId};r["a"].UpdateContractAndUtility(a).then(e=>{this.isLoading=!1,"success"==e.data.flag&&-11!==e.data.statusCode&&11!==e.data.statusCode?(101!==e.data.statusCode&&t.ShowAlert(t.$t(e.data.msg),"success",!0,t.$t("Alert")),null!=e.data.bulkMoveResult&&(101===e.data.statusCode?this.showAlert(this.$t("NoBillingRuleFound"),"warning"):this.showBulkMoveResultDialog(e.data.bulkMoveResult))):"alreadyExists"===e.data.msg&&0===e.data.statusCode?this.showSameRecordsDialogWithData(e.data.bulkMoveResult):"success"===e.data.msg&&-11===e.data.statusCode?this.showAlert(this.$t("BulkMOveAlreadyInQueueMessage"),"failure"):this.showAlert(e.data.msg||this.$t("ErrorWhileProcessingRequest"),"failure")}).catch(e=>{this.isLoading=!1,this.showAlert(this.$t("ErrorWhileProcessingRequest"),"failure"),console.error("Bulk move error:",e)})},getSbaText(e){const t=this.SbaOptions||[],i=t.find(t=>t.value===e);return i?i.name:""},showBulkMoveResultDialog(e){this.isLoading=!1,this.showSuccessDialog=!0,this.successMessage=`Total ${e.totalRecords||0} records are marked as unprocessed. Records are in queue to process and will be processed soon. Scheduler runs every 10 minutes to process these records.`},showSameRecordsDialogWithData(e){this.sameRecordsMessage="Following are the details that Client, Utility, SBA Id OR Invoice grouping same please update it and try again.",this.sameRecordsData=e||[],this.showSameRecordsDialog=!0},handleBulkMoveComplete(){this.$emit("bulk-move-complete")},setBulkMoveData(e){this.requestFrom=e.requestFrom||this.requestFrom,this.ticketNumberList=e.ticketNumberList||this.ticketNumberList,this.activityIdList=e.activityIdList||this.activityIdList,this.oldClientList=e.oldClientList||this.oldClientList,this.oldUtilityList=e.oldUtilityList||this.oldUtilityList,this.workDateFrom=e.workDateFrom||this.workDateFrom,this.workDateTo=e.workDateTo||this.workDateTo,this.lineItemIds=e.lineItemIds||this.lineItemIds,this.selectAllData=e.selectAllData||this.selectAllData},showAlert(e,t){this.$emit("show-alert",{message:e,type:t})},cancelForm(){this.closeDialog()},Close:function(){this.$parent.IsChangeLineItem=!1},closeSuccessDialog(){this.showSuccessDialog=!1,this.Close()},closeSameRecordsDialog(){this.showSameRecordsDialog=!1}}},fe=pe,ge=(i("5fd7"),Object(y["a"])(fe,me,he,!1,null,"bb51e944",null)),ve=ge.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-popups"},[i("div",{staticClass:"modal d-block"},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-xl"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("QueueList")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("loader",{attrs:{"is-visible":e.isLoading}}),i("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!1,showCheckBox:!1,ModuleName:"BillingValidationData",SubModuleCode:"BulkMoveQueue",IdentityColumn:"QUEUE_ID",HeaderText:e.$t("BulkMoveQueue"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchBulkMoveQueueRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["DATE_RANGE"==a.column.COLUMN_NAME?[i("span",[e._v(" "+e._s(e.$options.filters.formatDate(a.row.FROM_DATE))+" -"+e._s(e.$options.filters.formatDate(a.row.TO_DATE))+" ")])]:e._e(),"STATUS"==a.column.COLUMN_NAME?[1==a.row.PROCESSING_STATUS?i("span",{staticClass:"bg-warning py-1 px-1 text-white w-100 d-block text-center"},[e._v(" "+e._s(e.$t("In_Progress"))+" ")]):1003==a.row.STATUS_ID?i("span",{staticClass:"bg-success py-1 px-1 text-white w-100 d-block text-center"},[e._v(" "+e._s(e.$t("Completed"))+" ")]):i("span",{staticClass:"bg-primary py-1 px-1 text-white w-100 d-block text-center"},[e._v(" "+e._s(e.$t("InQueue"))+" ")])]:e._e(),"CREATED_AT"==a.column.COLUMN_NAME?[i("span",[e._v(" "+e._s(e.$options.filters.formatDate(a.row.CREATED_AT))+" ")])]:e._e()]}}])})],1)])])])])},Ce=[];let Se=[],ye=[{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"clientId",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"UtilityName",fieldType:"searchableselect",fieldIcon:"fa fa-building",paramName:"utilityName",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"RequestedAt",fieldType:"date",fieldIcon:"fa fa-calendar",paramName:"dateFrom",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"RequestedBy",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"requestedBy",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null}],Ae=[{COLUMN_NAME:"SERIAL_NO",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"SerialNumbering",DISPLAY_ORDER:1},{COLUMN_NAME:"CONTRACT_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Client",DISPLAY_ORDER:2},{COLUMN_NAME:"UTILITY_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Utility",DISPLAY_ORDER:3},{COLUMN_NAME:"NUMBER_OF_RECORDS",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TotalRecords",DISPLAY_ORDER:4},{COLUMN_NAME:"DATE_RANGE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"DateRange",DISPLAY_ORDER:5,settings:{isInSlot:!0}},{COLUMN_NAME:"STATUS",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:6,settings:{isInSlot:!0}},{COLUMN_NAME:"PROCESSED_RECORD_COUNT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ProcessedRecord",DISPLAY_ORDER:7},{COLUMN_NAME:"UNPROCESSED_RECORD_COUNT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"UnprocessedRecords",DISPLAY_ORDER:8},{COLUMN_NAME:"FLAGGED_RECORD_COUNT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TOTAL_FLAGGED_RECORDS",DISPLAY_ORDER:9},{COLUMN_NAME:"USERNAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"RequestedBy",DISPLAY_ORDER:10},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"RequestedAt",DISPLAY_ORDER:11}],Te=[];async function De(e){e.fetchClientList(),e.fetchUserList()}var _e={buttons:Se,leftsearchSchema:ye,headerSchema:Ae,listActions:Te,bindleftCommonSearchdropdown:De},be={name:"BulkMoveQueue",props:{ReqFrom:{type:String,required:!1}},components:{Loader:o["a"]},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:_e.buttons,leftSearchFields:_e.leftsearchSchema,listActions:_e.listActions,Headers:_e.headerSchema,searchCondition:"",selectedClientId:null,selectedUtilityIds:[],selectedUserIds:[],requestedAt:null}},created:function(){var e,t=this;t.Headers.forEach(e=>{e.DISPLAY_NAME=t.$t(e.DISPLAY_NAME)}),(null===(e=t.leftSearchFields)||void 0===e?void 0:e.length)>0&&(t.leftSearchFields.find(e=>"ClientName"===e.fieldName).onChange=t.onClientChange),_e.bindleftCommonSearchdropdown(this),t.FetchBulkMoveQueueRecords()},methods:{leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.FetchBulkMoveQueueRecords()},renderActions:function(){return[]},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchBulkMoveQueueRecords()},actionButtonClick:function(){},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"searchAction":this.searchAction();break;case"clearAction":this.clearAction();break}},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchBulkMoveQueueRecords()},FetchBulkMoveQueueRecords:function(){var e=this;e.isLoading=!0;var t=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&advanceType=${e.ReqFrom}`;e.searchCondition&&(t+="&"+e.searchCondition),r["a"].GetBulkMoveQueueList(t).then(t=>{e.isLoading=!1,t.data.result?(e.ListingData=JSON.parse(t.data.result),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach((t,i)=>{t.SERIAL_NO=(e.PageNumber-1)*e.PageSize+i+1}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)):(e.ListingData=[],e.TotalRecords=0)}).catch(t=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0,console.error("Error fetching bulk move queue records:",t)})},fetchClientList:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=e.clientList}).catch(t=>{e.isLoading=!1,e.clientList=[],e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=[],console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},fetchUserList:function(){var e=this;e.isLoading=!0;var t="isActive=1&moduleName=BulkMoveUsingFile";r["a"].getUserList(t).then(t=>{e.isLoading=!1;let i=[];var a=t.data;null!=a&&(a.forEach(e=>{let t={description:null,displayValue:e.UserName,groupText:null,groupValue:null,metaData:null,text:e.UserName,value:e.UserId};i.push(t)}),e.leftSearchFields.find(e=>"RequestedBy"===e.fieldName).listOptions=i)}).catch(t=>{e.isLoading=!1,e.leftSearchFields.find(e=>"RequestedBy"===e.fieldName).listOptions=[],console.error("Error fetching user list:",t)}).finally(()=>{e.isLoading=!1})},onClientChange(e,t){var i=this;i.selectedClientId=t,i.fetchUtilityList(t)},fetchUtilityList:function(e){if(e){var t=this;t.isLoading=!0;var i=`clientId=${e}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(i).then(e=>{t.isLoading=!1;let i=[];var a=e.data;null!=a&&(a.forEach(e=>{let t={description:null,displayValue:e.UTILITY_NAME,groupText:null,groupValue:null,metaData:null,text:e.UTILITY_NAME,value:e.UTILITY_ID};i.push(t)}),t.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=i)}).catch(e=>{t.isLoading=!1,t.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[],console.error("Error fetching utility list:",e)}).finally(()=>{t.isLoading=!1})}else this.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]},searchAction:function(){this.FetchBulkMoveQueueRecords()},clearAction:function(){this.leftSearchFields.forEach(e=>{"searchableselect"===e.fieldType?e.value="":e.fieldType}),this.searchCondition="",this.selectedClientId=null,this.selectedUtilityIds=[],this.selectedUserIds=[],this.requestedAt=null,this.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[],this.FetchBulkMoveQueueRecords()},Close:function(){this.$parent.IsViewQueueList=!1}}},Ee=be,Le=(i("bb21"),Object(y["a"])(Ee,Ie,Ce,!1,null,"4b2989cc",null)),Ne=Le.exports,ke={name:"BulkMove",components:{ChangeClientAndUtility:ve,BulkMoveQueue:Ne},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],fileData:[],Buttons:ue.buttons,leftSearchFields:ue.leftsearchSchema,listActions:ue.listActions,Headers:ue.headerSchema,searchCondition:"",selectedClientId:null,IsChangeLineItem:!1,SelectedTicketNumbers:"",SelectedActivityIds:"",ColumnIds:"",requestFrom:"bmfile",ReqFrom:"",WorkDateFrom:"",WorkDateTo:"",BulkMoveBatchId:"",IsViewQueueList:!1,MandatoryString:"Fields marked with an asterisk (*) are mandatory.",FormSchema:[{layoutType:"triple",Data:[{astype:"SearchableSelectField",label:this.$t("CONTRACTNAME"),name:"ContractName",value:"",placeholder:"",visibility:!0,isSearch:!1,actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],isMultiple:!1,groupFields:["groupText"],minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},onChange:this.onSelectionChange},validationRules:{required:!0}},{astype:"SearchableSelectField",label:this.$t("UtilityName"),name:"UtilityName",value:"",placeholder:"",visibility:!0,isSearch:!1,groupFields:["groupText"],actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],isMultiple:!0,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"}},validationRules:{required:!0}},{astype:"NormalFileField",label:this.$t("Image"),name:"Attachment",placeholder:"",validationRules:{required:!0},FieldIndex:0,config:{maxSize:5,showSelectedFiles:[],accept:[{fileType:"xlsx",iconClass:"fa-file-excel-o"},{fileType:"xls",iconClass:"fa-file-excel-o"},{fileType:"csv",iconClass:"fa-file-text-o"}],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}},{astype:"DateField",label:this.$t("WorkDateFrom"),name:"WorkDateFrom",value:"",placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!0}},{astype:"DateField",label:this.$t("WorkDateTo"),name:"WorkDateto",value:(new Date).toLocaleDateString(),placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!0}},{astype:"DateField",label:this.$t("ProcessDateFrom"),name:"ProcessDateFrom",value:"",placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!1}},{astype:"DateField",label:this.$t("ProcessDateTo"),name:"ProcessDateto",value:"",placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!1}},{astype:"SlotField",label:this.$t("SampleFile"),name:"SampleFile",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!1,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-search pr-2'></i>Search"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-refresh pr-2'></i>Clear",onClick:this.Clear}],SelectedUtilityList:""}},created:function(){var e=this;e.Headers.forEach(t=>{t.DISPLAY_NAME=e.$t(t.DISPLAY_NAME)}),e.fetchclientlist()},methods:{leftCommonSearch:function(e){var t=this;this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/WorkDate=([^&]+)/,(function(e,i){let[a,s]=i.split("|");return t.WorkDateFrom=a,t.WorkDateTo=s,`WorkDateFrom=${a}&WorkDateTo=${s}`})),this.searchCondition=this.searchCondition.replace(/ProcessDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`ProcessDateFrom=${i}&ProcessDateTo=${a}`}))),this.FetchBulkMoveRecords()},renderActions:function(){return[]},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchBulkMoveRecords()},actionButtonClick:function(){},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"bulkMoveAction":this.bulkMoveAction();break;case"deleteAction":this.deleteAction();break;case"viewQueueListAction":this.viewQueueListAction();break}},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchBulkMoveRecords()},GetBase64String:function(e){try{var t=this;t.fileData=[];var i=e.target.files;t.attachmentName=i[0].name;for(var a=0;a<i.length;a++){var s=i[a],o=new FileReader;o.onload=function(e){return function(e){var i=e.target.result,a=window.btoa(i);t.base64String=a;var o=s.name,l=o.lastIndexOf("."),n=o.substring(l+1,o.length),r='{"ContentType":"'+s.type+'","Size":"'+s.size+'","Extension":"'+n+'"}',c=(s.size,{attachement_mime:r,fileName:o,userId:t.GetUserInfo.ID,companyId:t.GetUserInfo.CompanyId,id:0,moduleName:"initialsetup",subModuleCode:"",containerName:t.GetUserInfo.ContainerName,base64String:a,attachement_path:""});t.fileData.push(c)}}(),o.readAsBinaryString(s)}}catch(l){}},formatDate(e){let t=new Date(e),i=t.getMonth()+1,a=t.getDate(),s=t.getFullYear();return`${i}/${a}/${s}`},async onSubmit(e,t){var i=this;i.isLoading=!0;let a=i.formatDate(e.WorkDateFrom),s=i.formatDate(e.WorkDateto),o=i.formatDate(e.ProcessDateFrom),l=i.formatDate(e.ProcessDateto);var n=JSON.stringify(i.fileData);await r["a"].UploadFile(n).then((function(e){e.data&&e.data.length>0&&e.data[0].Name.length>0&&(i.filePath=e.data[0].Name)}));let c=e.UtilityName,d=Array.isArray(c)&&c.length>1?c.join(","):Array.isArray(c)?c[0]:c;i.SelectedUtilityList=d;var u=i.filePath,m=`pageSize=${i.PageSize}&pageNum=${i.PageNumber}&sortBy=${i.SortBy}&sortExp=${i.SortExp}&utilityName=${d}&clients=${e.ContractName}&workDateFrom=${a}&workDateTo=${s}\n            &processDateFrom=${o}&processDateTo=${l}&filepath=`+encodeURIComponent(u)+"&filename="+encodeURIComponent("BulkMove_SampleFile.xlsx")+"&fileNewname="+encodeURIComponent("758499944.xlsx");i.searchCondition&&(m+="&"+i.searchCondition),r["a"].GetBulkMoveListing(m).then(e=>{i.isLoading=!1,e.data.result&&(i.ListingData=JSON.parse(e.data.result),i.BulkMoveBatchId=e.data.bulkMoveBatchId),i.ListingData&&i.ListingData.length>0?(i.ListingData.forEach(e=>{e.DATEOFINV&&(e.DATEOFINV=new Date(e.DATEOFINV)),e.DATEOFWORK&&(e.DATEOFWORK=new Date(e.DATEOFWORK))}),i.TotalRecords=i.ListingData[0].TOTAL_RECORDS||i.ListingData[0].TOTALRECORDS||0,i.TotalPages=Math.ceil(i.TotalRecords/i.PageSize),i.CurrentPage=i.PageNumber):(i.ListingData=[],i.TotalRecords=0)})},FetchBulkMoveRecords:function(){var e=this;e.isLoading=!0;var t=e.filePath,i=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&utilityName=${SelectedUtilities}&clients=${formfields.ContractName}&workDateFrom=${WorkDateFrom}&workDateTo=${WorkDateTo}\n            &processDateFrom=${ProcessDateFrom}&processDateTo=${ProcessDateTo}&filepath=`+encodeURIComponent(t)+"&filename="+encodeURIComponent("BulkMove_SampleFile.xlsx")+"&fileNewname="+encodeURIComponent("758499944.xlsx");e.searchCondition&&(i+="&"+e.searchCondition),r["a"].GetBulkMoveListing(i).then(t=>{e.isLoading=!1,t.data.result&&(e.ListingData=JSON.parse(t.data.result),e.BulkMoveBatchId=t.data.bulkMoveBatchId),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach(e=>{e.DATEOFINV&&(e.DATEOFINV=new Date(e.DATEOFINV)),e.DATEOFWORK&&(e.DATEOFWORK=new Date(e.DATEOFWORK))}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)}).catch(t=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0,console.error("Error fetching flag records:",t)}),setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return t.toLocaleDateString()},formatCurrency(e){return e||0===e?parseFloat(e).toFixed(2):"0.00"},selectAllLineItems(){$(".chkItems").not("[id^='chkAll_0']").prop("checked",!0)},fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.$refs.dynamicform.updateProperty("ContractName","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue()}).catch(t=>{e.isLoading=!1,e.clientList=[],e.$refs.dynamicform.updateProperty("ContractName","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue(),console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},Close:function(){this.$parent.IsChangeLineItem=!1},onSelectionChange(e,t){var i=this;i.isLoading=!0,i.selectedClientId=t;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.UTILITY_NAME,groupText:null,groupValue:null,metaData:null,text:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.$refs.dynamicform.updateProperty("UtilityName","config.options",t))}).catch(e=>{i.isLoading=!1,i.UtilityList=[],i.$refs.dynamicform.updateProperty("UtilityName","config.options",[])}).finally(()=>{i.isLoading=!1})},bulkMoveAction:function(e){var t=this,i=[];$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){i.push($(this).val())})),0!==i.length?(t.ColumnIds=i.filter(e=>null!=e&&""!==e).join(","),t.FilteredList=t.ListingData.filter(e=>i.includes(String(e.COLUMN_ID))),t.SelectedTicketNumbers=t.FilteredList.length>0?t.FilteredList.map(e=>e.TICKETNUMBER).join(","):"",t.SelectedActivityIds=t.FilteredList.length>0?t.FilteredList.map(e=>e.ACTIVITY_ID).join(","):"",t.IsChangeLineItem=!t.IsChangeLineItem):t.ShowAlert(t.$t("PleaseSelectAnyRecordsForFurther"),"warning",!0,t.$t("Alert"))},deleteAction(){var e=this,t=[];$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){t.push($(this).val())})),0!==t.length?(e.ColumnIds=t.filter(e=>null!=e&&""!==e).join(","),e.FilteredList=e.ListingData.filter(e=>t.includes(String(e.COLUMN_ID))),e.SelectedTicketNumbers=e.FilteredList.length>0?e.FilteredList.map(e=>e.TICKETNUMBER).join(","):"",e.SelectedActivityIds=e.FilteredList.length>0?e.FilteredList.map(e=>e.ACTIVITY_ID).join(","):"",t.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("BulkMove"),(function(){var t={utilityName:0,clientId:e.selectedClientId,sbaId:"",divisionId:"",lineItemIds:e.ColumnIds,reqFrom:"bmDfile",ticketNumber:e.SelectedTicketNumbers,activityId:e.SelectedActivityIds,oldClient:e.selectedClientId,oldUtility:e.SelectedUtilityList,workDateFrom:e.WorkDateFrom,workDateTo:e.WorkDateTo,allInvoice:"",bulkMoveBatchId:e.BulkMoveBatchId};r["a"].UpdateContractAndUtility(t).then((function(t){"success"==t.data.msg?(e.ShowAlert(e.$t("RecordUpdatedSuccessfully"),"success",!0,e.$t("Alert")),e.ListingData=e.ListingData.filter(t=>!e.FilteredList.some(e=>e.COLUMN_ID===t.COLUMN_ID)),e.TotalRecords-=e.FilteredList.length,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize)):e.ShowAlert(t.data.msg,"failure",!0,e.$t("Alert"))})).catch((function(){e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("PleaseSelectAnyRecordsForFurther"),"warning",!0,e.$t("Alert"))):e.ShowAlert(e.$t("PleaseSelectAnyRecordsForFurther"),"warning",!0,e.$t("Alert"))},viewQueueListAction(){var e=this;e.IsViewQueueList=!e.IsViewQueueList},Clear:function(){var e=this;e.FormSchema[0].Data.forEach(e=>{"WorkDateto"===e.name?e.value=(new Date).toLocaleDateString():e.value=""}),e.fileData=[],e.selectedClientId=null,e.$refs.dynamicform.updateProperty("UtilityName","config.options",[]),e.$refs.dynamicform.UpdateKeyValue()}}},Re=ke,Me=(i("2d10"),Object(y["a"])(Re,oe,le,!1,null,"0cb7f220",null)),Oe=Me.exports,Pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("loader",{attrs:{"is-visible":e.isLoading}}),i("div",{staticClass:"col-md-12 p-0 mt-2"},[i("div",{staticClass:"ticketsmallfix theme-primary partition p-actions-expand ",staticStyle:{overflow:"visible"}},[i("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("BulkMoveAdvance")))]),i("span",{staticClass:"p-actions float-right"},[i("a",{staticClass:"p-action-btn text-white",attrs:{title:"View Queue List",href:"javascript:;"},on:{click:e.viewQueueListAction}},[i("em",{staticClass:"fa fa-eye"}),i("br"),i("span",[e._v(e._s(e.$t("ViewQueueList")))])])])])]),i("div",{staticClass:"border p-3 float-left w-100"},[i("dynamic-form",{ref:"dynamicform",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema,mandatorytext:e.MandatoryString},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-SampleFile",fn:function(t){t.data;return[i("div",{staticClass:"col-lg-12 col-xl-12 p-0"},[i("div",{staticClass:"form-group",attrs:{id:"divFiles"}},[i("div",{staticClass:"input-group mb-3"},[i("div",{staticClass:"form-control"},[i("span",{staticClass:"text-truncate"},[e._v("Download BulkMoveAdvanceSampleFile.xls")])]),i("div",{staticClass:"input-group-append"},[i("a",{staticClass:"input-group-text",attrs:{href:"https://cogniterblob.blob.core.windows.net/cg-usic-llc-310896/Upload/UserProfileImage/c242ce49-e900-441f-b9ff-efb51d0a5c6e.xlsx",title:"Download",checkprivilege:"no"}},[i("i",{staticClass:"fa fa-download action-icon"})])])])])])]}}])}),i("div",{staticClass:"heading-border mt-3"},[i("h5",{staticClass:"h5"},[i("span",[e._v(e._s(e.$t("List")))])])]),i("div",{staticClass:"row mb-2 mt-3"},[i("div",{staticClass:"col-12 mb-2"},[i("div",{staticClass:"d-inline-block mr-2"},[i("span",{staticClass:"legend-Progress colorboxsquare"}),e._v(e._s(e.$t("InvoiceSentMessageOnBulkMoveAdvance"))+" ")]),i("div",{staticClass:"d-inline-block mr-2"},[i("span",{staticClass:"legend-ovrdue colorboxsquare"}),e._v(e._s(e.$t("BulkMoveAdvanceSameInvoice"))+" ")])])]),i("tg-list",{key:e.reloadkey,ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!1,ModuleName:"BillingValidationData",SubModuleCode:"BulkMoveAdvance",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("BulkMoveAdvance"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:[],TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchBulkMoveAdvanceRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,tableClasses:" overflow-visible",SearchFields:!1},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["CLIENT_NAME"==a.column.COLUMN_NAME?[i("div",[i("SearchableSelect",{key:a.row.COLUMN_ID+"-client",class:{"border-danger":a.row.hasErrorClient},attrs:{items:e.groupedUtilities,"max-visible-chips":3,"action-buttons":{selectAll:!0,active:!0,inactive:!0,clear:!0},"item-fields":["text"],"group-fields":["groupText"],"max-render-items":50,"lazy-load":!0,placeholder:"Select Clients...",onChange:function(t){return e.onRowClientChange(t,a.row)},"min-search-length":0},model:{value:a.row.selectedClients,callback:function(t){e.$set(a.row,"selectedClients",t)},expression:"data.row.selectedClients"}})],1)]:e._e(),"UTILITY"==a.column.COLUMN_NAME?[i("select",{directives:[{name:"model",rawName:"v-model",value:a.row.selectedUtilities,expression:"data.row.selectedUtilities"}],key:a.row.COLUMN_ID+"-utility",class:["form-control","ddlfirstfield",{"border-danger":a.row.hasErrorUtility}],attrs:{name:"UTILITY"},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.row,"selectedUtilities",t.target.multiple?i:i[0])},function(t){return e.onSelectionUtilityChange(t.target.value,a.row)}]}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.row.UtilityOptions,(function(t){return i("option",{domProps:{value:t.value}},[e._v(e._s(e.$t(t.text)))])}))],2)]:e._e(),"SBA"==a.column.COLUMN_NAME?[i("select",{directives:[{name:"model",rawName:"v-model",value:a.row.selectedSba,expression:"data.row.selectedSba"}],key:a.row.COLUMN_ID+"-sba",class:["form-control","ddlfirstfield",{"border-danger":a.row.hasErrorSba}],attrs:{name:"SBA"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.row,"selectedSba",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.row.SbaOptions,(function(t){return i("option",{domProps:{value:t.value}},[e._v(e._s(e.$t(t.text)))])}))],2)]:e._e(),"DIVISION"==a.column.COLUMN_NAME?[i("select",{directives:[{name:"model",rawName:"v-model",value:a.row.selectedDevision,expression:"data.row.selectedDevision"}],key:a.row.COLUMN_ID+"-division",class:["form-control","ddlfirstfield",{"border-danger":a.row.hasErrorDiv}],attrs:{name:"DIVISION"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.row,"selectedDevision",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.row.DivisionOptions,(function(t){return i("option",{domProps:{value:t.value}},[e._v(e._s(e.$t(t.text)))])}))],2)]:e._e(),"INVOICE_NUMBER"==a.column.COLUMN_NAME?[i("input",{directives:[{name:"model",rawName:"v-model",value:a.row.INVOICE_NUMBER,expression:"data.row.INVOICE_NUMBER"}],key:a.row.COLUMN_ID+"-invoice",staticClass:"form-control",class:{"border-danger":a.row.hasErrorInvoice},attrs:{type:"text"},domProps:{value:a.row.INVOICE_NUMBER},on:{input:function(t){t.target.composing||e.$set(a.row,"INVOICE_NUMBER",t.target.value)}}})]:e._e()]}}])}),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-success",on:{click:e.btnUpdateAdvanceClientAndUtility}},[i("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("BulkMove"))+" ")]),i("button",{staticClass:"btn btn-danger",on:{click:e.Clear}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])],1),e.IsViewQueueList?i("BulkMoveQueue",{attrs:{ReqFrom:e.ReqFrom}}):e._e()],1)},we=[];i("c427");let Fe=[],xe=[],$e=[{COLUMN_NAME:"CONTRACT_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ExcelClientName",DISPLAY_ORDER:1},{COLUMN_NAME:"CLIENT_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ClientName",DISPLAY_ORDER:2,settings:{isInSlot:!0,tdClasses:"overflow-visible"}},{COLUMN_NAME:"UTILITY_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ExcelUtility",DISPLAY_ORDER:3},{COLUMN_NAME:"UTILITY",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Utility",DISPLAY_ORDER:4,settings:{isInSlot:!0}},{COLUMN_NAME:"SBA_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ExcelSba",DISPLAY_ORDER:5},{COLUMN_NAME:"SBA",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Sba",DISPLAY_ORDER:6,settings:{isInSlot:!0}},{COLUMN_NAME:"DIVISION_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ExcelDivision",DISPLAY_ORDER:7},{COLUMN_NAME:"DIVISION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Division",DISPLAY_ORDER:8,settings:{isInSlot:!0}},{COLUMN_NAME:"INVOICE_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"InvoiceNumber",DISPLAY_ORDER:9,settings:{isInSlot:!0}},{COLUMN_NAME:"Records_Count",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"RecordCount",DISPLAY_ORDER:10}],Ue=[{title:"Update",icon:"fa fa-save text-success text-success action-icon",additionalSpan:"",callbackfunction:"EditRecord"}];var Be={buttons:Fe,leftsearchSchema:xe,headerSchema:$e,listActions:Ue},Ve={name:"BulkMoveAdvance",components:{BulkMoveQueue:Ne,SearchableSelect:L},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],fileData:[],Buttons:Be.buttons,leftSearchFields:Be.leftsearchSchema,listActions:Be.listActions,Headers:Be.headerSchema,searchCondition:"",selectedClientId:null,bulkClientId:null,IsViewQueueList:!1,ReqFrom:"ADVANCE",MandatoryString:"Fields marked with an asterisk (*) are mandatory.",FormSchema:[{layoutType:"triple",Data:[{astype:"NormalFileField",label:this.$t("Image"),name:"Attachment",placeholder:"",validationRules:{required:!0},FieldIndex:0,config:{maxSize:5,showSelectedFiles:[],accept:[{fileType:"xlsx",iconClass:"fa-file-excel-o"},{fileType:"xls",iconClass:"fa-file-excel-o"},{fileType:"csv",iconClass:"fa-file-text-o"}],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}},{astype:"DateField",label:this.$t("WorkDateFrom"),name:"WorkDateFrom",value:"",placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!0}},{astype:"DateField",label:this.$t("WorkDateTo"),name:"WorkDateto",value:(new Date).toLocaleDateString(),placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!0}},{astype:"SlotField",label:this.$t("SampleFile"),name:"SampleFile",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!1,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-search pr-2'></i>Search"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-refresh pr-2'></i>Clear",onClick:this.Clear}],reloadkey:0}},created:async function(){var e=this;e.Headers.forEach(t=>{t.DISPLAY_NAME=e.$t(t.DISPLAY_NAME)}),await e.fetchclientlist()},methods:{fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.groupedUtilities=e.clientList}).catch(t=>{e.isLoading=!1,e.clientList=[],e.groupedUtilities=e.clientList,console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.FetchBulkMoveAdvanceRecords()},renderActions:function(e){var t=this;let i=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Update":t.isVisible=!0;break;default:t.isVisible=!0}i.push(t)}),i},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchBulkMoveAdvanceRecords()},actionButtonClick:function(e,t){switch(e){case"EditRecord":this.btnTempChangeSubmitInvoice(t);break}},btnTempChangeSubmitInvoice:function(e){var t=this;t.isLoading=!0;let i=t.bulkClientId||"";i||(i=e.selectedClients||"");let a=e.selectedUtilities||"",s=e.selectedSba||"",o=e.selectedDevision||"",l=e.INVOICE_NUMBER||"",n=t.BulkMoveBatchId,c=e.NEW_BATCH_ID,d="";if(t.$set(e,"hasErrorClient",!1),t.$set(e,"hasErrorUtility",!1),t.$set(e,"hasErrorSba",!1),t.$set(e,"hasErrorDiv",!1),t.$set(e,"hasErrorInvoice",!1),i||(d+="no",t.$set(e,"hasErrorClient",!0)),a||(d+="no",t.$set(e,"hasErrorUtility",!0)),s||(d+="no",t.$set(e,"hasErrorSba",!0)),o||(d+="no",t.$set(e,"hasErrorDiv",!0)),l||(d+="no",t.$set(e,"hasErrorInvoice",!0)),d.length>0)return t.isLoading=!1,t.ShowAlert("Correct highlighted errors","warning",!0,t.$t("Alert")),!1;let u={ClientId:i,UtilityId:a,SbaId:s,DivId:o,BatchIdAdvance:n,ProcessBatchId:c,InvoiceNumber:l};r["a"].BulkMoveAdvancePostData(u).then(e=>{t.isLoading=!1,"Success"==e.data.msg?(t.FetchBulkMoveAdvanceRecords(),t.ShowAlert(t.$t("RecordUpdatedSuccessfully"),"success",!0,t.$t("Alert"))):t.ShowAlert(e.data.msg||"Unknown error","failure",!0,t.$t("Alert"))}).catch((function(e){console.error(e),t.isLoading=!1,t.ShowAlert("Error occurred","failure",!0,t.$t("Alert"))}))},btnUpdateAdvanceClientAndUtility:function(){var e=this,t="Are you sure you want to perform bulk move?";e.confirmR(t,!0,e.$t("BulkMove"),(function(){e.isLoading=!0;var t={WorkDateFrom:e.WorkDateFrom,WorkDateTo:e.WorkDateTo,BatchIdAdvance:e.BulkMoveBatchId};r["a"].UpdateAdvanceBulkMoveLineIds(t).then(t=>{e.isLoading=!1,"success"==t.data.flag&&-11!=t.data.statusCode?(0==t.data.statusCode?(e.ShowAlert(t.data.msg,"success",!0,e.$t("Alert")),e.FetchBulkMoveAdvanceRecords()):-12==t.data.statusCode&&(e.ShowAlert(t.data.msg,"failure",!0,e.$t("Alert")),e.FetchBulkMoveAdvanceRecords()),null!=t.data.bulkMoveResult&&101==t.data.statusCode&&e.ShowAlert("No billing rule found","warning",!0,e.$t("Alert"))):"success"==t.data.flag&&-11==t.data.statusCode?e.ShowAlert("Bulk move already in queue","failure",!0,e.$t("Alert")):e.ShowAlert(t.data.msg||"Error","failure",!0,e.$t("Alert"))}).catch(t=>{e.isLoading=!1,e.ShowAlert("Error while processing request","failure",!0,e.$t("Alert"))})}))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"viewQueueListAction":this.viewQueueListAction();break}},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchBulkMoveAdvanceRecords()},FetchBulkMoveAdvanceRecords:function(){var e=this;e.isLoading=!0;var t=e.filePath,i=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&workDateFrom=${e.WorkDateFrom}&workDateTo=${e.WorkDateTo}&filepath=`+encodeURIComponent(t)+"&filename="+encodeURIComponent("BulkMove_Advance_SampleFile.xlsx")+"&fileNewname="+encodeURIComponent("758499944.xlsx");e.searchCondition&&(i+="&"+e.searchCondition),r["a"].GetBulkMoveAdvanceListing(i).then(t=>{e.isLoading=!1,t.data.result&&(e.ListingData=JSON.parse(t.data.result),e.BulkMoveBatchId=t.data.bulkMoveBatchId),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach((e,t)=>{e.DATEOFINV&&(e.DATEOFINV=new Date(e.DATEOFINV)),e.DATEOFWORK&&(e.DATEOFWORK=new Date(e.DATEOFWORK)),e.selectedUtilities="",e.selectedSba="",e.selectedDevision="",e.selectedClients="",e.UtilityOptions=[],e.SbaOptions=[],e.DivisionOptions=[]}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)}),setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return t.toLocaleDateString()},formatCurrency(e){return e||0===e?parseFloat(e).toFixed(2):"0.00"},selectAllLineItems(){$(".chkItems").not("[id^='chkAll_0']").prop("checked",!0)},GetBase64String:function(e){try{var t=this;t.fileData=[];var i=e.target.files;t.attachmentName=i[0].name;for(var a=0;a<i.length;a++){var s=i[a],o=new FileReader;o.onload=function(e){return function(e){var i=e.target.result,a=window.btoa(i);t.base64String=a;var o=s.name,l=o.lastIndexOf("."),n=o.substring(l+1,o.length),r='{"ContentType":"'+s.type+'","Size":"'+s.size+'","Extension":"'+n+'"}',c=(s.size,{attachement_mime:r,fileName:o,userId:t.GetUserInfo.ID,companyId:t.GetUserInfo.CompanyId,id:0,moduleName:"initialsetup",subModuleCode:"",containerName:t.GetUserInfo.ContainerName,base64String:a,attachement_path:""});t.fileData.push(c)}}(),o.readAsBinaryString(s)}}catch(l){}},async onSubmit(e,t){var i=this;i.isLoading=!0,i.WorkDateFrom=i.formatDate(e.WorkDateFrom),i.WorkDateTo=i.formatDate(e.WorkDateto);var a=JSON.stringify(i.fileData);await r["a"].UploadFile(a).then((function(e){e.data&&e.data.length>0&&e.data[0].Name.length>0&&(i.filePath=e.data[0].Name)}));var s=i.filePath,o=`pageSize=${i.PageSize}&pageNum=${i.PageNumber}&sortBy=${i.SortBy}&sortExp=${i.SortExp}&workDateFrom=${i.WorkDateFrom}&workDateTo=${i.WorkDateTo}&filepath=`+encodeURIComponent(s)+"&filename="+encodeURIComponent("BulkMove_Advance_SampleFile.xlsx")+"&fileNewname="+encodeURIComponent("758499944.xlsx");i.searchCondition&&(o+="&"+i.searchCondition),r["a"].GetBulkMoveAdvanceListing(o).then(e=>{i.isLoading=!1,e.data.result&&(i.ListingData=JSON.parse(e.data.result),i.BulkMoveBatchId=e.data.bulkMoveBatchId),i.ListingData&&i.ListingData.length>0?(i.ListingData.forEach((e,t)=>{e.selectedUtilities="",e.selectedSba="",e.selectedDevision="",e.selectedClients="",e.UtilityOptions=[],e.SbaOptions=[],e.DivisionOptions=[]}),i.TotalRecords=i.ListingData[0].TOTAL_RECORDS||i.ListingData[0].TOTALRECORDS||0,i.TotalPages=Math.ceil(i.TotalRecords/i.PageSize),i.CurrentPage=i.PageNumber):(i.ListingData=[],i.TotalRecords=0)})},viewQueueListAction(){var e=this;e.IsViewQueueList=!e.IsViewQueueList},onDeleteSelectedFiles:function(){},Clear:function(){var e=this;e.FormSchema[0].Data.forEach(e=>{"WorkDateto"===e.name?e.value=(new Date).toLocaleDateString():e.value=""}),e.ListingData=[],e.fileData=[],e.$refs.dynamicform.UpdateKeyValue()},async onSelectionUtilityChange(e,t){var i=this;i.UtilityId=e;var a=i.ListingData.indexOf(t);await i.fetchSbaForRow(a,e),await i.fetchDivisionForRow(a,e)},onRowClientChange(e,t){var i=this,a=i.ListingData.indexOf(t);i.$set(i.ListingData[a],"selectedClients",e),i.selectedClientId=e;var s=`clientId=${e}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(s).then(e=>{let t=[];var s=e.data;null!=s&&(s.forEach(e=>{let i={text:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.$set(i.ListingData[a],"UtilityOptions",t),i.reloadkey++)}).catch(e=>{i.$set(i.ListingData[a],"UtilityOptions",[])})},fetchSbaForRow(e,t){var i=this,a="utilityId="+t;r["a"].GetSbaIdListByUtilityId(a).then(t=>{let a=[];var s=t.data;null!=s&&(s.forEach(e=>{let t={text:e.NAME,value:e.SBA_ID};a.push(t)}),i.$set(i.ListingData[e],"SbaOptions",a),i.reloadkey++)}).catch(t=>{i.$set(i.ListingData[e],"SbaOptions",[])})},fetchDivisionForRow(e,t){var i=this,a=`clientId=${i.selectedClientId}&utilityIds=${t}`;r["a"].LoadClientDivisionListByUtilityIds(a).then(t=>{let a=[];var s=t.data;null!=s&&(s.forEach(e=>{let t={text:e.NAME,value:e.VALUE};a.push(t)}),i.$set(i.ListingData[e],"DivisionOptions",a),i.reloadkey++)}).catch(t=>{i.$set(i.ListingData[e],"DivisionOptions",[])})}}},Ye=Ve,We=(i("9ec5"),Object(y["a"])(Ye,Pe,we,!1,null,"1de5fea2",null)),Ke=We.exports,Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("loader",{attrs:{"is-visible":e.isLoading}}),i("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!1,ModuleName:"BillingValidationData",SubModuleCode:"TicketLog",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("TicketDetails"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchTicketLog,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["TICKETNUMBER"==a.column.COLUMN_NAME?[i("div",{staticClass:"single-action"},[i("a",{class:{parentwithchild:!0,expandchild:e.expandedRows[a.row.COLUMN_ID]},attrs:{href:"javascript:;","data-id":"_"+a.row.COLUMN_ID,"data-ticketnumber":a.row.TICKETNUMBER,"data-activityid":a.row.ACTIVITY_ID},on:{click:function(t){return e.toggleExpandRow(a.row,t)}}},[i("em",{class:e.expandedRows[a.row.COLUMN_ID]?"fa fa-minus-circle":"fa fa-plus-circle rotate-icon"})]),e._v(" "+e._s(a.row.TICKETNUMBER)+" ")])]:e._e(),"WORK_DATE"==a.column.COLUMN_NAME?[a.row.WORK_DATE?i("span",{attrs:{title:a.row.WORK_DATE}},[e._v(" "+e._s(e.formatDate(a.row.WORK_DATE))+" ")]):i("span",[e._v("--")])]:e._e(),"PROCESS_DATE"==a.column.COLUMN_NAME?[a.row.PROCESS_DATE?i("span",{attrs:{title:a.row.PROCESS_DATE}},[e._v(" "+e._s(e.formatDate(a.row.PROCESS_DATE))+" ")]):i("span",[e._v("--")])]:e._e()]}}])}),i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),e.IsViewTicket?i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("TicketImage")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"col-md-12"},[e.TicketContent?i("div",{staticClass:"listing"},[i("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.TicketContent)}})]):i("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)]),i("transition",{attrs:{name:"modal"}},[i("section",[e.IsChildData?i("div",{staticClass:"modal my-popups right fade show d-block"},[i("div",{staticClass:"modal-dialog modal-dialog-right"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header mheader-user"},[i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseChildRow}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("ProcessLog")))])]),i("div",{staticClass:"modal-body p-0"},[i("div",{staticClass:"tab-content",staticStyle:{"overflow-x":"hidden",height:"800px","max-height":"800px"}},[i("div",{staticClass:"col-md-12"},[e.TicketActivityContent&&e.TicketActivityContent.length>0?i("div",{staticClass:"listing"},[i("div",{staticClass:"tab-style"},[i("div",{staticClass:"tab_container"},[i("div",{staticClass:"responsive-tabs-container accordion-xs accordion-sm"},[i("ul",{staticClass:"nav nav-tabs all-tabs responsive-tabs cust mt-3"},[i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:"OldProcessLog"===e.activeTab},on:{click:function(t){e.activeTab="OldProcessLog"}}},[e._v(e._s(e.$t("OldProcessLog")))])]),i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:"NewProcessLog"===e.activeTab},on:{click:function(t){e.activeTab="NewProcessLog"}}},[e._v(e._s(e.$t("Process"))+" "+e._s(e.$t("Log")))])])]),i("div",{staticClass:"tab-content"},[i("div",{staticClass:"tab-pane",class:{active:"OldProcessLog"===e.activeTab}},[i("div",{staticClass:"container-fluid p-0"},[i("div",{staticClass:"listing mt-2"},[i("div",{staticClass:"table-responsive",attrs:{id:"divflagrecordlisting"}},[i("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",attrs:{id:"tblprocesseLog"}},[i("thead",{staticClass:"thead-bg"},[i("tr",[i("th",{staticClass:"text-center",staticStyle:{width:"160px"}},[i("span",[e._v(e._s(e.$t("SerialNumber")))])]),i("th",{staticStyle:{width:"700px"}},[i("span",[e._v(e._s(e.$t("ServiceCondition")))])]),i("th",[i("span",[e._v(e._s(e.$t("IsApplied")))])])])]),i("tbody",[e.TicketActivityContent&&0!==e.TicketActivityContent.filter((function(e){return"PROCESSLOG"===e.TYPE})).length?[e._l(e.TicketActivityContent.filter((function(e){return"PROCESSLOG"===e.TYPE})),(function(t,a){return i("tr",{key:a},[i("td",{staticClass:"text-center"},[e._v(e._s(a+1)+".")]),i("td",[e._v(e._s(t.SERVICE_CONDITION))]),i("td",[e._v(e._s(t.ISAPPLICABLE))])])})),e.processLogData?i("tr",[i("td",{staticClass:"single-action",attrs:{colspan:"3"}},[i("a",{staticClass:"ancviewbillingflowchart",attrs:{href:"javascript:;"},on:{click:function(t){return e.viewBillingFlowchart(e.processLogData)}}},[i("em",{staticClass:"fa fa-eye"}),e._v(" "+e._s(e.$t("ClickheretoviewBillingRule"))+" ")])])]):e._e()]:i("tr",[i("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"3"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])])],2)])])])])]),i("div",{staticClass:"tab-pane",class:{active:"NewProcessLog"===e.activeTab}},[i("div",{staticClass:"container-fluid p-0",attrs:{id:"divNewProcessLogData"}},[i("div",{staticClass:"listing mt-2"},[i("div",{staticClass:"table-responsive",attrs:{id:"divflagrecordlisting"}},[i("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",attrs:{id:"tblprocesseLog"}},[i("thead",{staticClass:"thead-bg"},[i("tr",[i("th",{staticClass:"text-center",attrs:{width:"10%"}},[i("span",[e._v(e._s(e.$t("SerialNumber")))])]),i("th",{attrs:{width:"10%"}},[i("span",[e._v(e._s(e.$t("Date")))])]),i("th",{staticClass:"text-center",attrs:{width:"10%"}},[i("span",[e._v(e._s(e.$t("BillingRule")))])]),i("th",{attrs:{width:"70%"}},[i("span",[e._v(e._s(e.$t("ServiceCondition")))])])])]),i("tbody",[e.newProcessLogData&&0!==e.newProcessLogData.length?e._l(e.newProcessLogData,(function(t,a){return i("tr",{key:a},[i("td",{staticClass:"text-center",staticStyle:{"vertical-align":"top"}},[e._v(e._s(a+1)+".")]),i("td",{staticStyle:{"vertical-align":"top"}},[e._v(e._s(t.DATEOFWORK?new Date(t.DATEOFWORK).toLocaleDateString():""))]),i("td",{staticClass:"text-center single-action",staticStyle:{"vertical-align":"top"}},[t.CONFIGURATION_ID>0?i("a",{staticClass:"ancviewbillingflowchart enable viewicon",attrs:{href:"javascript:;",title:e.$t("ClickheretoviewBillingRule")},on:{click:function(i){return e.viewBillingFlowchart(t)}}},[i("em",{staticClass:"fa fa-eye text-primary"})]):i("a",{staticClass:"disable viewicon",attrs:{href:"javascript:;"}},[i("em",{staticClass:"fa fa-eye disabled text-secondary"})])]),i("td",{staticStyle:{"vertical-align":"top","white-space":"pre-wrap"}},[e._v(e._s(t.SERVICE_CONDITION))])])})):i("tr",[i("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"4"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])])],2)])])])])])])])])]),i("div",{staticClass:"listing mt-3"},[i("div",{staticClass:"heading-border"},[i("h5",{staticClass:"h5"},[i("span",[e._v(e._s(e.$t("Flag")))])])]),i("div",{staticClass:"table-responsive mt-2",attrs:{id:"divflagrecordlisting"}},[i("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",attrs:{id:"tblflagList"}},[i("thead",{staticClass:"thead-bg"},[i("tr",[i("th",[i("span",[e._v(e._s(e.$t("ActivityId")))])]),i("th",[i("span",[e._v(e._s(e.$t("FlagReason")))])]),i("th",[i("span",[e._v(e._s(e.$t("Data")))])]),i("th",[i("span",[e._v(e._s(e.$t("Status")))])]),i("th",[i("span",[e._v(e._s(e.$t("ModifiedBy")))])]),i("th",[i("span",[e._v(e._s(e.$t("ModifiedDate")))])])])]),i("tbody",[e.TicketActivityContent&&0!==e.TicketActivityContent.filter((function(e){return"FLAG"===e.TYPE})).length?e._l(e.TicketActivityContent.filter((function(e){return"FLAG"===e.TYPE})),(function(t){return i("tr",{key:t.ACTIVITY_ID+t.FLAGREASSON},[i("td",[e._v(e._s(t.ACTIVITY_ID))]),i("td",[e._v(e._s(t.FLAGREASSON))]),i("td",{attrs:{title:t.CHANGEDDATA}},[i("span",[e._v(e._s(t.CHANGEDDATA))])]),i("td",[e._v(e._s(t.STATUS))]),i("td",[e._v(e._s(t.MODIFIEDBY))]),i("td",[e._v(e._s(t.MODIFIEDAT))])])})):i("tr",[i("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"6"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])])],2)])])]),i("div",{staticClass:"listing mt-3"},[i("div",{staticClass:"heading-border"},[i("h5",{staticClass:"h5"},[i("span",[e._v(e._s(e.$t("Processed")))])])]),i("div",{staticClass:"table-responsive mt-2",attrs:{id:"divflagrecordlisting"}},[i("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",attrs:{id:"tblprocessedList"}},[i("thead",{staticClass:"thead-bg"},[i("tr",[i("th",[i("span",[e._v(e._s(e.$t("ActivityId")))])]),i("th",[i("span",[e._v(e._s(e.$t("TicketType")))])]),i("th",[i("span",[e._v(e._s(e.$t("WorkDoneFor")))])]),i("th",[i("span",[e._v(e._s(e.$t("WorkType")))])]),i("th",[i("span",[e._v(e._s(e.$t("TransmitDate")))])]),i("th",[i("span",[e._v(e._s(e.$t("WorkDate")))])]),i("th",[i("span",[e._v(e._s(e.$t("WorkCode")))])]),i("th",[i("span",[e._v(e._s(e.$t("Cost")))])]),i("th",[i("span",[e._v(e._s(e.$t("State")))])]),i("th",[i("span",[e._v(e._s(e.$t("ServiceCondition")))])])])]),i("tbody",[e.TicketActivityContent&&0!==e.TicketActivityContent.filter((function(e){return"PROCESSED"===e.TYPE})).length?e._l(e.TicketActivityContent.filter((function(e){return"PROCESSED"===e.TYPE})),(function(t){return i("tr",{key:t.ACTIVITY_ID+t.TICKET_TYPE},[i("td",[e._v(e._s(t.ACTIVITY_ID))]),i("td",[e._v(e._s(t.TICKET_TYPE))]),i("td",[e._v(e._s(t.WORKFOR))]),i("td",[e._v(e._s(t.WORKTYPE))]),i("td",[e._v(e._s(t.TRANSMIT_DATE))]),i("td",[e._v(e._s(t.DATEOFWORK))]),i("td",[e._v(e._s(t.WORKCODE_ID))]),i("td",[e._v(e._s(t.COST?t.COST.toFixed(2):"0.00"))]),i("td",[e._v(e._s(t.STATE))]),i("td",{staticStyle:{"white-space":"normal",overflow:"visible"}},[e._v(e._s(t.SERVICE_CONDITION))])])})):i("tr",[i("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"10"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])])],2)])])]),i("div",{staticClass:"listing mt-3"},[i("div",{staticClass:"heading-border"},[i("h5",{staticClass:"h5"},[i("span",[e._v(e._s(e.$t("Banking")))])])]),i("div",{staticClass:"table-responsive mt-2",attrs:{id:"divflagrecordlisting"}},[i("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",attrs:{id:"tblbankList"}},[i("thead",{staticClass:"thead-bg"},[i("tr",[i("th",[i("span",[e._v(e._s(e.$t("ActivityId")))])]),i("th",[i("span",[e._v(e._s(e.$t("Status")))])]),i("th",[i("span",[e._v(e._s(e.$t("Units")))])]),i("th",[i("span",[e._v(e._s(e.$t("Category")))])]),i("th",{staticClass:"text-center"},[i("span",[e._v(e._s(e.$t("Date")))])])])]),i("tbody",[e.TicketActivityContent&&0!==e.TicketActivityContent.filter((function(e){return"BANK"===e.TYPE})).length?e._l(e.TicketActivityContent.filter((function(e){return"BANK"===e.TYPE})),(function(t){return i("tr",{key:t.ACTIVITY_ID+t.STATUS},[i("td",[e._v(e._s(t.ACTIVITY_ID))]),i("td",[e._v(e._s(t.STATUS))]),i("td",[e._v(e._s(t.BANKED_UNITS))]),i("td",[e._v(e._s(t.BANK_CATEGORY_ID))]),i("td",{staticClass:"text-center"},[e._v(e._s(t.DATE_OF_BANKING))])])})):i("tr",[i("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"5"}},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")])])],2)])])])]):i("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])])])])])]):e._e()])]),e.modelopen?i("VerticalFlowChartModel",{attrs:{modelDetail:e.modelDetail}}):e._e()],1)},qe=[];let ze=[],He=[{fieldName:"TicketNumber",fieldType:"text",fieldIcon:"fa fa-ticket",paramName:"ticketNumber",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[],isMandatory:!0},{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"clientId",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null,isMandatory:!0},{fieldName:"UtilityName",fieldType:"searchableselect",fieldIcon:"fa fa-building",paramName:"utilityIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"WorkDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"WorkDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"ProcessDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"ProcessDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"State",fieldType:"ddl-radio",fieldIcon:"fa fa-map-marker",paramName:"state",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-radio",fieldIcon:"fa fa-info-circle",paramName:"processingStatus",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[{name:"Banked",value:"BANKED"},{name:"Do Not Bill",value:"DONOTBILL"},{name:"Processed",value:"PROCESSED"},{name:"Suppressed",value:"SUPPRESSED"},{name:"Un processed",value:"UNPROCESSED"}]}],Qe=[{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"ACTIVITY_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ActivityId",DISPLAY_ORDER:2},{COLUMN_NAME:"TRANSMISSION_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TransmissionId",DISPLAY_ORDER:3},{COLUMN_NAME:"UTILITY_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"UtilId",DISPLAY_ORDER:4},{COLUMN_NAME:"SBA_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"sba_id",DISPLAY_ORDER:5},{COLUMN_NAME:"DIVISION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Division",DISPLAY_ORDER:6},{COLUMN_NAME:"MINUTES_WORKED",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"MinutesWorked",DISPLAY_ORDER:7},{COLUMN_NAME:"FEET_LOCATED",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"FeetLocated",DISPLAY_ORDER:8},{COLUMN_NAME:"PAINTABLE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Paintable",DISPLAY_ORDER:9},{COLUMN_NAME:"WD_DESC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkDescription",DISPLAY_ORDER:10},{COLUMN_NAME:"TERM_CODE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"CDCTermCode",DISPLAY_ORDER:11},{COLUMN_NAME:"STATUS_CODE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:12},{COLUMN_NAME:"STATUS",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"StatusCode",DISPLAY_ORDER:13},{COLUMN_NAME:"DESCRIPTION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"CAStatusDescription",DISPLAY_ORDER:14},{COLUMN_NAME:"WORK_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkedDate",DISPLAY_ORDER:15,settings:{isInSlot:!0}},{COLUMN_NAME:"PROCESS_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ProcessDate",DISPLAY_ORDER:16,settings:{isInSlot:!0}},{COLUMN_NAME:"VERSION_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"VersionNumber",DISPLAY_ORDER:17}],je=[{title:"TicketImage",icon:"fa fa-ticket text-primary action-icon",additionalSpan:"",callbackfunction:"ViewTicketImage"}];async function Je(e){var t=e;try{const e="countryId=223&includeCandaState=true",i=await r["a"].GetStateList(e);if(i.data){const e=i.data.map(e=>({name:e.STATE_NAME,value:e.ISO_CODE_3}));t.leftSearchFields.find(e=>"State"===e.fieldName).listOptions=e}}catch(i){console.error("Error loading states:",i)}}var Xe={buttons:ze,leftsearchSchema:He,headerSchema:Qe,listActions:je,bindleftCommonSearchdropdown:Je},Ze=i("b91c"),et={name:"TicketLog",components:{VerticalFlowChartModel:Ze["a"]},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:Xe.buttons,leftSearchFields:Xe.leftsearchSchema,listActions:Xe.listActions,Headers:Xe.headerSchema,searchCondition:"",selectedClientId:null,expandedRows:{},childRows:{},IsViewTicket:!1,TicketContent:"",TicketNumber:"",TransmissionId:"",ActivityId:"",activeTab:"OldProcessLog",processLogData:null,newProcessLogData:[],IsChildData:!1,TicketActivityContent:[],ConfigurationId:"",modelopen:!1}},created:function(){var e,t=this;t.Headers.forEach(e=>{e.DISPLAY_NAME=t.$t(e.DISPLAY_NAME)}),(null===(e=t.leftSearchFields)||void 0===e?void 0:e.length)>0&&(t.leftSearchFields[1].onChange=t.onSelectionChange),Xe.bindleftCommonSearchdropdown(this),t.fetchclientlist()},methods:{leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/WorkDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`workDateFrom=${i}&workDateTo=${a}`})),this.searchCondition=this.searchCondition.replace(/ProcessDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`processDateFrom=${i}&processDateTo=${a}`}))),this.FetchTicketLog()},fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=e.clientList,e.groupedUtilities=e.clientList}).catch(t=>{e.isLoading=!1,e.clientList=[],e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=[],console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},renderActions:function(e){var t=this;let i=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"TicketImage":t.isVisible=!0;break;default:t.isVisible=!0}i.push(t)}),i},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchTicketLog()},actionButtonClick:function(e,t){switch(e){case"ViewTicketImage":this.viewTicketImage(t);break}},commonHeaderButtonClick:function(e){},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchTicketLog()},FetchTicketLog:function(){var e=this;e.isLoading=!0;var t=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}`;e.searchCondition&&(t+="&"+e.searchCondition),r["a"].GetTicketLog(t).then(t=>{e.isLoading=!1,t.data.result&&(e.ListingData=JSON.parse(t.data.result)),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach(e=>{e.WORK_DATE&&(e.WORK_DATE=new Date(e.WORK_DATE)),e.PROCESS_DATE&&(e.PROCESS_DATE=new Date(e.PROCESS_DATE))}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)}).catch(t=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0,console.error("Error fetching ticket log:",t)}),setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return t.toLocaleDateString()},toggleExpandRow:async function(e,t){var i=this;i.TicketNumber=e.TICKETNUMBER,i.ActivityId=e.ACTIVITY_ID,i.IsChildData=!i.IsChildData;var a=`TicketNumber=${i.TicketNumber}&ActivityId=${i.ActivityId}&workDateFrom=&workDateTo=`;await r["a"].ChildTicketLog(a).then(e=>{e.data.length>0&&(i.TicketActivityContent=e.data,i.processLogData=e.data.find(e=>"PROCESSLOG"===e.TYPE)||null)});var s=`ticketNumber=${i.TicketNumber}&activityId=${i.ActivityId}&workDateFrom=&workDateTo=`;await r["a"].ChildTicketLogNew(s).then(e=>{e.data&&e.data.length>0&&(i.newProcessLogData=e.data)})},CloseChildRow:function(){var e=this;e.activeTab="OldProcessLog",e.IsChildData=!1},getWorkDateFrom(){var e=this.leftSearchFields.find(e=>"WorkDate"===e.fieldName);return e&&e.value?e.value.from:""},getWorkDateTo(){var e=this.leftSearchFields.find(e=>"WorkDate"===e.fieldName);return e&&e.value?e.value.to:""},viewTicketImage:async function(e){var t=this;t.TicketNumber=e.TICKETNUMBER,t.TransmissionId=e.TRANSMISSION_ID,t.IsViewTicket=!t.IsViewTicket;var i=`TicketNumber=${t.TicketNumber}&TransmissionId=${t.TransmissionId}`;await r["a"].ViewTicketImage(i).then(e=>{e.data.length>0&&(t.TicketContent=e.data[0].RAW_IMAGE)})},CloseTemplate:function(){var e=this;e.IsViewTicket=!1},viewBillingFlowchart(e){var t=this;e.CONFIGURATION_ID>0&&(t.modelDetail=e,t.modelopen=!0)},onSelectionChange(e,t){var i=this;i.isLoading=!0,i.selectedClientId=t;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.UTILITY_NAME,groupText:null,groupValue:null,metaData:null,text:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=t)}).catch(e=>{i.isLoading=!1,i.UtilityList=[],i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).finally(()=>{i.isLoading=!1})}}},tt=et,it=(i("e238"),Object(y["a"])(tt,Ge,qe,!1,null,"99dc57a4",null)),at=it.exports,st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("loader",{attrs:{"is-visible":e.isLoading}}),i("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!0,ModuleName:"BillingValidationData",SubModuleCode:"UnprocessedRecords",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("UnprocessedRecords"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchUnprocessedRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var a=t.data;return["IMPORT_DATE"==a.column.COLUMN_NAME?[a.row.IMPORT_DATE?i("span",{attrs:{title:a.row.IMPORT_DATE}},[e._v(" "+e._s(e.formatDate(a.row.IMPORT_DATE))+" ")]):i("span",[e._v("--")])]:e._e(),"TRANSMIT_DATE"==a.column.COLUMN_NAME?[a.row.TRANSMIT_DATE?i("span",{attrs:{title:a.row.TRANSMIT_DATE}},[e._v(" "+e._s(e.formatDate(a.row.TRANSMIT_DATE))+" ")]):i("span",[e._v("--")])]:e._e(),"WORK_DATE"==a.column.COLUMN_NAME?[a.row.WORK_DATE?i("span",{attrs:{title:a.row.WORK_DATE}},[e._v(" "+e._s(e.formatDate(a.row.WORK_DATE))+" ")]):i("span",[e._v("--")])]:e._e(),"STATUS_CODE"==a.column.COLUMN_NAME?[i("span",{class:e.getStatusClass(a.row),attrs:{title:e.getStatusTitle(a.row)}},[e._v(" "+e._s(e.getStatusText(a.row))+" ")])]:e._e(),"MINUTES_WORKED"==a.column.COLUMN_NAME?[i("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(a.row.MINUTES_WORKED||"--"))])]:e._e(),"FEET_LOCATED"==a.column.COLUMN_NAME?[i("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(a.row.FEET_LOCATED||"--"))])]:e._e()]}}])}),e.IsChangeLineItem?i("ManageColumnItems",{attrs:{ColumnIds:e.ColumnIds,reqFrom:e.reqFrom}}):e._e(),e.IsEditException?i("EditException",{attrs:{ColumnIds:e.ColumnIds,ClientId:e.ClientId,IsProcessed:e.IsProcessed,requestFrom:e.requestFrom}}):e._e(),i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"my-popups"},[i("loader",{attrs:{"is-visible":e.isLoading}}),e.IsViewTicket?i("div",{staticClass:"modal d-block dialog"},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("TicketImage")))]),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"col-md-12"},[e.TicketContent?i("div",{staticClass:"listing"},[i("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.TicketContent)}})]):i("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[i("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)])],1)},ot=[];let lt=[{title:"Process",iconClass:"fa fa-check",callbackfunction:"ProcessUnprocessed",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{title:"DoNotBill",iconClass:"fa fa-times",callbackfunction:"DoNotProcessUnprocessed",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{title:"Update",iconClass:"fa fa-pencil",callbackfunction:"ChangeColumnItemsUnprocessed",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0}],nt=[{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"clientId",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"UtilityName",fieldType:"searchableselect",fieldIcon:"fa fa-building",paramName:"utilityIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:[],isMultiple:!0,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"State",fieldType:"ddl-radio",fieldIcon:"fa fa-map-marker",paramName:"state",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"WorkDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"WorkDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"ImportDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"ImportDate",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"TicketNo",fieldType:"text",fieldIcon:"fa fa-ticket",paramName:"ticketNumber",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-radio",fieldIcon:"fa fa-info-circle",paramName:"doNotBill",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[{name:"Do Not Bill",value:"donotbill"},{name:"Un processed",value:"unprocessed"},{name:"Waiting To Process",value:"waitingtoprocess"}]}],rt=[{COLUMN_NAME:"CONTRACTNAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Contract",DISPLAY_ORDER:1},{COLUMN_NAME:"UTILITY_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"UtilityName",DISPLAY_ORDER:2},{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:3},{COLUMN_NAME:"TICKETTYPE",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketType",DISPLAY_ORDER:4},{COLUMN_NAME:"TYPEOFWORK",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TypeofWork",DISPLAY_ORDER:5},{COLUMN_NAME:"IMPORT_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ImportDate",DISPLAY_ORDER:6,settings:{isInSlot:!0}},{COLUMN_NAME:"TRANSMIT_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TransmitDate",DISPLAY_ORDER:7,settings:{isInSlot:!0}},{COLUMN_NAME:"WORK_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work_Date",DISPLAY_ORDER:8,settings:{isInSlot:!0}},{COLUMN_NAME:"TRANSMISSION_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TransmissionId",DISPLAY_ORDER:9},{COLUMN_NAME:"STATUS_CODE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:10,settings:{isInSlot:!0}},{COLUMN_NAME:"STATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"State",DISPLAY_ORDER:11},{COLUMN_NAME:"FEEDNAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"feed_name",DISPLAY_ORDER:12},{COLUMN_NAME:"TERM_CODE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TermCode",DISPLAY_ORDER:13},{COLUMN_NAME:"MINUTES_WORKED",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"MinutesWorked",DISPLAY_ORDER:14,settings:{isInSlot:!0}},{COLUMN_NAME:"FEET_LOCATED",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"FeetLocated",DISPLAY_ORDER:15,settings:{isInSlot:!0}},{COLUMN_NAME:"REASON",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Reason",DISPLAY_ORDER:16},{COLUMN_NAME:"VERSION_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Version",DISPLAY_ORDER:17}],ct=[{title:"TicketImage",icon:"fa fa-ticket text-primary action-icon",additionalSpan:"",callbackfunction:"ViewTicketImage"},{title:"Edit",icon:"fa fa-pencil text-success action-icon",additionalSpan:"",callbackfunction:"EditRecord"}];async function dt(e){var t=e;try{const e="countryId=223&includeCandaState=true",i=await r["a"].GetStateList(e);if(i.data){const e=i.data.map(e=>({name:e.STATE_NAME,value:e.ISO_CODE_3}));t.leftSearchFields.find(e=>"State"===e.fieldName).listOptions=e}}catch(i){console.error("Error loading states:",i)}}var ut={buttons:lt,leftsearchSchema:nt,headerSchema:rt,listActions:ct,bindleftCommonSearchdropdown:dt},mt={name:"UnprocessedRecords",components:{ManageColumnItems:P,EditException:w["a"]},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:ut.buttons,leftSearchFields:ut.leftsearchSchema,listActions:ut.listActions,Headers:ut.headerSchema,searchCondition:"",selectedClientId:null,TicketNumber:"",TransmissionId:"",IsViewTicket:!1,TicketContent:"",IsEditException:!1,ClientId:"",IsProcessed:0,ColumnIds:"",requestFrom:"unprocess",IsChangeLineItem:!1,reqFrom:"unprocessed"}},created:function(){var e,t=this;t.Headers.forEach(e=>{e.DISPLAY_NAME=t.$t(e.DISPLAY_NAME)}),(null===(e=t.leftSearchFields)||void 0===e?void 0:e.length)>0&&(t.leftSearchFields[0].onChange=t.onSelectionChange),ut.bindleftCommonSearchdropdown(this),t.fetchclientlist()},methods:{fetchclientlist:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=e.clientList,e.groupedUtilities=e.clientList}).catch(t=>{e.isLoading=!1,e.clientList=[],e.leftSearchFields.find(e=>"ClientName"===e.fieldName).listOptions=[],console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/WorkDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`WorkDateFrom=${i}&WorkDateTo=${a}`})),this.searchCondition=this.searchCondition.replace(/ImportDate=([^&]+)/,(function(e,t){let[i,a]=t.split("|");return`ProcessDateFrom=${i}&ProcessDateTo=${a}`}))),this.FetchUnprocessedRecords()},renderActions:function(e){var t=this;let i=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"TicketImage":t.isVisible=!0;break;case"Edit":t.isVisible=!0;break;default:t.isVisible=!0}i.push(t)}),i},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchUnprocessedRecords()},actionButtonClick:function(e,t){switch(e){case"ViewTicketImage":this.viewTicketImage(t);break;case"EditRecord":this.editRecord(t);break}},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"ProcessUnprocessed":this.ProcessColumnItems();break;case"DoNotProcessUnprocessed":this.DoNotProcessLineItems();break;case"ChangeColumnItemsUnprocessed":this.ChangeColumnItems();break}},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchUnprocessedRecords()},FetchUnprocessedRecords:function(){var e=this;e.isLoading=!0;var t=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}`;e.searchCondition&&(t+="&"+e.searchCondition),r["a"].GetUnprocessedRecords(t).then(t=>{e.isLoading=!1,t.data.result&&(e.ListingData=JSON.parse(t.data.result)),e.ListingData&&e.ListingData.length>0?(e.ListingData.forEach(e=>{e.IMPORT_DATE&&(e.IMPORT_DATE=new Date(e.IMPORT_DATE)),e.TRANSMIT_DATE&&(e.TRANSMIT_DATE=new Date(e.TRANSMIT_DATE)),e.WORK_DATE&&(e.WORK_DATE=new Date(e.WORK_DATE))}),e.ListingData.forEach(t=>{t.isCheckBoxDisabled=!1,t.PROCESS_TRAN_NO>0||t.FLAG_HISTORY_ID>0||"Reprocessing"==t.REASON?(t.isCheckBoxDisabled=!0,e.checkIsdesabled=!0):(t.isCheckBoxDisabled=!1,e.checkIsdesabled=!1)}),e.TotalRecords=e.ListingData[0].TOTAL_RECORDS||e.ListingData[0].TOTALRECORDS||0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber):(e.ListingData=[],e.TotalRecords=0)}).catch(t=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0,console.error("Error fetching unprocessed records:",t)}),setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},getStatusClass(e){return"DONOTBILL"==e.STATUS_CODE?"bg-danger py-1 px-1 text-white w-100 d-block text-center":e.PROCESS_TRAN_NO>0||e.FLAG_HISTORY_ID>0||"Reprocessing"==e.REASON?"bg-info py-1 px-1 text-white w-100 d-block text-center":"bg-warning py-1 px-1 text-white w-100 d-block text-center"},getStatusText(e){return"DONOTBILL"==e.STATUS_CODE?this.$t("DoNotBill"):e.PROCESS_TRAN_NO>0||e.FLAG_HISTORY_ID>0||"Reprocessing"==e.REASON?this.$t("InQueue"):this.$t("Unprocessed")},getStatusTitle(e){return"DONOTBILL"==e.STATUS_CODE?this.$t("DoNotBill"):e.PROCESS_TRAN_NO>0||e.FLAG_HISTORY_ID>0||"Reprocessing"==e.REASON?this.$t("InQueue"):this.$t("Unprocessed")},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return t.toLocaleDateString()},CloseTemplate:function(){var e=this;e.IsViewTicket=!1},viewTicketImage:async function(e){var t=this;t.TicketNumber=e.TICKETNUMBER,t.TransmissionId=e.TRANSMISSION_ID,t.IsViewTicket=!t.IsViewTicket;var i=`TicketNumber=${t.TicketNumber}&TransmissionId=${t.TransmissionId}`;await r["a"].ViewTicketImage(i).then(e=>{e.data.length>0&&(t.TicketContent=e.data[0].RAW_IMAGE)})},editRecord(e){var t=this;t.ColumnIds=e.COLUMN_ID,t.ClientId=e.CLIENT_ID,t.IsEditException=!t.IsEditException},ProcessColumnItems:function(e){var t=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?t.confirmR(t.$t("ConfirmProcessFlagRecords"),!0,!1,(function(){var e={value:"",fieldName:"",lineIds:i,reqFrom:"process",setClient:1,beSbaId:0};r["a"].SaveColumnItems(e).then((async function(e){"Success"==e.data.msg?(t.ShowAlert(t.$t("RecordUpdatedSuccessfully"),"success",!0,t.$t("Alert")),await t.FetchUnprocessedRecords()):t.ShowAlert(t.$t("DeletedError",[t.$t("WorkCode")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("SelectanyrecordtoChangeUnprocessedRecords"),"warning",!0,t.$t("Alert"))},DoNotProcessLineItems:function(e){var t=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?t.confirmR(t.$t("ConfirmPurgesFlagRecords"),!0,!1,(function(){var e={value:"",fieldName:"",lineIds:i};r["a"].DoNotProcessLineItems(e).then((async function(e){"Success"==e.data.msg?(t.ShowAlert(t.$t("RecordUpdatedSuccessfully"),"success",!0,t.$t("Alert")),await t.FetchUnprocessedRecords()):t.ShowAlert(t.$t("DeletedError",[t.$t("WorkCode")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("SelectanyrecordtoChangeUnprocessedRecords"),"warning",!0,t.$t("Alert"))},ChangeColumnItems:function(e){var t=this,i="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((async function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?(t.ColumnIds=i,t.IsChangeLineItem=!t.IsChangeLineItem):t.ShowAlert(t.$t("SelectanyrecordtoChangeUnprocessedRecords"),"warning",!0,t.$t("Alert"))},getSelectedRecordIds(){return[]},onSelectionChange(e,t){var i=this;i.isLoading=!0,i.selectedClientId=t;var a=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.UTILITY_NAME,groupText:null,groupValue:null,metaData:null,text:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(i)}),i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=t)}).catch(e=>{i.isLoading=!1,i.UtilityList=[],i.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).finally(()=>{i.isLoading=!1})}}},ht=mt,pt=(i("05c4"),Object(y["a"])(ht,st,ot,!1,null,"17984c0a",null)),ft=pt.exports,gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tab-content-wrapper"},[i("div",{staticClass:"theme-primary partition p-actions-expand mt-2"},[i("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("PreviewInvoice")))])]),i("div",{staticClass:"col-md-12 p-3"},[i("dynamic-form",{ref:"dynamicform",attrs:{buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])},vt=[],It={name:"PreviewInvoice",data(){return{isLoading:!1,FormSchema:[{layoutType:"triple",Data:[{astype:"SearchableSelectField",label:this.$t("CONTRACTNAME"),name:"ContractName",value:"",placeholder:"",isSearch:!1,actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],groupFields:["groupText"],isMultiple:!1,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},onChange:this.onSelectionChange},validationRules:{required:!0}},{astype:"SearchableSelectField",label:this.$t("Division"),name:"InvoiceGrouping",value:"",placeholder:"",isSearch:!1,groupFields:[],actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},config:{options:[],isMultiple:!0,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"}},validationRules:{required:!0}},{astype:"RadioField",label:this.$t("ReportType"),name:"ReportType",value:"Detailed",config:{options:[{name:this.$t("InvoiceBackupReport"),value:"Detailed"},{name:this.$t("SummaryReport"),value:"Summary"}]},validationRules:{required:!1}},{astype:"DateField",label:this.$t("ProcessDateFrom"),name:"ProcessDateFrom",value:"",placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!0}},{astype:"DateField",label:this.$t("ProcessDateTo"),name:"ProcessDateTo",value:"",placeholder:"",config:{format:"MM/DD/YYYY",maxDate:!1},validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-search pr-2'></i>Search"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Clear",onClick:this.Close}]}},created:async function(){await this.fetchClientList()},methods:{fetchClientList:function(){var e=this;e.isLoading=!0;var t="reqFrom=CUSTOM";r["a"].getClientList(t).then(t=>{e.isLoading=!1,e.clientList=t.data.items,e.$refs.dynamicform.updateProperty("ContractName","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue()}).catch(t=>{e.isLoading=!1,e.clientList=[],e.$refs.dynamicform.updateProperty("ContractName","config.options",e.clientList),e.$refs.dynamicform.UpdateKeyValue(),console.error("Error fetching client list:",t)}).finally(()=>{e.isLoading=!1})},onSelectionChange(e,t){var i=this;i.isLoading=!0;var a=`clientId=${t}&utilityIds=`;r["a"].LoadClientDivisionList(a).then(e=>{i.isLoading=!1;let t=[];var a=e.data;null!=a&&(a.forEach(e=>{let i={description:null,displayValue:e.NOTE,groupText:null,groupValue:null,metaData:null,text:e.NOTE,value:e.ID};t.push(i)}),i.$refs.dynamicform.updateProperty("InvoiceGrouping","config.options",t),i.$refs.dynamicform.UpdateKeyValue())}).catch(e=>{i.isLoading=!1,i.SelectedDivisionList=[],i.$refs.dynamicform.updateProperty("InvoiceGrouping","config.options",SelectedDivisionList),i.$refs.dynamicform.UpdateKeyValue()}).finally(()=>{i.isLoading=!1})},onSubmit(e,t){}}},Ct=It,St=(i("b587"),Object(y["a"])(Ct,gt,vt,!1,null,"7e730434",null)),yt=St.exports,At={components:{Loader:o["a"],FlagRecords:B,BilledUnbilledRecords:se,BulkMove:Oe,BulkMoveAdvance:Ke,TicketLog:at,UnprocessedRecords:ft,PreviewInvoice:yt},data(){return{isLoading:!1,tabs:[{id:1,title:"FlagRecords",displayName:"FlagRecords",icon:"fa fa-flag",route:"flag-records"},{id:2,title:"BilledUnbilledRecords",displayName:"BilledUnbilledRecords",icon:"fa fa-usd",route:"billed-unbilled-records"},{id:3,title:"BulkMove",displayName:"BulkMove",icon:"fa fa-arrows",route:"bulk-move"},{id:4,title:"BulkMoveAdvance",displayName:"BulkMoveAdvance",icon:"fa fa-arrows-alt",route:"bulk-move-advance"},{id:5,title:"TicketLog",displayName:"TicketLog",icon:"fa fa-ticket",route:"ticket-log"},{id:6,title:"UnprocessedRecords",displayName:"UnprocessedRecords",icon:"fa fa-th-list",route:"unprocessed-records"},{id:7,title:"PreviewInvoice",displayName:"PreviewInvoice",icon:"fa fa-eye",route:"preview-invoice"}],currentTab:null}},computed:{tabsWithLocalization(){return this.tabs.map(e=>({...e,displayName:this.$t(e.title)}))}},created(){this.initializeTab()},watch:{$route(e,t){this.initializeTab()}},methods:{initializeTab(){const e=this.$route.params.tab||"flag-records",t=this.tabs.find(t=>t.route===e);if(t)this.currentTab={...t,displayName:this.$t(t.title)};else{const e=this.tabs[0];this.currentTab={...e,displayName:this.$t(e.title)},this.$route.params.tab!==e.route&&this.$router.replace({name:"BillingValidationData",params:{tab:e.route}})}},changeTab(e){this.currentTab={...e,displayName:this.$t(e.title)},this.$router.push({name:"BillingValidationData",params:{tab:e.route}}).catch(e=>{"NavigationDuplicated"!==e.name&&console.error(e)})}}},Tt=At,Dt=(i("8c39"),Object(y["a"])(Tt,a,s,!1,null,"5fdc5cb9",null));t["default"]=Dt.exports},cabf:function(e,t,i){var a=i("5b69");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("1c8033d6",a,!0,{sourceMap:!1,shadowMode:!1})},d4bb:function(e,t,i){var a=i("de32");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("70348d88",a,!0,{sourceMap:!1,shadowMode:!1})},d594:function(e,t,i){var a=i("30a3");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("dd314e98",a,!0,{sourceMap:!1,shadowMode:!1})},d711:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".textalignright[data-v-5e7d1952]{text-align:right}.paddingright5[data-v-5e7d1952]{padding-right:5px}",""]),e.exports=t},de32:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".single-action[data-v-99dc57a4]{display:flex;align-items:center;gap:8px}.single-action a[data-v-99dc57a4]{cursor:pointer}.rotate-icon[data-v-99dc57a4]{transition:transform .3s}.expandchild .rotate-icon[data-v-99dc57a4]{transform:rotate(90deg)}.child-row-container[data-v-99dc57a4]{background-color:#f8f9fa;padding:10px;border-top:1px solid #dee2e6}",""]),e.exports=t},de6b:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".disabled-tab[data-v-5fdc5cb9]{cursor:not-allowed}",""]),e.exports=t},e238:function(e,t,i){"use strict";i("d4bb")},e398:function(e,t,i){var a=i("42c0");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("3464b864",a,!0,{sourceMap:!1,shadowMode:!1})},ed76:function(e,t,i){"use strict";i("41dc")},f165:function(e,t,i){var a=i("5ce5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("499e").default;s("cfd6444c",a,!0,{sourceMap:!1,shadowMode:!1})},ff69:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".tab-content-wrapper[data-v-7e730434]{min-height:400px}",""]),e.exports=t}}]);
//# sourceMappingURL=chunk-3ce6f67e.js.map