(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3591bf91"],{"750f":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));a("88a7"),a("271a"),a("5494");var i=a("c427");const n={getClientList(e){return i["a"].instance.get("/lookups/clients-group-by-account?"+e)},getUtilityList(e){return i["a"].instance.get("/lookups/talygen-utilities-by-client?"+e)},getFlagList(){return i["a"].instance.get("/lookups/GetFlagList")},async GetStateList(e){return await i["a"].instance.get("/lookups/state-list-by-country-code?"+e)},async GetFlagType(e){return await i["a"].instance.get("/lookups/flag-type")},async GetCostCenters(e){return await i["a"].instance.get("/lookups/cost-centers")},async GetFlagRecords(e){return await i["a"].instance.get("/GetFlagRecords?"+e)},SaveColumnItems(e){return i["a"].instance.post("/lookups/SaveColumnItems",e)},DoNotProcessLineItems(e){return i["a"].instance.post("/lookups/DoNotProcessLineItems",e)},async GetFieldsListBySetupId(e){return await i["a"].instance.get("/lookups/GetFieldsListBySetupId?"+e)},async LoadFlagFieldDropDown(e){return await i["a"].instance.get("/lookups/LoadFlagFieldDropDown?"+e)},async GetSbaIdListByUtilityId(e){return await i["a"].instance.get("/lookups/GetSbaIdListByUtilityId?"+e)},GetTicketTypes(){return i["a"].instance.get("/lookups/GetTicketTypes")},GetStatusCodes(){return i["a"].instance.get("/lookups/GetStatusCodes")},async LoadAdditionalInfoByClientId(e){return await i["a"].instance.get("/lookups/LoadAdditionalInfoByClientId?"+e)},async GetExceptionRecord(e){return await i["a"].instance.get("/lookups/GetExceptionRecord?"+e)},UpdateException(e){return i["a"].instance.post("/lookups/UpdateException",e)},async GetCDC_CodePagedList(e){return await i["a"].instance.get("/lookups/GetCDC_CodePagedList?"+e)},CommonUpdateStatus(e){return i["a"].instance.post("/lookups/CommonUpdateStatus",e)},async ViewTicketImage(e){return await i["a"].instance.get("/lookups/ViewTicketImage?"+e)},async GetBilledUnbilledRecords(e){return await i["a"].instance.get("/GetBilledUnbilledRecordsListing?"+e)},async GetUnprocessedRecords(e){return await i["a"].instance.get("/GetUnprocessedRecords?"+e)},async GetTicketLog(e){return await i["a"].instance.get("/GetTicketLog?"+e)},async GetChildTicketLog(e){return await i["a"].instance.get("/GetChildTicketLog?"+e)},async GetChildTicketLogNew(e){return await i["a"].instance.get("/GetChildTicketLogNew?"+e)},GetWorkCodeData(){return i["a"].instance.get("/lookups/GetWorkCodeData")},async GetDivisionDropdownData(e){return await i["a"].instance.get("/lookups/GetDivisionDropdownData?"+e)},async GetActivityIdDropdownListByTicketNumber(e){return await i["a"].instance.get("/lookups/GetActivityIdDropdownListByTicketNumber?"+e)},async GetInvoiceLineItem(e){return await i["a"].instance.get("/lookups/GetInvoiceLineItem?"+e)},async LoadRateByWorkCode(e){return await i["a"].instance.get("/lookups/LoadRateByWorkCode?"+e)},async ChildTicketLogNew(e){return await i["a"].instance.get("/lookups/ChildTicketLogNew?"+e)},async LoadClientDivisionList(e){return await i["a"].instance.get("/lookups/client-divisions?"+e)},UpdateInvoiceLineItem(e){return i["a"].instance.post("/lookups/UpdateInvoiceLineItem",e)},async ChildTicketLog(e){return await i["a"].instance.get("/lookups/ChildTicketLog?"+e)},async ChildTicketLogNew(e){return await i["a"].instance.get("/lookups/ChildTicketLogNew?"+e)},SaveAndProcessLineItemsForInvoice(e){return i["a"].instance.post("/lookups/SaveAndProcessLineItemsForInvoice",e)},async GetAuditRecords(e){return await i["a"].instance.get("/ClientInvoice/AuditRecords?"+e)},async GetBulkMoveListing(e){return await i["a"].instance.get("/GetBulkMoveListing?"+e)},async GetBulkMoveQueueList(e){return await i["a"].instance.get("/GetBulkMoveQueueList?"+e)},async getUserList(e){return await i["a"].instance.get("/lookups/GetUserList?"+e)},async LoadClientDivisionListByUtilityIds(e){return await i["a"].instance.get("/lookups/LoadDivisionListByUtilityId?"+e)},async LoadInvoiceNumberList(e){return await i["a"].instance.get("/lookups/LoadInvoiceNumberList?"+e)},ValidateBMUtilitySbaIdInvoiceNo(e){return i["a"].instance.post("/lookups/ValidateBMUtilitySbaIdInvoiceNo",e)},UpdateContractAndUtility(e){return i["a"].instance.post("/lookups/UpdateContractAndUtility",e)},async UploadFile(e){return i["a"].instance.post("/lookups/UploadFile?",e)},async GetBulkMoveAdvanceListing(e){return await i["a"].instance.get("/GetBulkMoveAdvanceListing?"+e)},BulkMoveAdvancePostData(e){return i["a"].instance.post("/lookups/BulkMoveAdvancePostData",e)},UpdateAdvanceBulkMoveLineIds(e){return i["a"].instance.post("/lookups/UpdateAdvanceBulkMoveLineIds",e)},async SetupListing(e){return await i["a"].instance.get("/GetSetupListing?"+e)},async GetSetupUpdateRecords(e){return await i["a"].instance.get("/GetSetupUpdateRecords?"+e)},SubmitTemplateMapping(e){return i["a"].instance.post("/SubmitTemplateMapping",e)},UpdateTemplateMapping(e){return i["a"].instance.post("/UpdateTemplateMapping",e)},DeleteColumn(e){return i["a"].instance.post("/DeleteColumn",e)},async DeleteItems(e){return await i["a"].instanceCommon.post("/Common/Delete?"+e)},async ImportSetupDataFromExcel(e){return await i["a"].instance.get("/ImportSetupDataFromExcel?"+e)},async GetSetupTemplate(e){return await i["a"].instance.get("/GetSetupTemplate?"+e)},async GetPaymentTerm(e){return await i["a"].instance.get("/ClientInvoice/GetPaymentTerm?"+e)},async LoadParentChildClientList(e){return await i["a"].instance.get("/BillingRule/LoadParentChildClientList?"+e)},async GetCompanyByParentCompanyId(e){return await i["a"].instance.get("/BillingRule/GetCompanyByParentCompanyId?"+e)},async LoadInvoiceMemoPo(e){return await i["a"].instance.get("/ClientInvoice/LoadInvoiceMemoPo?"+e)},async LoadLineItems(e){return await i["a"].instance.get("/ClientInvoice/LoadLineItems?"+e)},async GetConfigurationValueByKey(e){return await i["a"].instance.get("/BillingRule/GetConfigurationValueByKey?"+e)},async LoadTemplateBySetupId(e){return await i["a"].instance.get("/BillingRule/LoadTemplateBySetupId?"+e)},async LoadFields(e){return await i["a"].instance.get("/ClientInvoice/LoadFields?"+e)},async GetDiscount(e){return await i["a"].instance.get("/ClientInvoice/GetDiscount?"+e)},async AddDiscount(e){return await i["a"].instance.post("/ClientInvoice/AddDiscount",e)},async SaveWorkCode(e){return await i["a"].instance.post("/ClientInvoice/SaveWorkCode",null,{params:{workCodeId:e.workCodeId,workCode:e.workCode,lineIds:e.lineIds,reqFrom:e.reqFrom,allInvoice:e.allInvoice,xmlData:e.xmlData,isAdder:e.isAdder,adderName:e.adderName,lineBatchId:e.lineBatchId,invoiceBillId:e.invoiceBillId}})},async GetNoteList(e){return await i["a"].instance.get("/Client/NoteList?"+e)},async GetNoteById(e){return await i["a"].instance.get("/Client/EditNote?"+e)},async DeleteNote(e){return await i["a"].instance.post("/Client/DeleteNote",e)},async AddNoteUtilityDivision(e){return await i["a"].instance.post("/Client/AddNoteUtilityDivision",e)},async MarkAsNonVisible(e){return await i["a"].instance.post("/ClientInvoice/MarkAsNonVisible",e)},async SaveInvoice(e){return await i["a"].instance.post("/ClientInvoice/Save",e)},async GetTemplateListing(e){return await i["a"].instance.get("/GetTemplateListing?"+e)},async GetSetupList(e){return await i["a"].instance.get("/GetTemplateRecords?"+e)},async SaveTemplate(e){return await i["a"].instance.post("/SaveTemplate",e)},async GetTemplateFieldMapping(e){return await i["a"].instance.get("/TemplateFieldMapping?"+e)}},o={async getLookupItems({type:e,category:t,search:a,page:n=1,limit:o=50,filters:s={}}){const r=new URLSearchParams({type:e,page:n.toString(),limit:o.toString()});return a&&a.length>=2&&r.append("search",a),t&&r.append("category",t),Object.entries(s).forEach(([e,t])=>{null!==t&&void 0!==t&&""!==t&&r.append(`filters[${e}]`,t.toString())}),i["a"].instance.get("/lookup?"+r)},async getLookupItem(e,t){return i["a"].instance.get(`/lookup/${e}/${t}`)},async getSupportedTypes(){return i["a"].instance.get("/lookup/types")}}},7588:function(e,t,a){"use strict";a("a85b")},"8a59":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!1,ModuleName:"Billing",SubModuleCode:"AuditRecords",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("AuditRecords"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchAuditRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["COST"==i.column.COLUMN_NAME?[a("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(e.formatCurrency(i.row.COST)))])]:e._e(),"TRANSMIT_DATE"==i.column.COLUMN_NAME?[i.row.TRANSMIT_DATE?a("span",{attrs:{title:i.row.TRANSMIT_DATE}},[e._v(" "+e._s(e.formatDate(i.row.TRANSMIT_DATE))+" ")]):a("span",[e._v("--")])]:e._e(),"DATEOFWORK"==i.column.COLUMN_NAME?[i.row.DATEOFWORK?a("span",{attrs:{title:i.row.DATEOFWORK}},[e._v(" "+e._s(e.formatDate(i.row.DATEOFWORK))+" ")]):a("span",[e._v("--")])]:e._e()]}}])}),a("transition",{attrs:{name:"modal"}},[e.IsEditException?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container modal-lg"},[a("div",{staticClass:"modal-header"},[a("h4",[e._v(e._s(e.$t("Exception")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseEditException}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]),a("div",{staticClass:"modal-body"},[e.IsEditException?a("EditException",{attrs:{columnId:e.selectedColumnId,clientId:e.selectedClientId,requestFrom:"AUDIT"},on:{close:e.CloseEditException,saved:e.onExceptionSaved}}):e._e()],1)])])]):e._e()])],1)},n=[],o=(a("14d9"),a("750f"));let s=[],r=[{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"ClientIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"UtilityName",fieldType:"ddl-radio",fieldIcon:"fa fa-building",paramName:"UtilityNames",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"InvoiceDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"InvoiceDate",fieldSearchConditionName:["DateFrom","DateTo"],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"State",fieldType:"ddl-radio",fieldIcon:"fa fa-map-marker",paramName:"State",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Records",fieldType:"ddl-radio",fieldIcon:"fa fa-th-list",paramName:"recordsToShow",fieldSearchConditionName:[""],isSearch:!1,value:"10",listOptions:[{name:"10",value:"10"},{name:"20",value:"20"},{name:"30",value:"30"},{name:"40",value:"40"},{name:"50",value:"50"}]}],c=[{COLUMN_NAME:"UTIL_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"UtilityName",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:2},{COLUMN_NAME:"TYPE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TicketType",DISPLAY_ORDER:3},{COLUMN_NAME:"WORKFOR",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkDoneFor",DISPLAY_ORDER:4},{COLUMN_NAME:"WORKCODE_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkCode",DISPLAY_ORDER:5},{COLUMN_NAME:"COST",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Cost",DISPLAY_ORDER:6,settings:{isInSlot:!0}},{COLUMN_NAME:"TRANSMIT_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TransmitDate",DISPLAY_ORDER:7,settings:{isInSlot:!0}},{COLUMN_NAME:"DATEOFWORK",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkedDate",DISPLAY_ORDER:8,settings:{isInSlot:!0}},{COLUMN_NAME:"SBA_DESC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"SbaDesc",DISPLAY_ORDER:9},{COLUMN_NAME:"SERVICE_CONDITION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ServiceCondition",DISPLAY_ORDER:10}],d=[{title:"Edit",icon:"fa fa-pencil text-success action-icon",additionalSpan:"",callbackfunction:"EditRecord"}];async function l(e){var t=e;try{const e="countryId=223&includeCandaState=true",a=await o["a"].GetStateList(e);if(a.data){const e=a.data.map(e=>({name:e.STATE_NAME,value:e.ISO_CODE_3}));t.leftSearchFields.find(e=>"State"===e.fieldName).listOptions=e}}catch(a){console.error("Error loading states:",a)}}var u={buttons:s,leftsearchSchema:r,headerSchema:c,listActions:d,bindleftCommonSearchdropdown:l},p=a("993a"),g={name:"AuditRecords",components:{EditException:p["a"]},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:u.buttons,leftSearchFields:u.leftsearchSchema,listActions:u.listActions,Headers:u.headerSchema,searchCondition:"",selectedId:null,IsEditException:!1,selectedColumnId:null,selectedClientId:null}},created:function(){var e=this;e.Headers.forEach(t=>{t.DISPLAY_NAME=e.$t(t.DISPLAY_NAME)}),u.bindleftCommonSearchdropdown(this),e.leftSearchFields.find(e=>"ClientName"===e.fieldName).onChange=this.onSelectionChange,e.setDefaultDateRange(),e.FetchAuditRecords()},methods:{leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/InvoiceDate=([^&]+)/,(function(e,t){let[a,i]=t.split("|");return`DateFrom=${a}&DateTo=${i}`}))),this.FetchAuditRecords()},onSelectionChange(e,t){var a=this;a.isLoading=!0,a.selectedId=t;var i=`clientId=${t}&configId=&reqFrom=&clientIds=`;o["a"].getUtilityList(i).then(e=>{a.isLoading=!1;let t=[];var i=e.data;null!=i&&i.length>0?(i.forEach(e=>{let a={name:e.UTILITY_NAME,value:e.UTILITY_NAME};t.push(a)}),a.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=t):a.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).catch(e=>{a.isLoading=!1,a.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).finally(()=>{a.isLoading=!1})},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Edit":t.isVisible=!0;break;default:t.isVisible=!0}a.push(t)}),a},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchAuditRecords()},actionButtonClick:function(e,t){switch(e){case"EditRecord":this.editRecord(t);break}},commonHeaderButtonClick:function(e){},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchAuditRecords()},FetchAuditRecords:function(){var e=this;e.isLoading=!0;const t=e.leftSearchFields.find(e=>"Records"===e.fieldName),a=t&&t.value||10;e.PageSize=parseInt(a);e.PageSize,e.PageNumber,e.SortBy,e.SortExp;e.searchCondition&&e.searchCondition,setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString()},formatCurrency(e){return e||0===e?parseFloat(e).toFixed(2):"0.00"},editRecord(e){this.selectedColumnId=e.COLUMN_ID,this.selectedClientId=e.CLIENT_ID,this.IsEditException=!0},CloseEditException(){this.IsEditException=!1,this.selectedColumnId=null,this.selectedClientId=null},onExceptionSaved(){this.CloseEditException(),this.FetchAuditRecords()},setDefaultDateRange(){}}},m=g,I=(a("7588"),a("0c7c")),C=Object(I["a"])(m,i,n,!1,null,"4da0c05e",null);t["default"]=C.exports},"99f4":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".textalignright[data-v-4da0c05e]{text-align:right}.paddingright5[data-v-4da0c05e]{padding-right:5px}.modal-mask[data-v-4da0c05e]{position:fixed;z-index:9998;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:table;transition:opacity .3s ease}.modal-wrapper[data-v-4da0c05e]{display:table-cell;vertical-align:middle}.modal-container[data-v-4da0c05e]{margin:0 auto;background-color:#fff;border-radius:2px;box-shadow:0 2px 8px rgba(0,0,0,.33);transition:all .3s ease;max-height:90vh;overflow-y:auto}.modal-container[data-v-4da0c05e],.modal-lg[data-v-4da0c05e]{width:90%;max-width:1200px}.modal-header[data-v-4da0c05e]{padding:15px;border-bottom:1px solid #e5e5e5;display:flex;justify-content:space-between;align-items:center}.modal-header h4[data-v-4da0c05e]{margin:0}.modal-body[data-v-4da0c05e]{padding:20px}.modal-footer[data-v-4da0c05e]{padding:15px;border-top:1px solid #e5e5e5;text-align:right}.close[data-v-4da0c05e]{background:none;border:none;font-size:24px;cursor:pointer;opacity:.5}.close[data-v-4da0c05e]:hover{opacity:1}.modal-enter[data-v-4da0c05e],.modal-leave-active[data-v-4da0c05e]{opacity:0}.modal-enter .modal-container[data-v-4da0c05e],.modal-leave-active .modal-container[data-v-4da0c05e]{transform:scale(1.1)}",""]),e.exports=t},a85b:function(e,t,a){var i=a("99f4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("499e").default;n("7dff029e",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-3591bf91.js.map