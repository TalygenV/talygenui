(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f27e8bf6"],{"2caf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("tg-list",{attrs:{IsShowAction:!0,showCheckBox:!0,ModuleName:"Billing",listType:["List"],RenderRowActionMethod:t.renderActions,SubModuleCode:"Billing",IdentityColumn:"id",HeaderText:t.$t("Plans"),ListData:t.PlanListing,HeaderData:t.Headers,callbackfunction:t.FetchData,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,LegendArray:[{class:"legends_profile colorboxsquare",text:t.$t("Expired")}],SortExp:t.sortExp,SortBy:t.sortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return[a("tr",{class:i.row.additionalClass}),"status_id"==i.column.COLUMN_NAME?[a("listing-status",{ref:"updatestatus",attrs:{isfor:"PLAN",dataid:i.row.id,"data-controller":"Crm",statuslist:t.StatusListForListing,item:i.status_id,"data-action":"index",dataselected:1001==i.row.status_id?"Active":"Inactive",callbackfunction:t.FetchData,isselectedvaluestring:!0,title:1001==i.row.status_id?"Active":"Inactive"}}),t.isCRMShowStausDrop(i.row.status_id,"Ticketing")?t._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:t.getStatusClass(i.row.status_id,"STATUS_ID")},[t._v(" "+t._s(i.row[i.column.COLUMN_NAME])+" ")])])]:t._e(),"plan_name"==i.column.COLUMN_NAME?[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.OpenPlanDetail(i.row.id,i.row.plan_code)}}},[a("i",{attrs:{"aria-hidden":"true"}}),t._v(t._s(i.row.plan_name)+" ")])]:t._e(),"plan_image_url"==i.column.COLUMN_NAME?[null!=i.row.plan_image_url?a("div",{staticClass:"form-control p-0 border-0",attrs:{alt:"",title:""}},[a("img",{staticClass:"border p-2",attrs:{src:i.row.plan_image_url,height:"50",width:"100",title:""}})]):t._e(),null==i.row.plan_image_url?a("div",{staticClass:"form-control p-0 border-0"},[a("img",{attrs:{src:"/Content/images/imagenotavailable.jpg",alt:"No Image Available",height:"50",width:"100",title:""}})]):t._e()]:t._e(),"effective_date"==i.column.COLUMN_NAME?[a("span",[t._v(" "+t._s(null!=i.row.effective_date?t.$d(i.row.effective_date):"")+" ")])]:t._e(),"expiration_date"==i.column.COLUMN_NAME?[a("span",[t._v(" "+t._s(null!=i.row.expiration_date?t.$d(i.row.expiration_date):"")+" ")])]:t._e(),"created_at"==i.column.COLUMN_NAME?[a("span",[t._v(" "+t._s(t.$d(i.row.created_at))+" ")])]:t._e(),"client_count"==i.column.COLUMN_NAME?[a("span",[a("a",{class:{"text-dark text-center single-action":!0,disabled:0==i.row.client_count},attrs:{id:"ancProjectDetail",href:"javascript:;"},on:{click:function(e){return t.OpenClientListPopup(i.row.id,i.row.plan_code)}}},[a("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"noti-circle noti-blue"},[t._v(t._s(i.row.client_count))])])])]:t._e()]}}])}),t.isEditPlan?a("AddPlan",{attrs:{callbackfunction:t.FetchData,billingTypeOptions:t.BillingTypeOptions,editDetail:t.EditPlanDetail,refCode:t.refCode},on:{refreshPlanDetail:t.refreshPlanDetail}}):t._e(),t.isGenerateBill?a("ModalGenerateBill"):t._e(),t.isOpenClientListPopup?a("ClientListingPopup",{attrs:{CodePlan:t.CodePlan,planId:t.PlanId,reqFrom:"PLAN",serviceId:"0"},on:{close:function(e){t.isOpenClientListPopup=!1,t.PlanId=0}}}):t._e(),t.isPlanPopup?a("PlanHistory",{attrs:{planId:t.planId},on:{close:function(e){t.isPlanPopup=!1}}}):t._e(),t.isPlanviewDetailPopup?a("ViewPlanHistory",{attrs:{planId:t.planId,"plan-code1":t.planCode1},on:{close:function(e){t.isPlanviewDetailPopup=!1}}}):t._e()],1)},s=[],n=(a("14d9"),a("9769"));let l=[{title:"GenerateBills",iconClass:"fa fa-file-invoice",callbackfunction:"GenerateBill",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"AddNew",iconClass:"fa fa-plus",callbackfunction:"Add",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Delete",iconClass:"fa fa-trash",callbackfunction:"Delete",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,isEnabledOnSelectedRow:!0}],r=[{fieldName:"PlanName",fieldType:"text",fieldIcon:"fa fa-tasks",paramName:"tp.plan_name",fieldSearchConditionName:["tp.plan_name"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CreatedBy",fieldType:"ddl-check",fieldIcon:"fa fa-user",fieldSearchConditionName:["tp.created_by"],paramName:"tp.created_by",isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"radio",fieldIcon:"fa-calendar",paramName:"tp.status_id",fieldSearchConditionName:["tp.status_id"],isSearch:!1,value:"",listOptions:[{name:"Active",value:1001},{name:"Inactive",value:1002}]},{fieldName:"PlanFor",fieldType:"radio",fieldIcon:"fa-envelope",paramName:"tp.plan_code",fieldSearchConditionName:["tp.plan_code"],isSearch:!1,value:"",listOptions:[{name:"Billing",value:"Billing"},{name:"FSM",value:"FSM"}]}],o=[{title:"Clone",href:"javascript:void(0)",icon:"fa fa-clone",isDisabled:!1,callbackfunction:"ClonePlan",additionalSpan:""},{title:"Edit",href:"javascript:void(0)",icon:"fa fa-pencil",isDisabled:!1,callbackfunction:"EditPlan",additionalSpan:""},{title:"History",href:"javascript:void(0)",icon:"fa fa-history",isDisabled:!1,callbackfunction:"PlanviewDetailHistory",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",isDisabled:!1,callbackfunction:"DeletePlan",additionalSpan:""}];async function d(t){var e=t,a="id=&moduleName=&type=USERS&search=&refId=";await n["a"].GetDDLData(a).then(t=>{""!=t.data&&t.data.DATA.length&&t.data.DATA.forEach(t=>{let a={name:t.name,value:t.value};e.leftSearchFields[1].listOptions.push(a)})})}var c={leftsearchSchema:r,buttons:l,bindleftCommonSearchdropdown:d,listActions:o},_=a("4803"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("GenerateBills")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"validateGenerateBill",attrs:{lang:"en",buttons:!1,schema:t.FormSchema},scopedSlots:t._u([{key:"tgslot-ReadingDateMonth",fn:function(e){e.data;return[a("div",{staticClass:"form-group mb-0"},[a("vc-date-picker",{staticClass:"timedate input-group",attrs:{"is-range":""},on:{input:t.onMonthSelected},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputValue,s=e.inputEvents,n=e.togglePopover;return[a("input",t._g({class:{"form-control":!0,"is-invalid":t.ismonthlyDateValid},attrs:{placeholder:"M/D/YYYY"},domProps:{value:i.start+" - "+i.end}},s)),a("div",{staticClass:"input-group-append",on:{click:n}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.monthRange,callback:function(e){t.monthRange=e},expression:"monthRange"}})],1)]}}])}),a("div",{staticClass:"row flex-row-reverse mt-3"},[a("div",{staticClass:"col-lg-12 text-right"},[a("a",{directives:[{name:"show",rawName:"v-show",value:t.btnViewLog,expression:"btnViewLog"}],staticClass:"mr-2 float-left",attrs:{href:"javascript:;",title:"View Log"},on:{click:function(e){return t.fnViewLogBill()}}},[a("i",{staticClass:"fa fa-eye pr-2"}),t._v(t._s(t.batchName))]),a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;",title:"Save"},on:{click:function(e){return t.fnGenerateBill()}}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("GenerateBills")))]),a("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:"Cancel"},on:{click:function(e){return t.Close()}}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Close")))])])])],1)])])])],1)])},v=[],h={data(){return{isLoading:!1,ismonthlyDateValidc:!1,btnViewLog:!1,monthStartDate:new Date,requestId:"",batchName:"",monthEndDate:new Date,monthRange:{start:this.monthStartDate,end:this.monthEndDate},FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Plan"),name:"Plan",value:"",config:{options:[]},placeholder:this.$t("SelectPlan"),validationRules:{required:!0,max:100}},{astype:"SlotField",label:"Reading Date Month",name:"ReadingDateMonth",value:"",placeholder:"",visibility:!0,validationRules:"",settings:{isInSlot:!0}}]}]}},created:async function(){var t=this;setTimeout((function(){t.GetDDLPlanData()}),300),t.monthRange={start:t.monthStartDate,end:t.monthEndDate}},methods:{Close:function(){var t=this;t.$parent.isGenerateBill=!1},togglePopover(){},async onMonthSelected(t){var e=this;e.updateMonthRange=!1,e.monthStartDate=t.start,e.monthEndDate=t.end;var a=new Date,i=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();const s=new Date(e.monthStartDate);s.setDate(e.monthStartDate.getDate()+i);const n=Math.abs(e.monthEndDate-e.monthStartDate),l=Math.ceil(n/864e5);var r=new Date;r.setDate(r.getDate()-i),27==l||28==l||29==l||30==l?e.ismonthlyDateValid=!1:l<27?e.ismonthlyDateValid=!0:(e.ismonthlyDateValid=!0,e.ShowAlert("You can not select more than 31 days.","warning",!1,e.$t("Alert")))},GetDDLPlanData:function(){var t=this,e="id=&moduleName=&type=PLANS&search=&refId=";n["a"].GetDDLData(e).then(e=>{if(e.data){var a=e.data;null!=a&&(t.$refs.validateGenerateBill.updateProperty("Plan","config.options",e.data.DATA),t.$refs.validateGenerateBill.UpdateKeyValue())}})},fnViewLogBill(){var t=this;window.open(t.$router.resolve({name:"InvoiceLog",params:{requestId:t.requestId}}).href,"_blank")},fnGenerateBill:async function(){var t=this;const e=await t.$refs.validateGenerateBill.validateForm.validate();if(e){var a=t.$refs.validateGenerateBill.getPropertyValue("Plan","value"),i=t.monthRange.start,s=t.monthRange.end,l=i.toISOString().split("T")[0],r=s.toISOString().split("T")[0],o=`planId=${a}&fromDate=${l}&toDate=${r}`;await n["a"].GetGenerateBillListing(o).then((function(e){"success"==e.data.result.status_message?(t.ShowAlert("Invoice Generated Successfully","Success",!0,t.$t("Alert")),t.btnViewLog=!0,t.requestId=e.data.result.request_id,t.batchName=e.data.result.batch_name):(t.ShowAlert("Invoice Generation Failed","damger",!0,t.$t("Alert")),t.btnViewLog=!1)}))}}}},C=h,f=a("0c7c"),p=Object(f["a"])(C,u,v,!1,null,null,null),m=p.exports,y=a("e01b"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("PlanHistory")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("History")))])])]),a("div",{staticClass:"listing mt-2"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 table_w800",attrs:{id:"tbllistinghistorydata"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v(t._s(t.$t("PlanName")))]),a("th",[t._v(t._s(t.$t("InvoiceTemplate")))]),a("th",[t._v(t._s(t.$t("EffectiveDate")))]),a("th",[t._v(t._s(t.$t("ExpirationDate")))]),a("th",[t._v(t._s(t.$t("CreatedDate")))]),a("th",[t._v(t._s(t.$t("CreatedBy")))]),a("th",[t._v(t._s(t.$t("BillingFrequency")))])])]),a("tbody",[t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i,class:{"low-bar":"CURRENT"===e.VERSION_NAME}},[a("td",[t._v(t._s(e.PLAN_NAME))]),a("td",[t._v(t._s(e.INVOICE_TEMPLATE))]),a("td",[t._v(t._s(null!=e.EFFECTIVE_DATE?t.$d(e.EFFECTIVE_DATE,"long"):"")+" ")]),a("td",[t._v(t._s(null!=e.EXPIRATION_DATE?t.$d(e.EXPIRATION_DATE):"")+" ")]),a("td",[t._v(t._s(t.$d(e.CREATE_AT)))]),a("td",[t._v(t._s(e.CREATE_BY))]),a("td",[t._v(t._s(e.BILLING_FREQUENCY))])])})),0===t.PlanHistoryList.length?a("tr",[a("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"8"}},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]):t._e()],2)])])])])])])])])],1)},b=[],P={props:{planId:{type:Number,required:!0}},data(){return{PlanHistoryList:[],isLoading:!1}},created(){this.getPlanHistory()},methods:{getPlanHistory(){this.isLoading=!0;const t="planId="+this.planId;n["a"].GetPlanHistoryListing(t).then(t=>{t&&t.data&&(t.data.forEach(t=>{["EFFECTIVE_DATE","EXPIRATION_DATE","CREATED_AT"].forEach(e=>{t[e]&&(t[e]=new Date(t[e]))})}),this.PlanHistoryList=t.data,this.isLoading=!1)}).catch(t=>{this.ShowAlert(vm.$t("UnknownError"),"failure",vm.$t("Alert"))})},Close(){this.$parent.isPlanPopup=!1}}},E=P,S=Object(f["a"])(E,g,b,!1,null,"4f614555",null),N=S.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[t._m(0),a("button",{staticClass:"close ml-3",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"col-12 mt-4 "},[a("div",{staticClass:"main-content "},[a("div",{staticClass:"col-12 mb-4 p-0"},[a("ul",{staticClass:"nav nav-pills flex-row left-tab responivecustomtab_bod"},t._l(t.tabs,(function(e){return a("li",{key:e.name,staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu px-4",class:{active:t.activeTab===e.name},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.activeTab=e.name}}},[t._v(" "+t._s(e.label)+" ")])])})),0),a("div",{staticClass:"tab-content mb-4 border p-3"},[["Services","Subsidy","Rates"].includes(t.activeTab)?t._e():a("div",{staticClass:"col-12 mt-0 p-0"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Version:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedVersion,expression:"selectedVersion"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedVersion=e.target.multiple?a:a[0]},t.onVersionChange]}},t._l(t.versionOptions,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" Version "+t._s(e)+" ")])})),0)])]),"Plan"===t.activeTab?a("div",{staticClass:"history-container"},[a("div",{staticClass:"history-table"},[a("div",{staticClass:"col-lg-12 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Current Version: "),t.selectedVersion?a("span",{staticClass:"border-0"},[t._v(t._s(t.selectedVersion))]):t._e()])])])]),t.isLoading?a("div",{staticClass:"loading"},[t._v("Loading...")]):0===t.PlanHistoryList.length?a("div",{staticClass:"no-records"},[t._v(" No record(s) found ")]):a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered mt-0 mb-0"},[a("tbody",[t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Name")]),a("td",[t._v(t._s(e.CURRENT_PLAN_NAME||"N/A"))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Billing Type")]),a("td",[t._v(t._s(e.CURRENT_PLAN_CODE))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Meter Type")]),a("td",[t._v(t._s(e.CURRENT_METER_TYPE))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Invoice Template ")]),a("td",[t._v(" "+t._s(e.CURRENT_INVOICE_TEMPLATE||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Customer Type")]),a("td",[t._v(t._s(e.CURRENT_CUSTOMER_SEGMENT))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Status")]),a("td",[t._v(t._s(e.CURRENT_STATUS_NAME))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Show on Website ")]),a("td",[t._v(t._s(e.CURRENT_IS_SHOW_ON_WEBSITE))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Show Pricing")]),a("td",[t._v(t._s(e.CURRENT_IS_SHOW_ON_PRICING))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Type")]),a("td",[t._v(t._s(e.CURRENT_IS_FOR_PLAN))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Effective Date")]),a("td",[t._v(" "+t._s(t.formatDate(e.CURRENT_EFFECTIVE_DATE)||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Expiration Date ")]),a("td",[t._v(" "+t._s(t.formatDate(e.CURRENT_EXPIRATION_DATE)||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Create Date")]),a("td",[t._v(" "+t._s(t.formatDate(e.CURRENT_VERSION_DATE)||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Create By")]),a("td",[t._v(t._s(e.CREATED_BY||"N/A"))])])}))],2)])])]),a("div",{staticClass:"history-table"},[a("div",{staticClass:"col-lg-12 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Previous Version: "),t.PlanHistoryList.length&&t.PlanHistoryList[0].PREVIOUS_VERSION?a("span",{staticClass:"border-0"},[t._v(t._s(t.PlanHistoryList[0].PREVIOUS_VERSION))]):t._e()])])])]),t.isLoading?a("div",{staticClass:"loading"},[t._v("Loading...")]):a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered mt-0 mb-0"},[t.PlanHistoryList.length&&t.PlanHistoryList[0].PREVIOUS_PLAN_NAME?a("tbody",[t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Name")]),a("td",[t._v(t._s(e.PREVIOUS_PLAN_NAME||"N/A"))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Billing Type")]),a("td",[t._v(t._s(e.PREVIOUS_PLAN_CODE))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Meter Type")]),a("td",[t._v(t._s(e.PREVIOUS_METER_TYPE))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Invoice Template ")]),a("td",[t._v(" "+t._s(e.PREVIOUS_INVOICE_TEMPLATE||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Customer Type")]),a("td",[t._v(t._s(e.PREVIOUS_CUSTOMER_SEGMENT))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Status")]),a("td",[t._v(t._s(e.PREVIOUS_STATUS_NAME))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Show on Website ")]),a("td",[t._v(t._s(e.PREVIOUS_IS_SHOW_ON_WEBSITE))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Show Pricing")]),a("td",[t._v(t._s(e.PREVIOUS_IS_SHOW_ON_PRICING))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Type")]),a("td",[t._v(t._s(e.PREVIOUS_IS_FOR_PLAN))])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Effective Date")]),a("td",[t._v(" "+t._s(t.formatDate(e.PREVIOUS_EFFECTIVE_DATE)||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Expiration Date ")]),a("td",[t._v(" "+t._s(t.formatDate(e.PREVIOUS_EXPIRATION_DATE)||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Create Date")]),a("td",[t._v(" "+t._s(t.formatDate(e.PREVIOUS_VERSION_DATE)||"N/A")+" ")])])})),t._l(t.PlanHistoryList,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"font-weight-medium"},[t._v("Create By")]),a("td",[t._v(t._s(e.CREATED_BY||"N/A"))])])}))],2):a("tbody",[t._m(1)])])])])]):t._e(),"Services"===t.activeTab?a("div",[t.isLoading?a("div",[t._v("Loading...")]):0===t.ServicePlanListing.length?a("div",[t._v(" No service plans found. ")]):t._e(),a("div",{staticClass:"py-2 d-inline-block"},[a("span",{staticClass:"legend-ovrdue colorboxsquare"}),t._v(" "+t._s(t.$t("Deleted"))+" ")]),a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered"},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v("Service Name")]),a("th",[t._v("Service Code")]),"SUBSCRIPTION_BILLING"!==t.planCode1?a("th",[t._v(" Usage Measurement ")]):t._e(),"SUBSCRIPTION_BILLING"!==t.planCode1?a("th",[t._v(" Billing Rule Name ")]):t._e(),a("th",[t._v("Created By")]),a("th",[t._v("Created At")])])]),a("tbody",t._l(t.ServicePlanListing,(function(e,i){return a("tr",{key:i,class:[e.statusClass,"odd",1003===e.status_id?"danger-bar":""]},[a("td",[t._v(t._s(e.service_name))]),a("td",[t._v(t._s(e.service_code))]),"SUBSCRIPTION_BILLING"!==t.planCode1?a("td",[t._v(" "+t._s(e.usage_measurement)+" ")]):t._e(),"SUBSCRIPTION_BILLING"!==t.planCode1?a("td",[e.RuleDetails&&e.RuleDetails.length?a("div",t._l(e.RuleDetails,(function(e,i){return a("div",{key:i},[t._v(" "+t._s(e.billing_config_name)+" ")])})),0):a("div",[t._v("--")])]):t._e(),a("td",[t._v(t._s(e.created_by))]),a("td",[t._v(t._s(t.formatDate(e.created_at)))])])})),0)])])])]):t._e(),"Rates"===t.activeTab?a("div",{staticClass:"listing"},["UTILITY_BILLING"==t.planCode1?a("div",[a("div",{staticClass:"py-2 d-inline-block"}),a("span",{staticClass:"legend-ovrdue colorboxsquare"}),t._v(" "+t._s(t.$t("Deleted"))+" "),a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered"},[t._m(2),t.RateCodeHistoryList&&t.RateCodeHistoryList.length>0?a("tbody",t._l(t.RateCodeHistoryList,(function(e,i){return a("tr",{key:i,class:[e.statusClass,"odd",1003===e.status_id?"danger-bar":""]},[a("td",[t._v(" "+t._s(e.WC&&e.WC.length?e.WC[0].workcode_name:"N/A")+" ")]),a("td",[t._v(t._s(e.service_name||"N/A"))]),a("td",{staticClass:"text-center"},[t._v(" "+t._s(e.rate||"N/A")+" ")]),a("td",[t._v(" "+t._s(t.formatDate(e.start_date)||"N/A")+" ")]),a("td",[t._v(t._s(t.formatDate(e.end_date)||"N/A"))]),a("td",[t._v(" "+t._s(e.WC&&e.WC.length>0&&e.WC[0].TTS&&e.WC[0].TTS.length>0?e.WC[0].TTS[0].created_by:"N/A")+" ")]),a("td",[t._v(" "+t._s(t.formatDate(e.created_at)||"N/A")+" ")]),a("td",[t._v(" "+t._s(t.formatDate(e.modified_at)||"N/A")+" ")])])})),0):a("tbody",[t._m(3)])])])]):t._e(),"SUBSCRIPTION_BILLING"==t.planCode1?a("div",[a("div",{staticClass:"py-2 d-inline-block"}),a("span",{staticClass:"legend-ovrdue colorboxsquare"}),t._v(" "+t._s(t.$t("Deleted"))+" "),a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered"},[t._m(4),t.PlanRateSubscriptionDeatil&&t.PlanRateSubscriptionDeatil.length>0?a("tbody",t._l(t.PlanRateSubscriptionDeatil,(function(e,i){return a("tr",{key:i,class:[1003===e.status_id?"danger-bar":"","odd"]},[a("td",[t._v(t._s(e.service_name||"N/A"))]),a("td",[t._v(t._s(e.service_type_name||"N/A"))]),a("td",[t._v(t._s(e.billing_type||"N/A"))]),a("td",[t._v(t._s(e.billing_interval||"N/A"))]),a("td",[t._v(t._s(e.from||"N/A"))]),a("td",[t._v(t._s(e.to||"N/A"))]),a("td",{staticClass:"text-center"},[t._v(" "+t._s(e.rate||"N/A")+" ")]),a("td",[t._v(" "+t._s(t.formatDate(e.effective_start_date)||"N/A")+" ")]),a("td",[t._v(" "+t._s(t.formatDate(e.effective_end_date)||"N/A")+" ")]),a("td",[t._v(" "+t._s(t.formatDate(e.created_at)||"N/A")+" ")])])})),0):a("tbody",[t._m(5)])])])]):t._e()]):t._e(),"BillingCycle"===t.activeTab?a("div",{staticClass:"history-container table-responsive table-fix-header"},["SUBSCRIPTION_BILLING"===t.planCode1?a("div",{staticClass:"history-table"},[t._m(6),t.isLoading?a("div",{staticClass:"loading"},[t._v("Loading...")]):0===t.CurrentBillCycleList.length?a("div",{staticClass:"no-records"},[t._v(" No record(s) found ")]):a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mb-0"},[a("tbody",[t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-planname-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Name")]),a("td",[t._v(t._s(e.plan_name||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-daysuntildue-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Days Until Due")]),a("td",[t._v(t._s(e.days_until_due||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-latefeeamount-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fee Amount ")]),a("td",[t._v(t._s(e.late_fee_amount||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-latefeesapplicable-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fees Applicable ")]),a("td",[t._v(" "+t._s(e.late_fees_applicable?"Yes":"No")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-latefeetype-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Late Fee Type")]),a("td",[t._v(" "+t._s(1===e.late_fee_type?"Flat Fee":2===e.late_fee_type?"Percentage Fee":"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created At")]),a("td",[t._v(" "+t._s(t.formatDate(e.created_at||"N/A"))+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created By")]),a("td",[t._v(t._s(e.created_by||"N/A"))])])}))],2)])])]):t._e(),"SUBSCRIPTION_BILLING"===t.planCode1?a("div",{staticClass:"history-table"},[t._m(7),t.isLoading?a("div",{staticClass:"loading"},[t._v("Loading...")]):0===t.PreviousBillCycleList.length?a("div",{staticClass:"no-records"},[t._v(" No record(s) found ")]):a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mb-0"},[a("tbody",[t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-planname-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Name")]),a("td",[t._v(t._s(e.plan_name||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-daysuntildue-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Days Until Due")]),a("td",[t._v(t._s(e.days_until_due||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-latefeeamount-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fee Amount ")]),a("td",[t._v(t._s(e.late_fee_amount||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-latefeesapplicable-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fees Applicable ")]),a("td",[t._v(" "+t._s(e.late_fees_applicable?"Yes":"No")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-latefeetype-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Late Fee Type")]),a("td",[t._v(" "+t._s(1===e.late_fee_type?"Flat Fee":2===e.late_fee_type?"Percentage Fee":"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created At")]),a("td",[t._v(" "+t._s(t.formatDate(e.created_at||"N/A"))+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created By")]),a("td",[t._v(t._s(e.created_by||"N/A"))])])}))],2)])])]):t._e(),"SUBSCRIPTION_BILLING"!==t.planCode1?a("div",{staticClass:"history-table "},[t._m(8),t.isLoading?a("div",{staticClass:"loading"},[t._v("Loading...")]):0===t.CurrentBillCycleList.length?a("div",{staticClass:"no-records"},[t._v(" No record(s) found ")]):a("div",{staticClass:"table-responsive table"},[a("table",{staticClass:"table table-bordered mb-0"},[a("tbody",[t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-planname-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Name")]),a("td",[t._v(t._s(e.plan_name||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-billingfrequency-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Frequency ")]),a("td",[t._v(t._s(e.billing_frequency||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-occurs-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Occurs Every")]),a("td",[t._v(t._s(e.occurs_every||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-daysuntildue-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Days Until Due")]),a("td",[t._v(t._s(e.days_until_due||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-latefee-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fees Applicable ")]),a("td",[t._v(" "+t._s(!0===e.late_fees_applicable?"Yes":!1===e.late_fees_applicable?"No":"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-latefeetype-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Late Fee Type")]),a("td",[t._v(" "+t._s(1===e.late_fee_type?"Flat Fee":2===e.late_fee_type?"Percentage Fee":"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-latefeeamount-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fee Amount ")]),a("td",[t._v(t._s(e.late_fee_amount||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-recurring-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Is Recurring")]),a("td",[t._v(" "+t._s(!0===e.is_recurring?"Recurring":!1===e.is_recurring?"One Time":"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-frequency-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Frequency Value ")]),a("td",[t._v(" "+t._s(e.billing_frequency_value&&""!==e.billing_frequency_value.trim()?e.billing_frequency_value:"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-dunning-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Dunning ")]),a("td",[t._v(" "+t._s(e.billing_dunning&&""!==e.billing_dunning.trim()?e.billing_dunning:"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-readingstartday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Reading Cycle Start Day ")]),a("td",[t._v(" "+t._s(e.reading_cycle_start_day||"N/A")+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-readingendday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Reading Cycle End Day ")]),a("td",[t._v(t._s(e.reading_cycle_end_day||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-billingstartday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Start Day ")]),a("td",[t._v(t._s(e.sc_billing_start_day||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-billingendday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing End Day ")]),a("td",[t._v(t._s(e.sc_billing_end_day||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-starttime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Start Time")]),a("td",[t._v(t._s(e.sc_start_time||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("End Time")]),a("td",[t._v(t._s(e.sc_end_time||"N/A"))])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created At")]),a("td",[t._v(" "+t._s(t.formatDate(e.created_at||"N/A"))+" ")])])})),t._l(t.CurrentBillCycleList,(function(e,i){return a("tr",{key:"current-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created By")]),a("td",[t._v(t._s(e.created_by||"N/A"))])])}))],2)])])]):t._e(),"SUBSCRIPTION_BILLING"!==t.planCode1?a("div",{staticClass:"history-table"},[t._m(9),t.isLoading?a("div",{staticClass:"loading"},[t._v("Loading...")]):0===t.PreviousBillCycleList.length?a("div",{staticClass:"no-records"},[t._v(" No record(s) found ")]):a("div",{staticClass:"table-responsive table"},[a("table",{staticClass:"table table-bordered mb-0"},[a("tbody",[t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-planname-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Plan Name")]),a("td",[t._v(t._s(e.plan_name||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-billingfrequency-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Frequency ")]),a("td",[t._v(t._s(e.billing_frequency||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-occurs-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Occurs Every")]),a("td",[t._v(t._s(e.occurs_every||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-daysuntildue-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Days Until Due")]),a("td",[t._v(t._s(e.days_until_due||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-latefee-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fees Applicable ")]),a("td",[t._v(" "+t._s(!0===e.late_fees_applicable?"Yes":!1===e.late_fees_applicable?"No":"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-latefeetype-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Late Fee Type")]),a("td",[t._v(" "+t._s(1===e.late_fee_type?"Flat Fee":2===e.late_fee_type?"Percentage Fee":"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-latefeeamount-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Late Fee Amount ")]),a("td",[t._v(t._s(e.late_fee_amount||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-recurring-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Is Recurring")]),a("td",[t._v(" "+t._s(!0===e.is_recurring?"Recurring":!1===e.is_recurring?"One Time":"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-frequency-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Frequency Value ")]),a("td",[t._v(" "+t._s(e.billing_frequency_value&&""!==e.billing_frequency_value.trim()?e.billing_frequency_value:"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-dunning-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Dunning ")]),a("td",[t._v(" "+t._s(e.billing_dunning&&""!==e.billing_dunning.trim()?e.billing_dunning:"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-readingstartday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Reading Cycle Start Day ")]),a("td",[t._v(" "+t._s(e.reading_cycle_start_day||"N/A")+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-readingendday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Reading Cycle End Day ")]),a("td",[t._v(t._s(e.reading_cycle_end_day||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-billingstartday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing Start Day ")]),a("td",[t._v(t._s(e.sc_billing_start_day||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-billingendday-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v(" Billing End Day ")]),a("td",[t._v(t._s(e.sc_billing_end_day||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-starttime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Start Time")]),a("td",[t._v(t._s(e.sc_start_time||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("End Time")]),a("td",[t._v(t._s(e.sc_end_time||"N/A"))])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created At")]),a("td",[t._v(" "+t._s(t.formatDate(e.created_at||"N/A"))+" ")])])})),t._l(t.PreviousBillCycleList,(function(e,i){return a("tr",{key:"previous-endtime-"+i},[a("td",{staticClass:"font-weight-medium"},[t._v("Created By")]),a("td",[t._v(t._s(e.created_by||"N/A"))])])}))],2)])])]):t._e()]):t._e(),"Subsidy"===t.activeTab?a("div",{staticClass:"listing"},[a("div",{staticClass:"py-2 d-inline-block"},[a("span",{staticClass:"legend-ovrdue colorboxsquare"}),t._v(" "+t._s(t.$t("Deleted"))+" ")]),a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mb-0"},[t._m(10),t.SubsidyData&&t.SubsidyData.length>0?a("tbody",t._l(t.SubsidyData,(function(e,i){return a("tr",{key:i,class:[e.statusClass,"odd",1003===e.Status_Id?"danger-bar":""]},[a("td",[t._v(t._s(e.Subsidy_Name))]),a("td",[t._v(t._s(e.service_name))]),a("td",[t._v(t._s(e.Subsidy_Name))]),a("td",[t._v(t._s(e.Subsidy_Type))]),a("td",{staticClass:"text-center"},[t._v(" "+t._s(e.Subsidy_Value)+" ")]),a("td",[t._v(t._s(t.formatDate(e.Effective_From)))]),a("td",[t._v(t._s(t.formatDate(e.Effective_To)))]),a("td",[t._v(t._s(e.Created_By_Name))]),a("td",[t._v(t._s(t.formatDate(e.Created_At)))])])})),0):a("tbody",[t._m(11)])])])]):t._e()])])])])])])])],1)},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"modal-title mb-0"},[t._v("Plan History Details")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-danger text-center fw-bold",attrs:{colspan:"6"}},[t._v(" No record(s) found ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v("Rate Code")]),a("th",[t._v("Service Name")]),a("th",{staticClass:"text-center"},[t._v("Rate")]),a("th",[t._v("Start Date")]),a("th",[t._v("End Date")]),a("th",[t._v("Created By")]),a("th",[t._v("Created At")]),a("th",[t._v("Modified At")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-danger text-center fw-bold",attrs:{colspan:"8"}},[t._v(" No record(s) found. ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v("Service Name")]),a("th",[t._v("Service Type")]),a("th",[t._v("Billing Type")]),a("th",[t._v("Billing Interval")]),a("th",[t._v("From")]),a("th",[t._v("To")]),a("th",{staticClass:"text-center"},[t._v("Rate")]),a("th",[t._v("Start Date")]),a("th",[t._v("End Date")]),a("th",[t._v("Created At")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-danger text-center fw-bold",attrs:{colspan:"8"}},[t._v(" No record(s) found. ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-12 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Current Version")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-12 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Previous Version")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-12 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Current Version")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-12 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Previous Version")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v("Subsidy Name")]),a("th",[t._v("Condition Name")]),a("th",[t._v("Subsidy Name")]),a("th",[t._v("Type")]),a("th",{staticClass:"text-center"},[t._v("Value")]),a("th",[t._v("Effective From")]),a("th",[t._v("Effective To")]),a("th",[t._v("Created By")]),a("th",[t._v("Created At")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-danger text-center fw-bold",attrs:{colspan:"8"}},[t._v(" No record(s) found. ")])])}],A={props:{planId:{type:Number,required:!0},planCode1:{type:String,required:!0}},data(){return{activeTab:"Plan",isLoading:!1,PlanHistoryList:[],ServicePlanListing:[],TotalRecords:0,PageSize:10,PageNumber:1,showAll:!0,SortBy:"",SortExp:"",searchCondition:"",versionNo:"",RateCodeHistoryList:[],CurrentRateCodeList:[],PreviousRateCodeList:[],CurrentBillCycleList:[],PreviousBillCycleList:[],fullPlanHistoryList:[],PlanRateSubscriptionDeatil:[],BillData:[],SubsidyData:[],ishistory:!0,versionOptions:[],selectedVersion:null,planCode:"UTILITY_BILLING",tabs:[{name:"Plan",label:this.$t("Plan")},{name:"Services",label:this.$t("Services")},{name:"Rates",label:this.$t("Rates")},{name:"BillingCycle",label:this.$t("Billing Cycle")}].concat("SUBSCRIPTION_BILLING"!==this.planCode1?[{name:"Subsidy",label:this.$t("Subsidy")}]:[])}},created(){},mounted(){"Plan"===this.activeTab&&this.getPlanHistory(1)},watch:{activeTab(t){this.PlanHistoryList=[],this.ServiceHistoryList=[],this.RateHistoryList=[],this.BillingCycleList=[],this.SubsidyList=[],"Plan"===t?this.getPlanHistory(1):"Services"===t?"SUBSCRIPTION_BILLING"===this.planCode1?this.FetchSubscriptionBillingServiceData():this.FetchRecords():"Rates"===t?"SUBSCRIPTION_BILLING"===this.planCode1?this.GetPlanSubscriptionRateListing():this.FetchRateCodeHistory(1):"BillingCycle"===t?this.GetBillCycleData(1,this.selectedVersion,1):"Subsidy"===t&&this.GetSubsidyPlanData()}},methods:{Close(){this.$parent.isPlanviewDetailPopup=!1},formatDate(t){if(!t)return"N/A";const e=new Date(t);return isNaN(e)||1900===e.getFullYear()?"N/A":e.toLocaleString()},onVersionChange(){if(this.selectedVersion){const t=this.fullPlanHistoryList.find(t=>t.CURRENT_VERSION===this.selectedVersion);this.PlanHistoryList=t?[t]:[],this.previousVersion=(null===t||void 0===t?void 0:t.PREVIOUS_VERSION)||null,this.PlanHistoryList.forEach(t=>{["CURRENT_EFFECTIVE_DATE","CURRENT_EXPIRATION_DATE","CURRENT_VERSION_DATE","PREVIOUS_EFFECTIVE_DATE","PREVIOUS_EXPIRATION_DATE","PREVIOUS_VERSION_DATE"].forEach(e=>{t[e]&&(t[e]=new Date(t[e]))})}),"Rates"===this.activeTab?this.FetchRateCodeHistory(1):"BillingCycle"===this.activeTab&&this.GetBillCycleData(1,this.selectedVersion)}else this.PlanHistoryList=[],this.previousVersion=null,"Rates"===this.activeTab?this.FetchRateCodeHistory():"BillingCycle"===this.activeTab&&this.GetBillCycleData()},GetSubsidyPlanData:async function(t=1){var e=this;let a=`pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&search=${e.searchCondition}&PlanId=${e.planId}&includeStatus=${t}`;n["a"].GetSubsidyPlanData(a).then(async t=>{if(console.log("Response Data:",t.data),t&&t.data&&t.data[0])try{const a=JSON.parse(t.data[0]);e.SubsidyData=a.Data&&a.Data.length?a.Data:[]}catch(a){console.error("JSON Parse Error:",a)}}).catch(t=>{console.error("Error fetching subsidy plan data:",t)})},async GetBillCycleData(t=1,e=null,a){this.isLoading=!0,this.CurrentBillCycleList=[],this.PreviousBillCycleList=[];const i=`planid=${this.planId}&ishistory=${t}&versionNo=${e||this.selectedVersion||""}`;try{var s;const e=await n["a"].GetBillingCycleData(i);if(null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.result){const i=JSON.parse(e.data.result),s=i.CURRENT||[],n=i.PREVIOUS||[],l=i.TOTAL_VERSION||0;if(this.versionOptions=Array.from({length:l},(t,e)=>l-e),1===a&&this.versionOptions.length>0)return this.selectedVersion=this.versionOptions[0],void this.GetBillCycleData(t,this.selectedVersion,0);const r=(t,e)=>{t.forEach(t=>{e.forEach(e=>{if(t[e]){const a=new Date(t[e]);t[e]=isNaN(a.getTime())?t[e]:a}})})};r(s,["cycle_start_date","cycle_end_date","created_at","modified_at"]),r(n,["cycle_start_date","cycle_end_date","created_at","modified_at"]),this.CurrentBillCycleList=s,this.PreviousBillCycleList=n,this.BillData=[...s,...n]}else this.BillData=[],this.CurrentBillCycleList=[],this.PreviousBillCycleList=[],this.versionOptions=[]}catch(l){console.error("Error fetching billing cycle data:",l),this.BillData=[],this.CurrentBillCycleList=[],this.PreviousBillCycleList=[],this.BillingVersionOptions=[]}finally{this.isLoading=!1}},getPlanHistory(t){this.isLoading=!0,n["a"].GetPlanHistoryListing("planId="+this.planId).then(e=>{if(e&&e.data){this.fullPlanHistoryList=e.data;const a=[...e.data].sort((t,e)=>new Date(e.CURRENT_VERSION_DATE)-new Date(t.CURRENT_VERSION_DATE));this.versionOptions=a.map(t=>t.CURRENT_VERSION),this.versionOptions.length>0&&1==t&&(this.selectedVersion=this.versionOptions[0],this.getPlanHistory(0));const i=a.find(t=>t.CURRENT_VERSION===this.selectedVersion);this.PlanHistoryList=i?[i]:[],this.previousVersion=(null===i||void 0===i?void 0:i.PREVIOUS_VERSION)||null,this.PlanHistoryList.forEach(t=>{["CURRENT_EFFECTIVE_DATE","CURRENT_EXPIRATION_DATE","CURRENT_VERSION_DATE","PREVIOUS_EFFECTIVE_DATE","PREVIOUS_EXPIRATION_DATE","PREVIOUS_VERSION_DATE"].forEach(e=>{t[e]&&(t[e]=new Date(t[e]))}),t.CURRENT_IS_SHOW_ON_PRICING=t.CURRENT_IS_SHOW_ON_PRICING?"Yes":"No",t.CURRENT_IS_SHOW_ON_WEBSITE=t.CURRENT_IS_SHOW_ON_WEBSITE?"Yes":"No",t.PREVIOUS_IS_SHOW_ON_PRICING=t.PREVIOUS_IS_SHOW_ON_PRICING?"Yes":"No",t.PREVIOUS_IS_SHOW_ON_WEBSITE=t.PREVIOUS_IS_SHOW_ON_WEBSITE?"Yes":"No",t.CURRENT_IS_FOR_PLAN=1===t.CURRENT_IS_FOR_PLAN?"Prepaid":2===t.CURRENT_IS_FOR_PLAN?"Postpaid":"N/A",t.PREVIOUS_IS_FOR_PLAN=1===t.PREVIOUS_IS_FOR_PLAN?"Prepaid":2===t.PREVIOUS_IS_FOR_PLAN?"Postpaid":"N/A"})}else this.PlanHistoryList=[],this.fullPlanHistoryList=[],this.versionOptions=[];this.isLoading=!1}).catch(()=>{this.isLoading=!1,this.ShowAlert(this.$t("UnknownError"),"failure",this.$t("Alert"))})},async FetchRecords(){this.isLoading=!0,this.ServicePlanListing=[];const t=`planId=${this.planId}&sortBy=${this.SortBy}&sortExp=${this.SortExp}&planCode=${this.planCode}&pagesize=${this.PageSize}&pagenumber=${this.PageNumber}&showAll=${this.showAll}`;try{const e=await n["a"].GetPlanServiceListing(t);if(e&&e.data&&e.data.result&&e.data.result.data.length>0){const t=e.data.result.data;t.forEach(t=>{t.isRuleView=!1,t.rules=[]}),this.ServicePlanListing=t,this.TotalRecords=t[0].TOTALRECORDS||0}else this.ServicePlanListing=[],this.TotalRecords=0}catch(e){this.ServicePlanListing=[],this.TotalRecords=0,this.ShowAlert(this.$t("UnknownError"),"failure",this.$t("Alert"))}finally{this.isLoading=!1}},async FetchSubscriptionBillingServiceData(){this.isLoading=!0,this.ServicePlanListing=[];const t=`planId=${this.planId}&sortBy=${this.SortBy}&sortExp=${this.SortExp}&planCode=${this.planCode1}&pagesize=${this.PageSize}&pagenumber=${this.PageNumber}&showAll=${this.showAll}`;try{const e=await n["a"].GetPlanServiceListing(t);if(e&&e.data&&e.data.result&&e.data.result.data.length>0){const t=e.data.result.data;t.forEach(t=>{t.isRuleView=!1,t.rules=[]}),this.ServicePlanListing=t,this.TotalRecords=t[0].TOTALRECORDS||0}else this.ServicePlanListing=[],this.TotalRecords=0}catch(e){this.ServicePlanListing=[],this.TotalRecords=0,this.ShowAlert(this.$t("UnknownError"),"failure",this.$t("Alert"))}finally{this.isLoading=!1}},async FetchRateCodeHistory(){this.isLoading=!0,this.RateCodeHistoryList=[];const t=`PlanId=${this.planId}&pageSize=${this.PageSize}&pageNum=${this.PageNumber}&sortBy=${this.SortBy}&sortExp=${this.SortExp}`;try{const e=await n["a"].GetRateCodeHistoryList(t);if(e&&e.data&&e.data.result){const t=e.data.result||[],a=(t,e)=>{t.forEach(t=>{e.forEach(e=>{if(t[e]){const a=new Date(t[e]);t[e]=isNaN(a.getTime())?t[e]:a}})})};a(t,["start_date","end_date","created_at","modified_at"]),this.RateCodeHistoryList=t,this.TotalRecords=t.length>0&&t[0].TOTAL_RECORDS||t.length}else this.RateCodeHistoryList=[],this.TotalRecords=0}catch(e){console.error("FetchRateCodeHistory error:",e),this.RateCodeHistoryList=[],this.TotalRecords=0,this.ShowAlert(this.$t("UnknownError"),"failure",this.$t("Alert"))}finally{this.isLoading=!1}},async GetPlanSubscriptionRateListing(){const t=this;t.PlanRateSubscriptionDeatil=[];const e=`planId=${t.planId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pagesize=${t.PageSize}&pagenumber=${t.PageNumber}`;try{const a=await n["a"].GetPlanSubscriptionRateListing(e);if(a&&a.data&&a.data.result&&a.data.result.data){const e=a.data.result.data||[];t.PlanRateSubscriptionDeatil=e,t.TotalRecords=e.length>0&&e[0].TOTAL_RECORDS||e.length}else t.PlanRateSubscriptionDeatil=[],t.TotalRecords=0}catch(a){console.error("Error fetching Plan Subscription Rate Listing:",a),t.PlanRateSubscriptionDeatil=[],t.TotalRecords=0}}}},R=A,D=(a("9548"),Object(f["a"])(R,L,I,!1,null,"50d69fb9",null)),T=D.exports,B=a("2b0e"),w={components:{AddPlan:_["a"],ModalGenerateBill:m,ClientListingPopup:y["a"],PlanHistory:N,ViewPlanHistory:T},data(){return{Headers:[{COLUMN_NAME:"plan_image_url",DATA_TYPE:"image",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Image",DISPLAY_ORDER:1},{COLUMN_NAME:"plan_name",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("PlanName"),DISPLAY_ORDER:2},{COLUMN_NAME:"invoice_template",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("InvoiceTemplate"),DISPLAY_ORDER:3},{COLUMN_NAME:"customer_segment",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!1,DISPLAY_NAME:this.$t("CustomerType"),DISPLAY_ORDER:4},{COLUMN_NAME:"effective_date",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("EffectiveDate"),DISPLAY_ORDER:5},{COLUMN_NAME:"expiration_date",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("ExpirationDate"),DISPLAY_ORDER:6},{COLUMN_NAME:"client_count",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("clientmapped"),DISPLAY_ORDER:6},{COLUMN_NAME:"created_at",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedDate"),DISPLAY_ORDER:7},{COLUMN_NAME:"created_by",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedBy"),DISPLAY_ORDER:8},{COLUMN_NAME:"payment_type",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("BillingFrequency"),DISPLAY_ORDER:9},{COLUMN_NAME:"status_id",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Status"),DISPLAY_ORDER:10}],StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}],listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,list:[],changesDateFormat:"",TotalRecords:0,pageSize:10,pageNum:1,sortBy:"",searchCondition:"",GroupStart:1,GroupEnd:3,PlanId:0,CurrentPage:1,TotalPages:0,sortExp:"",PlanListing:[],isEditPlan:!1,isGenerateBill:!1,noRecords:!1,BillingTypeOptions:[],isOpenClientListPopup:!1,EditPlanDetail:[],refCode:"",refreshComponent:0,isPlanPopup:!1,isPlanviewDetailPopup:!1,planCode1:"",CodePlan:""}},created:async function(){var t=this;await t.GetExtraFeatures(),c.bindleftCommonSearchdropdown(this),await t.FetchData(),t.EnableCustomerTypeColumn()},methods:{getRowClass(t){(new Date).setHours(0,0,0,0),new Date(t.row.expiration_date).setHours(0,0,0,0);return"high-profile-bar"},OpenClientListPopup:function(t,e){this.PlanId=t,this.CodePlan=e,this.isOpenClientListPopup=!this.isOpenClientListPopup},EnableCustomerTypeColumn(){var t=this;"SUBSCRIPTION_BILLING"!=t.BillingTypeOptions[0].FEATURE_CODE&&(t.Headers[3].VISIBLE=!0)},GetExtraFeatures:async function(){var t=this,e="featureCode=GET_EXTRA_FEATURE_BILLING&outputType=list";await n["a"].CheckExtraFeatures(e).then((function(e){var a=JSON.parse(e.data);t.BillingTypeOptions=a}))},FetchData:async function(){var t=this;t.PlanListing=[];var e=`pageSize=${t.pageSize}&pageNum=${t.pageNum}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&search=${encodeURIComponent(t.searchCondition)}`;await n["a"].GetPlanListing(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"expiration_date"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"client_count"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"effective_date"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"status_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"plan_name"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"created_at"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"plan_image_url"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data&&e.data.result.data.length>0?(t.PlanListing=e.data.result.data,t.PlanListing.forEach(t=>{["effective_date","expiration_date","created_at"].forEach(e=>{t[e]&&(t[e]=new Date(t[e]))})}),t.TotalRecords=e.data.result.data[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.pageSize),t.CurrentPage=t.pageNum,t.PlanListing.forEach(t=>{B["default"].set(t,"isSelected",!1),t.client_count>0?B["default"].set(t,"isCheckBoxDisabled",!0):B["default"].set(t,"isCheckBoxDisabled",!1)}),t.PlanListing.forEach(t=>{const e=(new Date).setHours(0,0,0,0),a=new Date(t.expiration_date).setHours(0,0,0,0);a<e&&null!=t.expiration_date&&(t.additionalClass=(t.additionalClass||"").trim(),t.additionalClass+=(t.additionalClass?" ":"")+"high-profile-bar")}),t.noRecord=!1):(t.noRecord=!0,t.TotalRecords=0,t.PlanListing=[])}))},leftCommonSearch(t){console.log("value",t),this.pageNum=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},pagerMethod(t){this.pageSize=t.PageSize,this.pageNum=t.PageNumber,this.FetchData()},OpenPlanDetail:function(t,e){var a=this;a.PlanId=t,"SUBSCRIPTION_BILLING"==e?a.$router.push({name:"ManageSubscriptionPlanDetail",params:{id:a.PlanId}}):a.$router.push({name:"ManagePlan",params:{id:a.PlanId}})},commonHeaderButtonClick(t){switch(t.callbackfunction){case"GenerateBill":this.GenerateBill();break;case"Add":this.AddNew();break;case"Delete":this.DeletePlan();break}},AddNew(){this.EditPlanDetail={},this.refCode="",this.isEditPlan=!0},GenerateBill:function(){var t=this;window.open(t.$router.resolve({name:"BatchProcessing"}).href,"_blank")},getStatusClass:function(t){var e="";switch(t){case"Active":e="px-2 text-center bg-success text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;default:e=""}return e},DeletePlan:function(t){var e=this,a="";null==t&&void 0==t||(a=t.toString()),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Plan"),(function(){var t={ids:a,moduleName:"BILLING",refCode:"TALYGEN_PLANS"},i=JSON.stringify(t);n["a"].CommonCommonDelete(i).then(t=>{200==t.status?(e.FetchData(),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Plan")]),"Success",!0,e.$t("Alert"))):e.ShowAlert(e.$t("DeletedError",[e.$t("Plan")]),"failure",!0,e.$t("Alert"))})})):e.ShowAlert(e.$t("Selectanyrecordtodelete",[e.$t("Plan")]),"failure",!0,e.$t("Alert"))},sortdata:function(t){this.sortBy=t;var e="ASC";"ASC"==this.sortExp&&(e="DESC"),this.sortExp=e,this.sortBy=t,this.sortExp=e,this.pageNum=1,this.GroupStart=this.pageNum,this.GroupEnd=this.pageNum+2,this.FetchData()},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Clone":e.isVisible=!0;break;case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;case"History":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)}),a},actionButtonClick(t,e,a,i,s){switch(t){case"ClonePlan":this.ClonePlan(e);break;case"EditPlan":this.EditPlan(e);break;case"DeletePlan":this.DeletePlan(e.id);break;case"PlanHistory":this.PlanHistory(e);break;case"PlanviewDetailHistory":this.PlanviewDetailHistory(e);break}},ClonePlan(t){var e=this;e.BindPlanDetails(t.id,"Clone")},EditPlan(t){var e=this;e.refCode="Update",e.BindPlanDetails(t.id,"Edit")},PlanviewDetailHistory(t){var e=this;e.planId=t.id,e.planCode1=t.plan_code,e.isPlanviewDetailPopup=!0},BindPlanDetails:function(t,e){var a=this,i="planId="+t;n["a"].displayPlanDetails(i).then(t=>{"Success"==t.data.status&&JSON.parse(t.data.result).data.length>0&&(a.EditPlanDetail=JSON.parse(t.data.result).data,"Edit"==e?(a.isEditPlan=!0,a.refCode="Update"):"Clone"==e&&(a.isEditPlan=!0,a.refCode="Clone"))})},PlanHistory(t){var e=this;e.planId=t.id,e.isPlanPopup=!0}}},O=w,k=Object(f["a"])(O,i,s,!1,null,null,null);e["default"]=k.exports},"4bd7":function(t,e,a){var i=a("9b2c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("58249b4e",i,!0,{sourceMap:!1,shadowMode:!1})},"4f6a":function(t,e,a){var i=a("6070");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("06e1506e",i,!0,{sourceMap:!1,shadowMode:!1})},6070:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".table td[data-v-2e1e9d4a],.table th[data-v-2e1e9d4a]{text-align:left;vertical-align:middle;white-space:nowrap}.utility-table td[data-v-2e1e9d4a]:first-child,.utility-table th[data-v-2e1e9d4a]:first-child{width:60%}.utility-table td[data-v-2e1e9d4a]:nth-child(2),.utility-table th[data-v-2e1e9d4a]:nth-child(2){width:80%}.subscription-table td[data-v-2e1e9d4a]:first-child,.subscription-table td[data-v-2e1e9d4a]:nth-child(2),.subscription-table th[data-v-2e1e9d4a]:first-child,.subscription-table th[data-v-2e1e9d4a]:nth-child(2){width:25%}.subscription-table td[data-v-2e1e9d4a]:nth-child(3),.subscription-table td[data-v-2e1e9d4a]:nth-child(4),.subscription-table td[data-v-2e1e9d4a]:nth-child(5),.subscription-table th[data-v-2e1e9d4a]:nth-child(3),.subscription-table th[data-v-2e1e9d4a]:nth-child(4),.subscription-table th[data-v-2e1e9d4a]:nth-child(5){width:16%;text-align:center}",""]),t.exports=e},9548:function(t,e,a){"use strict";a("4bd7")},"9b2c":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'.modal-header[data-v-50d69fb9]{background-color:#343a40;color:#fff;padding:1rem 1.5rem}.modal-header h4[data-v-50d69fb9]{margin:0}.nav-tabs[data-v-50d69fb9]{border-bottom:2px solid #dee2e6;background-color:#f8f9fa;margin-bottom:0;display:flex;gap:10px;padding-left:0;list-style:none}.nav-tabs .nav-item[data-v-50d69fb9]{margin-bottom:-2px}.nav-tabs .nav-link[data-v-50d69fb9]{text-transform:uppercase;font-weight:600;color:#495057;border:none;padding:12px 22px;border-radius:4px 4px 0 0;position:relative;transition:color .3s ease,background-color .3s ease;cursor:pointer}.nav-tabs .nav-link[data-v-50d69fb9]:hover{color:#000;background-color:#e9f0ff}.nav-tabs .nav-link.active[data-v-50d69fb9]{color:#000;background-color:#fff;border:1px solid #dee2e6;border-bottom-color:transparent;font-weight:700;box-shadow:0 4px 6px rgba(0,0,0,.15)}.nav-tabs .nav-link.active[data-v-50d69fb9]:after{content:"";position:absolute;bottom:-1px;left:15%;width:70%;height:3px;background-color:#000;border-radius:2px}.text-danger[data-v-50d69fb9]{color:red}.text-success[data-v-50d69fb9]{color:green}.legend[data-v-50d69fb9]{margin-bottom:10px;font-size:14px}.legend-box[data-v-50d69fb9]{display:inline-block;width:15px;height:15px;margin-right:5px}.legend-box.deleted[data-v-50d69fb9]{background-color:red}.history-container[data-v-50d69fb9]{display:flex;justify-content:space-between;gap:20px;flex-wrap:wrap}.history-table[data-v-50d69fb9]{flex:1;min-width:280px;padding:0;overflow-x:auto;margin-bottom:20px}.loading[data-v-50d69fb9],.no-records[data-v-50d69fb9]{text-align:center;font-size:16px}.loading[data-v-50d69fb9]{color:#007bff}.no-records[data-v-50d69fb9]{color:#dc3545}@media (max-width:768px){.history-container[data-v-50d69fb9]{flex-direction:column}.history-table[data-v-50d69fb9]{margin-bottom:10px}}ul.responivecustomtab_bod li[data-v-50d69fb9]{border-bottom:none;border-top:1px solid #c6c6c6!important}',""]),t.exports=e},af04:function(t,e,a){"use strict";a("4f6a")},e01b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle py-1"},[a("h5",{staticClass:"pt-2",attrs:{name:"header"}},[t._v(t._s(t.$t("PlanMappedWith")))]),a("button",{staticClass:"close",on:{click:t.ClosePopUp}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mt-0",class:{"subscription-table":"SUBSCRIPTION_BILLING"===t.CodePlan,"utility-table":"UTILITY_BILLING"===t.CodePlan}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v(t._s(t.$t("ClientName")))]),a("th",[t._v(t._s(t.$t("PlanName")))]),"SUBSCRIPTION_BILLING"===t.CodePlan?a("th",[t._v(" "+t._s(t.$t("Frequency"))+" ")]):t._e(),"SUBSCRIPTION_BILLING"===t.CodePlan?a("th",[t._v(" "+t._s(t.$t("Units"))+" ")]):t._e(),"SUBSCRIPTION_BILLING"===t.CodePlan?a("th",[t._v(" "+t._s(t.$t("Price(per Unit)"))+" ")]):t._e()])]),a("tbody",t._l(t.clientList,(function(e){return a("tr",{key:e.CLIENT_NAME},[a("td",[t._v(t._s(e.CLIENT_NAME))]),a("td",[t._v(t._s(e.PLAN_NAME))]),"SUBSCRIPTION_BILLING"===t.CodePlan?a("td",[t._v(" "+t._s(e.FREQUENCY)+" ")]):t._e(),"SUBSCRIPTION_BILLING"===t.CodePlan?a("td",[t._v(" "+t._s(t.$n(e.UNITS))+" ")]):t._e(),"SUBSCRIPTION_BILLING"===t.CodePlan?a("td",[t._v(" "+t._s(t.$n(e.PRICE,"currency",t.$getLocaleByCurrency(t.CurrencyCode)))+" ")]):t._e()])})),0)])])])])])])])])])},s=[],n=a("9769"),l={props:{planId:{type:String,required:!1},serviceId:{type:String,required:!1},reqFrom:{type:String,required:!1},CodePlan:{type:String,required:!0}},data(){return{clientList:[],CurrencyCode:"PKR"}},created(){var t=this;t.CurrencyCode=t.GetUserInfo.Currency.replace(/[()]/g,"");var e=`planId=${t.planId}&serviceId=${t.serviceId}&reqFrom=${t.reqFrom}`;n["a"].GetClientListMappedWithPlan(e).then((function(e){null!=e.data&&(t.clientList=e.data.result)}))},watch:{CodePlan(t,e){console.log("CodePlan changed from",e,"to",t)}},methods:{ClosePopUp(){this.$emit("close")}}},r=l,o=(a("af04"),a("0c7c")),d=Object(o["a"])(r,i,s,!1,null,"2e1e9d4a",null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-f27e8bf6.js.map