(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e66a4"],{"993a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Exception")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("span",{staticClass:"user-guide"},[a("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[a("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),a("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[a("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[a("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_EditException"))}})])])])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"dynamicform",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema,mandatorytext:e.$t("MandatoryString")},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-TicketImage",fn:function(t){t.data;return[a("span",[a("a",{staticClass:"form-control border-0 px-0 viewicon text-primary",staticStyle:{width:"25px"},attrs:{href:"javascript:;"},on:{click:e.viewTicketImage}},[a("i",{staticClass:"fa fa-eye fa-size"})])])]}}])})],1)])])]),e.IsCDCCode?a("ViewCDCCode",{attrs:{additionalId:e.additionalId,ClientId:e.ClientId,TermCode:e.TermCode}}):e._e(),a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),e.IsViewTicket?a("div",{staticClass:"modal d-block dialog"},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("TicketImage")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-md-12"},[e.TicketContent?a("div",{staticClass:"listing"},[a("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.TicketContent)}})]):a("div",{staticClass:"listing text-danger text-center border-0"},[e._v(" "+e._s(e.$t("NorecordfoundText"))+" ")])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[a("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)])],1)},o=[],r=(a("14d9"),a("750f")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("CDCCode")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Billing",SubModuleCode:"Area",LegendArray:[],RenderRowActionMethod:e.renderActions,widgets:[],IdentityColumn:"tag_id",listType:["List"],ListData:e.ListData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,ListDataCallBackFunction:e.FetchData,showCheckBox:!1,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["ISAH"==i.column.COLUMN_NAME?[a("span",[e._v(e._s(i.row.ISAH?"Yes":"No"))])]:e._e(),"ISWIRECENTER"==i.column.COLUMN_NAME?[a("span",[e._v(e._s(i.row.ISWIRECENTER?"Yes":"No"))])]:e._e()]}}])})],1)])])])],1)},s=[],d={props:{ClientId:{type:Object,required:!0},additionalId:{type:Object,required:!0},TermCode:{type:String,required:!0}},data(){return{isLoading:!1,HeaderText:"",listheaderbuttons:[],Headers:[{COLUMN_NAME:"CDC_CODE",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"CDC Code",DISPLAY_ORDER:1},{COLUMN_NAME:"SBA_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"SBA Id",DISPLAY_ORDER:2},{COLUMN_NAME:"STATE",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"State",DISPLAY_ORDER:1},{COLUMN_NAME:"ABBREVIATIONS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Abbreviations",DISPLAY_ORDER:2},{COLUMN_NAME:"ISAH",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Is After Hour",DISPLAY_ORDER:1},{COLUMN_NAME:"ISWIRECENTER",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Is Wire Center",DISPLAY_ORDER:2},{COLUMN_NAME:"DIVISION_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Invoice Grouping",DISPLAY_ORDER:1}],SortBy:"",SortExp:"",TotalRecords:0,searchCondition:"",PageNumber:1,PageSize:10,ListData:[],CurrentPage:1,TotalPages:0,leftSearchFields:[],noRecords:!1,listActions:[{title:"Status",href:"javascript:void(0)",icon:"fa fa-check text-info action-icon",callbackfunction:"ChangeStatus",additionalSpan:""}]}},created:function(){var e=this;e.FetchData()},methods:{renderActions(e){var t=this;let a=[];return t.listActions.forEach(t=>{let i={...t};switch(i.title){case"Status":i.isVisible=!0,i.icon="Active"==e.STATUS_NAME?"fa fa-check text-info action-icon":"fa fa-check text-secondary action-icon";break}a.push(i)}),a},commonHeaderButtonClick:function(e){},actionButtonClick(e,t,a,i){switch(e){case"ChangeStatus":this.UpdateCDCCodeStatus(t,a);break}},async UpdateCDCCodeStatus(e,t){var a=this;const i={Id:e.CDC_ID,StatusId:"Active"==e.STATUS_NAME?1002:1001,TableName:"TALYGEN_BE_CDC_CODE_INFO",PrimaryColumn:"cdc_id"};try{const e=await r["a"].CommonUpdateStatus(i);"Success"===e.data.msg?(this.ShowAlert(this.$t("CDCCodeStatusUpdated"),"success",!0,this.$t("Alert")),a.FetchData()):this.ShowAlert(this.$t("DeletedError",[this.$t("WorkCode")]),"failure",!0,this.$t("Alert"))}catch(o){this.ShowAlert(this.$t("ErrorWhileProcessingRequest"),"failure",!0,this.$t("Alert"))}},sortdata:function(e){this.SortBy=e;var t="ASC";"ASC"==this.SortExp&&(t="DESC"),this.SortExp=t,this.SortBy=e,this.SortExp=t,this.PageNumber=1,this.FetchData()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchConditionJson:this.searchCondition="",this.FetchData()},FetchData:async function(){var e=this,t=`clientId=${e.ClientId}&rowNo=&additionalId=${e.additionalId}&cdcCode=${e.TermCode}&reqFrom=flagRecords&sortBy=&pageSize=10&pageNum=1`;await r["a"].GetCDC_CodePagedList(t).then(t=>{e.ListData=[],t.data.length>0?(e.Headers.forEach(e=>{e.settings=null,"ISAH"!=e.COLUMN_NAME&&"ISWIRECENTER"!=e.COLUMN_NAME||(e.settings={isInSlot:!0})}),e.ListData=t.data,e.ListData.length>0?(e.TotalRecords=t.data[0].TotalRecords,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.listheaderbuttons[1].isdisabled=!0,e.noRecords=!1):e.noRecords=!0):(e.noRecords=!0,e.TotalRecords=0)})},Close:function(){this.$parent.IsCDCCode=!1}}},n=d,c=a("0c7c"),u=Object(c["a"])(n,l,s,!1,null,null,null),m=u.exports,p={props:{ColumnIds:{type:Number,required:!0},ClientId:{type:Number,required:!0},IsProcessed:{type:Number,default:0},requestFrom:{type:String,default:0}},components:{ViewCDCCode:m},data(){return{isLoading:!1,isProcessed:0,oldModel:"",oldValues:{},changedValues:{},EditRequestFrom:"",FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("TicketNumber"),name:"TicketNumber",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("State"),name:"State",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("TermCode"),name:"TermCode",value:"",placeholder:"",validationRules:{max:200,required:!1},config:{showAddIcon:!0,addIconBackground:"btn-primary",addIcon:"fa fa-eye",onAddButtonClick:this.ViewCDCCode}},{astype:"TextField",label:this.$t("FeedName"),name:"FeedName",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("WireCenter"),name:"WireCenter",value:"",placeholder:"",validationRules:{max:200,required:!1}},{astype:"TextField",label:this.$t("County"),name:"County",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"SelectField",label:this.$t("TicketType"),name:"TicketType",visibility:!0,value:"",placeholder:"",config:{options:[]},validationRules:{required:!1}},{astype:"TextField",label:this.$t("City"),name:"City",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"SelectField",label:this.$t("StatusCode"),name:"StatusCode",visibility:!0,value:"",placeholder:"",config:{options:[]},validationRules:{required:!1}},{astype:"SearchableSelectField",label:this.$t("CONTRACTNAME"),name:"ContractName",value:"",placeholder:"Select Client Name",visibility:!0,isSearch:!1,config:{options:[],actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},groupFields:["groupText"],isMultiple:!1,minSearchLength:0,statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},onChange:this.onSelectionChange},validationRules:{required:!0}},{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:"",config:{rows:4},validationRules:{required:!1,max:2e3},disabled:!0},{astype:"TextField",label:this.$t("Excavator"),name:"Excavator",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("WorkDoneFor"),name:"WorkDoneFor",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("UtilityName"),name:"UtilityName",value:"",placeholder:"",validationRules:{max:200,required:!1}},{astype:"TextField",label:this.$t("TypeofWork"),name:"TypeOfWork",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"SelectField",label:this.$t("Utlityid"),name:"UtilityId",visibility:!0,value:"",placeholder:"",config:{options:[],onChange:this.onSelectionUtilityChange},validationRules:{required:!0}},{astype:"TextField",label:this.$t("LocatorStartDate"),name:"LocatorStartDate",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("UtilityAbbrev"),name:"UtilityAbbrev",value:"",placeholder:"",validationRules:{max:200,required:!1}},{astype:"TextField",label:this.$t("LocatorEndDate"),name:"LocatorEndDate",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"SelectField",label:this.$t("sba_id"),name:"SBAId",value:"",visibility:!0,placeholder:"",config:{options:[]},validationRules:{required:!0}},{astype:"TextField",label:this.$t("TicketStartDate"),name:"TicketStartDate",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"SelectField",label:this.$t("Division"),name:"InvoiceGrouping",visibility:!0,value:"",placeholder:"",config:{options:[]},validationRules:{required:!0}},{astype:"NumericField",label:this.$t("MinutesWorked"),name:"MinutesWorked",visibility:!0,value:"",validationRules:{required:!1},disabled:!1},{astype:"TextField",label:this.$t("TransmitDate"),name:"TransmitDate",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"NumericField",label:this.$t("FeetLocated"),name:"FeetLocated",visibility:!0,value:"",validationRules:{required:!1},disabled:!1},{astype:"TextField",label:this.$t("CallDate"),name:"CallDate",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("LocatorName"),name:"LocatorName",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("ParseDate"),name:"ParseDate",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("Authorized"),name:"Authorized",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("CallerName"),name:"CallerName",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"SlotField",label:this.$t("TicketImage"),name:"TicketImage",value:"",visibility:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("CallerPhone"),name:"CallerPhone",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextField",label:this.$t("StreetName"),name:"StreetName",value:"",placeholder:"",validationRules:{max:200,required:!1},disabled:!0},{astype:"TextAreaField",label:this.$t("FlagReason"),name:"FlagReason",value:"",placeholder:"",visibility:!1,config:{rows:4},validationRules:{required:!1,max:2e3}},{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",placeholder:"",config:{rows:4},validationRules:{required:!1,max:2e3}},{astype:"SelectField",label:this.$t("DistrictCode"),name:"DistrictCode",value:"",visibility:!0,placeholder:"",config:{options:[]},validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save and Process"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],FieldOptions:[],DataType:"nvarchar",SelectedValue:"",IsCDCCode:!1,additionalId:"",TermCode:"",TicketNumber:"",TransmissionId:"",IsViewTicket:!1,TicketContent:"",UtilityId:""}},created:async function(){var e=this;await e.GetTicketTypes(),await e.GetStatusCodes(),await e.LoadAdditionalInfoByClientId(),await e.GetExceptionRecord(),await e.GetSbaIdListByUtilityId()},methods:{GetExceptionRecord:function(){var e=this;e.isLoading=!0;let t=[],a=[],i=[],o=[];var l=`ClientId=${e.ClientId}&ColumnId=${e.ColumnIds}&requestFrom=${e.requestFrom}`;r["a"].GetExceptionRecord(l).then(r=>{if(r.data.data){var l=r.data.data;e.additionalId=r.data.data.CLIENT_ADDITIONAL_ID;var s=l.InvoiceGroupingList;if(s){var d=s;null!=d&&(d.forEach(e=>{let a={name:e.NAME,value:e.DIVISIONS_ID};t.push(a)}),e.$refs.dynamicform.updateProperty("InvoiceGrouping","config.options",t))}var n=l.CostCenterList;if(n){var c=n;null!=c&&(c.forEach(e=>{let t={name:e.TEXT,value:e.VALUE};a.push(t)}),e.$refs.dynamicform.updateProperty("DistrictCode","config.options",a))}var u=l.GetSBAidsDropdownData;if(u){var m=u;null!=m&&(m.forEach(e=>{let t={name:e.NAME,value:e.SBA_ID};i.push(t)}),e.$refs.dynamicform.updateProperty("SBAId","config.options",i))}var p=l.GroupedSelectList;if(p){var C=p;null!=C&&(C.forEach(e=>{let t={description:null,displayValue:e.CHILD_NAME,groupText:e.PARENT_NAME,groupValue:null,metaData:null,text:e.CHILD_NAME,value:e.CHILD_USER_ID};o.push(t)}),e.$refs.dynamicform.updateProperty("ContractName","config.options",o))}1==e.isProcessed?e.$refs.dynamicform.updateProperty("FlagReason","visibility",!0):e.$refs.dynamicform.updateProperty("FlagReason","visibility",!1),e.$refs.dynamicform.UpdateKeyValue(),e.TicketNumber=l.TICKETNUMBER,e.TransmissionId=l.TRANSMISSION_ID,e.UtilityId=l.CLIENT_ADDITIONAL_ID,e.$refs.dynamicform.updateProperty("TicketNumber","value",l.TICKETNUMBER),e.$refs.dynamicform.updateProperty("State","value",l.STATE),e.$refs.dynamicform.updateProperty("TermCode","value",l.TERM_CODE),e.$refs.dynamicform.updateProperty("FeedName","value",l.FEEDNAME),e.$refs.dynamicform.updateProperty("WireCenter","value",l.WIRE_CENTER),e.$refs.dynamicform.updateProperty("County","value",l.COUNTY),e.$refs.dynamicform.updateProperty("TicketType","value",l.TICKETTYPE),e.$refs.dynamicform.updateProperty("City","value",l.CITY),e.$refs.dynamicform.updateProperty("StatusCode","value",l.STATUS_CODE),e.$refs.dynamicform.updateProperty("ContractName","value",l.CLIENT_ID),e.$refs.dynamicform.updateProperty("Description","value",l.DESCRIPTION),e.$refs.dynamicform.updateProperty("Excavator","value",l.EXCAVATOR),e.$refs.dynamicform.updateProperty("WorkDoneFor","value",l.WORK_DONE_FOR),e.$refs.dynamicform.updateProperty("UtilityName","value",l.UTILITY_NAME),e.$refs.dynamicform.updateProperty("TypeOfWork","value",l.TYPEOFWORK),e.$refs.dynamicform.updateProperty("UtilityId","value",l.CLIENT_ADDITIONAL_ID),e.$refs.dynamicform.updateProperty("LocatorStartDate","value",e.$options.filters.formatDateTime(l.INITIAL_STATUS_DATE)),e.$refs.dynamicform.updateProperty("UtilityAbbrev","value",l.UTILITY_ABBREV),e.$refs.dynamicform.updateProperty("LocatorEndDate","value",e.$options.filters.formatDateTime(l.CLOSED_DATE)),e.$refs.dynamicform.updateProperty("SBAId","value",l.BE_SBA_ID),e.$refs.dynamicform.updateProperty("TicketStartDate","value",e.$options.filters.formatDateTime(l.WORK_DATE)),e.$refs.dynamicform.updateProperty("InvoiceGrouping","value",l.DIVISION_ID),e.$refs.dynamicform.updateProperty("MinutesWorked","value",l.MINUTES_WORKED),e.$refs.dynamicform.updateProperty("TransmitDate","value",e.$options.filters.formatDateTime(l.TRANSMIT_DATE)),e.$refs.dynamicform.updateProperty("FeetLocated","value",l.FEET_LOCATED),e.$refs.dynamicform.updateProperty("CallDate","value",e.$options.filters.formatDateTime(l.CALL_DATE)),e.$refs.dynamicform.updateProperty("LocatorName","value",l.LOCATOR_NAME),e.$refs.dynamicform.updateProperty("ParseDate","value",e.$options.filters.formatDateTime(l.PARSE_DATE)),e.$refs.dynamicform.updateProperty("Authorized","value",l.AUTHORIZED),e.$refs.dynamicform.updateProperty("CallerName","value",l.CALLER_NAME),e.$refs.dynamicform.updateProperty("TicketImage","value",l.TICKETIMAGE),e.$refs.dynamicform.updateProperty("CallerPhone","value",l.CALLER_PHONE),e.$refs.dynamicform.updateProperty("StreetName","value",l.STREETNAME),e.$refs.dynamicform.updateProperty("Comment","value",l.REMARKS),e.$refs.dynamicform.updateProperty("DistrictCode","value",l.DISTRICT_CODE),e.$refs.dynamicform.UpdateKeyValue(),e.oldValues={TicketNumber:l.TICKETNUMBER,State:l.STATE,TermCode:l.TERM_CODE,FeedName:l.FEEDNAME,WireCenter:l.WIRE_CENTER,County:l.COUNTY,TicketType:l.TICKETTYPE,City:l.CITY,StatusCode:l.STATUS_CODE,ContractName:l.CLIENT_ID,Description:l.DESCRIPTION,Excavator:l.EXCAVATOR,WorkDoneFor:l.WORK_DONE_FOR,UtilityName:l.UTILITY_NAME,TypeOfWork:l.TYPEOFWORK,UtilityId:"",LocatorStartDate:e.$options.filters.formatDateTime(l.INITIAL_STATUS_DATE),UtilityAbbrev:l.UTILITY_ABBREV,LocatorEndDate:e.$options.filters.formatDateTime(l.CLOSED_DATE),SBAId:l.SBA_ID,TicketStartDate:e.$options.filters.formatDateTime(l.WORK_DATE),InvoiceGrouping:l.DIVISION_ID,MinutesWorked:l.MINUTES_WORKED,TransmitDate:e.$options.filters.formatDateTime(l.TRANSMIT_DATE),FeetLocated:l.FEET_LOCATED,CallDate:e.$options.filters.formatDateTime(l.CALL_DATE),LocatorName:l.LOCATOR_NAME,ParseDate:e.$options.filters.formatDateTime(l.PARSE_DATE),Authorized:l.AUTHORIZED,CallerName:l.CALLER_NAME,TicketImage:l.TICKETIMAGE,CallerPhone:l.CALLER_PHONE,StreetName:l.STREETNAME,Comment:l.REMARKS,DistrictCode:l.DISTRICT_CODE}}e.isLoading=!1}).catch(()=>{e.isLoading=!1})},onSelectionChange(e,t){var a=this;a.isLoading=!0;var i=`clientId=${t}&configId=&reqFrom=&clientIds=`;r["a"].getUtilityList(i).then(e=>{a.isLoading=!1;let t=[];if(e.data){var i=e.data;null!=i&&(i.forEach(e=>{let a={name:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(a)}),a.$refs.dynamicform.updateProperty("UtilityId","config.options",t),a.$refs.dynamicform.UpdateKeyValue(),a.UtilityId=a.$refs.dynamicform.getPropertyValue("UtilityId","value"),a.GetSbaIdListByUtilityId())}}).catch(e=>{a.isLoading=!1,a.SelectedUtilityList=[],a.$refs.dynamicform.updateProperty("UtilityId","config.options",SelectedUtilityList),a.$refs.dynamicform.UpdateKeyValue()}).finally(()=>{a.isLoading=!1})},onSelectionUtilityChange(e,t){var a=this;a.UtilityId=t.value,a.GetSbaIdListByUtilityId()},CloseTemplate:function(){var e=this;e.IsViewTicket=!1},viewTicketImage:async function(){var e=this;e.IsViewTicket=!e.IsViewTicket;var t=`TicketNumber=${e.TicketNumber}&TransmissionId=${e.TransmissionId}`;await r["a"].ViewTicketImage(t).then(t=>{t.data.length>0&&(e.TicketContent=t.data[0].RAW_IMAGE)})},ViewCDCCode:async function(e,t){var a=this;a.TermCode=a.$refs.dynamicform.getPropertyValue("TermCode","value"),a.IsCDCCode=!a.IsCDCCode},GetTicketTypes:async function(){var e=this;let t=[];r["a"].GetTicketTypes().then(a=>{if(a.data){var i=a.data;null!=i&&(i.forEach(e=>{let a={name:e.TYPE_NAME,value:e.TYPE_ID};t.push(a)}),e.$refs.dynamicform.updateProperty("TicketType","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetStatusCodes:async function(){var e=this;let t=[];r["a"].GetStatusCodes().then(a=>{if(a.data){var i=a.data;null!=i&&(i.forEach(e=>{let a={name:e.TEXT,value:e.VALUE};t.push(a)}),e.$refs.dynamicform.updateProperty("StatusCode","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},LoadAdditionalInfoByClientId:async function(){var e=this;let t=[];var a="ClientId="+e.ClientId;r["a"].LoadAdditionalInfoByClientId(a).then(a=>{if(a.data){var i=a.data;null!=i&&(i.forEach(e=>{let a={name:e.UTILITY_NAME,value:e.UTILITY_ID};t.push(a)}),e.$refs.dynamicform.updateProperty("UtilityId","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},GetSbaIdListByUtilityId:async function(){var e=this;let t=[];var a="UtilityId="+e.UtilityId;r["a"].GetSbaIdListByUtilityId(a).then(a=>{if(a.data){var i=a.data;null!=i&&(i.forEach(e=>{let a={name:e.NAME,value:e.VALUE};t.push(a)}),e.$refs.dynamicform.updateProperty("SBAId","config.options",t),e.$refs.dynamicform.UpdateKeyValue())}})},Close:function(){this.$parent.IsEditException=!1},onSubmit(e,t){var a=this;a.isLoading=!0,a.UpdateChangedValues(e);var i=JSON.stringify(a.MakeJsonForProcessLog(e)),o={columnId:a.ColumnIds,MinutesWorked:e.MinutesWorked,TicketType:e.TicketType,Status:e.StatusCode,SbaId:e.SBAId,FeetLocated:e.FeetLocated,Authorized:e.Authorized,Comment:e.Comment,newStringifyModel:JSON.stringify(e),oldStringifyModel:JSON.stringify(a.oldValues),FlagReason:e.FlagReason,ClientIds:e.ContractName,ClientAdditionalId:e.UtilityId,ProcessLogJson:i,costCenter:e.DistrictCode,WireCenter:e.WireCenter,finalStatus:e.StatusCode,EditRequestFrom:a.EditRequestFrom,DivisionId:e.InvoiceGrouping,TermCode:e.TermCode,UtilityName:e.UtilityName,ClientAdditionalIdStr:e.UtilityId,UtilityAbbrev:e.UtilityAbbrev,ReqFrom:"flag"};r["a"].UpdateException(o).then((function(e){a.isLoading=!1,e.data?(a.ShowAlert(a.$t("RecordUpdatedSuccessfully"),"success",!0,a.$t("Alert")),"unprocess"==a.requestFrom?a.$parent.FetchUnprocessedRecords():a.$parent.FetchFlagRecords(),a.Close()):(e.data.invalidKey&&e.data.invalidKey.forEach((function(e){a.$refs.dynamicform.showError(e.ctrId,e.ctrMsg)})),a.ShowAlert(a.$t("CorrectHighlightedErrors"),"warning",!0,a.$t("Alert")))})).catch((function(){a.isLoading=!1,a.ShowAlert(a.$t("ErrorWhileProcessingRequest"),"failure",!0,a.$t("Alert"))}))},UpdateChangedValues(e){var t="{";for(var a in e)e[a]!==this.oldValues[a]&&(t+='"'+a+'":'+JSON.stringify(e[a])+",");"{"===t?this.$refs.dynamicform.updateProperty("Comment","value",""):(t=t.substr(0,t.length-1)+"}",this.$refs.dynamicform.updateProperty("Comment","value",t))},MakeJsonForProcessLog(e){var t=[];for(var a in e)e[a]!==this.oldValues[a]&&t.push({ControlName:a,OldData:this.oldValues[a]||"",NewData:e[a]||""});return t}}},C=p,y=Object(c["a"])(C,i,o,!1,null,null,null);t["a"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0e66a4.js.map