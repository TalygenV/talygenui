(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf901"],{"63f4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"row"},[t.isExcelFile?t._e():a("div",{staticClass:"col-md-12"},[a("tg-list",{attrs:{IsShowAction:!0,showCheckBox:!0,ModuleName:"Billing",listType:["List"],RenderRowActionMethod:t.renderActions,SubModuleCode:"Billing",IdentityColumn:"WORK_CODE_CATEGORY_ID",HeaderText:t.$t("Category"),ListData:t.WorkCodeCategoryData,HeaderData:t.Headers,callbackfunction:t.FetchData,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,LegendArray:[],SortExp:t.sortExp,SortBy:t.sortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["STATUS_ID"==i.column.COLUMN_NAME?[1001==i.row.STATUS_ID?a("span",[a("em",{staticClass:"fa fa-check text-success fa-2x",staticStyle:{color:"#000000"}})]):a("span",[a("em",{staticClass:" fa fa-times text-danger fa-2x"})])]:t._e(),"CREATE_DATE"==i.column.COLUMN_NAME?[a("span",[t._v(t._s(t.$d(i.row.CREATE_DATE)))])]:t._e()]}}],null,!1,2700287983)})],1)]),t.showAddModel?a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Rate Code Category")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body p-4"},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",{staticClass:"w-100",staticStyle:{"max-width":"900px"}},[a("dynamic-form",{attrs:{schema:t.FormSchema,buttons:t.buttons},scopedSlots:t._u([{key:"tgslot-Content",fn:function(e){var i=e.data;return[void 0,a("div",{staticClass:"form-group"},[a("ckeditor",{attrs:{editor:t.editor},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}}),a("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i.error))])],1)]}}],null,!1,3853797413)}),a("div",{staticClass:"text-left text-danger mt-2"},[t._v(" "+t._s(t.$t("MandatoryString"))+" ")])],1)])])])])])]):t._e(),t.isEditCategory?a("AddCategory",{attrs:{callbackfunction:t.FetchData,editDetail:t.EditPlanDetail,refCode:t.refCode},on:{CloseCategory:t.CloseCategory}}):t._e()],1)},s=[];a("14d9"),a("88a7"),a("271a"),a("5494");let o=[{fieldName:"RateCodeCategory",fieldType:"text",fieldIcon:"fa fa-users",paramName:"WORK_CODE_CATEGORY",fieldSearchConditionName:["WORK_CODE_CATEGORY"],isSearch:!1,value:"",listOptions:[]}],l=[{title:"ExportToExcel",iconClass:"iconClass: 'fa fa-file-excel-o",callbackfunction:"ExportToExcel",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilage:!0},{id:"InactiveMultiple",title:"Inactive",iconClass:"fa-close",callbackfunction:"InactiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!0},{id:"ActiveMultiple",title:"Active",iconClass:"fa-check",callbackfunction:"ActiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!0},{title:"Add",iconClass:"fa-plus",callbackfunction:"AddWorkRecord",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!1,isvisible:!0,isEnabledOnSelectedRow:!0}],r=[{fielName:"Search By Name",filedType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["WORK_CODE_CATEGORY"],isSearch:!0,value:"",isvisible:!0}],c=[{title:"Edit",callbackfunction:"EditRecord",icon:"fa fa-pencil text-success action-icon",additionalSpan:""}];var n={buttons:l,topsearchSchema:r,listActions:c,leftsearchSchema:o},d=a("9769"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),t.isEditCategory?a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s("Update"===t.refCode?t.$t("UpdateCategory"):t.$t("AddCategory"))+" ")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.CloseCategory}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"validatePlan",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.$t("MandatoryString")}})],1)])])]):t._e()],1)])},C=[],h={props:{callbackfunction:{type:Function,required:!1},refCode:{type:String,required:!1},editDetail:{type:Function,required:!1}},data(){return{isLoading:!1,isEditCategory:!0,category_Id:0,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("RateCodeCategory"),name:"category",value:"",placeholder:this.$t("RateCodeCategory"),validationRules:{required:!0},disabled:!1},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:this.$t("Select"),config:{options:[{value:"1001",name:this.$t("Active")},{value:"1002",name:this.$t("Inactive")}]},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:this.$t("DESCRIPTION"),validationRules:{required:!0,max:6e3}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>"+this.$t("Save"),onClick:this.SaveData},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.CloseCategory}]}},mounted(){this.editDetail&&Object.keys(this.editDetail).length>0&&"Update"==this.refCode&&this.BindEditDetail(this.editDetail)},methods:{async BindEditDetail(t){var e=this;e.category_Id=t.WORK_CODE_CATEGORY_ID,e.$refs.validatePlan.updateProperty("category","value",t.WORK_CODE_CATEGORY),e.$refs.validatePlan.updateProperty("Status","value",t.STATUS_ID),e.$refs.validatePlan.updateProperty("Description","value",t.WORK_CODE_CATEGORY_DESCRIPTION)},async SaveData(){var t=this;t.isLoading=!0;const e=await t.$refs.validatePlan.validateForm.validate();if(!e)return void(this.isLoading=!1);const a=t.$refs.validatePlan.getPropertyValue("category","value"),i=t.$refs.validatePlan.getPropertyValue("Status","value"),s=t.$refs.validatePlan.getPropertyValue("Description","value");var o={id:t.category_Id,category_name:a,category_description:s,status:i},l=JSON.stringify(o),r="name="+a;if(!t.category_Id){var c=await d["a"].IsExistCategory(r);if("Exist"===c.data.message)return t.isLoading=!1,void this.ShowAlert(this.$t("AlreadyExists",[this.$t("Category")]),"failure",!0,this.$t("Alert"))}await d["a"].CreateWorkCodeCategory(l).then(async t=>{1==t.data?this.ShowAlert(this.$t("AddedSuccess",[this.$t("Category")]),"Success",!0,this.$t("Alert")):this.ShowAlert(this.$t("UpdatedSuccess",[this.$t("Category")]),"Success",!0,this.$t("Alert")),this.CloseCategory()})},CloseCategory(){this.$emit("CloseCategory")}}},E=h,A=a("0c7c"),f=Object(A["a"])(E,u,C,!1,null,"1db4fa6f",null),S=f.exports,g={components:{AddCategory:S},data(){return{dateformat:null,isEditCategory:!1,isExcelFile:!1,ExcelPanel:[],editor:this.CLASSIC_EDITOR,editorData:"",recordId:0,noRecord:!1,isLoading:!0,WorkCodeCategoryData:[],filteredHeaders:[],TotalRecords:0,listheaderbuttons:n.buttons,listActions:n.listActions,leftSearchFields:n.leftsearchSchema,ShowManageView:!1,ShowAddCustomReportView:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,searchCondition:"",conditionForInstantSearch:"",SortBy:"",SortExp:"",ReportID:null,reportname:"",reportid:"",foldername:"",folderid:"",LeadStatusList:[],MODULENAME:"Company",SUBMODULECODE:"EmailTemplate",privilegeParams:null,refCode:"",EditPlanDetail:[],Headers:[{COLUMN_NAME:"WORK_CODE_CATEGORY",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("RateCodeCategory"),DISPLAY_ORDER:1},{COLUMN_NAME:"WORK_CODE_CATEGORY_DESCRIPTION",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("DESCRIPTION"),DISPLAY_ORDER:2},{COLUMN_NAME:"CREATED_BY_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CREATED_BY"),DISPLAY_ORDER:3},{COLUMN_NAME:"CREATE_DATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedDate"),DISPLAY_ORDER:4},{COLUMN_NAME:"STATUS_ID",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("Status"),DISPLAY_ORDER:5}],Item:[],showAddModel:!1}},async created(){var t=this;t.FetchData()},methods:{FetchData:async function(){var t=this;t.isLoading=!0;var e=`pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&search=${t.searchCondition}`;await d["a"].GetWorkCodeCategoryList(e).then(e=>{if(t.Headers.forEach(e=>{e.settings=null,"STATUS_ID"!=e.COLUMN_NAME&&"CREATE_DATE"!=e.COLUMN_NAME||(e.settings={isInSlot:!0}),e.COLUMN_NAME===t.SortBy&&(e.SortExp=t.SortExp)}),null!=e.data&&""!=e.data){var a=JSON.parse(e.data);a.forEach(t=>{t.CREATE_DATE&&(t.CREATE_DATE=new Date(t.CREATE_DATE))}),t.WorkCodeCategoryData=a,t.TotalRecords=a[0].TOTAL,t.noRecord=!1}else t.WorkCodeCategoryData=[],t.TotalRecords=0,t.noRecord=!0}),t.isLoading=!1},AddWorkRecord:function(){var t=this;t.refCode="",t.isEditCategory=!0},CloseCategory(){this.isEditCategory=!1,this.FetchData()},triggerEditReport(){this.CloseCategory()},renderActions(t){let e=[];return this.listActions.forEach(t=>{let a={...t};a.isVisible=!0,e.push(a)}),e},actionButtonClick(t,e,a,i,s){switch(t){case"EditRecord":this.EditCategory(e);break}},Download:async function(){var t=this,e=`pageSize=10&pageNum=${t.PageNumber}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&search=${t.searchCondition}`;JSON.stringify(e);await d["a"].GetWorkCodeCategoryList(e).then((function(e){""!=e.data&&null!=e.data&&e.data.length>0&&t.ConvertJSONToCSV(e.data,"Category",!0)}))},ConvertJSONToCSV:function(t,e,a){const i=JSON.parse(t),s=["template_id","STATUS_ID","TOTAL","RCOUNT","WORK_CODE_CATEGORY_ID"],o={ROWNUMBER:"Sr No",WORK_CODE_CATEGORY:"Rate Code Category",WORK_CODE_CATEGORY_DESCRIPTION:"Description",CREATED_BY_NAME:"Create By Name",CREATE_DATE:"\tCreate Date",STATUS_NAME:"Status"};if(Array.isArray(i)&&0!==i.length)if(i.length>0){const t=Object.keys(i[0]),l=t.filter(t=>!s.includes(t)),r=l.map(t=>o[t]||t),c=i.map(t=>r.map(e=>{const a=l[r.indexOf(e)];let i=void 0!==t[a]&&null!==t[a]?String(t[a]):"";return(i.includes(",")||i.includes("\n")||i.includes('"'))&&(i=`"${i.replace(/"/g,'""')}"`),i}).join(",")),n=(a?[r.join(",")]:[]).concat(c).join("\n"),d=new Blob([n],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");u.setAttribute("href",URL.createObjectURL(d)),u.setAttribute("download",e+".csv"),u.click()}else console.log("No valid data to convert.");else console.warn("No valid data to convert.")},EditCategory(t){var e=this;e.refCode="Update",e.EditPlanDetail=t,e.isEditCategory=!0},commonHeaderButtonClick(t){switch(t.callbackfunction){case"commonDeleteData":this.commonDeleteData();break;case"ActiveMultipleListing":this.UpdateStatus("Active");break;case"InactiveMultipleListing":this.UpdateStatus("Inactive");break;case"AddWorkRecord":this.AddWorkRecord();break;case"ExportToExcel":this.Download();break}},Download:async function(){var t=this,e=`pageSize=10&pageNum=${t.PageNumber}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&search=${t.searchCondition}`;JSON.stringify(e);await d["a"].GetWorkCodeCategoryList(e).then((function(e){""!=e.data&&null!=e.data&&e.data.length>0&&t.ConvertJSONToCSV(e.data,"Category",!0)}))},ConvertJSONToCSV:function(t,e,a){const i=JSON.parse(t),s=["template_id","STATUS_ID","TOTAL","RCOUNT","WORK_CODE_CATEGORY_ID"],o={ROWNUMBER:"Sr No",WORK_CODE_CATEGORY:"Rate Code Category",WORK_CODE_CATEGORY_DESCRIPTION:"Description",CREATED_BY_NAME:"Create By Name",CREATE_DATE:"\tCreate Date",STATUS_NAME:"Status"};if(Array.isArray(i)&&0!==i.length)if(i.length>0){const t=Object.keys(i[0]),l=t.filter(t=>!s.includes(t)),r=l.map(t=>o[t]||t),c=i.map(t=>r.map(e=>{const a=l[r.indexOf(e)];let i=void 0!==t[a]&&null!==t[a]?String(t[a]):"";return(i.includes(",")||i.includes("\n")||i.includes('"'))&&(i=`"${i.replace(/"/g,'""')}"`),i}).join(",")),n=(a?[r.join(",")]:[]).concat(c).join("\n"),d=new Blob([n],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");u.setAttribute("href",URL.createObjectURL(d)),u.setAttribute("download",e+".csv"),u.click()}else console.log("No valid data to convert.");else console.warn("No valid data to convert.")},commonDeleteData:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Report"),(function(){var t={ids:a,moduleName:"BILLING",refCode:"TALYGEN_CATEGORY"},i=JSON.stringify(t);d["a"].CommonCommonDelete(i).then((async function(t){200==t.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Category")]),"success",!0,e.$t("Alert")),await e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("Category")]),"failure",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete"),"failure",!0,e.$t("Alert"))},UpdateStatus:async function(t){var e=this;t="Active"==t?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&(e.isLoading=!0,e.listheaderbuttons[1].isdisabled=!1,e.listheaderbuttons[2].isdisabled=!1,e.listheaderbuttons[4].isdisabled=!1,e.confirmR(e.$t("AreYouSureToUpdateStatus"),!0,e.$t("update")+"  "+e.$t("status"),(function(){var i={ID:a,StatusId:t,IsFor:"TALYGEN_CATEGORY",Module:"BILLING",Submodule:"TALYGEN_CATEGORY"},s=JSON.stringify(i);d["a"].CommonUpdateStatus(s).then(async t=>{200==t.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.listheaderbuttons[1].isdisabled=!0,e.listheaderbuttons[2].isdisabled=!0,e.listheaderbuttons[4].isdisabled=!0,await e.FetchData(),e.ShowAlert(e.$t("RecordUpdatedSuccessfully"),"success",!0,e.$t("Alert")))})})))},pagerMethod(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){this.sortBy=t;var e="ASC";"ASC"==this.sortExp&&(e="DESC"),this.sortExp=e,this.sortBy=t,this.sortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},leftCommonSearch:async function(t){if(this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition){const a=t.searchCondition.match(/'%(.+?)%'/);var e="";a&&(e=a[1]),this.searchCondition=e}else this.searchCondition="";this.FetchData()}},getStatusClass:function(t){var e="";switch(t){case"Active":e="fa fa-check text-black";break;case"Inactive":e="fa fa-check text-muted";break;default:e=""}return e}},m=g,p=Object(A["a"])(m,i,s,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0cf901.js.map