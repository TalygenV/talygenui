(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51a705e4"],{7588:function(e,t,a){"use strict";a("a85b")},"8a59":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{ref:"tgList",attrs:{listType:["List"],IsShowAction:!0,showCheckBox:!1,ModuleName:"Billing",SubModuleCode:"AuditRecords",IdentityColumn:"COLUMN_ID",HeaderText:e.$t("AuditRecords"),ListData:e.ListingData,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.Buttons,TotalRecords:e.TotalRecords,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchAuditRecords,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound"),LegendArray:e.LegendArray,SearchFields:e.leftSearchFields,SearchPosition:"top"},on:{PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata,LeftsearchButtonClick:e.leftCommonSearch,ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["COST"==i.column.COLUMN_NAME?[a("span",{staticClass:"textalignright paddingright5"},[e._v(e._s(e.formatCurrency(i.row.COST)))])]:e._e(),"TRANSMIT_DATE"==i.column.COLUMN_NAME?[i.row.TRANSMIT_DATE?a("span",{attrs:{title:i.row.TRANSMIT_DATE}},[e._v(" "+e._s(e.formatDate(i.row.TRANSMIT_DATE))+" ")]):a("span",[e._v("--")])]:e._e(),"DATEOFWORK"==i.column.COLUMN_NAME?[i.row.DATEOFWORK?a("span",{attrs:{title:i.row.DATEOFWORK}},[e._v(" "+e._s(e.formatDate(i.row.DATEOFWORK))+" ")]):a("span",[e._v("--")])]:e._e()]}}])}),a("transition",{attrs:{name:"modal"}},[e.IsEditException?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container modal-lg"},[a("div",{staticClass:"modal-header"},[a("h4",[e._v(e._s(e.$t("Exception")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseEditException}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]),a("div",{staticClass:"modal-body"},[e.IsEditException?a("EditException",{attrs:{columnId:e.selectedColumnId,clientId:e.selectedClientId,requestFrom:"AUDIT"},on:{close:e.CloseEditException,saved:e.onExceptionSaved}}):e._e()],1)])])]):e._e()])],1)},o=[],n=(a("14d9"),a("750f"));let d=[],s=[{fieldName:"ClientName",fieldType:"searchableselect",fieldIcon:"fa-user",paramName:"ClientIds",fieldSearchConditionName:[""],isSearch:!1,value:"",actionButtons:{selectAll:!0,active:!0,inactive:!0,clear:!0},itemFields:["text"],groupFields:["groupText"],isMultiple:!1,maxRenderItems:50,placeholder:"",statusFieldConfig:{fieldName:"status",activeValues:["Active","active"],inactiveValues:["Inactive","inactive"],activeColor:"#28a745",inactiveColor:"#dc3545"},minSearchLength:0,listOptions:[],onChange:null},{fieldName:"UtilityName",fieldType:"ddl-radio",fieldIcon:"fa fa-building",paramName:"UtilityNames",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"InvoiceDate",fieldType:"date-range",fieldIcon:"fa fa-calendar",paramName:"InvoiceDate",fieldSearchConditionName:["DateFrom","DateTo"],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"State",fieldType:"ddl-radio",fieldIcon:"fa fa-map-marker",paramName:"State",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Records",fieldType:"ddl-radio",fieldIcon:"fa fa-th-list",paramName:"recordsToShow",fieldSearchConditionName:[""],isSearch:!1,value:"10",listOptions:[{name:"10",value:"10"},{name:"20",value:"20"},{name:"30",value:"30"},{name:"40",value:"40"},{name:"50",value:"50"}]}],r=[{COLUMN_NAME:"UTIL_ID",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"UtilityName",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKETNUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"TicketNumber",DISPLAY_ORDER:2},{COLUMN_NAME:"TYPE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TicketType",DISPLAY_ORDER:3},{COLUMN_NAME:"WORKFOR",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkDoneFor",DISPLAY_ORDER:4},{COLUMN_NAME:"WORKCODE_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkCode",DISPLAY_ORDER:5},{COLUMN_NAME:"COST",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Cost",DISPLAY_ORDER:6,settings:{isInSlot:!0}},{COLUMN_NAME:"TRANSMIT_DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"TransmitDate",DISPLAY_ORDER:7,settings:{isInSlot:!0}},{COLUMN_NAME:"DATEOFWORK",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WorkedDate",DISPLAY_ORDER:8,settings:{isInSlot:!0}},{COLUMN_NAME:"SBA_DESC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"SbaDesc",DISPLAY_ORDER:9},{COLUMN_NAME:"SERVICE_CONDITION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"ServiceCondition",DISPLAY_ORDER:10}],l=[{title:"Edit",icon:"fa fa-pencil text-success action-icon",additionalSpan:"",callbackfunction:"EditRecord"}];async function c(e){var t=e;try{const e="countryId=223&includeCandaState=true",a=await n["a"].GetStateList(e);if(a.data){const e=a.data.map(e=>({name:e.STATE_NAME,value:e.ISO_CODE_3}));t.leftSearchFields.find(e=>"State"===e.fieldName).listOptions=e}}catch(a){console.error("Error loading states:",a)}}var h={buttons:d,leftsearchSchema:s,headerSchema:r,listActions:l,bindleftCommonSearchdropdown:c},u=a("993a"),m={name:"AuditRecords",components:{EditException:u["a"]},data(){return{isLoading:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,widgets:[],LegendArray:[],SortBy:"",SortExp:"",CurrentPage:1,TotalRecords:0,ListingData:[],Buttons:h.buttons,leftSearchFields:h.leftsearchSchema,listActions:h.listActions,Headers:h.headerSchema,searchCondition:"",selectedId:null,IsEditException:!1,selectedColumnId:null,selectedClientId:null}},created:function(){var e=this;e.Headers.forEach(t=>{t.DISPLAY_NAME=e.$t(t.DISPLAY_NAME)}),h.bindleftCommonSearchdropdown(this),e.leftSearchFields.find(e=>"ClientName"===e.fieldName).onChange=this.onSelectionChange,e.setDefaultDateRange(),e.FetchAuditRecords()},methods:{leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?""!=e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition=e.searchCondition||"":this.searchCondition="",this.searchCondition&&(this.searchCondition=this.searchCondition.replace(/InvoiceDate=([^&]+)/,(function(e,t){let[a,i]=t.split("|");return`DateFrom=${a}&DateTo=${i}`}))),this.FetchAuditRecords()},onSelectionChange(e,t){var a=this;a.isLoading=!0,a.selectedId=t;var i=`clientId=${t}&configId=&reqFrom=&clientIds=`;n["a"].getUtilityList(i).then(e=>{a.isLoading=!1;let t=[];var i=e.data;null!=i&&i.length>0?(i.forEach(e=>{let a={name:e.UTILITY_NAME,value:e.UTILITY_NAME};t.push(a)}),a.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=t):a.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).catch(e=>{a.isLoading=!1,a.leftSearchFields.find(e=>"UtilityName"===e.fieldName).listOptions=[]}).finally(()=>{a.isLoading=!1})},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Edit":t.isVisible=!0;break;default:t.isVisible=!0}a.push(t)}),a},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchAuditRecords()},actionButtonClick:function(e,t){switch(e){case"EditRecord":this.editRecord(t);break}},commonHeaderButtonClick:function(e){},sortdata:function(e){this.SortBy=e,""==this.SortExp?this.SortExp="ASC":"ASC"==this.SortExp?this.SortExp="DESC":this.SortExp="ASC",this.FetchAuditRecords()},FetchAuditRecords:function(){var e=this;e.isLoading=!0;const t=e.leftSearchFields.find(e=>"Records"===e.fieldName),a=t&&t.value||10;e.PageSize=parseInt(a);e.PageSize,e.PageNumber,e.SortBy,e.SortExp;e.searchCondition&&e.searchCondition,setTimeout(()=>{e.isLoading=!1,e.ListingData=[],e.TotalRecords=0},100)},formatDate(e){if(!e)return"";if(e instanceof Date)return e.toLocaleDateString();const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString()},formatCurrency(e){return e||0===e?parseFloat(e).toFixed(2):"0.00"},editRecord(e){this.selectedColumnId=e.COLUMN_ID,this.selectedClientId=e.CLIENT_ID,this.IsEditException=!0},CloseEditException(){this.IsEditException=!1,this.selectedColumnId=null,this.selectedClientId=null},onExceptionSaved(){this.CloseEditException(),this.FetchAuditRecords()},setDefaultDateRange(){}}},E=m,S=(a("7588"),a("0c7c")),A=Object(S["a"])(E,i,o,!1,null,"4da0c05e",null);t["default"]=A.exports},"99f4":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".textalignright[data-v-4da0c05e]{text-align:right}.paddingright5[data-v-4da0c05e]{padding-right:5px}.modal-mask[data-v-4da0c05e]{position:fixed;z-index:9998;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:table;transition:opacity .3s ease}.modal-wrapper[data-v-4da0c05e]{display:table-cell;vertical-align:middle}.modal-container[data-v-4da0c05e]{margin:0 auto;background-color:#fff;border-radius:2px;box-shadow:0 2px 8px rgba(0,0,0,.33);transition:all .3s ease;max-height:90vh;overflow-y:auto}.modal-container[data-v-4da0c05e],.modal-lg[data-v-4da0c05e]{width:90%;max-width:1200px}.modal-header[data-v-4da0c05e]{padding:15px;border-bottom:1px solid #e5e5e5;display:flex;justify-content:space-between;align-items:center}.modal-header h4[data-v-4da0c05e]{margin:0}.modal-body[data-v-4da0c05e]{padding:20px}.modal-footer[data-v-4da0c05e]{padding:15px;border-top:1px solid #e5e5e5;text-align:right}.close[data-v-4da0c05e]{background:none;border:none;font-size:24px;cursor:pointer;opacity:.5}.close[data-v-4da0c05e]:hover{opacity:1}.modal-enter[data-v-4da0c05e],.modal-leave-active[data-v-4da0c05e]{opacity:0}.modal-enter .modal-container[data-v-4da0c05e],.modal-leave-active .modal-container[data-v-4da0c05e]{transform:scale(1.1)}",""]),e.exports=t},a85b:function(e,t,a){var i=a("99f4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("499e").default;o("7dff029e",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-51a705e4.js.map