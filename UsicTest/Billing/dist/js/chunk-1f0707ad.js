(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f0707ad"],{"4f6a":function(e,t,a){var i=a("6070");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("06e1506e",i,!0,{sourceMap:!1,shadowMode:!1})},6070:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".table td[data-v-2e1e9d4a],.table th[data-v-2e1e9d4a]{text-align:left;vertical-align:middle;white-space:nowrap}.utility-table td[data-v-2e1e9d4a]:first-child,.utility-table th[data-v-2e1e9d4a]:first-child{width:60%}.utility-table td[data-v-2e1e9d4a]:nth-child(2),.utility-table th[data-v-2e1e9d4a]:nth-child(2){width:80%}.subscription-table td[data-v-2e1e9d4a]:first-child,.subscription-table td[data-v-2e1e9d4a]:nth-child(2),.subscription-table th[data-v-2e1e9d4a]:first-child,.subscription-table th[data-v-2e1e9d4a]:nth-child(2){width:25%}.subscription-table td[data-v-2e1e9d4a]:nth-child(3),.subscription-table td[data-v-2e1e9d4a]:nth-child(4),.subscription-table td[data-v-2e1e9d4a]:nth-child(5),.subscription-table th[data-v-2e1e9d4a]:nth-child(3),.subscription-table th[data-v-2e1e9d4a]:nth-child(4),.subscription-table th[data-v-2e1e9d4a]:nth-child(5){width:16%;text-align:center}",""]),e.exports=t},"6b09":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle py-1"},[0==e.serviceId?a("h5",{staticClass:"pt-2",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("CreateService"))+" ")]):0!=e.serviceId?a("h5",{staticClass:"pt-2",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("EditService"))+" ")]):e._e(),a("button",{staticClass:"close",on:{click:e.ClosePopUp}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"validateService",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},scopedSlots:e._u([{key:"tgslot-ServiceType",fn:function(t){var i=t.data;return[a("div",{staticClass:"form-group mb-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(i.fieldInfo,"value",t.target.multiple?a:a[0])}}},e._l(i.fieldInfo.config.OptionsForBind,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0),a("span",{staticClass:"text-warning",staticStyle:{"font-size":"10px","font-weight":"400"}},[e._v(e._s(e.getServiceTypeDesc(i.fieldInfo.config.OptionsForBind,i.fieldInfo.value)))])])]}}])})],1)])])])])])},s=[],r=(a("14d9"),a("9769")),l={props:{planCode:{type:String,required:!1},isForService:{type:Boolean,required:!1},callbackfunction:{type:Function,required:!1},serviceId:{type:Number,required:!1},billingTypeOptions:{type:Array,default:[]},paymentType:{type:String,required:!1},reqform:{type:String,required:!1}},data(){return{FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("billingtype"),name:"BillingTypeOptions",value:"",visibility:!0,config:{options:[],onChange:this.onChangeOfBillingType},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("UtilityType"),name:"meterTypeId",visibility:!1,value:"",config:{options:[],onChange:this.onGetUnitByUtilityTypeId},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SlotField",label:this.$t("ServiceType"),name:"ServiceType",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"TextField",label:this.$t("name"),name:"Name",value:"",placeholder:"Enter Name",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("UsageMeasurement"),name:"UsageMeasurement",visibility:!1,value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("WorkType"),name:"WorkType",value:"",visibility:!1,config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!1,max:100}},{astype:"TextField",label:this.$t("ClientDefinedIdentifier"),name:"ClientDefinedIdentifier",value:"",placeholder:"",visibility:!1,validationRules:{required:!1,max:100}},{astype:"RadioField",label:this.$t("BillingFrequency"),name:"BillingFrequency",visibility:!1,disabled:!1,value:"",config:{options:[{value:"1",name:"One Time"},{value:"2",name:"Recurring"}]}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",config:{options:[{value:"1001",name:this.$t("Active")},{value:"1002",name:this.$t("Inactive")}]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"toggleField",label:this.$t("istaxble"),name:"IsTaxble",value:"",disabled:!1,config:{onChange:this.ChangeIsTaxble},validationRules:{required:!1,max:100}},{astype:"MultiSelectField",label:this.$t("SelectTaxType"),name:"SelectedTax",value:"",mode:"tag",placeholder:this.$t("SelectTaxType"),visibility:!1,config:{options:[]},validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:"",config:{rows:4},validationRules:{required:!1,max:2e3}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>"+this.$t("Save"),onClick:this.SaveData},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.ClosePopUp}],serviceDetail:[]}},created:function(){var e=this;let t=[];e.billingTypeOptions.length>1?(e.billingTypeOptions.forEach(e=>{t.push({value:e.FEATURE_CODE,name:e.FEATURE_NAME})}),e.FormSchema.forEach((function(e,a){e.Data.forEach((function(a,i){"BillingTypeOptions"==a.name&&(a.config.options=t,a.visibility=!0,e.layoutType="triple"),"BillingFrequency"==a.name&&(a.visibility=!1)}))}))):e.FormSchema.forEach((function(t,a){t.Data.forEach((function(a,i){"BillingTypeOptions"==a.name?(a.config.options.push({name:e.billingTypeOptions[0].FEATURE_NAME,value:e.billingTypeOptions[0].FEATURE_CODE}),a.value=e.billingTypeOptions[0].FEATURE_CODE,t.layoutType="double","UTILITY_BILLING"==a.value&&(e.FormSchema[0].Data[1].visibility=!0)):"CustomerType"==a.name&&"UTILITY_BILLING"==e.billingTypeOptions[0].FEATURE_CODE&&(a.visibility=!0,t.layoutType="triple"),"BillingFrequency"==a.name&&(a.visibility=!1)}))}));var a=this.billingTypeOptions.filter((function(e){e.FEATURE_CODE}));a.length>0&&e.FormSchema.forEach((function(e,t){e.Data.forEach((function(e,t){"ClientDefinedIdentifier"==e.name&&(e.visibility=!0)}))})),e.GetTaxCategory(),e.GetDDLServiceType(),e.GetDDLWorkType(),setTimeout(()=>{e.ChangeServiceFor(),this.bindBillingFrequency(e.paymentType)},500),e.serviceId>0&&setTimeout((function(){e.BindEditDetail(e.serviceId)}),1e3),e.getMeterTypes()},methods:{getServiceTypeDesc:function(e,t){let a=this,i="";return e.forEach(e=>{e.value==t&&(i=a.$t(e.second_value))}),i},onGetUnitByUtilityTypeId:function(e,t,a){var i=this;if(""==t.value)i.$refs.validateService.updateProperty("UsageMeasurement","visibility",!1),i.$refs.validateService.UpdateKeyValue();else{var s="id=&moduleName=&type=UTILITY_UNIT_OF_MEASUREMENTS&search=&refId="+t.value;r["a"].GetDDLData(s).then(e=>{if(e.data){var t=e.data;null!=t&&(i.$refs.validateService.updateProperty("UsageMeasurement","visibility",!0),i.$refs.validateService.updateProperty("UsageMeasurement","config.options",e.data.DATA),i.$refs.validateService.UpdateKeyValue())}})}},async getMeterTypes(){const e=this;try{const t=await r["a"].GetMeterTypes();if(null!==t&&void 0!==t&&t.data){const a=JSON.parse(t.data.result).data;Array.isArray(a)&&a.length>0?(a.map(t=>{e.FormSchema[0].Data[1].config.options.push({value:t.meter_id,name:t.meter_name})}),e.$refs.validateService.UpdateKeyValue()):console.warn("No valid data found in the response")}else console.error("Invalid response structure:",t)}catch(t){console.error("Error fetching Meter types:",t)}},onChangeOfBillingType:function(e,t){let a=this;"UTILITY_BILLING"==t.value?a.FormSchema[0].Data[1].visibility=!0:a.FormSchema[0].Data[1].visibility=!1},bindBillingFrequency:function(e){var t=this;"One Time"==e?(t.$refs.validateService.updateProperty("BillingFrequency","value","1"),t.$refs.validateService.UpdateKeyValue()):(t.$refs.validateService.updateProperty("BillingFrequency","value","2"),t.$refs.validateService.UpdateKeyValue())},BindEditDetail:function(e){var t=this,a="serviceId="+e;r["a"].GetServiceListById(a).then(e=>{if("Success"==e.data.status&&JSON.parse(e.data.result).data.length>0)if(t.serviceDetail=JSON.parse(e.data.result).data,t.FormSchema[0].Data[0].value=t.serviceDetail[0].SERVICE_FOR.toUpperCase(),"UTILITY_BILLING"==t.serviceDetail[0].SERVICE_FOR?(t.FormSchema[0].Data[1].visibility=!0,t.FormSchema[0].Data[1].value=t.serviceDetail[0].METER_TYPE_ID):t.FormSchema[0].Data[1].visibility=!1,null!=t.serviceDetail[0].METER_TYPE_ID&&t.BindUnitByUtilityId(t.serviceDetail[0].METER_TYPE_ID,t.serviceDetail[0].USAGE_MEASUREMENT_ID),null!=t.serviceDetail.WORK_TYPE_ID&&(t.FormSchema[0].Data[5].value=t.serviceDetail[0].WORK_TYPE_ID),t.FormSchema[0].Data[2].value=t.serviceDetail[0].SERVICE_CODE_ID,t.FormSchema[0].Data[3].value=t.serviceDetail[0].SERVICE_NAME,t.FormSchema[0].Data[4].value=t.serviceDetail[0].USAGE_MEASUREMENT_ID,t.FormSchema[1].Data[1].value=t.serviceDetail[0].CLIENT_DEFINED_IDENTIFIER,"Recurring"==t.serviceDetail[0].SERVICE_TYPE_CODE||"Minimum Fee"==t.serviceDetail[0].SERVICE_TYPE_CODE||"Recurring Arrears"==t.serviceDetail[0].SERVICE_TYPE_CODE?t.FormSchema[1].Data[2].value="2":t.FormSchema[1].Data[2].value="1",t.FormSchema[1].Data[3].value=t.serviceDetail[0].STATUS_ID,t.FormSchema[2].Data[0].value=t.serviceDetail[0].DESCRIPTION,t.serviceDetail[0].is_taxable){t.FormSchema[1].Data[4].value=t.serviceDetail[0].is_taxable;var a=t.serviceDetail[0].TAX_IDS.split(","),i=t.TaxData.filter(e=>a.includes(e.value)),s=[];i.forEach(e=>{var t={value:e.value,label:e.name};s.push(t)}),t.FormSchema[1].Data[5].value=s,t.FormSchema[1].Data[5].visibility=!0}else t.FormSchema[1].Data[5].visibility=!1})},BindUnitByUtilityId:function(e,t){var a=this,i="id=&moduleName=&type=UTILITY_UNIT_OF_MEASUREMENTS&search=&refId="+e;r["a"].GetDDLData(i).then(e=>{if(e.data){var i=e.data;null!=i&&(a.$refs.validateService.updateProperty("UsageMeasurement","visibility",!0),a.$refs.validateService.updateProperty("UsageMeasurement","config.options",e.data.DATA),a.$refs.validateService.updateProperty("UsageMeasurement","value",t),a.$refs.validateService.UpdateKeyValue())}})},GetDDLServiceType:function(){var e=this;let t=[];e.billingTypeOptions.forEach((function(e,a){t.push(e.FEATURE_ID)}));var a="id=&moduleName=&type=TICKETING_SERVICE_TYPE&search=&refId="+t.join(",");r["a"].GetDDLData(a).then(t=>{if(t.data){var a="";a=t.data,"One Time"==e.paymentType&&null!=a?(a=a.DATA.filter(e=>"Order Based"!==e.name&&"Recurring"!==e.name&&"Recurring Arrears"!==e.name&&"Usage Based"!==e.name),e.$refs.validateService.updateProperty("ServiceType","config.options",a),e.$refs.validateService.UpdateKeyValue()):"One Time"!=e.paymentType&&null!=a&&(e.$refs.validateService.updateProperty("ServiceType","config.options",a.DATA),e.$refs.validateService.UpdateKeyValue())}})},GetDDLWorkType:function(){var e=this,t="id=&moduleName=TICKETING&type=FSM_WORKTYPE&search=&refId=";r["a"].GetDDLData(t).then(t=>{if(t.data){var a=t.data;null!=a&&e.FormSchema[1].Data[5].config.options.push(a)}})},ChangeServiceFor:function(){var e=this;("UTILITY_BILLING"==e.billingTypeOptions[0].FEATURE_CODE||"SUBSCRIPTION_BILLING"==e.billingTypeOptions[0].FEATURE_CODE)&&(e.$refs.validateService.updateProperty("WorkType","visibility",!1),e.$refs.validateService.UpdateKeyValue())},ClosePopUp:function(){var e=this;e.$parent.isCreateService=!1},async SaveData(){var e=this;const t=await e.$refs.validateService.validateForm.validate();if(t){var a=e.$refs.validateService.getPropertyValue("BillingTypeOptions","value"),i=e.$refs.validateService.getPropertyValue("meterTypeId","value"),s=e.$refs.validateService.getPropertyValue("ServiceType","value"),l=e.$refs.validateService.getPropertyValue("Name","value"),n=e.$refs.validateService.getPropertyValue("UsageMeasurement","value"),o=e.$refs.validateService.getPropertyValue("WorkType","value"),c=e.$refs.validateService.getPropertyValue("ClientDefinedIdentifier","value"),d=e.$refs.validateService.getPropertyValue("Status","value"),u=e.$refs.validateService.getPropertyValue("Description","value"),p=e.$refs.validateService.getPropertyValue("IsTaxble","value"),v=e.$refs.validateService.getPropertyValue("SelectedTax","value");if(""!=v)var h=v.map(e=>e.value).join(",");var S={ID:e.serviceId,ServiceFor:a,MeterTypeId:i,ServiceType:s,Name:l,UsageMeasurement:n,WorkType:o,ClientDefinedIdentifier:c,Status:d,Description:u,Istaxable:p,SelectedTax:h},m=JSON.stringify(S),f="objData="+encodeURIComponent(m);await r["a"].CreateNewService(f).then(t=>{null!=t.data&&("Success"==t.data.Status&&"1"==t.data.Code?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Service")]),"Success",!0,e.$t("Alert")),e.ClosePopUp(),1==e.isForService&&e.callbackfunction(),e.isLoading=!1):"Success"==t.data.Status&&"2"==t.data.Code?(e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Service")]),"Success",!0,e.$t("Alert")),e.ClosePopUp(),1==e.isForService&&e.callbackfunction(),e.isLoading=!1):"Success"==t.data.Status&&"4"==t.data.Code?e.ShowAlert(e.$t("AlreadyExists",[e.$t("Service")]),"failure",!0,e.$t("Alert")):(e.ShowAlert(e.$t("ErrorWhileSaving",[e.$t("Service")]),"danger",!0,e.$t("Alert")),e.isLoading=!1))})}},ChangeIsTaxble(e,t){var a=this;e?a.FormSchema[1].Data[5].visibility=!0:(a.FormSchema[1].Data[5].visibility=!1,a.FormSchema[1].Data[5].value="")},GetTaxCategory(){var e=this,t="id=&moduleName=&type=TAX_CATEGORY&search=&refId=";e.FormSchema[1].Data[5].config.options=[],r["a"].GetDDLData(t).then(t=>{200==t.status&&(void 0==t.data.DATA&&null==t.data.DATA||t.data.DATA.length>0&&(e.TaxData=t.data.DATA,t.data.DATA.forEach(t=>{let a={value:t.value,name:t.name};e.FormSchema[1].Data[5].config.options.push(a)}),e.$refs.validateService.UpdateKeyValue()))})}}},n=l,o=a("0c7c"),c=Object(o["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},"824d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("tg-list",{attrs:{IsShowAction:!1,showCheckBox:!0,ModuleName:"Billing",listType:["List"],RenderRowActionMethod:function(){},SubModuleCode:"Billing",IdentityColumn:"service_id",HeaderText:e.$t("Services"),ListData:e.ServiceListing,HeaderData:e.Headers,callbackfunction:e.FetchData,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.FetchData,LegendArray:[],SortExp:e.sortExp,SortBy:e.sortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["status_id"==i.column.COLUMN_NAME?[a("listing-status",{ref:"updatestatus",attrs:{isfor:"SERVICE",dataid:i.row.service_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:i.status_id,"data-action":"index",dataselected:1001==i.row.status_id?"Active":"Inactive",callbackfunction:e.FetchData,isselectedvaluestring:!0,title:1001==i.row.status_id?"Active":"Inactive"}}),e.isCRMShowStausDrop(i.row.status_id,"Ticketing")?e._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:e.getStatusClass(i.row.status_id,"STATUS_ID")},[e._v(" "+e._s(i.row[i.column.COLUMN_NAME])+" ")])])]:e._e(),"service_name"==i.column.COLUMN_NAME?[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.openServiceDetail(i.row.service_id)}}},[a("i",{attrs:{"aria-hidden":"true"}}),e._v(e._s(i.row.service_name)+" ")])]:e._e(),"created_at"==i.column.COLUMN_NAME?[a("span",[e._v(" "+e._s(e.$d(i.row.created_at))+" ")])]:e._e(),"is_taxable"==i.column.COLUMN_NAME?[i.row.is_taxable?a("span",[e._v(" "+e._s(e.$t("Yes"))+" ")]):a("span",[e._v(e._s(e.$t("No")))])]:e._e(),"client_count"==i.column.COLUMN_NAME?[a("span",[a("a",{class:{"text-dark text-center":!0,disabled:0==parseInt(i.row.client_count)},attrs:{id:"ancProjectDetail",href:"javascript:;"},on:{click:function(t){return e.OpenClientListPopup(i.row.service_id)}}},[a("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"noti-circle noti-blue"},[e._v(e._s(i.row.client_count))])])])]:e._e(),"plan_count"==i.column.COLUMN_NAME?[a("span",[a("a",{class:{"text-dark text-center":!0,disabled:0==i.row.plan_count},attrs:{id:"ancProjectDetail",href:"javascript:;"},on:{click:function(t){return e.OpenPLanListPopup(i.row.service_id)}}},[a("i",{staticClass:"fa fa-file-o",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"noti-circle noti-orange"},[e._v(e._s(i.row.plan_count))])])])]:e._e()]}}])}),e.isCreateService?a("AddNewService",{attrs:{callbackfunction:e.FetchData,planCode:e.BillingTypeOptions,isForService:e.isForService,serviceId:e.serviceId,billingTypeOptions:e.BillingTypeOptions,reqform:"fromServiceListing"}}):e._e(),e.isOpenClientListPopup?a("ClientListingPopup",{attrs:{planId:"0",serviceId:e.serviceId,reqFrom:"SERVICE"},on:{close:function(t){e.isOpenClientListPopup=!1,e.serviceId=0}}}):e._e(),e.isOpenPLanListPopup?a("planPopupForService",{attrs:{serviceId:e.serviceId,reqFrom:"SERVICE"},on:{close:function(t){e.isOpenPLanListPopup=!1,e.serviceId=0}}}):e._e()],1)},s=[],r=a("9769");a("14d9");let l=[{title:"AddService",iconClass:"fa fa-plus",callbackfunction:"Add",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Delete",iconClass:"fa fa-trash",callbackfunction:"Delete",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,isEnabledOnSelectedRow:!0}],n=[{fieldName:"ServiceName",fieldType:"text",fieldIcon:"fa fa-user",paramName:"TTS.service_name",fieldSearchConditionName:["TTS.service_name"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CreatedBy",fieldType:"radio",fieldIcon:"fa fa-envelope",fieldSearchConditionName:["TTS.created_by"],paramName:"TTS.created_by",isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"radio",fieldIcon:"fa-calendar",paramName:"TTS.status_id",fieldSearchConditionName:["TTS.status_id"],isSearch:!1,value:"",listOptions:[{name:"Active",value:1001},{name:"Inactive",value:1002}]}];async function o(e){var t=e,a="id=&moduleName=&type=USERS&search=";await r["a"].GetDDLData(a).then(e=>{""!=e.data&&e.data.DATA.length&&e.data.DATA.forEach(e=>{let a={name:e.name,value:e.value};t.leftSearchFields[1].listOptions.push(a)})})}var c={leftsearchSchema:n,buttons:l,bindleftCommonSearchdropdown:o},d=a("2b0e"),u=a("6b09"),p=a("e01b"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle py-1"},[a("h5",{staticClass:"pt-2",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("Plans"))+" ")]),a("button",{staticClass:"close",on:{click:e.ClosePopUp}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("table",{staticClass:"table table-bordered mt-0"},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[e._v(e._s(e.$t("PlanName")))]),a("th",[e._v(e._s(e.$t("Rate Applicable on plan")))]),a("th",[e._v(e._s(e.$t("EffectiveDate")))]),a("th",[e._v(e._s(e.$t("Expiration Date")))]),a("th",[e._v(e._s(e.$t("TemplateName")))])])]),a("tbody",e._l(e.planList,(function(t){return a("tr",[a("td",[e._v(e._s(t.PLAN_NAME))]),a("td",[e._v(e._s(t.IS_RATE_APPLICABLE_ON_PLAN))]),a("td",[e._v(e._s(e.$options.filters.formatDate(t.EFFECTIVE_DATE)))]),a("td",[e._v(e._s(e.$options.filters.formatDate(t.EXPIRATION_DATE)))]),a("td",[e._v(e._s(t.TEMPLATE_NAME))])])})),0)])])])])])])])},h=[],S={props:{reqFrom:{type:String,required:!1},serviceId:{type:String,required:!1}},data(){return{planList:[]}},created:function(){var e=this,t=`serviceId=${e.serviceId}&reqFrom=${e.reqFrom}`;r["a"].GetPlanListMappedWithService(t).then((function(t){null!=t.data&&(e.planList=t.data.result)}))},methods:{ClosePopUp:function(){this.$emit("close")}}},m=S,f=a("0c7c"),_=Object(f["a"])(m,v,h,!1,null,null,null),T=_.exports,y={components:{AddNewService:u["a"],ClientListingPopup:p["a"],planPopupForService:T},data(){return{Headers:[{COLUMN_NAME:"service_name",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("ServiceName"),DISPLAY_ORDER:1},{COLUMN_NAME:"service_code",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("ServiceType"),DISPLAY_ORDER:2},{COLUMN_NAME:"usage_measurement",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("UsageMeasurement"),DISPLAY_ORDER:3},{COLUMN_NAME:"description",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CADescription"),DISPLAY_ORDER:4},{COLUMN_NAME:"is_taxable",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("IsTaxable"),DISPLAY_ORDER:5},{COLUMN_NAME:"created_at",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedDate"),DISPLAY_ORDER:6},{COLUMN_NAME:"client_count",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("clientmapped"),DISPLAY_ORDER:7},{COLUMN_NAME:"plan_count",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("planmapped"),DISPLAY_ORDER:8},{COLUMN_NAME:"status_id",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("Status"),DISPLAY_ORDER:9}],StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}],listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,list:[],isForService:!0,TotalRecords:0,pageSize:10,pageNum:1,sortBy:"",searchCondition:"",GroupStart:1,GroupEnd:3,PlanId:0,CurrentPage:1,TotalPages:0,planCode:"Billing",sortExp:"",ServiceListing:[],isCreateService:!1,noRecords:!1,serviceId:0,BillingTypeOptions:[],isOpenClientListPopup:!1,isOpenPLanListPopup:!1}},created:async function(){var e=this;c.bindleftCommonSearchdropdown(this),await e.GetExtraFeatures(),await e.FetchData()},methods:{OpenPLanListPopup:function(e){this.serviceId=e,this.isOpenPLanListPopup=!this.isOpenPLanListPopup},OpenClientListPopup:function(e){this.serviceId=e,this.isOpenClientListPopup=!this.isOpenClientListPopup},GetExtraFeatures:async function(){var e=this,t="featureCode=GET_EXTRA_FEATURE_BILLING&outputType=list";await r["a"].CheckExtraFeatures(t).then((function(t){var a=JSON.parse(t.data);e.BillingTypeOptions=a,"SUBSCRIPTION_BILLING"==e.BillingTypeOptions[0].FEATURE_CODE&&(e.Headers[2].VISIBLE=!1)}))},FetchData:async function(){var e=this;e.PlanListing=[];var t=`pagesize=${e.pageSize}&pagenumber=${e.pageNum}&sortBy=${e.sortBy}&sortExp=${e.sortExp}&search=${e.searchCondition}`;await r["a"].GetBillingServiceListing(t).then((function(t){e.Headers.forEach(e=>{e.settings=null,"status_id"!=e.COLUMN_NAME&&"client_count"!=e.COLUMN_NAME&&"plan_count"!=e.COLUMN_NAME&&"created_at"!=e.COLUMN_NAME&&"service_name"!=e.COLUMN_NAME&&"is_taxable"!=e.COLUMN_NAME||(e.settings={isInSlot:!0})}),""!=t.data&&null!=t.data&&t.data.result.data.length>0?(e.ServiceListing=t.data.result.data,e.ServiceListing.forEach(e=>{null==e.is_taxable&&(e.is_taxable=!1),["created_at"].forEach(t=>{e[t]&&(e[t]=new Date(e[t]))}),d["default"].set(e,"isSelected",!1),e.plan_count>0?d["default"].set(e,"isCheckBoxDisabled",!0):d["default"].set(e,"isCheckBoxDisabled",!1)}),e.TotalRecords=t.data.result.data[0].TOTALRECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.pageSize),e.CurrentPage=e.pageNum,e.noRecord=!1):(e.noRecord=!0,e.TotalRecords=0,e.ServiceListing=[])}))},leftCommonSearch(e){console.log("value",e),this.pageNum=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},pagerMethod(e){this.pageSize=e.PageSize,this.pageNum=e.PageNumber,this.FetchData()},openServiceDetail:function(e){var t=this;t.serviceId=e,t.isCreateService=!0},commonHeaderButtonClick(e){switch(e.callbackfunction){case"Add":this.AddNew();break;case"Delete":this.DeleteService();break}},AddNew:function(){var e=this;e.serviceId=0,e.isCreateService=!0},getStatusClass:function(e){var t="";switch(e){case"Active":t="px-2 text-center bg-success text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;default:t=""}return t},DeleteService:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Plan"),(function(){var e={ids:a,moduleName:"BILLING",refCode:"TALYGEN_TICKET_SERVICE"},i=JSON.stringify(e);r["a"].CommonCommonDelete(i).then(e=>{200==e.status?(t.FetchData(),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Service")]),"Success",!0,t.$t("Alert"))):t.ShowAlert(t.$t("DeletedError",[t.$t("Service")]),"failure",!0,t.$t("Alert"))})})):t.ShowAlert(t.$t("Selectanyrecordtodelete",[t.$t("Service")]),"failure",!0,t.$t("Alert"))},sortdata:function(e){this.sortBy=e;var t="ASC";"ASC"==this.sortExp&&(t="DESC"),this.sortExp=t,this.sortBy=e,this.sortExp=t,this.pageNum=1,this.GroupStart=this.pageNum,this.GroupEnd=this.pageNum+2,this.FetchData()}}},E=y,C=Object(f["a"])(E,i,s,!1,null,null,null);t["default"]=C.exports},af04:function(e,t,a){"use strict";a("4f6a")},e01b:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle py-1"},[a("h5",{staticClass:"pt-2",attrs:{name:"header"}},[e._v(e._s(e.$t("PlanMappedWith")))]),a("button",{staticClass:"close",on:{click:e.ClosePopUp}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mt-0",class:{"subscription-table":"SUBSCRIPTION_BILLING"===e.CodePlan,"utility-table":"UTILITY_BILLING"===e.CodePlan}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[e._v(e._s(e.$t("ClientName")))]),a("th",[e._v(e._s(e.$t("PlanName")))]),"SUBSCRIPTION_BILLING"===e.CodePlan?a("th",[e._v(" "+e._s(e.$t("Frequency"))+" ")]):e._e(),"SUBSCRIPTION_BILLING"===e.CodePlan?a("th",[e._v(" "+e._s(e.$t("Units"))+" ")]):e._e(),"SUBSCRIPTION_BILLING"===e.CodePlan?a("th",[e._v(" "+e._s(e.$t("Price(per Unit)"))+" ")]):e._e()])]),a("tbody",e._l(e.clientList,(function(t){return a("tr",{key:t.CLIENT_NAME},[a("td",[e._v(e._s(t.CLIENT_NAME))]),a("td",[e._v(e._s(t.PLAN_NAME))]),"SUBSCRIPTION_BILLING"===e.CodePlan?a("td",[e._v(" "+e._s(t.FREQUENCY)+" ")]):e._e(),"SUBSCRIPTION_BILLING"===e.CodePlan?a("td",[e._v(" "+e._s(e.$n(t.UNITS))+" ")]):e._e(),"SUBSCRIPTION_BILLING"===e.CodePlan?a("td",[e._v(" "+e._s(e.$n(t.PRICE,"currency",e.$getLocaleByCurrency(e.CurrencyCode)))+" ")]):e._e()])})),0)])])])])])])])])])},s=[],r=a("9769"),l={props:{planId:{type:String,required:!1},serviceId:{type:String,required:!1},reqFrom:{type:String,required:!1},CodePlan:{type:String,required:!0}},data(){return{clientList:[],CurrencyCode:"PKR"}},created(){var e=this;e.CurrencyCode=e.GetUserInfo.Currency.replace(/[()]/g,"");var t=`planId=${e.planId}&serviceId=${e.serviceId}&reqFrom=${e.reqFrom}`;r["a"].GetClientListMappedWithPlan(t).then((function(t){null!=t.data&&(e.clientList=t.data.result)}))},watch:{CodePlan(e,t){console.log("CodePlan changed from",t,"to",e)}},methods:{ClosePopUp(){this.$emit("close")}}},n=l,o=(a("af04"),a("0c7c")),c=Object(o["a"])(n,i,s,!1,null,"2e1e9d4a",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-1f0707ad.js.map