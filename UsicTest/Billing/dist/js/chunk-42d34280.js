(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42d34280"],{"63c5":function(t,e,a){"use strict";a("e679")},"750f":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));a("88a7"),a("271a"),a("5494");var n=a("c427");const i={getClientList(t){return n["a"].instance.get("/lookups/clients-group-by-account?"+t)},getUtilityList(t){return n["a"].instance.get("/lookups/talygen-utilities-by-client?"+t)},getFlagList(){return n["a"].instance.get("/lookups/GetFlagList")},async GetStateList(t){return await n["a"].instance.get("/lookups/state-list-by-country-code?"+t)},async GetFlagType(t){return await n["a"].instance.get("/lookups/flag-type")},async GetCostCenters(t){return await n["a"].instance.get("/lookups/cost-centers")},async GetFlagRecords(t){return await n["a"].instance.get("/GetFlagRecords?"+t)},SaveColumnItems(t){return n["a"].instance.post("/lookups/SaveColumnItems",t)},DoNotProcessLineItems(t){return n["a"].instance.post("/lookups/DoNotProcessLineItems",t)},async GetFieldsListBySetupId(t){return await n["a"].instance.get("/lookups/GetFieldsListBySetupId?"+t)},async LoadFlagFieldDropDown(t){return await n["a"].instance.get("/lookups/LoadFlagFieldDropDown?"+t)},async GetSbaIdListByUtilityId(t){return await n["a"].instance.get("/lookups/GetSbaIdListByUtilityId?"+t)},GetTicketTypes(){return n["a"].instance.get("/lookups/GetTicketTypes")},GetStatusCodes(){return n["a"].instance.get("/lookups/GetStatusCodes")},async LoadAdditionalInfoByClientId(t){return await n["a"].instance.get("/lookups/LoadAdditionalInfoByClientId?"+t)},async GetExceptionRecord(t){return await n["a"].instance.get("/lookups/GetExceptionRecord?"+t)},UpdateException(t){return n["a"].instance.post("/lookups/UpdateException",t)},async GetCDC_CodePagedList(t){return await n["a"].instance.get("/lookups/GetCDC_CodePagedList?"+t)},CommonUpdateStatus(t){return n["a"].instance.post("/lookups/CommonUpdateStatus",t)},async ViewTicketImage(t){return await n["a"].instance.get("/lookups/ViewTicketImage?"+t)},async GetBilledUnbilledRecords(t){return await n["a"].instance.get("/GetBilledUnbilledRecordsListing?"+t)},async GetUnprocessedRecords(t){return await n["a"].instance.get("/GetUnprocessedRecords?"+t)},async GetTicketLog(t){return await n["a"].instance.get("/GetTicketLog?"+t)},async GetChildTicketLog(t){return await n["a"].instance.get("/GetChildTicketLog?"+t)},async GetChildTicketLogNew(t){return await n["a"].instance.get("/GetChildTicketLogNew?"+t)},GetWorkCodeData(){return n["a"].instance.get("/lookups/GetWorkCodeData")},async GetDivisionDropdownData(t){return await n["a"].instance.get("/lookups/GetDivisionDropdownData?"+t)},async GetActivityIdDropdownListByTicketNumber(t){return await n["a"].instance.get("/lookups/GetActivityIdDropdownListByTicketNumber?"+t)},async GetInvoiceLineItem(t){return await n["a"].instance.get("/lookups/GetInvoiceLineItem?"+t)},async LoadRateByWorkCode(t){return await n["a"].instance.get("/lookups/LoadRateByWorkCode?"+t)},async ChildTicketLogNew(t){return await n["a"].instance.get("/lookups/ChildTicketLogNew?"+t)},async LoadClientDivisionList(t){return await n["a"].instance.get("/lookups/client-divisions?"+t)},UpdateInvoiceLineItem(t){return n["a"].instance.post("/lookups/UpdateInvoiceLineItem",t)},async ChildTicketLog(t){return await n["a"].instance.get("/lookups/ChildTicketLog?"+t)},async ChildTicketLogNew(t){return await n["a"].instance.get("/lookups/ChildTicketLogNew?"+t)},SaveAndProcessLineItemsForInvoice(t){return n["a"].instance.post("/lookups/SaveAndProcessLineItemsForInvoice",t)},async GetAuditRecords(t){return await n["a"].instance.get("/ClientInvoice/AuditRecords?"+t)},async GetBulkMoveListing(t){return await n["a"].instance.get("/GetBulkMoveListing?"+t)},async GetBulkMoveQueueList(t){return await n["a"].instance.get("/GetBulkMoveQueueList?"+t)},async getUserList(t){return await n["a"].instance.get("/lookups/GetUserList?"+t)},async LoadClientDivisionListByUtilityIds(t){return await n["a"].instance.get("/lookups/LoadDivisionListByUtilityId?"+t)},async LoadInvoiceNumberList(t){return await n["a"].instance.get("/lookups/LoadInvoiceNumberList?"+t)},ValidateBMUtilitySbaIdInvoiceNo(t){return n["a"].instance.post("/lookups/ValidateBMUtilitySbaIdInvoiceNo",t)},UpdateContractAndUtility(t){return n["a"].instance.post("/lookups/UpdateContractAndUtility",t)},async UploadFile(t){return n["a"].instance.post("/lookups/UploadFile?",t)},async GetBulkMoveAdvanceListing(t){return await n["a"].instance.get("/GetBulkMoveAdvanceListing?"+t)},BulkMoveAdvancePostData(t){return n["a"].instance.post("/lookups/BulkMoveAdvancePostData",t)},UpdateAdvanceBulkMoveLineIds(t){return n["a"].instance.post("/lookups/UpdateAdvanceBulkMoveLineIds",t)},async SetupListing(t){return await n["a"].instance.get("/GetSetupListing?"+t)},async GetSetupUpdateRecords(t){return await n["a"].instance.get("/GetSetupUpdateRecords?"+t)},SubmitTemplateMapping(t){return n["a"].instance.post("/SubmitTemplateMapping",t)},UpdateTemplateMapping(t){return n["a"].instance.post("/UpdateTemplateMapping",t)},DeleteColumn(t){return n["a"].instance.post("/DeleteColumn",t)},async DeleteItems(t){return await n["a"].instanceCommon.post("/Common/Delete?"+t)},async ImportSetupDataFromExcel(t){return await n["a"].instance.get("/ImportSetupDataFromExcel?"+t)},async GetSetupTemplate(t){return await n["a"].instance.get("/GetSetupTemplate?"+t)},async GetPaymentTerm(t){return await n["a"].instance.get("/ClientInvoice/GetPaymentTerm?"+t)},async LoadParentChildClientList(t){return await n["a"].instance.get("/BillingRule/LoadParentChildClientList?"+t)},async GetCompanyByParentCompanyId(t){return await n["a"].instance.get("/BillingRule/GetCompanyByParentCompanyId?"+t)},async LoadInvoiceMemoPo(t){return await n["a"].instance.get("/ClientInvoice/LoadInvoiceMemoPo?"+t)},async LoadLineItems(t){return await n["a"].instance.get("/ClientInvoice/LoadLineItems?"+t)},async GetConfigurationValueByKey(t){return await n["a"].instance.get("/BillingRule/GetConfigurationValueByKey?"+t)},async LoadTemplateBySetupId(t){return await n["a"].instance.get("/BillingRule/LoadTemplateBySetupId?"+t)},async LoadFields(t){return await n["a"].instance.get("/ClientInvoice/LoadFields?"+t)},async GetDiscount(t){return await n["a"].instance.get("/ClientInvoice/GetDiscount?"+t)},async AddDiscount(t){return await n["a"].instance.post("/ClientInvoice/AddDiscount",t)},async SaveWorkCode(t){return await n["a"].instance.post("/ClientInvoice/SaveWorkCode",null,{params:{workCodeId:t.workCodeId,workCode:t.workCode,lineIds:t.lineIds,reqFrom:t.reqFrom,allInvoice:t.allInvoice,xmlData:t.xmlData,isAdder:t.isAdder,adderName:t.adderName,lineBatchId:t.lineBatchId,invoiceBillId:t.invoiceBillId}})},async GetNoteList(t){return await n["a"].instance.get("/Client/NoteList?"+t)},async GetNoteById(t){return await n["a"].instance.get("/Client/EditNote?"+t)},async DeleteNote(t){return await n["a"].instance.post("/Client/DeleteNote",t)},async AddNoteUtilityDivision(t){return await n["a"].instance.post("/Client/AddNoteUtilityDivision",t)},async MarkAsNonVisible(t){return await n["a"].instance.post("/ClientInvoice/MarkAsNonVisible",t)},async SaveInvoice(t){return await n["a"].instance.post("/ClientInvoice/Save",t)},async GetTemplateListing(t){return await n["a"].instance.get("/GetTemplateListing?"+t)},async GetSetupList(t){return await n["a"].instance.get("/GetTemplateRecords?"+t)},async SaveTemplate(t){return await n["a"].instance.post("/SaveTemplate",t)},async GetTemplateFieldMapping(t){return await n["a"].instance.get("/TemplateFieldMapping?"+t)}},s={async getLookupItems({type:t,category:e,search:a,page:i=1,limit:s=50,filters:o={}}){const r=new URLSearchParams({type:t,page:i.toString(),limit:s.toString()});return a&&a.length>=2&&r.append("search",a),e&&r.append("category",e),Object.entries(o).forEach(([t,e])=>{null!==e&&void 0!==e&&""!==e&&r.append(`filters[${t}]`,e.toString())}),n["a"].instance.get("/lookup?"+r)},async getLookupItem(t,e){return n["a"].instance.get(`/lookup/${t}/${e}`)},async getSupportedTypes(){return n["a"].instance.get("/lookup/types")}}},b2f8:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"",""]),t.exports=e},cd9b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100",attrs:{id:"divadddata"}},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("section",{staticClass:"main-content",attrs:{id:"divMainContent"}},[a("div",{staticClass:"headingcont margintop10 marginleft_2",staticStyle:{display:"none"},attrs:{id:"PartialView_SiteMapLink","data-title":t.title}}),t.loggedUserInfo&&"CA"===t.loggedUserInfo.UserType?a("div",{staticClass:"user-guide-custom d-none"},[a("div",{domProps:{innerHTML:t._s(t.userGuideImport)}})]):t._e(),a("section",{staticClass:"main-content"},[a("div",{staticClass:"container-fluid padding-t_10 px-0"},[a("input",{attrs:{id:"currentController",name:"currentController",type:"hidden",value:"BillingRule"}}),a("input",{attrs:{id:"currentAction",name:"currentAction",type:"hidden",value:"ImportFormatListing"}}),a("input",{attrs:{id:"currentBreadcrumbAction",name:"currentBreadcrumbAction",type:"hidden",value:"Import"}}),t.loggedUserInfo&&"CA"===t.loggedUserInfo.UserType?a("div"):t._e(),a("div",{staticClass:"col-md-12 p-0"},[a("div",{attrs:{id:"myTabContent"}},[a("div",{staticClass:"tab-pane call-detail fade show active border-0 p-0",attrs:{id:"General",role:"tabpanel","aria-labelledby":"General-tab"}},[t.loggedUserInfo&&"CA"===t.loggedUserInfo.UserType?a("div",[a("section",{staticClass:"page-action"},[a("div",{staticClass:"container-fluid border-0 m-0 p-0"},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("Setup")))])])])])])])]):t._e(),a("div",{staticClass:"container-fluid border pt-2 pb-2"},[a("div",{staticClass:"billing-rule"},[a("dynamic-form",{ref:"dynamicform",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.$t("MandatoryString")},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-SampleFile",fn:function(e){e.data;return[a("div",{staticClass:"col-lg-12 col-xl-12 p-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"form-control"},[a("span",{staticClass:"text-truncate"},[t._v("Download Import Sample File")])]),a("div",{staticClass:"input-group-append"},[a("a",{staticClass:"input-group-text",attrs:{href:"javascript:;",title:"Download",checkprivilege:"no"}},[a("i",{staticClass:"fa fa-download action-icon"})])])])])])]}}])})],1)])])])])])])])],1)},i=[],s=(a("14d9"),a("b7ef"),a("750f")),o=a("b0ac"),r=a("4892"),l={name:"Import",components:{Loader:r["a"]},data(){return{isLoading:!1,title:"",userGuideImport:"",FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Setup")+" "+this.$t("Name"),name:"SetupName",value:"",placeholder:"",visibility:!0,validationRules:{required:!0}},{astype:"NormalFileField",label:this.$t("UploadFile"),name:"FileSrc",placeholder:"",validationRules:{required:!0},FieldIndex:0,config:{maxSize:10,showSelectedFiles:[],accept:[{fileType:"xlsx",iconClass:"fa-file-excel-o"},{fileType:"xls",iconClass:"fa-file-excel-o"},{fileType:"csv",iconClass:"fa-file-text-o"}],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-info",text:"<i class='fa fa-download pr-2'></i>"+this.$t("Import")},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.cancel}],file:null}},computed:{loggedUserInfo(){return Object(o["b"])().GetUserInfo}},created(){this.title=this.$t("Import"),this.userGuideImport=this.$t("User_Guide_Import_Billing_Setup")||""},methods:{GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files;e.attachmentName=a[0].name;for(var n=0;n<a.length;n++){var i=a[n],s=new FileReader;s.onload=function(t){return function(t){var a=t.target.result,n=window.btoa(a);e.base64String=n;var s=i.name,o=s.lastIndexOf("."),r=s.substring(o+1,s.length),l='{"ContentType":"'+i.type+'","Size":"'+i.size+'","Extension":"'+r+'"}',c=(i.size,{attachement_mime:l,fileName:s,userId:e.GetUserInfo.ID,companyId:e.GetUserInfo.CompanyId,id:0,moduleName:"initialsetup",subModuleCode:"BulkUploaad",containerName:e.GetUserInfo.ContainerName,base64String:n,attachement_path:""});e.fileData.push(c)}}(),s.readAsBinaryString(i)}}catch(o){}},onDeleteSelectedFiles(){this.file=null},async onSubmit(t){this.isLoading=!0;var e=this;let a={file_Name:this.fileData[0].fileName,attachment:JSON.stringify(this.fileData)},n=new FormData;n.append("postString",JSON.stringify(a));const i=await s["a"].UploadFile(n);i.data&&i.data.length>0&&i.data[0].Name.length>0&&(e.filePath=i.data[0].Name);var o=e.filePath,r="templateName="+t.SetupName+"&excelfilepath="+encodeURIComponent(o);s["a"].ImportSetupDataFromExcel(r).then(t=>{e.isLoading=!1,t.data&&(e.SetupId=t.data.setupId,e.$router.push({name:"SetupTemplate",params:{setupId:e.SetupId,isEditable:0,Update:!1}}))})},cancel(){this.$router.push({name:"ImportFormatListing"})}}},c=l,d=(a("63c5"),a("0c7c")),u=Object(d["a"])(c,n,i,!1,null,"7b63d406",null);e["default"]=u.exports},e679:function(t,e,a){var n=a("b2f8");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("524af8fc",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-42d34280.js.map