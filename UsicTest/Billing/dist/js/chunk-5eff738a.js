(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5eff738a"],{"71dc":function(t,e,a){"use strict";a("ec31")},"750f":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));a("88a7"),a("271a"),a("5494");var s=a("c427");const i={getClientList(t){return s["a"].instance.get("/lookups/clients-group-by-account?"+t)},getUtilityList(t){return s["a"].instance.get("/lookups/talygen-utilities-by-client?"+t)},getFlagList(){return s["a"].instance.get("/lookups/GetFlagList")},async GetStateList(t){return await s["a"].instance.get("/lookups/state-list-by-country-code?"+t)},async GetFlagType(t){return await s["a"].instance.get("/lookups/flag-type")},async GetCostCenters(t){return await s["a"].instance.get("/lookups/cost-centers")},async GetFlagRecords(t){return await s["a"].instance.get("/GetFlagRecords?"+t)},SaveColumnItems(t){return s["a"].instance.post("/lookups/SaveColumnItems",t)},DoNotProcessLineItems(t){return s["a"].instance.post("/lookups/DoNotProcessLineItems",t)},async GetFieldsListBySetupId(t){return await s["a"].instance.get("/lookups/GetFieldsListBySetupId?"+t)},async LoadFlagFieldDropDown(t){return await s["a"].instance.get("/lookups/LoadFlagFieldDropDown?"+t)},async GetSbaIdListByUtilityId(t){return await s["a"].instance.get("/lookups/GetSbaIdListByUtilityId?"+t)},GetTicketTypes(){return s["a"].instance.get("/lookups/GetTicketTypes")},GetStatusCodes(){return s["a"].instance.get("/lookups/GetStatusCodes")},async LoadAdditionalInfoByClientId(t){return await s["a"].instance.get("/lookups/LoadAdditionalInfoByClientId?"+t)},async GetExceptionRecord(t){return await s["a"].instance.get("/lookups/GetExceptionRecord?"+t)},UpdateException(t){return s["a"].instance.post("/lookups/UpdateException",t)},async GetCDC_CodePagedList(t){return await s["a"].instance.get("/lookups/GetCDC_CodePagedList?"+t)},CommonUpdateStatus(t){return s["a"].instance.post("/lookups/CommonUpdateStatus",t)},async ViewTicketImage(t){return await s["a"].instance.get("/lookups/ViewTicketImage?"+t)},async GetBilledUnbilledRecords(t){return await s["a"].instance.get("/GetBilledUnbilledRecordsListing?"+t)},async GetUnprocessedRecords(t){return await s["a"].instance.get("/GetUnprocessedRecords?"+t)},async GetTicketLog(t){return await s["a"].instance.get("/GetTicketLog?"+t)},async GetChildTicketLog(t){return await s["a"].instance.get("/GetChildTicketLog?"+t)},async GetChildTicketLogNew(t){return await s["a"].instance.get("/GetChildTicketLogNew?"+t)},GetWorkCodeData(){return s["a"].instance.get("/lookups/GetWorkCodeData")},async GetDivisionDropdownData(t){return await s["a"].instance.get("/lookups/GetDivisionDropdownData?"+t)},async GetActivityIdDropdownListByTicketNumber(t){return await s["a"].instance.get("/lookups/GetActivityIdDropdownListByTicketNumber?"+t)},async GetInvoiceLineItem(t){return await s["a"].instance.get("/lookups/GetInvoiceLineItem?"+t)},async GetColumnId(t){return await s["a"].instance.get("/lookups/GetColumnId?"+t)},async LoadRateByWorkCode(t){return await s["a"].instance.get("/lookups/LoadRateByWorkCode?"+t)},async ChildTicketLogNew(t){return await s["a"].instance.get("/lookups/ChildTicketLogNew?"+t)},async LoadClientDivisionList(t){return await s["a"].instance.get("/lookups/client-divisions?"+t)},UpdateInvoiceLineItem(t){return s["a"].instance.post("/lookups/UpdateInvoiceLineItem",t)},async ChildTicketLog(t){return await s["a"].instance.get("/lookups/ChildTicketLog?"+t)},async ChildTicketLogNew(t){return await s["a"].instance.get("/lookups/ChildTicketLogNew?"+t)},SaveAndProcessLineItemsForInvoice(t){return s["a"].instance.post("/lookups/SaveAndProcessLineItemsForInvoice",t)},async GetAuditRecords(t){return await s["a"].instance.get("/ClientInvoice/AuditRecords?"+t)},async GetBulkMoveListing(t){return await s["a"].instance.get("/GetBulkMoveListing?"+t)},async GetBulkMoveQueueList(t){return await s["a"].instance.get("/GetBulkMoveQueueList?"+t)},async getUserList(t){return await s["a"].instance.get("/lookups/GetUserList?"+t)},async LoadClientDivisionListByUtilityIds(t){return await s["a"].instance.get("/lookups/LoadDivisionListByUtilityId?"+t)},async LoadInvoiceNumberList(t){return await s["a"].instance.get("/lookups/LoadInvoiceNumberList?"+t)},ValidateBMUtilitySbaIdInvoiceNo(t){return s["a"].instance.post("/lookups/ValidateBMUtilitySbaIdInvoiceNo",t)},UpdateContractAndUtility(t){return s["a"].instance.post("/lookups/UpdateContractAndUtility",t)},async UploadFile(t){return s["a"].instance.post("/lookups/UploadFile?",t)},async GetBulkMoveAdvanceListing(t){return await s["a"].instance.get("/GetBulkMoveAdvanceListing?"+t)},BulkMoveAdvancePostData(t){return s["a"].instance.post("/lookups/BulkMoveAdvancePostData",t)},UpdateAdvanceBulkMoveLineIds(t){return s["a"].instance.post("/lookups/UpdateAdvanceBulkMoveLineIds",t)},async SetupListing(t){return await s["a"].instance.get("/GetSetupListing?"+t)},async GetSetupUpdateRecords(t){return await s["a"].instance.get("/GetSetupUpdateRecords?"+t)},SubmitTemplateMapping(t){return s["a"].instance.post("/SubmitTemplateMapping",t)},UpdateTemplateMapping(t){return s["a"].instance.post("/UpdateTemplateMapping",t)},DeleteColumn(t){return s["a"].instance.post("/DeleteColumn",t)},async DeleteItems(t){return await s["a"].instanceCommon.post("/Common/Delete?"+t)},async ImportSetupDataFromExcel(t){return await s["a"].instance.get("/ImportSetupDataFromExcel?"+t)},async GetSetupTemplate(t){return await s["a"].instance.get("/GetSetupTemplate?"+t)},async GetPaymentTerm(t){return await s["a"].instance.get("/ClientInvoice/GetPaymentTerm?"+t)},async LoadParentChildClientList(t){return await s["a"].instance.get("/BillingRule/LoadParentChildClientList?"+t)},async GetCompanyByParentCompanyId(t){return await s["a"].instance.get("/BillingRule/GetCompanyByParentCompanyId?"+t)},async LoadInvoiceMemoPo(t){return await s["a"].instance.get("/ClientInvoice/LoadInvoiceMemoPo?"+t)},async LoadLineItems(t){return await s["a"].instance.get("/ClientInvoice/LoadLineItems?"+t)},async GetConfigurationValueByKey(t){return await s["a"].instance.get("/BillingRule/GetConfigurationValueByKey?"+t)},async LoadTemplateBySetupId(t){return await s["a"].instance.get("/BillingRule/LoadTemplateBySetupId?"+t)},async LoadFields(t){return await s["a"].instance.get("/ClientInvoice/LoadFields?"+t)},async GetDiscount(t){return await s["a"].instance.get("/ClientInvoice/GetDiscount?"+t)},async AddDiscount(t){return await s["a"].instance.post("/ClientInvoice/AddDiscount",t)},async SaveWorkCode(t){return await s["a"].instance.post("/ClientInvoice/SaveWorkCode",t)},async GetNoteList(t){return await s["a"].instance.get("/Client/NoteList?"+t)},async GetNoteById(t){return await s["a"].instance.get("/Client/EditNote?"+t)},async DeleteNote(t){return await s["a"].instance.post("/Client/DeleteNote",t)},async AddNoteUtilityDivision(t){return await s["a"].instance.post("/Client/AddNoteUtilityDivision",t)},async MarkAsNonVisible(t){return await s["a"].instance.post("/ClientInvoice/MarkAsNonVisible",t)},async SaveInvoice(t){return await s["a"].instance.post("/ClientInvoice/Save",t)},async GetTemplateListing(t){return await s["a"].instance.get("/GetTemplateListing?"+t)},async GetSetupList(t){return await s["a"].instance.get("/GetTemplateRecords?"+t)},async SaveTemplate(t){return await s["a"].instance.post("/SaveTemplate",t)},async GetTemplateFieldMapping(t){return await s["a"].instance.get("/TemplateFieldMapping?"+t)}},n={async getLookupItems({type:t,category:e,search:a,page:i=1,limit:n=50,filters:o={}}){const l=new URLSearchParams({type:t,page:i.toString(),limit:n.toString()});return a&&a.length>=2&&l.append("search",a),e&&l.append("category",e),Object.entries(o).forEach(([t,e])=>{null!==e&&void 0!==e&&""!==e&&l.append(`filters[${t}]`,e.toString())}),s["a"].instance.get("/lookup?"+l)},async getLookupItem(t,e){return s["a"].instance.get(`/lookup/${t}/${e}`)},async getSupportedTypes(){return s["a"].instance.get("/lookup/types")}}},ec31:function(t,e,a){var s=a("fe8c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("44baefa4",s,!0,{sourceMap:!1,shadowMode:!1})},fad4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 p-0",attrs:{id:"projectdtl"}},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("section",{staticClass:"main-content",attrs:{id:"divMainListData"}},[a("div",{staticClass:"headingcont margintop10 marginleft_2",staticStyle:{display:"none"},attrs:{id:"PartialView_SiteMapLink","data-title":t.title}}),a("div",{staticClass:"user-guide-custom d-none"},[t.isUpdate?a("div",{domProps:{innerHTML:t._s(t.userGuideUpdate)}}):a("div",{domProps:{innerHTML:t._s(t.userGuideAdd)}})]),a("section",{staticClass:"main-content"},[a("div",{staticClass:"container-fluid padding-t_10 px-0"},[a("div",{staticClass:"col-md-12 p-0",attrs:{id:"myTabContent"}},[a("section",{staticClass:"page-action action-margin"},[a("div",{staticClass:"container-fluid p-0"},[a("div",{staticClass:"tablehead",attrs:{id:"divShowlistingData"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[t.isUpdate?a("span",[t._v(t._s(t.$t("SetupName"))+": "+t._s(t.templateName))]):a("span",[t._v(t._s(t.$t("SetupMapping")))])]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white iconenable",class:{disabled:0===t.selectedItems.length},attrs:{href:"javascript:;",title:t.$t("Selectanyrecordtodelete"),id:"DeleteMultipleChk"},on:{click:t.deleteMultiple}},[a("i",{staticClass:"fa fa-trash"}),a("br"),t._v(t._s(t.$t("Delete")))]),t.isUpdate?a("a",{staticClass:"p-action-btn text-white",attrs:{id:"ancbacktolist",title:t.$t("BacktoList")},on:{click:t.backToListUrl}},[a("i",{staticClass:"fa fa-angle-double-left"}),a("br"),t._v(t._s(t.$t("BacktoList"))+" ")]):t._e()])])])]),a("div",{staticClass:"col-md-12 p-0 pt-2",class:{"d-none":t.isUpdate}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Setup"))+" "+t._s(t.$t("Name"))+":"),a("span",{})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.templateName,expression:"templateName"}],staticClass:"form-control",attrs:{type:"text",id:"SetupName",name:"TemplateName",readonly:""},domProps:{value:t.templateName},on:{input:function(e){e.target.composing||(t.templateName=e.target.value)}}})])])])]),a("div",{staticClass:"tab-pane call-detail fade p-0 active show pb-3",class:{"mt-2":t.isUpdate},attrs:{id:"ProjectList",role:"tabpanel","aria-labelledby":"ProjectList-tab"}},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive",attrs:{id:"projectdtl"}},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",staticStyle:{"min-width":"1200px"},attrs:{id:"tblProjectList"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col",width:"30px"}},[a("div",{staticClass:"form-check form-check-inline"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],staticClass:"chkItems custom-control-input",attrs:{type:"checkbox",id:"chkAll",disabled:t.isEditable},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{change:[function(e){var a=t.selectAll,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.selectAll=a.concat([n])):o>-1&&(t.selectAll=a.slice(0,o).concat(a.slice(o+1)))}else t.selectAll=i},t.toggleSelectAll]}}),a("label",{staticClass:"custom-control-label",attrs:{for:"chkAll"}})])])]),a("th",[a("span",[t._v(t._s(t.$t("ImportedField")))])]),a("th",[a("span",[t._v(t._s(t.$t("DataType")))])]),a("th",[a("span",[t._v(t._s(t.$t("fieldName")))])]),a("th",[a("span",[t._v(t._s(t.$t("CustomColumnName")))])]),a("th",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$t("IsGroupable")))])])])]),a("tbody",t._l(t.items,(function(e,s){return a("tr",{key:e.setUpColumnId},[a("td",{staticClass:"text-center"},[a("div",{staticClass:"form-check form-check-inline"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedItems,expression:"selectedItems"}],staticClass:"chkItems custom-control-input",attrs:{type:"checkbox",id:"chk_"+e.setUpColumnId,colName:e.importedColumn,colPosition:e.columnPosition,disabled:t.isEditable,name:"DeleteInputsMulti"},domProps:{value:e.setUpColumnId,checked:Array.isArray(t.selectedItems)?t._i(t.selectedItems,e.setUpColumnId)>-1:t.selectedItems},on:{change:function(a){var s=t.selectedItems,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=e.setUpColumnId,l=t._i(s,o);i.checked?l<0&&(t.selectedItems=s.concat([o])):l>-1&&(t.selectedItems=s.slice(0,l).concat(s.slice(l+1)))}else t.selectedItems=n}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+e.setUpColumnId}})])])]),a("td",[a("input",{staticClass:"form-control",staticStyle:{"pointer-events":"none"},attrs:{type:"text",name:"ImportedColumn",id:"ImportedColumn",readonly:""},domProps:{value:e.importedColumn}})]),a("td",[a("span",[t._v(t._s(e.dataType))])]),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.fieldName,expression:"item.fieldName"}],staticClass:"form-control ddlOperator",attrs:{name:"Model_"+s+"__FieldName",id:"Model_"+s+"__FieldName",disabled:t.isEditable},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"fieldName",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.getFieldsForDataType(e.dataType),(function(e){return a("option",{key:e.value,attrs:{"data-first":e.firstAttribute},domProps:{value:e.value}},[t._v(t._s(e.text))])}))],2)]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.customName,expression:"item.customName"}],staticClass:"form-control",attrs:{type:"text",name:"CustomName",id:"CustomName",maxlength:"100"},domProps:{value:e.customName},on:{input:function(a){a.target.composing||t.$set(e,"customName",a.target.value)}}})]),a("td",{staticClass:"text-center"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"switch"},[a("input",{staticClass:"dynamic custom-switch nochecked",attrs:{type:"checkbox","data-check":e.isGroupable,"data-columnposition":e.templateId,name:"IsGroupable"},domProps:{value:e.isGroupable,checked:e.isGroupable},on:{change:function(t){e.isGroupable=t.target.checked}}}),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes text-left"},[t._v(t._s(t.$t("Yes")))]),a("span",{staticClass:"slider-no text-right pr-1"},[t._v(t._s(t.$t("No")))])])])])])])})),0)])]),a("div",{staticClass:"text-right mt-3"},[a("button",{staticClass:"btn btn-success mr-2",on:{click:t.submit}},[a("em",{staticClass:"fa fa-floppy-o pr-2"}),t._v(t._s(t.$t("Save"))+" ")]),a("button",{staticClass:"btn btn-danger",on:{click:t.backToListUrl}},[a("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("Cancel"))+" ")])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0",staticStyle:{display:"none"},attrs:{id:"divadddata"}})])])])])])])])],1)},i=[],n=(a("14d9"),a("750f")),o={name:"SetupTemplate",data(){return{isLoading:!1,title:"",userGuideUpdate:"",userGuideAdd:"",templateName:"",isEditable:0,items:[],selectedItems:[],selectAll:!1,fieldDropDownList:[],setupId:null,setupDetails:[],TotalRecords:0,TotalPages:0,CurrentPage:1,PageSize:10,PageNumber:1}},created(){var t=this;this.title=this.$t("BillingSetup"),t.isUpdate=1==this.$route.params.Update,this.isEditable=1==this.$route.params.isEditable,this.setupId=this.$route.params.setupId,this.FetchData()},methods:{FetchData:async function(){var t=this,e=`setupId=${this.$route.params.setupId}&isEditable=${this.$route.params.isEditable}`;t.isUpdate?await n["a"].GetSetupUpdateRecords(e).then(t=>{this.fieldDropDownList=t.data.fieldDropDownList||[],this.isEditable=t.data.isEditable||0,this.templateName=t.data.templateName||"",this.setupDetails=t.data.setupDetails||[],this.items=this.setupDetails,this.items.forEach(t=>{t.fieldName=t.setUpColumnId||""}),this.items&&this.items.length>0?(this.TotalRecords=this.items[0].TOTAL_RECORDS||this.items[0].TOTALRECORDS||0,this.TotalPages=Math.ceil(this.TotalRecords/this.PageSize),this.CurrentPage=this.PageNumber):(this.items=[],this.TotalRecords=0)}):await n["a"].GetSetupTemplate(e).then(t=>{this.fieldDropDownList=t.data.fieldDropDownList||[],this.templateName=t.data.templateName||"",this.setupDetails=t.data.setupDetails||[],this.items=this.setupDetails,this.items.forEach(t=>{t.fieldName=t.setUpColumnId||""}),this.items&&this.items.length>0?(this.TotalRecords=this.items[0].TOTAL_RECORDS||this.items[0].TOTALRECORDS||0,this.TotalPages=Math.ceil(this.TotalRecords/this.PageSize),this.CurrentPage=this.PageNumber):(this.items=[],this.TotalRecords=0)})},getFieldsForDataType(t){return this.fieldDropDownList.filter(e=>e.firstAttribute===t)},toggleSelectAll(){this.selectAll?this.selectedItems=this.items.map(t=>t.setUpColumnId):this.selectedItems=[]},backToListUrl(){var t=this;t.$router.push({name:"ImportFormatListing"})},submit(){var t=this;this.isLoading=!0;let e="",a=[],s=[];if(this.items.forEach((t,i)=>{if(t.fieldName){e.length>0&&(e+="-"),e+=t.fieldName+"|"+this.getFieldText(t.fieldName)+"$"+t.dataType+"^"+t.customName+"~"+t.importedColumn+"%"+(t.isGroupable?1:0)+"%"+t.templateId+"%"+t.setUpColumnId;let n=this.getFieldText(t.fieldName);a.includes(n)&&s.push(i),a.push(n)}else s.push(i)}),0===e.length)return this.ShowAlert("Please select at least one.","warning",!0,this.$t("Alert")),void(this.isLoading=!1);t.isUpdate?n["a"].UpdateTemplateMapping({obj:e,setupId:this.setupId}).then(e=>{!0===e.data&&(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Setup")]),"Success",!0,t.$t("Alert")),this.backToListUrl())}).catch(()=>{this.isLoading=!1}):n["a"].SubmitTemplateMapping({obj:e,setupId:this.setupId}).then(e=>{!0===e.data&&(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Setup")]),"Success",!0,t.$t("Alert")),this.backToListUrl())}).catch(()=>{this.isLoading=!1})},getFieldText(t){let e=this.fieldDropDownList.find(e=>e.value===t);return e?e.text:""},deleteMultiple(){var t=this;let e="",a="";this.selectedItems.forEach(t=>{let s=this.items.find(e=>e.setUpColumnId===t);s&&(e+=","+s.columnPosition,a+=","+s.importedColumn)}),e=e.substring(1),a=a.substring(1),e.length>0?this.confirmR(this.$t("ConfirmDeleteRecord"),!0,"Alert",()=>{t.isUpdate?n["a"].DeleteColumn({obj:e,setupId:this.setupId}).then(t=>{!0===t.data&&(this.isLoading=!1,this.items=this.items.filter(t=>!this.selectedItems.includes(t.setUpColumnId)),this.ShowAlert(this.$t("RecordsDeleteSuccessfully"),"Success",!0,this.$t("Alert"))),this.isLoading=!1}).catch(()=>{this.isLoading=!1}):(this.items=this.items.filter(t=>!this.selectedItems.includes(t.setUpColumnId)),this.ShowAlert(this.$t("RecordsDeleteSuccessfully"),"Success",!0,this.$t("Alert")),this.isLoading=!1)}):(this.isLoading=!1,this.ShowAlert(this.$t("Selectanyrecordtodelete"),"warning",!0,this.$t("Alert")))},getRootURL(){return window.location.protocol+"//"+window.location.host}}},l=o,c=(a("71dc"),a("0c7c")),r=Object(c["a"])(l,s,i,!1,null,"2e72bcbc",null);e["default"]=r.exports},fe8c:function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,"",""]),t.exports=e}}]);
//# sourceMappingURL=chunk-5eff738a.js.map