(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32ab4b68"],{3338:function(e,a,t){var i=t("6555");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var l=t("499e").default;l("6a9f9cd8",i,!0,{sourceMap:!1,shadowMode:!1})},4803:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},["Update"===e.refCode?t("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("EditPlan")))]):"Clone"===e.refCode?t("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("cloneplan")))]):t("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("createplan")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{ref:"validatePlan",attrs:{lang:"en",mandatorytext:e.$t("MandatoryString"),buttons:e.buttons,schema:e.FormSchema},scopedSlots:e._u([{key:"tgslot-AdditionalFrequency",fn:function(a){a.data;return[t("div",[t("label",[e._v(e._s(e.$t("AdditionalFrequency"))+":")])]),t("div",{staticClass:"row"},e._l(e.frequencyOptions,(function(a,i){return t("div",{key:i,staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-3"},[t("div",{staticClass:"card-container border p-3"},[t("div",{staticClass:"form-group mb-1"}),t("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[t("input",{staticClass:"chkitems1 custom-control-input",attrs:{type:"checkbox",id:"frequency_"+i},domProps:{checked:a.checked},on:{change:function(a){return e.toggleFrequency(i,a)}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"frequency_"+i}}),t("span",{staticClass:"ml-1 font-weight-400"},[e._v(e._s(a.label))])]),t("div",{staticClass:"discount-container"},[t("label",[e._v("Discount Value (%):")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:a.discount,expression:"frequency.discount"}],staticClass:"form-control ",attrs:{type:"text",disabled:a.disabled,placeholder:"Enter discount value"},domProps:{value:a.discount},on:{input:[function(t){t.target.composing||e.$set(a,"discount",t.target.value)},function(t){return e.validateDiscountValue(a)}]}})])])])})),0)]}}])})],1)])])])],1),t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),e.isShowReport?t("div",{staticClass:"modal d-block dialog"},[t("div",{staticClass:"modal-dialog modal-lg"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("InvoiceTemplate")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseTemplate}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"listing"},[t("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.Emailcontent)}})])])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-danger",on:{click:e.CloseTemplate}},[t("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])]):e._e()],1)])],1)},l=[],n=(t("14d9"),t("b7ef"),t("88a7"),t("271a"),t("5494"),t("9769")),s={props:{callbackfunction:{type:Function,required:!1},refCode:{type:String,required:!1},editDetail:{type:Function,required:!1},billingTypeOptions:{type:Array,default:[]},IsForDetail:{type:String,required:!1}},data(){return{isMonthly:!1,isWeekly:!1,isBiWeekly:!1,isQuarterly:!1,isFourMonth:!1,isSemiAnnually:!1,isYearly:!1,additionalFrequencyList:[],discountValue:0,discountValueWeekly:0,discountValuBiWeekly:0,discountValueQuarterly:0,discountValueMonthBasis:0,discountValueSemiAnnually:0,discountValueYearly:0,isLoading:!1,noOfDays:"",value:0,CustomName:"",FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("billingtype"),name:"BillingTypeOptions",value:"",visibility:!0,config:{options:[],onChange:this.onChangeOfBillingType},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("MeterType"),name:"meterTypeId",visibility:!1,value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("CustomerType"),name:"CustomerType",value:"",visibility:!1,config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"RadioField",label:this.$t("PlanType"),name:"IsForPlan",visibility:!0,value:"2",config:{options:[{value:"1",name:"Prepaid"},{value:"2",name:"Postpaid"}],onChange:this.onChangePlanType},validationRules:{required:!0,max:100}},{astype:"TextField",label:this.$t("PlanName"),name:"PlanName",value:"",placeholder:"Enter Plan Name",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("InvoiceTemplate"),name:"InvoiceTemplate",value:"",config:{options:[],showAddIcon:!0,addIconBackground:"btn-secondary",addIcon:"fa fa-eye",onAddButtonClick:this.ShowInvoiceTemplate},placeholder:this.$t("SelectInvoiceTemplate"),validationRules:{required:!0,max:100}},{astype:"RadioField",label:this.$t("showonwebsite"),name:"isShowWebsite",value:"0",config:{options:[{value:"1",name:this.$t("Yes")},{value:"0",name:this.$t("No")}]},validationRules:{required:!1,max:100}},{astype:"RadioField",label:this.$t("showpricing"),name:"isShowPricing",value:"0",config:{options:[{value:"1",name:this.$t("Yes")},{value:"0",name:this.$t("No")}]},validationRules:{required:!1,max:100}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",config:{options:[{value:"1001",name:this.$t("Active")},{value:"1002",name:this.$t("Inactive")}]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"DateField",label:this.$t("EffectiveDate"),name:"EffectiveDate",value:"",placeholder:"",config:{format:"MM/DD/YYYY",minDate:new Date,onChange:this.setTimerDate,maxDate:!1},validationRules:{required:!0}},{astype:"DateField",label:this.$t("ExpirationDate"),name:"ExpirationDate",value:"",placeholder:"",config:{format:"MM/DD/YYYY",minDate:new Date,maxDate:!1},validationRules:{required:!1}},{astype:"SelectField",label:this.$t("BillingFrequency"),name:"BillingFrequency",value:"",visibility:"UTILITY_BILLING"!=this.billingTypeOptions[0].FEATURE_CODE,config:{options:[],onChange:this.onBillingFrequencyChange},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"RadioField",label:this.$t("NoOfDays"),name:"NoOfDays",value:0,visibility:"UTILITY_BILLING"!=this.billingTypeOptions[0].FEATURE_CODE,config:{options:[{value:0,name:"Fixed "},{value:1,name:"Custom "}],onChange:this.onNoOfDaysChange},validationRules:{max:200,required:!1}},{astype:"NumericField",label:this.$t("Custom Days "),name:"CustomDaysField",palceholder:"",value:"",validationRules:{required:!0},disabled:!1,visibility:!1,config:{onKeyUp:this.onCustomDaysChange}},{astype:"SlotField",label:"",name:"AdditionalFrequency",value:"",visibility:!1,placeholder:"",config:{options:[]},validationRules:""},{astype:"RadioField",label:this.$t("ProratedInvoice"),name:"proratedinvoice",visibility:!0,value:"0",config:{options:[{value:"1",name:this.$t("Yes")},{value:"0",name:this.$t("No")}]},validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:"",config:{rows:3},validationRules:{required:!0,max:2e3}}]},{layoutType:"single",Data:[{astype:"FileField",label:this.$t("Image"),name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,showSelectedFiles:[],accept:[{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"}],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",value:"Y",text:"<i class='fa fa-save pr-2'></i>"+this.$t("Save"),onClick:this.SaveData},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>"+this.$t("Cancel"),onClick:this.Close}],plan_Id:0,frequencyOptions:[{label:"Quarterly",frequency:"Quarterly",checked:!1,discount:"",disabled:!0},{label:"Semi Annually",frequency:"Semi-Annually",checked:!1,discount:"",disabled:!0},{label:"Yearly",frequency:"Yearly",checked:!1,discount:"",disabled:!0}],fileData:[],billingFrequencyMasterOptions:[{value:"One Time",name:this.$t("OneTime")},{value:"Monthly",name:this.$t("Recurring")+" ("+this.$t("Monthly")+")"}],showNoOfDays:!1,billingFrequencyOptions:[],Emailcontent:"",isShowReport:!1,template_id:"",Plane_id:0,GetIsForValue:2,isdiscountDisabled:!0,CompanyLogo:""}},created:async function(){let e=[],a=this;this.CompanyLogo=a.GetUserInfo.CompanyLogo,await this.GetCompanyLogo(this.CompanyLogo),"Clone"!=a.refCode&&"Update"!=a.refCode||(a.Plane_id=a.editDetail[0].PLAN_ID,a.GetIsForValue=a.editDetail[0].IS_FOR_PLAN),"Update"!=a.refCode&&"Clone"!=a.refCode||a.editDetail.length>0&&setTimeout(()=>{this.BindEditDetail(a.editDetail),a.editDetail[0].CLIENT_COUNT},500),await a.GetDDLInvoiceTemplateData(),await a.GetDDLCustomerTypeData(),await a.getMeterTypes(),a.billingFrequencyOptions=[...a.billingFrequencyMasterOptions],a.updateBillingFrequencyOptions(a.GetIsForValue),a.billingTypeOptions.length>1?(a.billingTypeOptions.forEach((function(a,t){e.push({value:a.FEATURE_CODE,name:a.FEATURE_NAME})})),a.FormSchema.forEach((function(a,t){a.Data.forEach((function(t,i){"BillingTypeOptions"==t.name&&(t.config.options=e,t.visibility=!0,a.layoutType="triple"),t.name}))}))):a.FormSchema.forEach((function(e,t){e.Data.forEach((function(t,i){"BillingTypeOptions"==t.name?("SUBSCRIPTION_BILLING"==a.billingTypeOptions[0].FEATURE_CODE&&a.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1),t.config.options.push({name:a.billingTypeOptions[0].FEATURE_NAME,value:a.billingTypeOptions[0].FEATURE_CODE}),t.value=a.billingTypeOptions[0].FEATURE_CODE,e.layoutType="double"):"CustomerType"==t.name&&"UTILITY_BILLING"==a.billingTypeOptions[0].FEATURE_CODE&&(t.visibility=!0,e.layoutType="triple",a.FormSchema[0].Data[1].visibility=!0,a.FormSchema[0].Data[2].visibility=!0)}))})),void 0!=this.$route.params.id?a.plan_Id=parseInt(this.$route.params.id):a.plan_Id=a.editDetail[0].PLAN_ID},methods:{async GetCompanyLogo(e){var a=this,t="imagename="+e;await n["a"].GetCompanyLogo(t).then(e=>{a.CompanyLogo=e.data})},toggleFrequency(e,a){const t=this.frequencyOptions[e];t.checked=a.target.checked,t.disabled=!t.checked,t.checked||(t.discount=""),console.log("frequencyOptions updated:",this.frequencyOptions)},checkboxChange(e){console.log("Checkbox changed for:",e.frequency);this.frequencyOptions.filter(e=>e.checked)},validateDiscountValue(e){const a=Number(e.discount);isNaN(a)||a<0?e.discount="":a>100&&(e.discount=100)},onBillingFrequencyChange(e){let a=this.$refs.validatePlan.getPropertyValue("BillingFrequency","value");"One Time"===a?(this.billingTypeOptions[0].FEATURE_CODE,this.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1),this.$refs.validatePlan.updateProperty("AdditionalFrequency","visibility",!1),this.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!1)):("SUBSCRIPTION_BILLING"==this.billingTypeOptions[0].FEATURE_CODE?this.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1):this.$refs.validatePlan.updateProperty("NoOfDays","visibility",!0),this.$refs.validatePlan.updateProperty("AdditionalFrequency","visibility",!0),this.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!0))},onNoOfDaysChange(e){let a=this.$refs.validatePlan.getPropertyValue("NoOfDays","value");1==a?this.$refs.validatePlan.updateProperty("CustomDaysField","visibility",!0):0==a&&this.$refs.validatePlan.updateProperty("CustomDaysField","visibility",!1)},onCustomDaysChange(e){var a=this;const t=this.$refs.validatePlan.getPropertyValue("CustomDaysField","value");return t<1?(a.ShowAlert("Minimum allowed value is 1.","warning",!0,"Alert"),void this.$refs.validatePlan.updateProperty("CustomDaysField","value","")):t>366?(a.ShowAlert("Maximum allowed value is 366.","warning",!0,"Alert"),void this.$refs.validatePlan.updateProperty("CustomDaysField","value","")):void 0},async getMeterTypes(){const e=this;try{const a=await n["a"].GetMeterTypes();if(null!==a&&void 0!==a&&a.data){const t=JSON.parse(a.data.result).data;Array.isArray(t)&&t.length>0?(t.map(a=>{e.FormSchema[0].Data[1].config.options.push({value:a.meter_id,name:a.meter_name})}),e.$refs.validatePlan.UpdateKeyValue()):console.warn("No valid data found in the response")}else console.error("Invalid response structure:",a)}catch(a){console.error("Error fetching Meter types:",a)}},setTimerDate:function(e,a,t){var i=this;"EffectiveDate"==a.name&&(i.$refs.validatePlan.updateProperty("ExpirationDate","config.minDate",e),i.$refs.validatePlan.UpdateKeyValue())},onDeleteSelectedFiles:function(e){this.$delete(this.FormSchema[4].Data[0].config,"showSelectedFiles")},GetBase64String:function(e){try{var a=this;a.fileData=[];var t=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,l=window.btoa(i),n=t.name;a.fileName=n;var s=n.lastIndexOf("."),o=n.substring(s+1,n.length);a.fileExt+="."+o;var r='{"ContentType":"'+t.type+'","Size":"'+t.size+'","Extension":"'+o+'"}',d=t.size;a.fileSize=d;var u={attachement_mime:r,fileName:n,base64String:l,fileSize:t.size,contentType:t.type};a.fileData.push(u)}}(),i.readAsBinaryString(t)}catch(l){}},onChangeOfBillingType:function(e,a){let t=this;"UTILITY_BILLING"==a.value?(t.FormSchema[0].Data[1].visibility=!0,t.FormSchema[0].Data[2].visibility=!0,t.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1)):"SUBSCRIPTION_BILLING"==a.value?t.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1):(t.FormSchema[0].Data[1].visibility=!1,t.FormSchema[0].Data[2].visibility=!1)},interpolateTemplate(e,a){return e.replace(/{{(.*?)}}/g,(e,t)=>{const i=a[t.trim()];return null!=i?i:"--"})},ShowInvoiceTemplate:async function(e,a){var t=this;let i={invoicetitle:"INVOICE",invoice:"invoice",watermarkclass:"watermark",watermarkname:"Sample Invoice",company_logo:t.CompanyLogo,clientname:"John Doe",invoicedate:"2025-07-30",duedate:"2025-08-15",invoicenumber:"INV-123456",companyname:"Acme Inc.",companyaddress:"123 Elm Street",companystate:"California",companyzipcode:"90001",companycountry:"USA",clientaddress:"456 Pine Ave",clientstate:"Nevada",clientzipcode:"89101",clientcountry:"USA",deliveraddress:"789 Maple Rd",deliverstate:"Texas",deliverzipcode:"73301",delivercountry:"USA",plan_name:"Premium Plan",plan_type:"Monthly",from_date:"2025-07-01",to_date:"2025-07-31",symbol:"$",items:'\n                <tr>\n                <td style="text-align:left;">Website Hosting</td>\n                <td>1</td>\n                <td>$100</td>\n                <td>$100</td>\n                </tr>\n            ',subtotal:"$100",discounttaxadjustments:"No Discount",nettotal:"$100",paymentterms:"<p>Please make payment within 15 days.</p>",status_name:"Paid",dueamount:"$30",afterduedate:"$33"},l=t.$refs.validatePlan.getPropertyValue("InvoiceTemplate","value");if(l>0){t=this;t.isLoading=!0;var s="emailcontentId="+l;await n["a"].GetEmailcontent(s).then(e=>{null==e.data&&""==e.data||(t.Emailcontent=t.interpolateTemplate(e.data[0].TEMPLATE_CONTENT,i))}),t.isShowReport=!0,t.isLoading=!1}else t.ShowAlert(t.$t("PleaseSelectTemplate"),"warning")},updateBillingFrequencyOptions(e="2"){const a=this;"2"==e?(a.billingFrequencyOptions=a.billingFrequencyMasterOptions.filter(e=>"One Time"!==e.value),a.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!1)):(a.billingFrequencyOptions=[...a.billingFrequencyMasterOptions],a.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!0)),"SUBSCRIPTION_BILLING"==a.billingTypeOptions[0].FEATURE_CODE&&a.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1);const t=a.$refs.validatePlan.getPropertyValue("BillingFrequency","value");"One Time"===t&&this.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!1),a.$refs.validatePlan.updateProperty("BillingFrequency","config.options",a.billingFrequencyOptions),a.$refs.validatePlan.UpdateKeyValue()},onChangePlanType:function(e,a){this.updateBillingFrequencyOptions(a.value)},Close:function(){var e=this;"Update"==e.refCode||"Clone"==e.refCode?(e.$parent.isCheckEditPlan=!1,e.$parent.isEditPlan=!1,e.$parent.refCode):e.$parent.isEditPlan=!1},CloseTemplate:function(){var e=this;e.isShowReport=!1},BindEditDetail:function(e){var a=this;if(e[0].PLAN_IMAGE_URL){let i=new URL(e[0].PLAN_IMAGE_URL),l=i.pathname.startsWith("/")?i.pathname:"/"+i.pathname,n=l.replace(/^\/+/,""),s=n.split("/").pop();var t={attachmentName:s,attachmentPath:n};null!=n&&null!=s&&a.FormSchema[3].Data[0].config.showSelectedFiles.push(t)}if("UTILITY_BILLING"==e[0].PLAN_CODE?(a.FormSchema[0].Data[1].visibility=!0,a.FormSchema[0].Data[2].visibility=!0):(a.FormSchema[0].Data[1].visibility=!1,a.FormSchema[0].Data[2].visibility=!1),a.$refs.validatePlan.updateProperty("BillingTypeOptions","value",e[0].PLAN_CODE),a.$refs.validatePlan.updateProperty("meterTypeId","value",e[0].METER_TYPE_ID),a.$refs.validatePlan.updateProperty("IsForPlan","value",e[0].IS_FOR_PLAN),1==e[0].IS_FOR_PLAN?a.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!1):a.$refs.validatePlan.updateProperty("proratedinvoice","visibility",!0),a.$refs.validatePlan.updateProperty("PlanName","value",e[0].PLAN_NAME),a.$refs.validatePlan.updateProperty("Status","value",e[0].STATUS_ID),a.$refs.validatePlan.updateProperty("InvoiceTemplate","value",e[0].INVOICE_TEMPLATE_ID),a.$refs.validatePlan.updateProperty("EffectiveDate","value",e[0].EFFECTIVE_DATE),a.$refs.validatePlan.updateProperty("ExpirationDate","value",e[0].EXPIRATION_DATE),a.$refs.validatePlan.updateProperty("CustomerType","value",e[0].CUSTOMER_SEGMENT_ID),a.$refs.validatePlan.updateProperty("Description","value",e[0].PLAN_DESCRIPTION),a.$refs.validatePlan.updateProperty("BillingFrequency","value",e[0].PAYMENT_TYPE),"One Time"===e[0].PAYMENT_TYPE?(e[0].PLAN_CODE,a.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1),a.$refs.validatePlan.updateProperty("AdditionalFrequency","visibility",!1)):"SUBSCRIPTION_BILLING"==e[0].PLAN_CODE?(a.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1),a.$refs.validatePlan.updateProperty("AdditionalFrequency","visibility",!0)):"UTILITY_BILLING"==e[0].PLAN_CODE?(a.$refs.validatePlan.updateProperty("NoOfDays","visibility",!1),a.$refs.validatePlan.updateProperty("AdditionalFrequency","visibility",!1)):(a.$refs.validatePlan.updateProperty("NoOfDays","visibility",!0),a.$refs.validatePlan.updateProperty("AdditionalFrequency","visibility",!0)),a.$refs.validatePlan.updateProperty("no_of_plan","value",e[0].no_of_plan),a.$refs.validatePlan.updateProperty("NoOfDays","value",e[0].NoOfDays),this.onNoOfDaysChange(e[0].NoOfDays),1==e[0].NoOfDays?(a.$refs.validatePlan.updateProperty("CustomDaysField","visibility",!0),a.$refs.validatePlan.updateProperty("CustomDaysField","value",e[0].no_of_plan)):a.$refs.validatePlan.updateProperty("CustomDaysField","visibility",!1),a.$refs.validatePlan.updateProperty("isShowWebsite","value",1==e[0].IS_SHOW_ON_WEBSITE?"1":"0"),a.$refs.validatePlan.updateProperty("isShowPricing","value",1==e[0].IS_SHOW_ON_PRICING?"1":"0"),a.$refs.validatePlan.updateProperty("proratedinvoice","value",1==e[0].IS_PRORATED_INVOICE?"1":"0"),e[0].ADDITIONAL_FREQUENCY){const t=JSON.parse(`[${e[0].ADDITIONAL_FREQUENCY}]`);a.frequencyOptions=a.frequencyOptions.map(e=>{const a=t.find(a=>a.frequency===e.frequency);return a?{...e,discount:a.discount||"",checked:!!a.frequency,disabled:!a.frequency}:{...e,discount:"",selected:!1,disabled:!0}})}a.$refs.validatePlan.UpdateKeyValue()},GetDDLCustomerTypeData:function(){var e=this,a="id=&moduleName=&type=CUSTOMER_TYPE&search=";n["a"].GetDDLData(a).then(a=>{if(a.data){var t=a.data;null!=t&&(e.$refs.validatePlan.updateProperty("CustomerType","config.options",a.data.DATA),e.$refs.validatePlan.UpdateKeyValue())}})},GetDDLInvoiceTemplateData:function(){var e=this,a="id=&moduleName=&type=PLAN_BILL_TEMPLATE&search=";n["a"].GetDDLData(a).then(a=>{if(a.data){var t=a.data;null!=t&&(e.$refs.validatePlan.updateProperty("InvoiceTemplate","config.options",a.data.DATA),e.$refs.validatePlan.UpdateKeyValue())}})},async SaveData(){const e=this,a=await e.$refs.validatePlan.validateForm.validate();if(!a)return;let t=e.$refs.validatePlan.getPropertyValue("meterTypeId","value"),i="1"==e.$refs.validatePlan.getPropertyValue("isShowWebsite","value"),l="1"==e.$refs.validatePlan.getPropertyValue("isShowPricing","value"),s=e.$refs.validatePlan.getPropertyValue("IsForPlan","value"),o=e.$refs.validatePlan.getPropertyValue("PlanName","value"),r=e.$refs.validatePlan.getPropertyValue("Status","value"),d=e.$refs.validatePlan.getPropertyValue("InvoiceTemplate","value"),u=e.$refs.validatePlan.getPropertyValue("CustomerType","value"),c=e.$refs.validatePlan.getPropertyValue("EffectiveDate","value"),p=e.$refs.validatePlan.getPropertyValue("ExpirationDate","value"),y=e.$refs.validatePlan.getPropertyValue("Description","value"),v=e.$refs.validatePlan.getPropertyValue("BillingTypeOptions","value"),m=e.$refs.validatePlan.getPropertyValue("BillingFrequency","value"),f="1"==e.$refs.validatePlan.getPropertyValue("proratedinvoice","value"),h=Number(e.$refs.validatePlan.getPropertyValue("NoOfDays","value")),P=null;1===h&&(P=e.$refs.validatePlan.getPropertyValue("CustomDaysField","value"));let g=[];"one time"!==(m||"").toLowerCase()&&(g=e.frequencyOptions.filter(e=>e.checked).map(a=>({plan_additional_frequency_id:a.id||0,plan_id:e.plan_Id||0,frequency:a.frequency,discount:a.discount||0,status_id:1})));const b=0===e.plan_Id||null===e.plan_Id||void 0===e.plan_Id,D={id:b?0:e.plan_Id,meterTypeId:t,isShowWebsite:i,isShowPricing:l,isForPlan:s,planName:o,planCode:v,status:r,invoiceTemplate:d,effectiveDate:c,expirationDate:p,customerType:u||"0",description:y,billingFrequency:m,isproratedinvoice:f,attachment:JSON.stringify(e.fileData),NoOfPlan:P,NoOfDays:h,planAdditionalFrequencies:g};let C="Clone"===e.refCode?n["a"].ClonePlan(D):n["a"].AddUpdatePlan(D);await C.then(a=>{if(a.data&&"Success"===a.data.Status){const t=a.data.Result,i="SUBSCRIPTION_BILLING"===e.billingTypeOptions[0].FEATURE_CODE?"ManageSubscriptionPlanDetail":"ManagePlan";if("1"===a.data.Code)e.$router.push({name:i,params:{id:t}}),e.ShowAlert(e.$t("AddedPlan"),"success");else if("2"===a.data.Code)e.ShowAlert(e.$t("UpdatedPlan"),"success");else if("4"===a.data.Code)return void e.ShowAlert(e.$t("AlreadyExists",[e.$t("Plan")]),"failure",!0,e.$t("Alert"));e.Close(),"fromDetail"==e.IsForDetail?e.$parent.refreshComponent++:e.$parent.FetchData()}else e.ShowAlert(e.$t("UnknownError"),"failure",e.$t("Alert"));e.isLoading=!1})}}},o=s,r=(t("c760"),t("0c7c")),d=Object(r["a"])(o,i,l,!1,null,null,null);a["a"]=d.exports},6555:function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,"#AdditionalFrequency{flex:0 0 100%;max-width:100%}",""]),e.exports=a},c760:function(e,a,t){"use strict";t("3338")}}]);
//# sourceMappingURL=chunk-32ab4b68.js.map