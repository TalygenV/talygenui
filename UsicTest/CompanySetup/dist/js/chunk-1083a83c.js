(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1083a83c"],{1040:function(t,a,e){var s=e("4bad");a=s(!1),a.push([t.i,".table td,.table th{vertical-align:middle;text-align:center}.graph-widget-content table{font-size:14px}.thead-dark th{background-color:#343a40;color:#fff}.VueApexCharts_set_width_height{width:920!important;height:460!important}",""]),t.exports=a},2270:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",[a("section",{staticClass:"page-action action-margin tablehead mobile_d-none"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition p-actions-expand"},[a("span",{staticClass:"p-name text-white",staticStyle:{"text-transform":"capitalize"},attrs:{id:"titleName"}},[t._v(" "+t._s(t.$t("Dashboard"))+" ")])])])]),a("div",{staticClass:"col-12 mb-2 mt-2"},[t._m(0),a("div",{staticClass:"input-group col-lg-6 col-xl-4 float-right p-0"},[a("input",{attrs:{type:"hidden",id:"hdnNotifyMsg"}}),a("div",{staticClass:"col-11 d-none text-danger p-2 mt-5",attrs:{id:"divAccrualNotification"}}),a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("ChooseCompany"))+":")]),a("div",{staticClass:"input-group form-control p-0 border-0"},[a("input",{attrs:{type:"hidden",id:"hdnSearch",value:""}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCompany,expression:"selectedCompany"}],staticClass:"form-control",attrs:{id:"ddlcompanylist",tabindex:"1"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.selectedCompany=a.target.multiple?e:e[0]},t.onCompanyChange]}},[a("option",{attrs:{disabled:"",value:""}},[t._v(" "+t._s(t.$t("SelectCompany"))+" ")]),t._l(t.companyListData,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2),a("div",{staticClass:"input-group-append"},[a("RouterLink",{staticClass:"input-group-text",attrs:{to:"/Client/CompanyListing",id:"basic-addon2"}},[a("a",{staticClass:"text-dark",attrs:{title:"","data-toggle-tooltip":"tooltip","data-original-title":"View List of All Companies"}},[a("i",{staticClass:"fa fa-eye"})])])],1)])])]),a("div",{staticClass:"mx-3"},[a("ul",{staticClass:"dashbord-widget py-3"},[a("li",{staticClass:"cursor-pointer one_wid",staticStyle:{cursor:"pointer !important"}},[a("h3",{staticStyle:{width:"65%"}},[t._v(" "+t._s(null==t.billAmountData.amount_due?0:t.billAmountData.amount_due)+" "),a("br"),a("span",[t._v(t._s(t.$t("Billamountdue")))])]),a("i",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}})]),a("li",{staticClass:"cursor-pointer two_wid",staticStyle:{cursor:"pointer"}},[a("h3",[t._v(" "+t._s(null==t.billAmountData.amount_paid?0:t.billAmountData.amount_paid)+" "),a("br"),a("span",[t._v(t._s(t.$t("Lastpaidbillamount")))])]),a("i",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}})])])]),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 pb-3"},[a("div",{staticClass:"graph-widget-box"},[a("div",{staticClass:"graph-widget-heading"},[t._v(t._s(t.$t("MonthlyBillableAmount")))]),a("VueApexCharts",{staticClass:"VueApexCharts_set_width_height",attrs:{type:"bar",options:t.MonthlyBillable,series:t.MonthlyBillable.series}})],1)]),a("div",{staticClass:"col-md-6 pb-3"},[a("div",{staticClass:"graph-widget-box"},[a("div",{staticClass:"graph-widget-heading"},[t._v(t._s(t.$t("MonthlyConsumption")))]),a("VueApexCharts",{staticClass:"VueApexCharts_set_width_height",attrs:{type:"bar",options:t.MonthlyConsumption,series:t.MonthlyConsumption.series}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 pb-3"},[a("div",{staticClass:"graph-widget-box"},[a("div",{staticClass:"graph-widget-heading"},[t._v(t._s(t.$t("RecentInvoices")))]),t.invoiceData.length>0?a("div",{staticClass:"graph-widget-content table-responsive",staticStyle:{"max-height":"400px","overflow-y":"auto"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v(t._s(t.$t("Header_Projects")))]),a("th",[t._v(t._s(t.$t("IssueDate")))]),a("th",[t._v(t._s(t.$t("DueDate")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Status_MyDashboard_Module")))]),a("th",[t._v(t._s(t.$t("View")))])])]),a("tbody",t._l(t.invoiceData,(function(e,s){return a("tr",{key:e.BILL_ID},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.PROJECT_NAME||"--"))]),a("td",[t._v(t._s(t.$d(e.CREATED_AT,"short")))]),a("td",[t._v(t._s(t.$d(e.BILL_DUE_DATE,"short")))]),a("td",[t._v(t._s(e.BILL_NET_TOTAL.toLocaleString())+" ("+t._s(e.ISO_CODE)+")")]),a("td",[t._v(t._s(e.STATUS_NAME))]),a("td",[a("a",{staticClass:"text-primary",attrs:{title:"View Invoice"},on:{click:function(a){return t.ViewInvoice(e)}}},[a("i",{staticClass:"fa fa-eye"})])])])})),0)])]):a("div",{staticClass:"text-center text-danger"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])])]),a("div",{staticClass:"col-md-6 pb-3"},[a("div",{staticClass:"graph-widget-box"},[a("div",{staticClass:"graph-widget-heading"},[t._v(t._s(t.$t("OpenTickets")))]),t.ticketData.open_ticket_details.length>0?a("div",{staticClass:"graph-widget-content",staticStyle:{"max-height":"300px","overflow-y":"auto"},attrs:{id:"OpenTicketWidget"}},[a("table",{staticClass:"table table-striped table-bordered mb-0"},[a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{staticClass:"text-center"},[t._v("#")]),a("th",{staticClass:"text-center"},[t._v(t._s(t.$t("TicketNo")))]),a("th",{staticClass:"text-center"},[t._v(t._s(t.$t("Subject")))]),a("th",{staticClass:"text-center"},[t._v(t._s(t.$t("Status_MyDashboard_Module")))])])]),a("tbody",t._l(t.ticketData.open_ticket_details,(function(e,s){return a("tr",{key:e.TICKET_NUMBER},[a("td",{staticClass:"text-center"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.TICKET_NUMBER))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.TICKET_SUBJECT))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.STATUS_NAME))])])})),0)])]):a("div",{staticClass:"text-center text-danger"},[a("div",[t._v(" "+t._s(t.$t("NoRecordfound")))])])])])]),a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),t.invoiceModel?a("div",{staticClass:"modal d-block dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Invoice")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.CloseInvoiceModel}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",[t._v(t._s(t.$t("Header_Invoice"))+" #")]),a("th",[t._v(t._s(t.$t("Client_Billing")))]),a("th",[t._v(t._s(t.$t("DueDate")))]),a("th",[t._v(t._s(t.$t("Status_MyDashboard_Module")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Company")))]),a("th",[t._v(t._s(t.$t("Plan")))])])]),a("tbody",[a("tr",[a("td",[t._v(t._s(t.invoiceModelData.BILL_NUMBER))]),a("td",[t._v(t._s(t.invoiceModelData.CLIENT_NAME))]),a("td",[t._v(t._s(t.$d(t.invoiceModelData.BILL_DUE_DATE,"short")))]),a("td",[t._v(t._s(t.invoiceModelData.STATUS_NAME))]),a("td",[t._v(t._s(t.invoiceModelData.BILL_NET_TOTAL)+" "+t._s(t.invoiceModelData.ISO_CODE))]),a("td",[t._v(t._s(t.invoiceModelData.COMPANY_NAME))]),a("td",[t._v(t._s(t.invoiceModelData.PLAN_NAME))])])])])])])])])]):t._e()],1)])],1)])},i=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"mr-2 d-inline-block mt-2"},[a("span",{staticClass:"legend-Progress colorboxsquare"}),t._v(" Invoice(s) generated from milestone ")])}],o=(e("14d9"),e("9769")),n=e("1321"),l=e.n(n),d={components:{VueApexCharts:l.a},data(){return{invoiceModel:!1,invoiceModelData:"",companyListData:[],selectedCompany:"",DateColumn:[],UserId:0,pageSize:10,pageNum:1,sortBy:"",searchCondition:"",sortExp:"",checkPrivilegeaccess:"",invoiceData:"",billAmountData:"",ticketData:"",consumptionData:"",companyList:"",MonthlyBillable:{series:[{name:"Bill Amount",data:[1e3,2e3,3e3,4e3,5e3,6e3,7e3]}],chart:{toolbar:{show:!1}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{fontSize:"14px"}},axisBorder:{show:!0,color:"#999"},axisTicks:{show:!0,color:"#999",height:6}},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},yaxis:{min:0,max:9e3,tickAmount:9,labels:{style:{fontSize:"14px"}}},plotOptions:{bar:{horizontal:!1,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!1},tooltip:{enabled:!0},legend:{show:!1},title:{text:"Bill Amount",align:"center"}},MonthlyConsumption:{series:[{name:"Consumption",data:[]}],chart:{toolbar:{show:!1}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{fontSize:"14px"}},axisBorder:{show:!0,color:"#999"},axisTicks:{show:!0,color:"#999",height:6}},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},yaxis:{min:.1,max:1,tickAmount:9,labels:{style:{fontSize:"14px"}}},plotOptions:{bar:{horizontal:!1,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!1},tooltip:{enabled:!0},legend:{show:!1},title:{text:"Consumption",align:"center"}}}},async created(){this.UserId=this.GetUserInfo.ID;var t=""===this.selectedCompany?this.GetUserInfo.CompanyId:this.selectedCompany;await this.GetClientWidget(t),await this.GetTicket(t),await this.GetConsumption(t),await this.getinvoice(t),this.GetCompanyDDlData(),this.selectedCompany=t,this.CheckPrivilege(),this.updateChart()},methods:{async getinvoice(t){const a=`companyId=${t}&pageSize=${this.pageSize}&pageNum=${this.pageNum}&sortBy=${this.sortBy}&sortExp=${this.sortExp}&clientId=${this.UserId}`;await o["a"].GetDashboardInvoiceListing(a).then(t=>{t.data&&(this.invoiceData=t.data,this.invoiceData.map(t=>{if((t.BILL_DUE_DATE||t.CREATED_AT)&&(t.BILL_DUE_DATE=new Date(t.BILL_DUE_DATE),t.CREATED_AT=new Date(t.CREATED_AT)),"Sent"===t.STATUS_NAME){const a=t.BILL_NET_TOTAL;t.STATUS_NAME=a<0?"Paid":0===a?"Bill Generated":"UnPaid"}return t}))})},async onCompanyChange(){var t=""===this.selectedCompany?this.GetUserInfo.CompanyId:this.selectedCompany;await this.GetClientWidget(t),await this.GetTicket(t),await this.GetConsumption(t),await this.getinvoice(t)},ViewInvoice(t){this.invoiceModel=!0,this.invoiceModelData=t},CloseInvoiceModel(){this.invoiceModel=!1},async GetClientWidget(t){const a="Code=AMOUNT_WIDGET&companyId="+t;await o["a"].GetDashboardWidgetData(a).then(t=>{t.data&&(this.billAmountData=JSON.parse(t.data[0].Column1))})},async GetTicket(t){const a="Code=OPEN_TICKETS&companyId="+t;await o["a"].GetDashboardWidgetData(a).then(t=>{t.data&&(this.ticketData=JSON.parse(t.data[0].Column1))})},async GetConsumption(t){const a="Code=CONSUMPTION&companyId="+t;await o["a"].GetDashboardWidgetData(a).then(t=>{t.data&&(this.consumptionData=JSON.parse(t.data[0].Column1))})},CheckPrivilege(){var t="controller=Client&action=Index";o["a"].CheckPrivilege(t).then(function(t){!0===t.data&&(this.checkPrivilegeaccess=!0)}.bind(this))},GetCompanyDDlData(){const t=this,a="id=&moduleName=&type=GET_COMPANY_LIST&search=&refId=";o["a"].GetDDLData(a).then(a=>{a.data&&a.data.DATA&&a.data.DATA.length>0?t.companyListData=a.data.DATA:(t.companyListData=[],t.selectedCompany="")})},updateChart(){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a={};this.billAmountData.amount_details.forEach(t=>{a[t.MONTH]=t.AMOUNT});const e=[];for(let n=1;n<=12;n++)e.push(a[n]||0);const s=Math.max(...e),i=1e4*Math.ceil(s/1e4)||1e4;this.MonthlyBillable={...this.MonthlyBillable,series:[{name:"Bill Amount",data:e}],xaxis:{...this.MonthlyBillable.xaxis,categories:t},yaxis:{min:0,max:i,tickAmount:10,labels:{style:{fontSize:"14px"}}},tooltip:{enabled:!0,y:{formatter:t=>"$"+t.toLocaleString()}}},this.consumptionData.consumption_details.forEach(t=>{const a=parseInt(t.MONTH),e=parseFloat(t.AMOUNT);consumptionMap[a]=isNaN(e)?0:e});const o=[];for(let n=1;n<=12;n++)o.push(consumptionMap[n]||0);this.MonthlyConsumption={...this.MonthlyConsumption,series:[{name:"Consumption",data:o}],xaxis:{...this.MonthlyConsumption.xaxis,categories:t},tooltip:{enabled:!0,y:{formatter:t=>t.toFixed(2)}},yaxis:{min:0,max:Math.max(...o)>0?Math.ceil(1.2*Math.max(...o)):1,tickAmount:10,labels:{style:{fontSize:"14px"}}}}}}},c=d,r=(e("3dc4"),e("2877")),h=Object(r["a"])(c,s,i,!1,null,null,null);a["default"]=h.exports},"3dc4":function(t,a,e){"use strict";e("ed75")},ed75:function(t,a,e){var s=e("1040");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=e("499e").default;i("752eb132",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-1083a83c.js.map