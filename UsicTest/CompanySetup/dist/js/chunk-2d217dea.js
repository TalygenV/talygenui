(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217dea"],{c920:function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a._self._c;return e("div",{staticClass:"container-fluid invoice-payment p-0"},[e("loader",{attrs:{"is-visible":a.isLoading}}),e("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-12 col-xl-12 border mb-4 py-3"},[e("div",{staticClass:"card probx mt-4"},[e("div",{staticClass:"card-header"},[e("h2",{staticClass:"mb-0"},[a._v(a._s(a.$t("Payment")))])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"mb-3",attrs:{id:"ProcessPayment"}},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold"},[a._v(a._s(a.$t("PaymentMethod"))+":")])]),a.noGateways?e("div",{staticClass:"alert alert-danger text-center"},[a._v(" "+a._s(a.$t("NoPaymentGatewayDefined")||"No Payment gateway defined!")+" ")]):e("div",{staticClass:"row"},[a._l(a.paymentGateways,(function(t,r){return e("div",{key:r,staticClass:"col-md-4 mb-3"},[e("button",{staticClass:"btn w-100 py-3",class:["btn-outline-secondary",{"btn-primary text-white":a.selectedGateway===t.PaymentGatewayCode}],attrs:{type:"button"},on:{click:function(e){return a.selectGateway(t.PaymentGatewayCode)}}},[a._v(" "+a._s(t.PaymantGatewayType)+" ")])])})),a.PaymentLink?e("div",{staticClass:"col-md-4 mb-3"},[e("a",{staticClass:"btn btn-outline-info w-100 py-3",attrs:{href:a.PaymentLink,target:"_blank"}},[a._v(" "+a._s(a.$t("ExternalLink")||"External Link")+" ")])]):a._e()],2),e("input",{attrs:{type:"hidden",name:"PaymentGatewayCode"},domProps:{value:a.selectedGateway}})]),e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3"},[e("div",{staticClass:"form-group"},[e("label",[a._v(a._s(a.$t("CardType"))+":"),e("span",{staticClass:"text-danger"},[a._v("*")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.card.cardType,expression:"card.cardType"}],staticClass:"form-control",class:{"is-invalid":a.cardErrors.cardType},on:{change:[function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.card,"cardType",e.target.multiple?t:t[0])},function(e){a.cardErrors.cardType=""}]}},[e("option",{attrs:{value:"Visa"}},[a._v("Visa")]),e("option",{attrs:{value:"Master"}},[a._v("Master Card")]),e("option",{attrs:{value:"Discover"}},[a._v("Discover")]),e("option",{attrs:{value:"Amex"}},[a._v("American Express")])]),a.cardErrors.cardType?e("small",{staticClass:"text-danger"},[a._v(a._s(a.cardErrors.cardType))]):a._e()])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3"},[e("div",{staticClass:"form-group"},[e("label",[a._v(a._s(a.$t("CardNumber"))+":"),e("span",{staticClass:"text-danger"},[a._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.card.number,expression:"card.number"}],staticClass:"form-control",class:{"is-invalid":a.cardErrors.number},attrs:{type:"text"},domProps:{value:a.card.number},on:{input:[function(e){e.target.composing||a.$set(a.card,"number",e.target.value)},function(e){a.cardErrors.number=""}]}}),a.cardErrors.number?e("small",{staticClass:"text-danger"},[a._v(a._s(a.cardErrors.number))]):a._e()])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3"},[e("div",{staticClass:"form-group"},[e("label",[a._v(a._s(a.$t("NameOnCard"))+":"),e("span",{staticClass:"text-danger"},[a._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.card.name,expression:"card.name"}],staticClass:"form-control",class:{"is-invalid":a.cardErrors.name},attrs:{type:"text"},domProps:{value:a.card.name},on:{input:[function(e){e.target.composing||a.$set(a.card,"name",e.target.value)},function(e){a.cardErrors.name=""}]}}),a.cardErrors.name?e("small",{staticClass:"text-danger"},[a._v(a._s(a.cardErrors.name))]):a._e()])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3"},[e("div",{staticClass:"form-group"},[e("label",[a._v(a._s(a.$t("ExpirationDate"))+":"),e("span",{staticClass:"text-danger"},[a._v("*")])]),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-6 pr-1"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.card.expMonth,expression:"card.expMonth"}],staticClass:"form-control",class:{"is-invalid":a.cardErrors.expMonth},on:{change:[function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.card,"expMonth",e.target.multiple?t:t[0])},function(e){a.cardErrors.expMonth=""}]}},[e("option",{attrs:{disabled:"",value:""}},[a._v("Month")]),a._l(a.months,(function(t,r){return e("option",{key:r,domProps:{value:(r+1).toString().padStart(2,"0")}},[a._v(" "+a._s(t)+" ")])}))],2),a.cardErrors.expMonth?e("small",{staticClass:"text-danger"},[a._v(a._s(a.cardErrors.expMonth))]):a._e()]),e("div",{staticClass:"col-6 pl-1"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.card.expYear,expression:"card.expYear"}],staticClass:"form-control",class:{"is-invalid":a.cardErrors.expYear},on:{change:[function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.card,"expYear",e.target.multiple?t:t[0])},function(e){a.cardErrors.expYear=""}]}},[e("option",{attrs:{disabled:"",value:""}},[a._v("Year")]),a._l(a.years,(function(t){return e("option",{key:t},[a._v(a._s(t))])}))],2),a.cardErrors.expYear?e("small",{staticClass:"text-danger"},[a._v(a._s(a.cardErrors.expYear))]):a._e()])])])])]),e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3"},[e("div",{staticClass:"form-group"},[e("label",[a._v(a._s(a.$t("RemainingAmountDue"))+" 420")]),e("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:a.RechargeAmount}})])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 d-none"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block mb-2"},[a._v(a._s(a.$t("PaymentType"))+":")]),e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"form-check mr-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.paymentType,expression:"paymentType"}],staticClass:"form-check-input",attrs:{type:"radio",id:"full",value:"f"},domProps:{checked:a._q(a.paymentType,"f")},on:{change:function(e){a.paymentType="f"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"full"}},[a._v(" "+a._s(a.$t("FullBalance"))+" ")])]),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.paymentType,expression:"paymentType"}],staticClass:"form-check-input",attrs:{type:"radio",id:"partial",value:"p"},domProps:{checked:a._q(a.paymentType,"p")},on:{change:function(e){a.paymentType="p"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"partial"}},[a._v(" "+a._s(a.$t("PartialPaid"))+" ")])])])])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 d-none"},[e("div",{staticClass:"form-group"},[e("label",[a._v("Enter Amount :")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.paymentAmount,expression:"paymentAmount"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.paymentAmount},on:{input:function(e){e.target.composing||(a.paymentAmount=e.target.value)}}})])])]),e("div",{staticClass:"col-12 p-0"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"text-right"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:;"},on:{click:a.RechargePayNow}},[e("em",{staticClass:"fa fa-credit-card-alt pr-2"}),a._v(a._s(a.$t("PayNow")))])]),e("div",{staticClass:"text-right"},[e("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:function(e){return a.RechargeCancel()}}},[e("em",{staticClass:"fa fa-times pr-2"}),a._v(a._s(a.$t("Cancel"))+" ")])]),e("div",{staticClass:"col-lg-6 text-danger"},[a._v(a._s(a.$t("MandatoryString")))])])])])])])],1)},s=[],n=(t("14d9"),t("9769")),o={data(){return{isLoading:!1,IsUtilityBilling:!1,paymentHistoryData:[],paymentList:[],MainInvocieNetAmount:0,totalPayments:0,templatedata:[],companies:[],selectedCompanyId:"",paymentGateways:[],selectedGateway:"",PaymentLink:"",paymentAmount:"",paymentType:"f",card:{cardType:"Visa",number:"",name:"",expMonth:"",expYear:""},years:[],months:["January","February","March","April","May","June","July","August","September","October","November","December"],UserId:"",BillIdEnc:"",BillId:"",cardErrors:{cardType:"",number:"",name:"",expMonth:"",expYear:""},RechargeAmount:null,CompanyName:null,JsonResponse:null,TransactionId:null}},computed:{noGateways(){return(!this.paymentGateways||0===this.paymentGateways.length)&&!this.PaymentLink}},async created(){var a=this;a.RechargeAmount=a.$route.params.Amount,a.UserId=a.GetUserInfo.ID,a.CompanyName=a.GetUserInfo.CompanyName,a.generateYears(),await a.GetActiveGatewayDetail()},methods:{generateYears(){const a=(new Date).getFullYear();for(let e=0;e<15;e++)this.years.push(a+e)},async GetActiveGatewayDetail(){try{var a,e=this;e.isLoading=!0;const t=await n["a"].GetActiveGatewayDetail();if(null!==(a=t.data)&&void 0!==a&&a.result){const a=JSON.parse(t.data.result);a.forEach(a=>{if(a.parameters)try{a.parameters=JSON.parse(a.parameters)}catch(e){console.warn("Invalid parameters JSON:",a.parameters),a.parameters={}}}),e.paymentGateways=a,e.paymentGateways.length>0&&(e.selectedGateway=e.paymentGateways[0].PaymentGatewayCode,e.isLoading=!1)}else e.paymentGateways=[],e.isLoading=!1}catch(t){console.error("Error loading gateways:",t),e.paymentGateways=[],e.isLoading=!1}},selectGateway(a){this.selectedGateway=a},RechargePayNow(){var a=this;let e=!0;if(a.card.cardType||(a.cardErrors.cardType="Card type is required.",e=!1),a.card.number?/^\d{13,19}$/.test(a.card.number)||(a.cardErrors.number="Invalid card number.",e=!1):(a.cardErrors.number="Card number is required.",e=!1),a.card.name||(a.cardErrors.name="Name on card is required.",e=!1),a.card.expMonth||(a.cardErrors.expMonth="Expiration month is required.",e=!1),a.card.expYear||(a.cardErrors.expYear="Expiration year is required.",e=!1),e){var t={CardMonth:a.card.expMonth,CardNum:a.card.number,CardType:a.card.cardType,CardYear:a.card.expYear,CompanyName:a.CompanyName,CustomerId:"",InvoiceId:0,NameOnCard:a.card.name,NetAmount:a.RechargeAmount,PaidAmount:a.RechargeAmount,PaymentGatewayCode:a.selectedGateway,RefId:"",BillIdEnc:0,Description:"Wallet Recharge"},r=JSON.stringify(t);n["a"].MakeRealPartialpayment(r).then((function(e){a.isLoading=!1,a.TransactionId=e.data.data,1==e.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Payment")]),"success",!0,a.$t("Alert")),a.$router.push({name:"WalletRechargeReceipt",params:{TransactionId:a.TransactionId}})):2==e.data.status?(a.ShowAlert(a.$t("InvalidLoginCredentials"),"failure",!0,a.$t("Alert")),a.$router.push({name:"WalletRechargeReceipt",params:{TransactionId:a.TransactionId}})):(a.ShowAlert(a.$t("UnknownErrorOccur"),"failure",!0,a.$t("Alert")),a.$router.push({name:"WalletRechargeReceipt",params:{TransactionId:a.TransactionId}}))}))}},RechargeCancel(){this.$router.push({name:"WalletRecharge"})}}},l=o,c=t("2877"),i=Object(c["a"])(l,r,s,!1,null,null,null);e["default"]=i.exports}}]);
//# sourceMappingURL=chunk-2d217dea.js.map