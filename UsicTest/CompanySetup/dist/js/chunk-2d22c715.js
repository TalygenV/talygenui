(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c715"],{f2f9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("section",[e.isStripePaymentGateway?t("div",[t("form",{ref:"paymentForm",on:{submit:function(t){return t.preventDefault(),e.submitPayment.apply(null,arguments)}}},[t("div",{staticClass:"subscription-container whitebg"},[t("div",{staticClass:"content",staticStyle:{display:"flex"}},[t("div",{staticClass:"accordion shop-accordin nominus",staticStyle:{width:"70%","margin-right":"20px"}},[t("div",{staticClass:"ui-accordion-content ui-corner-bottom ui-widget-content"},[t("div",{staticClass:"form_fields pack_margtop_bot divpaymentonline"},[t("div",{staticClass:"payment-form_hs form_fields"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"cardholder-name"}},[e._v("Name On Card:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.billingDetails.name,expression:"billingDetails.name"}],staticClass:"stripe-input w-100",attrs:{type:"text",placeholder:"Name On Card"},domProps:{value:e.billingDetails.name},on:{input:function(t){t.target.composing||e.$set(e.billingDetails,"name",t.target.value)}}})]),e._m(0),e._m(1),e._m(2),t("div",{staticClass:"stripe-error",attrs:{id:"card-errors"}},[e._v(e._s(e.errorMessage))])]),e._m(3)])])])])]),t("input",{ref:"stripeToken",attrs:{type:"hidden"}}),t("input",{ref:"hdnCardType",attrs:{type:"hidden"}}),t("input",{ref:"hdnNameonCard",attrs:{type:"hidden"}}),t("input",{ref:"hdnCardNumber",attrs:{type:"hidden"}}),t("input",{ref:"hdnCardMonth",attrs:{type:"hidden"}}),t("input",{ref:"hdnCardYear",attrs:{type:"hidden"}}),t("input",{ref:"hdnCvv",attrs:{type:"hidden"}}),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")])])]):e._e()])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-group"},[t("label",[e._v("Card Number: "),t("span",{staticClass:"mandatory"},[e._v("*")])]),t("div",{staticClass:"stripe-input",attrs:{id:"card-number-element"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-group"},[t("label",[e._v("Expiry Date: "),t("span",{staticClass:"mandatory"},[e._v("*")])]),t("div",{staticClass:"stripe-input",attrs:{id:"card-expiry-element"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-group"},[t("label",[e._v("CVC: "),t("span",{staticClass:"mandatory"},[e._v("*")])]),t("div",{staticClass:"stripe-input",attrs:{id:"card-cvc-element"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"cont_99P"},[t("span",{staticClass:"mandatory pr font12"},[e._v("Fields marked with * are mandatory.")])])}],s=r("9769"),n={data(){return{stripe:null,elements:null,cardNumber:null,cardExpiry:null,cardCvc:null,errorMessage:"",billingDetails:{name:""},isStripePaymentGateway:!0,stripePublishableKey:"pk_test_51RjfwB4C6gUvp1ei45F8RMBEUh9vCrFMZgb6Qgrs78Rs9ED9gX2H0HpVm0Pv7NlHiGOc7wdJ1OtH7phwoxpJMgMY00tzECaTbs"}},async mounted(){this.isStripePaymentGateway&&(await this.loadStripeScript(),this.initializeStripe())},methods:{initializeStripe(){this.stripe=Stripe(this.stripePublishableKey),this.elements=this.stripe.elements();const e={base:{fontSize:"16px",fontFamily:"Arial, sans-serif",color:"#212529","::placeholder":{color:"#888"}},invalid:{color:"#dc3545"}};this.cardNumber=this.elements.create("cardNumber",{style:e}),this.cardExpiry=this.elements.create("cardExpiry",{style:e}),this.cardCvc=this.elements.create("cardCvc",{style:e}),this.cardNumber.mount("#card-number-element"),this.cardExpiry.mount("#card-expiry-element"),this.cardCvc.mount("#card-cvc-element"),[this.cardNumber,this.cardExpiry,this.cardCvc].forEach(e=>{e.on("change",e=>{this.errorMessage=e.error?e.error.message:""})})},async submitPayment(){console.log("this.cardNumber:",this.cardNumber);const{token:e,error:t}=await this.stripe.createToken(this.cardNumber,{name:this.billingDetails.name});if(t)this.errorMessage=this.mapStripeError(t);else{this.$refs.stripeToken.value=e.id,this.$refs.hdnCardType.value=e.card.brand,this.$refs.hdnNameonCard.value=e.card.name,this.$refs.hdnCardNumber.value=e.card.last4,this.$refs.hdnCardMonth.value=e.card.exp_month,this.$refs.hdnCardYear.value=e.card.exp_year,this.$refs.hdnCvv.value=123;var r={CardMonth:this.$refs.hdnCardMonth.value,CardNum:this.$refs.hdnCardNumber.value,CardType:this.$refs.hdnCardType.value,CardYear:this.$refs.hdnCardYear.value,CompanyName:"UtilityBilling",CustomerId:"",InvoiceId:0,NameOnCard:this.$refs.hdnNameonCard.value,NetAmount:100,PaidAmount:100,PaymentGatewayCode:"Stripe",RefId:"",BillIdEnc:0,Description:"Wallet Recharge",StripeToken:this.$refs.stripeToken.value,UniqueId:null,TransactionId:null},a=JSON.stringify(r);s["a"].MakeRealPartialpayment(a).then((function(e){vm.isLoading=!1,1==e.data.status?vm.ShowAlert(vm.$t("AddedSuccess",[vm.$t("Payment")]),"success",!0,vm.$t("Alert")):2==e.data.status?vm.ShowAlert(vm.$t("InvalidLoginCredentials"),"failure",!0,vm.$t("Alert")):vm.IsRechargeReceiptShow=!0}))}},mapStripeError(e){const t={incomplete_number:"Please enter a complete card number.",invalid_number:"The card number you entered is invalid.",incomplete_cvc:"Please enter your card's CVC.",invalid_cvc:"The CVC code you entered is incorrect.",incomplete_expiry:"Please enter the full expiration date.",invalid_expiry_year_past:"Your card's expiration year is in the past.",card_declined:"Your card was declined. Please try another payment method.",expired_card:"Your card has expired."};return t[e.code]||e.message||"Something went wrong."},loadStripeScript(){return new Promise((e,t)=>{if(document.querySelector('script[src="https://js.stripe.com/v3/"]'))return void e();const r=document.createElement("script");r.src="https://js.stripe.com/v3/",r.onload=()=>e(),r.onerror=()=>t("Stripe failed to load"),document.head.appendChild(r)})}}},d=n,l=r("2877"),c=Object(l["a"])(d,a,i,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d22c715.js.map