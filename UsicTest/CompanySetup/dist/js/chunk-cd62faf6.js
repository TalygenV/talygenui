(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd62faf6"],{"05a6":function(t,a,e){var s=e("8044");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=e("499e").default;i("649df6a0",s,!0,{sourceMap:!1,shadowMode:!1})},"1e5a":function(t,a,e){"use strict";var s=e("23e7"),i=e("9961"),r=e("dad2");s({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:i})},"1e70":function(t,a,e){"use strict";var s=e("23e7"),i=e("a5f7"),r=e("dad2");s({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:i})},"22e5":function(t,a,e){"use strict";e("8b00")},"2a62":function(t,a,e){"use strict";var s=e("c65b"),i=e("825a"),r=e("dc4a");t.exports=function(t,a,e){var n,l;i(t);try{if(n=r(t,"return"),!n){if("throw"===a)throw e;return e}n=s(n,t)}catch(c){l=!0,n=c}if("throw"===a)throw e;if(l)throw n;return i(n),e}},"384f":function(t,a,e){"use strict";var s=e("e330"),i=e("5388"),r=e("cb27"),n=r.Set,l=r.proto,c=s(l.forEach),o=s(l.keys),d=o(new n).next;t.exports=function(t,a,e){return e?i({iterator:o(t),next:d},a):c(t,a)}},"395e":function(t,a,e){"use strict";var s=e("dc19"),i=e("cb27").has,r=e("8e16"),n=e("7f65"),l=e("5388"),c=e("2a62");t.exports=function(t){var a=s(this),e=n(t);if(r(a)<e.size)return!1;var o=e.getIterator();return!1!==l(o,(function(t){if(!i(a,t))return c(o,"normal",!1)}))}},"46c4":function(t,a,e){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},4928:function(t,a,e){"use strict";e("05a6")},5388:function(t,a,e){"use strict";var s=e("c65b");t.exports=function(t,a,e){var i,r,n=e?t:t.iterator,l=t.next;while(!(i=s(l,n)).done)if(r=a(i.value),void 0!==r)return r}},"68df":function(t,a,e){"use strict";var s=e("dc19"),i=e("8e16"),r=e("384f"),n=e("7f65");t.exports=function(t){var a=s(this),e=n(t);return!(i(a)>e.size)&&!1!==r(a,(function(t){if(!e.includes(t))return!1}),!0)}},"70cc":function(t,a,e){"use strict";e("79a4")},"72c3":function(t,a,e){"use strict";var s=e("23e7"),i=e("e9bc"),r=e("dad2");s({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:i})},"79a4":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),r=e("953b"),n=e("dad2"),l=!n("intersection")||i((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));s({target:"Set",proto:!0,real:!0,forced:l},{intersection:r})},"7f65":function(t,a,e){"use strict";var s=e("59ed"),i=e("825a"),r=e("c65b"),n=e("5926"),l=e("46c4"),c="Invalid size",o=RangeError,d=TypeError,u=Math.max,C=function(t,a){this.set=t,this.size=u(a,0),this.has=s(t.has),this.keys=s(t.keys)};C.prototype={getIterator:function(){return l(i(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},t.exports=function(t){i(t);var a=+t.size;if(a!==a)throw new d(c);var e=n(a);if(e<0)throw new o(c);return new C(t,e)}},8044:function(t,a,e){var s=e("4bad");a=s(!1),a.push([t.i,"",""]),t.exports=a},8306:function(t,a,e){"use strict";e("72c3")},"83b9e":function(t,a,e){"use strict";var s=e("cb27"),i=e("384f"),r=s.Set,n=s.add;t.exports=function(t){var a=new r;return i(t,(function(t){n(a,t)})),a}},"88e6":function(t,a,e){"use strict";e("1e70")},"8b00":function(t,a,e){"use strict";var s=e("23e7"),i=e("68df"),r=e("dad2");s({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:i})},"8e16":function(t,a,e){"use strict";var s=e("7282"),i=e("cb27");t.exports=s(i.proto,"size","get")||function(t){return t.size}},"953b":function(t,a,e){"use strict";var s=e("dc19"),i=e("cb27"),r=e("8e16"),n=e("7f65"),l=e("384f"),c=e("5388"),o=i.Set,d=i.add,u=i.has;t.exports=function(t){var a=s(this),e=n(t),i=new o;return r(a)>e.size?c(e.getIterator(),(function(t){u(a,t)&&d(i,t)})):l(a,(function(t){e.includes(t)&&d(i,t)})),i}},"97dc":function(t,a,e){var s=e("4bad");a=s(!1),a.push([t.i,".table-hover tbody tr[data-v-5805e082]:hover{background:#f8f9fa}",""]),t.exports=a},9961:function(t,a,e){"use strict";var s=e("dc19"),i=e("cb27"),r=e("83b9e"),n=e("7f65"),l=e("5388"),c=i.add,o=i.has,d=i.remove;t.exports=function(t){var a=s(this),e=n(t).getIterator(),i=r(a);return l(e,(function(t){o(a,t)?d(i,t):c(i,t)})),i}},a4e7:function(t,a,e){"use strict";var s=e("23e7"),i=e("395e"),r=e("dad2");s({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:i})},a5f7:function(t,a,e){"use strict";var s=e("dc19"),i=e("cb27"),r=e("83b9e"),n=e("8e16"),l=e("7f65"),c=e("384f"),o=e("5388"),d=i.has,u=i.remove;t.exports=function(t){var a=s(this),e=l(t),i=r(a);return n(a)<=e.size?c(a,(function(t){e.includes(t)&&u(i,t)})):o(e.getIterator(),(function(t){d(a,t)&&u(i,t)})),i}},b4bc:function(t,a,e){"use strict";var s=e("dc19"),i=e("cb27").has,r=e("8e16"),n=e("7f65"),l=e("384f"),c=e("5388"),o=e("2a62");t.exports=function(t){var a=s(this),e=n(t);if(r(a)<=e.size)return!1!==l(a,(function(t){if(e.includes(t))return!1}),!0);var d=e.getIterator();return!1!==c(d,(function(t){if(i(a,t))return o(d,"normal",!1)}))}},c01e:function(t,a,e){"use strict";e("a4e7")},c1a1:function(t,a,e){"use strict";var s=e("23e7"),i=e("b4bc"),r=e("dad2");s({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:i})},c936:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 p-0"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"wallet-dashboard companywallet_db"},[t._m(0),a("section",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-4"},[a("div",{staticClass:"profile-card border p-3 ai_base totalactive"},[a("div",{staticClass:"d-flex align-items-center"},[t._m(1),a("div",{staticClass:"profile-infoo"},[a("h2",{staticClass:"mb-1"},[t._v(t._s(t.$t("TotalActiveWallets")))]),a("div",{staticClass:"font-18"},[t._v(t._s(t.WalletData.TOTAL_WALLET||0))]),a("a",{attrs:{href:"#"},on:{click:function(a){return t.OpenClientDetails()}}},[a("em",{staticClass:"fa fa-users mr-1"}),t._v(" Enable Wallet For Clients | ")]),a("span",{staticClass:"font-weight-400 text-success"},[t._v("Pending: "+t._s(t.CompanyClientCount))])])])])]),a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-4"},[a("div",{staticClass:"profile-card border p-3 ai_base totalbalance"},[a("div",{staticClass:"d-flex align-items-center"},[t._m(2),a("div",{staticClass:"profile-infoo"},[a("h2",{staticClass:"mb-1"},[t._v(t._s(t.$t("TotalWalletBalance")))]),a("div",{staticClass:"font-18"},[t._v(t._s(t.$n(t.WalletData.CURRENT_BALANCE,"currency",t.$getLocaleByCurrency(t.Currency))||0))])])])])]),a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-4"},[a("div",{staticClass:"profile-card border p-3 ai_base lowbalance"},[a("div",{staticClass:"d-flex align-items-center"},[t._m(3),a("div",{staticClass:"profile-infoo"},[a("h2",{staticClass:"mb-1"},[t._v(t._s(t.$t("LowBalanceAlerts")))]),a("div",{staticClass:"font-18"},[t._v(t._s(t.$n(t.MinimumWalletBalance,"currency",t.$getLocaleByCurrency(t.Currency))||0))]),a("div",{staticClass:"mt-0"},[a("p",{class:["small mb-0",t.WalletData.CURRENT_BALANCE>1e6?"text-success":"text-danger"]},[t._v(t._s(t.$t("Requiresattention")))])])])])])])]),t._m(4),a("section",{staticClass:"col-12 p-0 mb-4"},[a("div",{staticClass:"utilities-grid"},[a("div",{staticClass:"utility-card electricity"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-lightbulb-o text-danger"}),t._v(" "+t._s(t.$t("Electricity")))]),a("div",{staticClass:"infogrid_base"},[a("div",{staticClass:"font-22 font-weight-400"},[t._v(t._s(t.utilityConsumptionData.ELECTRIC_CONSUMPTION?t.utilityConsumptionData.ELECTRIC_CONSUMPTION:0)+" kWh")]),a("div",{staticClass:"info-grid mt-2"},[a("label",[a("span",{staticClass:"font-weight-medium"},[t._v("Avg:")]),t._v(" "+t._s(t.avarageData.ELECTRICITY_AVG_PER_USER)+" kWh per customer")])])])]),a("div",{staticClass:"utility-card water h2o"},[a("div",{staticClass:"utility-title"},[a("svg",{staticClass:"bi bi-droplet text-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"}})]),t._v(" "+t._s(t.$t("Water"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",{staticClass:"font-22 font-weight-400"},[t._v(t._s(t.utilityConsumptionData.WATER_CONSUMPTION?t.utilityConsumptionData.WATER_CONSUMPTION:0)+" gal")]),a("div",{staticClass:"info-grid mt-2"},[a("label",[a("span",{staticClass:"font-weight-medium"},[t._v("Avg:")]),t._v(" "+t._s(t.avarageData.WATER_AVG_PER_USER)+" gal per customer")])])])]),a("div",{staticClass:"utility-card gas"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-lightbulb-o text-danger"}),t._v(" "+t._s(t.$t("Gas")))]),a("div",{staticClass:"infogrid_base"},[a("div",{staticClass:"font-22 font-weight-400"},[t._v(t._s(t.utilityConsumptionData.GAS_CONSUMPTION?t.utilityConsumptionData.GAS_CONSUMPTION:0)+" CCF")]),a("div",{staticClass:"info-grid mt-2"},[a("label",[a("span",{staticClass:"font-weight-medium"},[t._v("Avg:")]),t._v(" "+t._s(t.avarageData.GAS_AVG_PER_USER)+" CCF per customer")])])])])])]),t._m(5),a("div",{staticClass:"space-y-4"},[t._m(6),a("section",{staticClass:"mt-2"},[a("div",{staticClass:"search-box mt-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.SearchData,expression:"SearchData"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Search by name or account number..."},domProps:{value:t.SearchData},on:{input:[function(a){a.target.composing||(t.SearchData=a.target.value)},t.FetchWalletListing]}})])])]),a("section",[a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Company",SubModuleCode:"",LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:[],IdentityColumn:"COMPANY_ID",listType:["List"],ListData:t.ListingData,HeaderData:t.Headers,TotalRecords:t.TotalRecords,ListDataCallBackFunction:t.FetchWalletListing,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:e}){return["CUSTOMER_NAME"==e.column.COLUMN_NAME?[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.OpenCustomerDetail(e.row)}}},[a("i",{attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(e.row.CUSTOMER_NAME)+" ")])]:t._e(),"STATUS_ID"==e.column.COLUMN_NAME?[a("div",[a("listing-status",{ref:"updatestatus",attrs:{isfor:"COMPANY_WALLET",dataid:e.row.WALLET_ID,"data-controller":"Billing_Rule",statuslist:t.StatusListForListing,item:e.row.STATUS_ID,"data-action":"index",dataselected:1001==e.row.STATUS_ID?"Active":"Inactive",callbackfunction:t.RefreshListing,isselectedvaluestring:!0,title:1001==e.row.STATUS_ID?"Active":"Inactive"}})],1),a("div",["Active"==e.row.STATUS_ID?a("span",{class:t.getStatusClassList(e.row.STATUS_ID,"STATUS_ID")},[t._v(" "+t._s(e.row.STATUS_ID)+" ")]):t._e(),"Inactive"==e.row.STATUS_ID?a("span",{class:t.getStatusClassList(e.row.STATUS_ID,"STATUS_ID")},[t._v(" "+t._s(e.row.STATUS_ID)+" ")]):t._e()])]:t._e(),"CREATED_AT"==e.column.COLUMN_NAME?[e.row.CREATED_AT?a("td",{staticClass:"text-center single-action tourguide_a"},[t._v(" "+t._s(t.$d(e.row.CREATED_AT))+" ")]):a("td",{staticClass:"text-center single-action tourguide_a"},[t._v("--")])]:t._e(),"CURRENT_BALANCE"==e.column.COLUMN_NAME?[a("span",[t._v(t._s(t.$n(e.row.CURRENT_BALANCE,"currency",t.$getLocaleByCurrency(t.Currency))))])]:t._e()]}}])})],1),t.IsRecharge?a("div",[a("AddRecharge",{attrs:{RechargeData:t.RechargeData},on:{refreshlist:t.RefreshListing}})],1):t._e(),t.IsHistory?a("div",[a("RecordsHistory",{attrs:{RecordData:t.HistroyData}})],1):t._e(),t.IsCustomerData?a("div",[a("CustomerDetail",{attrs:{CustomerData:t.CustomerData}})],1):t._e(),t.IsClientData?a("CompanyClientData",{attrs:{ClientData:t.ClientData}}):t._e()],1)],1)},i=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"heading-border heading-cust pt-2 mb-3"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Dashboard Overview")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar mr-3"},[a("em",{staticClass:"fa fa-wallet text-success"})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar mr-3"},[a("em",{staticClass:"fa fa-wallet"})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar mr-3"},[a("em",{staticClass:"fa fa-dollar",staticStyle:{color:"#e35d69"}})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"heading-border heading-cust pt-2 mb-3"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Today's Utility Consumption")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"heading-border heading-cust pt-2 mb-3"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Customer Wallets")])])])},function(){var t=this,a=t._self._c;return a("div",[a("p",{staticClass:"text-muted-foreground"},[t._v("Search, recharge, and manage customer accounts")])])}],r=(e("14d9"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-start"},[a("div",{staticClass:"d-flex flex-column"},[a("h4",{staticClass:"modal-title mb-1"},[t._v(t._s(t.$t("TransactionHistory")))])]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-lg-12 mt-0 mb-0 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(`${t.$t("Alltransactionsfor")} ${t.RecordData&&t.RecordData.CUSTOMER_NAME||"--"} (${t.RecordData&&t.RecordData.ACCOUNT_NO||"--"})`))])])])]),a("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Company",SubModuleCode:"",IdentityColumn:"COMPANY_ID",listType:["List"],ListData:t.HistoryData,HeaderData:t.Headers,TotalRecords:t.TotalRecords,ListDataCallBackFunction:t.FetchRecords,showCheckBox:!1,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod},scopedSlots:t._u([{key:"slotdata",fn:function({data:e}){return["CREATED_AT"==e.column.COLUMN_NAME?[e.row.CREATED_AT?a("td",{staticClass:"text-center single-action tourguide_a"},[t._v(" "+t._s(t.$options.filters.formatDateTime(t.toUserDateTime(e.row.CREATED_AT,e.row.TIMEZONE)))+" ")]):a("td",{staticClass:"text-center single-action tourguide_a"},[t._v("--")])]:t._e(),"AMOUNT"==e.column.COLUMN_NAME?[e.row.AMOUNT?a("span",{class:["text-right single-action tourguide_a","CREDIT"==e.row.TXN_TYPE?"text-success":"text-danger"]},[t._v(" "+t._s(("CREDIT"==e.row.TXN_TYPE?"+":"-")+t.$n(e.row.AMOUNT,"currency",t.$getLocaleByCurrency(t.Currency)))+" ")]):a("td",{staticClass:"text-center single-action tourguide_a"},[t._v("0")])]:t._e(),"AFTER_BALANCE"==e.column.COLUMN_NAME?[e.row.AFTER_BALANCE?a("span",{staticClass:"text-right single-action tourguide_a"},[t._v(" "+t._s(t.$n(e.row.AFTER_BALANCE,"currency",t.$getLocaleByCurrency(t.Currency)))+" ")]):a("td",{staticClass:"text-center single-action tourguide_a"},[t._v("0")])]:t._e()]}}])})],1)])])])],1)}),n=[],l=e("9769"),c={props:{RecordData:{type:Array,required:!0}},data(){return{Currency:"",isLoading:!1,client_id:0,PageNumber:1,PageSize:10,HistoryData:[],TotalRecords:0,Headers:[{COLUMN_NAME:"TRANSACTION_REFERENCE_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Transaction Reference No.",DISPLAY_ORDER:6},{COLUMN_NAME:"TXN_TYPE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Transaction Type"),DISPLAY_ORDER:2},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("DateTime"),DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"AMOUNT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Amount"),DISPLAY_ORDER:3,settings:{isInSlot:!0}},{COLUMN_NAME:"AFTER_BALANCE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Balance"),DISPLAY_ORDER:5,settings:{isInSlot:!0}}]}},created:function(){var t=this;t.Currency=t.GetUserInfo.Currency.replace(/[()]/g,""),""!=t.RecordData&&(t.client_id=t.RecordData.CLIENT_ID,t.FetchRecords())},methods:{close(){this.$parent.IsHistory=!1},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},FetchRecords(){this.isLoading=!0;const t=`pageSize=${this.PageSize}&pageNum=${this.PageNumber}&client_id=${this.client_id}&type=ALL`;l["a"].GetCompanyWalletHistory(t).then(t=>{const a=JSON.parse(null===t||void 0===t?void 0:t.data[0].JSON_RESULT)||[],e=a.JSON_HISTORY;e.length>0?(this.HistoryData=e.map(t=>({...t,CREATED_AT:t.CREATED_AT?new Date(t.CREATED_AT):null})),this.TotalRecords=e[0].TOTAL_RECORDS):(this.HistoryData=[],this.TotalRecords=0),this.isLoading=!1})}}},o=c,d=e("2877"),u=Object(d["a"])(o,r,n,!1,null,null,null),C=u.exports,h=function(){var t=this,a=t._self._c;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-start"},[a("div",{staticClass:"d-flex flex-column"},[a("h4",{staticClass:"modal-title mb-1"},[t._v(t._s(t.$t("AddOfflineRecharge")))])]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-lg-12 mt-0 mb-3 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(`${t.RechargeData&&t.RechargeData.CUSTOMER_NAME||"--"} (${t.RechargeData&&t.RechargeData.ACCOUNT_NO||"--"})`))])])])]),a("dynamic-form",{ref:"AddRecharge",attrs:{lang:"en",buttons:t.buttons,schema:t.FromSchema,mandatorytext:t.MandatoryString},on:{OnSubmit:t.AddPaymentTranaction}})],1)])])])],1)},m=[],_={props:{RechargeData:{type:Array}},data(){return{isLoading:!1,MandatoryString:"Fields marked with an asterisk (*) are mandatory.",FromSchema:[{layoutType:"Single",Data:[{astype:"TextField",label:"Current Balance",name:"CurrentBalance",value:"0.00",validationRules:{required:!0,max:100},disabled:!0},{astype:"NumericField",label:"Recharge Amount",name:"RechargeAmount",placeholder:"0.00",validationRules:{required:!0,max:10}},{astype:"RadioField",label:"PaymentType",name:"PaymentType",value:"Cash",placeholder:"",disabled:!1,chktxtIndex:0,config:{options:[{value:"Cash",name:"Cash"},{value:"Check",name:"Check"},{value:"MoneyOrder",name:"Money Order"}]},validationRules:"required"}]},{layoutType:"double",Data:[{astype:"DateField",label:"Date",disabled:!1,name:"Date",value:new Date,placeholder:"Date",validationRules:{required:!0},config:{mode:"date",format:"M/D/YYYY",minDate:"",maxDate:new Date}},{astype:"TextField",label:"Reference",name:"Reference",value:"",validationRules:{required:!0,max:6}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:"Remark",disabled:!1,name:"Remark",value:"",placeholder:"Remark",value:"",validationRules:{required:!0,max:1e3},config:{rows:3}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",isVisible:!0},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:function(){this.isLoading=!0,this.RechargeData&&(this.FromSchema[0].Data[0].value=this.RechargeData.CURRENT_BALANCE),this.isLoading=!1},methods:{async AddPaymentTranaction(){var t=this;const a=`Amount=${t.FromSchema[0].Data[1].value}&Description=WALLET_RECHARGE&Source=Admin`;try{const e=await l["a"].AddPaymentTranaction(a);e&&e.data?(t.UniqueId=e.data[0].UniqueId,t.TransactionId=e.data[0].TransactionId,await t.AddRechargeSubmit()):(t.UniqueId=null,t.TransactionId=null)}catch(e){console.error("AddPaymentTranaction error:",e)}},async AddRechargeSubmit(){var t=this;const a=await t.$refs.AddRecharge.validateForm.validate();if(a&&t.FromSchema[0].Data[1].value>0){t.isLoading=!0,t.$parent.CustomerData.CURRENT_BALANCE=t.$parent.CustomerData.CURRENT_BALANCE+Number(t.FromSchema[0].Data[1].value);var e=this.RechargeData.CLIENT_ID,s={client_id:e,rechargeAmount:t.FromSchema[0].Data[1].value,recharge_Mode:t.FromSchema[0].Data[2].value,recharge_date:t.FromSchema[1].Data[0].value,recharge_instrument_no:t.FromSchema[1].Data[1].value,recharge_remark:t.FromSchema[2].Data[0].value,action_name:"CREDIT",bank_name:"SBI",instrument_no:"",reference_no:t.TransactionId,reference_type:"TALYGEN_bill_payment_transaction"},i=JSON.stringify(s);await l["a"].AddRecharge(i).then(a=>{"Insufficient_balance"==a.data[0].Result?t.ShowAlert(t.$t("Insufficientbalance"),"failure",t.$t("Alert")):"Invalid_amount"==a.data[0].Result?t.ShowAlert(t.$t("Invalidamount"),"failure",t.$t("Alert")):"Update"==a.data[0].Result?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("Recharge")]),"success",!0,t.$t("Alert")),t.Close(),t.$emit("refreshlist")):t.ShowAlert(t.$t("UnknownError"),"failure",t.$t("Alert")),t.isLoading=!1})}else t.ShowAlert(t.$t("MandatoryString"),"failure",!0,t.$t("Alert"))},Close(){this.$parent.IsRecharge=!1}}},v=_,f=Object(d["a"])(v,h,m,!1,null,null,null),g=f.exports;var p=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h4",{staticClass:"modal-title"},[t._v("Customer Details")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body modalfixcss"},[a("div",{staticClass:"container-fluid p-0 clientwallet"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"card profile-card border p-3 ai_base"},[a("div",{staticClass:"d-flex align-items-center"},[t._m(0),a("div",{staticClass:"profile-infoo"},[a("h2",{staticClass:"mb-1"},[t._v("Wallet Balance")]),a("div",{staticClass:"font-18"},[t._v(t._s(t.$n(t.CustomerData.CURRENT_BALANCE,"currency",t.$getLocaleByCurrency(t.Currency))))]),t._m(1),a("div",{staticClass:"float-right ml-auto w-100 mt-0"},[a("a",{staticClass:"btn btn-warning py-1",attrs:{href:"javascript:void(0);"},on:{click:t.OpenRechargeModel}},[a("em",{staticClass:"fa fa-money mr-2"}),t._v("Recharge Now")])])])])])]),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"card profile-card border ai_base p-3"},[a("div",{staticClass:"d-flex align-items-center"},[t._m(2),a("div",{staticClass:"profile-infoo"},[a("h2",{staticClass:"mb-1"},[t._v(t._s(t.CustomerData.CUSTOMER_NAME))]),a("div",{staticClass:"mt-1"},[a("strong",[t._v(t._s(t.$t("Account"))+":")]),t._v(" "+t._s(t.CustomerData.ACCOUNT_NO))]),a("div",{staticClass:"mt-0"},[""!=t.LastUpdatedDate?a("p",{staticClass:"mt-0 text-muted"},[a("strong",[t._v("Last Updated: ")]),t._v(" "+t._s(t.$options.filters.formatDateTime(t.toUserDateTime(t.LastUpdatedDate,t.TimeZone)))+" ")]):a("p",{staticClass:"mt-0 text-muted"},[a("strong",[t._v("Last Updated: ")]),t._v(" -- ")])]),a("div",{staticClass:"mt-1 detailsfix"},[a("strong",[t._v(t._s(t.$t("Status"))+":")]),t._v(" "),a("span",{staticClass:"badge active"},[t._v(t._s(t.StatusName||"--"))])])])])])])]),t._m(3),a("div",{staticClass:"utilities-grid"},[a("div",{staticClass:"utility-card electricity"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-lightbulb-o text-danger"}),t._v(" "+t._s(t.$t("Electricity"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[a("strong",[t._v(t._s(t.WidgitData.TODAY_CONSUMPTION[0].ELECTRIC_CONSUMPTION||0))]),t._v(" kWh/day")])])]),a("div",{staticClass:"utility-card water"},[a("div",{staticClass:"utility-title"},[a("svg",{staticClass:"bi bi-droplet text-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"}})]),t._v(" "+t._s(t.$t("Water"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[a("strong",[t._v(t._s(t.WidgitData.TODAY_CONSUMPTION[0].WATER_CONSUMPTION||0))]),t._v(" kWh/day")])])]),a("div",{staticClass:"utility-card gas"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-fire text-warning"}),t._v(" "+t._s(t.$t("Gas"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[a("strong",[t._v(t._s(t.WidgitData.TODAY_CONSUMPTION[0].GAS_CONSUMPTION||0))]),t._v(" CCF/day")])])])]),t._m(4),a("div",{staticClass:"utilities-grid"},[a("div",{staticClass:"utility-card electricity"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-lightbulb-o text-danger"}),t._v(" "+t._s(t.$t("Electricity"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[t._v(t._s(t.WidgitData.LAST_CONSUMPTION[0].ELECTRIC_CONSUMPTION||0)+" kWh")])])]),a("div",{staticClass:"utility-card water"},[a("div",{staticClass:"utility-title"},[a("svg",{staticClass:"bi bi-droplet text-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"}})]),t._v(" "+t._s(t.$t("Water"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[t._v(t._s(t.WidgitData.LAST_CONSUMPTION[0].WATER_CONSUMPTION||0)+" gal")])])]),a("div",{staticClass:"utility-card gas"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-fire text-warning"}),t._v(" "+t._s(t.$t("Gas"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[t._v(t._s(t.WidgitData.LAST_CONSUMPTION[0].GAS_CONSUMPTION||0)+" CCF")])])])]),t._m(5),a("div",{staticClass:"utilities-grid"},[a("div",{staticClass:"utility-card electricity"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-lightbulb-o text-danger"}),t._v(" "+t._s(t.$t("Electricity"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[t._v(t._s(t.WidgitData.DAILY_USAGE[0].DAILY_ELECTRIC_CONSUMPTION||0)+" kWh")]),a("p",[t._v("Per day average")])])]),a("div",{staticClass:"utility-card water"},[a("div",{staticClass:"utility-title"},[a("svg",{staticClass:"bi bi-droplet text-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"}})]),t._v(" "+t._s(t.$t("Water"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[t._v(t._s(t.WidgitData.DAILY_USAGE[0].DAILY_WATER_CONSUMPTION||0)+" gal")]),a("p",[t._v("Per day average")])])]),a("div",{staticClass:"utility-card gas"},[a("div",{staticClass:"utility-title"},[a("em",{staticClass:"fa fa-fire text-warning"}),t._v(" "+t._s(t.$t("Gas"))+" ")]),a("div",{staticClass:"infogrid_base"},[a("div",[t._v(t._s(t.WidgitData.DAILY_USAGE[0].DAILY_GAS_CONSUMPTION||0)+" CCF")]),a("p",[t._v("Per day average")])])])]),a("div",{staticClass:"col-lg-12 mt-4 mb-0 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Recent Transactions")]),a("small",[a("a",{staticClass:"view-history float-right text-primary font-14",on:{click:t.OpenHistoryModel}},[a("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Complete Transaction History")])])])])]),a("div",{staticClass:"listing mt-2"},[a("div",{staticClass:"table-responsive table-fix-header float-left"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0"},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[t._v(t._s(t.$t("Type")))]),a("th",[t._v(t._s(t.$t("Date")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Balance")))])])]),a("tbody",[t._l(t.RecentRecords,(function(e){return a("tr",[a("td",[t._v(t._s(e.TXN_TYPE))]),a("td",[t._v(t._s(t.$options.filters.formatDateTime(t.toUserDateTime(e.CREATED_AT,e.TIMEZONE))))]),a("td",{class:["CREDIT"==e.TXN_TYPE?"text-success":"text-danger"]},[t._v(t._s(("CREDIT"==e.TXN_TYPE?"+":"-")+t.$n(e.AMOUNT,"currency",t.$getLocaleByCurrency(t.Currency))))]),a("td",[t._v(t._s(t.$n(e.AFTER_BALANCE,"currency",t.$getLocaleByCurrency(t.Currency))))])])})),0==t.RecentRecords.length?a("tr",{staticClass:"norecords",attrs:{id:"trNoRecordFond"}},[a("td",{staticClass:"text-danger text-center",attrs:{colspan:"5"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)])])])])])])])])],1),t.IsRecharge?a("div",[a("AddRecharge",{attrs:{RechargeData:t.CustomerData},on:{refreshlist:t.RefreshListing}})],1):t._e(),t.IsAdjust?a("div",[a("AdjustBalance",{attrs:{Adjustdata:t.CustomerData}})],1):t._e(),t.IsHistory?a("div",[a("ViewHistory",{attrs:{RecordData:t.CustomerData}})],1):t._e()])},A=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar mr-3"},[a("em",{staticClass:"fa fa-wallet"})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"mt-0"},[a("p",{staticClass:"mt-0 text-muted"},[t._v(" Estimated 8 days remaining at current us ")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar mr-3"},[a("img",{attrs:{src:"https://talygenv.github.io/Vue-UI-Content/images/avatar-icon.jpg"}})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"col-lg-12 mt-2 mb-0 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Utility Consumption")])])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"col-lg-12 mt-4 mb-0 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Last Usage")])])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"col-lg-12 mt-4 mb-0 p-0"},[a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("Average Daily Usage")])])])])}],y=function(){var t=this,a=t._self._c;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h4",{staticClass:"modal-title"},[t._v("Manual Wallet Adjustment")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"AddRecharge",attrs:{lang:"en",buttons:t.buttons,schema:t.FromSchema,mandatorytext:t.MandatoryString}})],1)])])])],1)},D=[],T={props:{Adjustdata:{type:Array}},data(){return{MandatoryString:"Fields marked with an asterisk (*) are mandatory.",FromSchema:[{layoutType:"Single",Data:[{astype:"TextField",label:"Current Balance",name:"CurrentBalance",value:"0.00",validationRules:{required:!0,max:100},disabled:!0},{astype:"RadioField",label:"AdjustmentType",name:"AdjustmentType",value:"AddCredit",placeholder:"",disabled:!1,chktxtIndex:0,config:{options:[{value:"AddCredit",name:"Add Credit"},{value:"DeductAmount",name:"Deduct Amount"}]},validationRules:"required"},{astype:"NumericField",label:"Amount",name:"Amount",value:"0.00",validationRules:{required:!0,max:100}},{astype:"TextAreaField",label:"Reason",disabled:!1,name:"Reason",value:"",placeholder:"Reason",value:"",validationRules:{required:!0,max:4e3},config:{rows:3}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",isVisible:!0},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created(){this.Adjustdata&&(this.FromSchema[0].Data[0].value=this.Adjustdata.CURRENT_BALANCE)},methods:{Close(){this.$parent.IsAdjustBalance=!1}}},b=T,S=Object(d["a"])(b,y,D,!1,null,null,null),R=S.exports,E={components:{AddRecharge:g,AdjustBalance:R,ViewHistory:C},props:{CustomerData:{type:Array}},data(){return{isLoading:!1,IsRecharge:!1,IsHistory:!1,IsAdjust:!1,Currency:"",RecentRecords:[],WidgitData:[],LastUpdatedDate:"",StatusName:"",TimeZone:""}},async created(){this.Currency=this.GetUserInfo.Currency.replace(/[()]/g,""),await this.FetchRecords(this.CustomerData.CLIENT_ID),await this.FetchWidgetDetail()},methods:{RefreshListing(){this.FetchRecords(this.CustomerData.CLIENT_ID),this.FetchWidgetDetail()},async FetchWidgetDetail(){var t=this;t.isLoading=!0;var a=`CompanyId=${t.GetUserInfo.CompanyId}&ClientId=${this.CustomerData.CLIENT_ID}`;await l["a"].GetCompanyWalletData(a).then(a=>{""!=a.data.result?(t.WalletData=a.data.result.Overall[0],t.percentageData=a.data.result.MonthComparison[0],t.utilityConsumptionData=a.data.result.UtilityConsumption[0],t.WidgitData=a.data.result.CONSUMPTION_WIDGET[0]):(t.WalletData=[],t.percentageData=[],t.utilityConsumptionData=[]),this.isLoading=!1})},async FetchRecords(t){this.isLoading=!0;const a=`client_id=${t}&type=RECENT`;await l["a"].GetCompanyWalletHistory(a).then(t=>{const a=JSON.parse(null===t||void 0===t?void 0:t.data[0].JSON_RESULT)||[],e=a.JSON_HISTORY;e.length>0?(this.RecentRecords=e.map(t=>({...t,CREATED_AT:t.CREATED_AT?new Date(t.CREATED_AT):null})),this.TotalRecords=e.length,this.LastUpdatedDate=this.RecentRecords[0].MODIFIED_AT,this.StatusName=this.RecentRecords[0].STATUS_NAME,this.TimeZone=this.RecentRecords[0].TIMEZONE):(this.RecentRecords=[],this.TotalRecords=0,this.LastUpdatedDate="",this.StatusName="",this.TimeZone=""),this.isLoading=!1})},OpenRechargeModel(){this.RechargeData=this.CustomerData,this.IsRecharge=!0},OpenAdjustBalanceModel(){this.Adjustdata=this.CustomerData,this.IsAdjust=!0},OpenHistoryModel(){this.RecordData=this.CustomerData,this.IsHistory=!0},Close(){this.$parent.IsCustomerData=!1}}},I=E,N=(e("4928"),Object(d["a"])(I,p,A,!1,null,null,null)),L=N.exports,x=function(){var t=this,a=t._self._c;return a("section",[a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header d-flex justify-content-between align-items-center"},[a("h5",{staticClass:"modal-title"},[t._v("Enable Wallet For Clients")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(a){return t.Close()}}},[a("em",{staticClass:"fa fa-times"})])]),a("div",{staticClass:"modal-body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:"Search by name, account number, or emailâ€¦"},domProps:{value:t.searchQuery},on:{input:function(a){a.target.composing||(t.searchQuery=a.target.value)}}}),a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header",attrs:{id:"div_forListView"}},[a("table",{staticClass:"table table-bordered mt-0"},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticStyle:{width:"50px"}},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{staticClass:"chkItems custom-control-input",attrs:{type:"checkbox",id:"chk_"},domProps:{checked:t.isAllSelected},on:{change:t.toggleSelectAll}}),a("label",{staticClass:"custom-control-label",attrs:{for:"chk_"}})])]),a("th",[t._v(t._s(t.$t("ClientName")))]),a("th",[t._v(t._s(t.$t("AccountNo")))]),a("th",[t._v(t._s(t.$t("Email")))]),a("th",[t._v(t._s(t.$t("CreatedAt")))]),a("th",[t._v(t._s(t.$t("Status")))])])]),a("tbody",[t._l(t.filteredClients,(function(e){return a("tr",{key:e.user_id},[a("td",[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedClientIds,expression:"selectedClientIds"}],staticClass:"chkItems custom-control-input",attrs:{type:"checkbox",id:"chk_"+e.user_id},domProps:{value:e.user_id,checked:Array.isArray(t.selectedClientIds)?t._i(t.selectedClientIds,e.user_id)>-1:t.selectedClientIds},on:{change:function(a){var s=t.selectedClientIds,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=e.user_id,l=t._i(s,n);i.checked?l<0&&(t.selectedClientIds=s.concat([n])):l>-1&&(t.selectedClientIds=s.slice(0,l).concat(s.slice(l+1)))}else t.selectedClientIds=r}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+e.user_id}})])]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.account_no))]),a("td",[t._v(t._s(e.email_id))]),a("td",[t._v(t._s(t.$options.filters.formatDateTime(new Date(e.created_at))))]),a("td",[a("span",{class:t.getStatusClassList(e.status_name,"STATUS_NAME")},[t._v(t._s(e.status_name))])])])})),0===t.filteredClients.length?a("tr",[a("td",{staticClass:"text-center text-muted",attrs:{colspan:"3"}},[t._v(" No clients found. ")])]):t._e()],2)])])])]),a("div",{staticClass:"modal-footer"},[a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;",title:"Save"},on:{click:function(a){return t.AddEnableClients()}}},[a("i",{staticClass:"fa fa-floppy-o pr-2"}),t._v("Save")]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;",title:"Cancel"},on:{click:function(a){return t.Close()}}},[a("i",{staticClass:"fa fa-times pr-2"}),t._v("Cancel")])])])])])],1)])},w=[],O=(e("88e6"),e("70cc"),e("eb03"),e("22e5"),e("c01e"),e("fa76"),e("8306"),{props:{ClientData:{type:Array,default:()=>[]}},data(){return{isLoading:!1,selectedClientIds:[],searchQuery:""}},computed:{filteredClients(){const t=this.searchQuery.toLowerCase();return this.ClientData.filter(a=>a.name.toLowerCase().includes(t)||(a.account_no+"").includes(t)||(a.email_id+"").toLowerCase().includes(t))},isAllSelected(){return this.filteredClients.length>0&&this.filteredClients.every(t=>this.selectedClientIds.includes(t.user_id))}},methods:{Close(){this.$parent.IsClientData=!1},toggleSelectAll(t){if(t.target.checked){const t=this.filteredClients.map(t=>t.user_id);this.selectedClientIds=Array.from(new Set([...this.selectedClientIds,...t]))}else this.selectedClientIds=this.selectedClientIds.filter(t=>!this.filteredClients.some(a=>a.user_id===t))},AddEnableClients(){const t=this;if(!Array.isArray(t.selectedClientIds)||0===t.selectedClientIds.length)return void t.$parent.ShowAlert("No clients selected.","error");const a={client_ids:t.selectedClientIds},e=JSON.stringify(a);t.isLoading=!0,l["a"].EnableClientsForRecharge(e).then(a=>{a.data&&"Success"===a.data.status?(t.$parent.ShowAlert("Clients enabled successfully!","success"),t.$parent.RefreshListing(),t.Close()):t.$parent.ShowAlert("Failed to enable clients.","error")}).catch(a=>{t.$parent.ShowAlert("An error occurred: "+a,"error")}).finally(()=>{t.isLoading=!1})},getStatusClassList:function(t){var a="";switch(t){case"UnPublish":a="px-2 text-center bg-danger text-white d-block";break;case"Active":a="px-2 text-center bg-success text-white d-block";break;case"Published":a="px-2 bg-primary text-center text-white d-block";break;case"Draft":a="px-2 text-center bg-warning text-white d-block";break;case"Inactive":a="px-2 text-center bg-danger text-white d-block";break;default:a=""}return a}}}),M=O,U=(e("d419"),Object(d["a"])(M,x,w,!1,null,"5805e082",null)),P=U.exports,$={components:{RecordsHistory:C,AddRecharge:g,CustomerDetail:L,CompanyClientData:P},data(){return{isLoading:!1,IsRecharge:!1,IsClientData:!1,RechargeData:[],HistroyData:[],IsHistory:!1,TotalRecords:0,noRecord:!1,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",SearchData:"",Currency:"",avarageData:"",listActions:[{title:"AddRecharge",callbackfunction:"AddRecharge",icon:"fa fa-bolt text-success",additionalSpan:"",isDisabled:!1,isvisible:!0},{title:"ViewHistory",callbackfunction:"ViewHistory",href:"javascript:void(0)",icon:"fa fa-eye text-primary",additionalSpan:"",isDisabled:!1,isvisible:!0}],WalletData:[],percentageData:[],StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}],ListingData:[],Headers:[{COLUMN_NAME:"CUSTOMER_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("Customer"),DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"ACCOUNT_NO",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:this.$t("AccountNumber"),DISPLAY_ORDER:2},{COLUMN_NAME:"CURRENT_BALANCE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Balance"),DISPLAY_ORDER:3,settings:{isInSlot:!0}},{COLUMN_NAME:"CREATED_BY",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedBy"),DISPLAY_ORDER:4},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("CreatedAt"),DISPLAY_ORDER:5,settings:{isInSlot:!0}},{COLUMN_NAME:"STATUS_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Status"),DISPLAY_ORDER:6,settings:{isInSlot:!0}}],IsCustomerData:!1,CustomerData:[],CompanyClientCount:0,utilityConsumptionData:[],ClientData:[],MinimumWalletBalance:0}},created:function(){this.Currency=this.GetUserInfo.Currency.replace(/[()]/g,""),this.FetchWidgetDetail(),this.FetchWalletListing(),this.GetCompanyClient(),this.GetClientMinimumWalletBalance()},methods:{OpenClientDetails(){this.IsClientData=!0},async GetCompanyClient(){let t=await l["a"].GetCompanyClient();t.data&&(this.ClientData=t.data.Data,this.CompanyClientCount=this.ClientData.length)},async GetClientMinimumWalletBalance(){var t=this;t.MinimumWalletBalance="";var a="key=MinimumWalletBalance ";await l["a"].GetConfigurationValueForCompanyByKey(a).then(a=>{t.MinimumWalletBalance=a.data})},RefreshListing(){this.FetchWidgetDetail(),this.FetchWalletListing(),this.GetCompanyClient()},getStatusClassList:function(t){var a="";switch(t){case"Active":a="px-2 text-center text-white d-block bg-success";break;case"Inactive":a="px-2 text-center text-white d-block bg-danger";break;default:a=""}return a},FetchWidgetDetail(){var t=this;t.isLoading=!0;var a=`CompanyId=${t.GetUserInfo.CompanyId}&ClientId=0`;l["a"].GetCompanyWalletData(a).then(a=>{""!=a.data.result?(t.WalletData=a.data.result.Overall[0],t.percentageData=a.data.result.MonthComparison[0],t.utilityConsumptionData=a.data.result.UtilityConsumption[0],t.avarageData=a.data.result.PER_CUSTOMER_AVG[0]):(t.WalletData=[],t.percentageData=[],t.utilityConsumptionData=[],t.avarageData=[]),t.isLoading=!1})},FetchWalletListing(){var t=this,a=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}&searchByText=${t.SearchData}`;l["a"].GetCompanyWalletList(a).then((function(a){""!=a.data&&null!=a.data&&a.data.length>0?(t.ListingData=a.data,t.ListingData.forEach(t=>{["CREATED_AT","MODIFIED_AT"].forEach(a=>{t[a]&&(t[a]=new Date(t[a]))})}),t.TotalRecords=a.data[0].TOTAL_RECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.noRecord=!0,t.ListingData=[],t.TotalRecords=0)}))},sortdata:function(t){this.SortBy=t;var a="ASC";"ASC"==this.SortExp&&(a="DESC"),this.SortExp=a,this.SortBy=t,this.SortExp=a,this.PageNumber=1,this.FetchWalletListing()},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchWalletListing()},actionButtonClick:function(t,a,e,s){switch(t){case"AddRecharge":this.OpenRechargeModal(a);break;case"ViewHistory":this.OpenHistoryModal(a);break}},OpenRechargeModal(t){this.RechargeData=t,this.IsRecharge=!0},OpenHistoryModal(t){this.HistroyData=t,this.IsHistory=!0},renderActions(t){let a=[];return this.listActions.forEach(t=>{let e={...t};e.isVisible=!0,a.push(e)}),a},OpenCustomerDetail(t){this.CustomerData=t,this.IsCustomerData=!0}}},B=$,k=Object(d["a"])(B,s,i,!1,null,null,null);a["default"]=k.exports},cb27:function(t,a,e){"use strict";var s=e("e330"),i=Set.prototype;t.exports={Set:Set,add:s(i.add),has:s(i.has),remove:s(i["delete"]),proto:i}},d419:function(t,a,e){"use strict";e("fea0")},dad2:function(t,a,e){"use strict";var s=e("d066"),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var a=s("Set");try{(new a)[t](i(0));try{return(new a)[t](i(-1)),!1}catch(e){return!0}}catch(r){return!1}}},dc19:function(t,a,e){"use strict";var s=e("cb27").has;t.exports=function(t){return s(t),t}},e9bc:function(t,a,e){"use strict";var s=e("dc19"),i=e("cb27").add,r=e("83b9e"),n=e("7f65"),l=e("5388");t.exports=function(t){var a=s(this),e=n(t).getIterator(),c=r(a);return l(e,(function(t){i(c,t)})),c}},eb03:function(t,a,e){"use strict";e("c1a1")},fa76:function(t,a,e){"use strict";e("1e5a")},fea0:function(t,a,e){var s=e("97dc");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=e("499e").default;i("1017ed15",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-cd62faf6.js.map