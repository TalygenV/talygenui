(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46a9da04"],{"08f4":function(e,t,a){var i=a("4bad");t=i(!1),t.push([e.i,".unlayer-editor iframe{position:absolute}",""]),e.exports=t},1324:function(e,t,a){var i=a("08f4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("499e").default;o("1ffa3057",i,!0,{sourceMap:!1,shadowMode:!1})},"138e":function(e,t,a){var i=a("4bad");t=i(!1),t.push([e.i,".modal-header{position:relative;padding-right:40px}.clickable-template{color:#00f;text-decoration:underline;cursor:pointer}.modal-header .close{position:absolute;top:15px;right:15px;z-index:10;background:transparent;border:none;font-size:1.5rem;cursor:pointer}",""]),e.exports=t},"1a0f":function(e,t,a){var i=a("138e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("499e").default;o("9269e7a4",i,!0,{sourceMap:!1,shadowMode:!1})},"1dce":function(e,t,a){"use strict";a("54a2")},"41ef":function(e,t,a){"use strict";a("894e")},"54a2":function(e,t,a){var i=a("de6a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("499e").default;o("cff9e790",i,!0,{sourceMap:!1,shadowMode:!1})},"7ac6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("div",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("LeftColumn"),e.isShowList?t("div",{staticClass:"right-content"},[t("tg-list",{attrs:{showCheckBox:!0,IsShowAction:!0,ModuleName:"Company",SubModuleCode:"EmailTemplate",IdentityColumn:"template_id",ListData:e.EmailTemplateData,HeaderData:e.filteredHeaders,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,IsSearchFieldsOnTop:!1,SearchPosition:"top",SearchFields:e.topSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,IsFilterApplied:!!e.searchCondition,LegendArray:[],sourcetype:"",NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,ClearFilter:e.ClearFilter,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["template_name"==a.column.COLUMN_NAME?[null!=a.row.company_id?t("div",[t("a",{staticClass:"clickable-template",on:{click:function(t){return e.clickEventOfColumn(a.row,a.column)}}},[e._v(" "+e._s(a.row.template_name)+" ")])]):t("div",[e._v(" "+e._s(a.row.template_name)+" ")])]:e._e(),"status_id"==a.column.COLUMN_NAME?[e.isCRMShowStausDrop(a.row.status_id,"COMPANYSETUP_UPDATE")?t("listing-status",{ref:"updatestatus",attrs:{isfor:"COMPANYSETUP_UPDATE",dataid:a.row.template_id,"data-controller":"COMPANYSETUP_UPDATE",statuslist:e.StatusListForListing,item:a.row.template_id,"data-action":"index",module:"Company",subModule:"EmailTemplate",dataselected:1001==a.row.status_id.value?"Active":"Inactive",title:1001==a.row.status_id.value?"Active":"Inactive",callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e()]:e._e()]}}],null,!1,3858994934)})],1):e.showEmailTemplate?t("div",{staticClass:"right-content"},[t("AddEmailTemplate",{attrs:{EditItme:e.Item}})],1):e.ShowAddAdvancedEmailTemplate?t("div",{staticClass:"right-content"},[t("AddAdvancedEmailTemplate",{attrs:{EditItme:e.Item,Template_id:e.Template_id,IsHide:e.IsHide}})],1):e._e()],1),t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),e.isEditReport?t("div",{staticClass:"modal d-block dialog"},[t("div",{staticClass:"modal-dialog"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("clonetemplate")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"listing"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cloneTemName,expression:"cloneTemName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Template Name",required:""},domProps:{value:e.cloneTemName},on:{input:function(t){t.target.composing||(e.cloneTemName=t.target.value)}}})])])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.triggerEditReport}},[e._v(" Save ")]),t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:e.close}},[e._v(" Cancel ")])])])])]):e._e()],1)]),t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),e.isShowReport?t("div",{staticClass:"modal d-block dialog"},[t("div",{staticClass:"modal-dialog modal-lg",staticStyle:{"max-width":"90vw",width:"70vw","max-height":"70vh","overflow-y":"auto"}},[t("div",{staticClass:"modal-content",staticStyle:{"min-height":"70vh"}},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("EmailTemplate")))]),t("button",{staticClass:"close",staticStyle:{"margin-top":"0px","margin-right":"0px","margin-left":"5px"},attrs:{type:"button"},on:{click:e.close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"listing"},[t("div",{staticStyle:{border:"1px solid #ddd",padding:"10px","margin-top":"10px","min-height":"50vh","overflow-y":"auto"},domProps:{innerHTML:e._s(e.Emailcontent)}})])])]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:e.close}},[e._v(" Cancel ")])])])])]):e._e()],1)])],1)},o=[],l=(a("14d9"),a("9769"));a("aa47");let s=[{title:"AddAdvancedEmailTemplate",iconClass:"fa fa-envelope-o",callbackfunction:"AddAdvancedEmailTemplate",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{title:"Add",iconClass:"fa-plus",callbackfunction:"AddEmailTemplate",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"ActiveMultiple",title:"Active",iconClass:"fa-check",callbackfunction:"ActiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!0},{id:"InactiveMultiple",title:"Inactive",iconClass:"fa-close",callbackfunction:"InactiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,isEnabledOnSelectedRow:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],n=[{fieldName:"SearchByName",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["template_name"],isSearch:!0,value:""},{fieldName:"SearchByCategory",fieldType:"ddl-check",fieldIcon:"fa-file",fieldSearchConditionName:["talygen_email_template.module_id"],isSearch:!0,value:"",listOptions:[]}],r=[{title:"View",callbackfunction:"ViewReport",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Clone",callbackfunction:"clonereport",icon:"fa fa-clone text-primary action-icon",additionalSpan:""}];function d(e,t,a){var i=e;let o=a,s={};s["moduleName"]=t,s["type"]=a,l["a"].GetMainReportSearching(o).then((function(e){console.log(leftsearchSchema);var t=e.data;console.log("folderid",t),null!=t&&("FOLDER_NAME"==a&&(i.leftSearchFields[4].listOptions=t.map(e=>{const t={};return t.name=e.FOLDER_NAME,t.value=e.FOLDER_ID.toString(),t}),i.LeadStatusList=t.map(e=>{const t={};return t.name=e.FOLDER_NAME,t.value=e.FOLDER_ID.toString(),t})),"CREATED_BY"==a&&(i.leftSearchFields[3].listOptions=t.map(e=>{const t={};return t.name=e.CREATED_BY,t.value=e.CREATED_ID.toString(),t}),i.LeadStatusList=t.map(e=>{const t={};return t.name=e.CREATED_BY,t.value=e.CREATED_ID.toString(),t})),"MODIFIED_BY"==a&&(i.leftSearchFields[7].listOptions=t.map(e=>{const t={};return t.name=e.MODIFIED_BY,t.value=e.MODIFIED_ID.toString(),t}),i.LeadStatusList=t.map(e=>{const t={};return t.name=e.MODIFIED_BY,t.value=e.MODIFIED_ID.toString(),t})))}))}var m={buttons:s,topsearchSchema:n,listActions:r,bindleftCommonSearchdropdown:d},c=a("8dd4"),u=a("aae2"),p=function(){var e=this,t=e._self._c;return t("section",{},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"container-fluid mt-2 p-0"},[t("div",{staticClass:"w-100"},[t("div",{staticClass:"col-md-12 p-0"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.emailTemplateLabel))]),t("span",{staticClass:"p-actions float-right tablehead"},[t("a",{staticClass:"p-action-btn text-white",attrs:{href:"/EmailTemplate/Index"}},[t("i",{staticClass:"fa fa-angle-double-left"}),t("br"),e._v(e._s(e.$t("BacktoList"))+" ")])])])])])]),t("div",{staticClass:"border p-3"},[t("dynamic-form",{ref:"AddEditEmail",attrs:{schema:e.FormSchema,buttons:e.buttons},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-emailEditor",fn:function({data:a}){return[t("div",{attrs:{id:"app"}},[t("EmailEditor",{ref:"emailEditor",attrs:{name:"emailEditor",appearance:e.appearance,"min-height":e.minHeight,"project-id":e.Template_id,locale:e.locale,tools:e.tools,options:e.options},on:{load:e.editorLoaded}}),e.flag?e._e():t("span",{staticClass:"text-danger ml-4",attrs:{name:"emailEditor"}},[e._v(e._s(a.error))])],1)]}}])})],1)],1)},h=[],f=a("b990"),g={props:{Template_id:{type:Number,required:!0},EditItme:{type:Array,required:!1},IsHide:{type:Boolean,required:!1}},name:"app",components:{EmailEditor:f["EmailEditor"]},data(){return{isLoading:!1,FormSchema:[{layoutType:"triple",Data:[{astype:"TextField",label:this.$t("TemplateName"),name:"TemplateName",value:"",visibility:!0,placeholder:"Template Name",validationRules:{required:!0},disabled:!1},{astype:"TextField",label:this.$t("Subject"),name:"Subject",value:"",visibility:!0,placeholder:"Subject",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Category"),name:"Category",value:"",visibility:!0,placeholder:"Category",config:{options:[],onChange:this.GetSubCategoryDDL},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SubCategory"),name:"SubCategory",visibility:!0,value:"",placeholder:"Sub Category",config:{options:[]},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",visibility:!0,placeholder:"Status",config:{options:[]}}]},{layoutType:"single",Data:[{astype:"SlotField",name:"emailEditor",value:"",placeholder:"Create Template",validationRules:{required:!1},config:{options:[],onChange:this.PaymentGatewayAdditionalDetail}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.BackButton}],minHeight:"800px",locale:"en",tools:{image:{enabled:!0}},options:{},appearance:{theme:"light",panels:{tools:{dock:"right",show:!1}}},CatData:[],TempContent:"",isDataLoaded:!1,flag:!1,SubCatData:[],fileData:[],UserId:"",CompanyId:"",ContainerName:""}},computed:{emailTemplateLabel(){return this.EditItme.template_id>0?this.$t("EditEmailTemplate"):this.$t("AddEmailTemplate")}},async created(){var e=this;this.userTypeId="CA"==this.GetUserInfo.UserType?1:"PM"==this.GetUserInfo.UserType?2:"NU"==this.GetUserInfo.UserType?3:4,e.IsHide&&e.FormSchema[0].Data.forEach(e=>{e.visibility=!1}),e.ContainerName=e.GetUserInfo.ContainerName,e.UserId=e.GetUserInfo.ID,e.CompanyId=e.GetUserInfo.CompanyId,await e.GetModuleList(),await e.GetStatusList(),e.EditItme.template_id>0&&(await e.BindTemplateDetails(e.EditItme.template_id),e.CatData.forEach(t=>{t.module_name===e.EditItme.module_id&&(e.FormSchema[0].Data[2].value=t.module_id)}),void 0!=e.FormSchema[0].Data[2].value&&""!=e.FormSchema[0].Data[2].value&&await e.GetSubCategoryDDL(e.FormSchema[0].Data[2].value),e.Template_id=e.EditItme.template_id,e.FormSchema[0].Data[0].value=e.EditItme.template_name,e.FormSchema[0].Data[0].disabled=!0,e.FormSchema[0].Data[1].value=e.EditItme.template_subject,e.FormSchema[0].Data[4].value=e.EditItme.status_id.value,e.editorData=e.EditItme.template_content,e.SubCatData.length>0&&e.SubCatData.forEach(t=>{t.NAME===e.EditItme.template_category_id&&(e.FormSchema[0].Data[3].value=t.SUB_MODULE_ID,e.$refs.AddEditEmail.UpdateKeyValue())}))},updated(){var e=this;try{this.$refs.emailEditor.editor.registerCallback("image",(function(t,a){let i,o=t.attachments[0],l=new FileReader;l.onloadend=function(){var t=l.result.lastIndexOf(",");i=l.result.substring(t+1,l.result.length);var a=o.name.lastIndexOf("."),s=o.name.substring(a+1,o.name.length),n='{"ContentType":"'+o.type+'","Size":"'+o.size+'","Extension":"'+s+'"}',r={attachement_mime:n,fileName:o.name,base64String:i,fileSize:o.size,contentType:o.type,Extension:s,subModuleCode:"EmailTemplate",moduleName:"EmailTemplate",containerName:e.ContainerName,userId:e.UserId,companyId:e.CompanyId,id:0};e.fileData.push(r)},t&&l.readAsDataURL(o)}))}catch(t){}},methods:{async UploadFile(e){var t=this;t.isLoading=!0,t.fileData.forEach(t=>{t.id=e});var a=JSON.stringify(t.fileData);await l["a"].UploadFile(a).then(e=>{e.data.length>0&&("Success"==e.data[0].Status?(e.data[0].Name,t.isLoading=!1):t.isLoading=!1)}),t.isLoading=!1},async BindTemplateDetails(e){var t=this;if(e>0){t.isLoading=!0;var a="id="+e;await l["a"].GetEmailTemplateDetails(a).then(e=>{var a=e.data.templateContent,i=JSON.parse(e.data.templateJson),o=e.data.templateJson;t.editorLoaded(a,i,o),t.$refs.emailEditor.editor.loadDesign({striJSON:o}),t.$refs.emailEditor.editor.exportHtml(e=>{}),t.$refs.emailEditor.loadDesign(t.TempContent),t.isDataLoaded=!0})}else t.isLoading=!1},async GetStatusList(){var e=this;e.isLoading=!0,await l["a"].GetStatusList().then(t=>{if(null!=JSON.parse(t.data)){var a=[];a=JSON.parse(t.data),a.forEach((t,a)=>{"Deleted"!=t.STATUS&&e.FormSchema[0].Data[4].config.options.push({name:t.STATUS,value:t.STATUS_ID})}),e.isLoading=!1}e.isLoading=!1})},async GetSubCategoryDDL(e){var t,a=this;a.isLoading=!0;var i="ModuleID=0";i=e&&"object"===typeof e&&"target"in e&&""!==(null===(t=e.target)||void 0===t?void 0:t.value)?"ModuleID="+e.target.value:"ModuleID="+e,await l["a"].GetTemplateSubCategoryList(i).then(e=>{null!=JSON.parse(e.data)?(a.SubCatData=[],a.SubCatData=JSON.parse(e.data),a.FormSchema[0].Data[3].config.options=[],a.SubCatData.forEach((e,t)=>{a.FormSchema[0].Data[3].config.options.push({name:e.NAME,value:e.SUB_MODULE_ID})}),a.$refs.AddEditEmail.UpdateKeyValue(),a.isLoading=!1):a.isLoading=!1,a.FormSchema[0].Data[3].value=""})},GetModuleList:async function(){var e=this,t="userTypeId="+e.userTypeId;await l["a"].GetModuleList(t).then((function(t){t.data.Data.length>0&&(e.CatData=t.data.Data,e.CatData.forEach((t,a)=>{e.FormSchema[0].Data[2].config.options.push({name:t.module_name,value:t.module_id})}))})),e.$refs.AddEditEmail.UpdateKeyValue(),e.isLoading=!1},async PaymentGatewayAdditionalDetail(){var e=this;e.isLoading=!0;var t="ModuleID="+evt.target.value;await l["a"].GetTemplateSubCategoryList(t).then(t=>{null!=JSON.parse(t.data)&&(e.SubCatData=[],e.SubCatData=JSON.parse(t.data),e.SubCatData.forEach((t,a)=>{e.FormSchema[0].Data[3].config.options.push({name:t.NAME,value:t.SUB_MODULE_ID})}),e.isLoading=!1),e.isLoading=!1})},async editorLoaded(){var e=this;if(e.isLoading=!0,e.Template_id>0){var t="id="+e.Template_id;await l["a"].GetEmailTemplateDetails(t).then(t=>{if(e.TemplateData=t.data,null!=t.data){var a=JSON.parse(t.data.templateJson);e.$refs.emailEditor.editor.loadDesign(a),e.FormSchema[0].Data[0].disabled=!0,e.FormSchema[0].Data[0].value=e.TemplateData.templateName,e.FormSchema[0].Data[1].value=e.TemplateData.templateSubject,e.FormSchema[0].Data[4].value=e.TemplateData.statusId;var i=e.CatData.find(t=>t.template_category_id==e.TemplateData.templateCategoryId);i&&(e.FormSchema[0].Data[2].value=i.module_id,e.GetSubCategoryDDL(e.FormSchema[0].Data[2].value)),e.isLoading=!1}})}else e.isLoading=!1},onSubmit(e){var t=this;t.isLoading=!0;var a=t.FormSchema[0].Data[0].value,i=t.FormSchema[0].Data[1].value,o=t.FormSchema[0].Data[2].value,s=t.FormSchema[0].Data[3].value,n=t.FormSchema[0].Data[4].value;t.$refs.emailEditor.editor.exportHtml(e=>{var r=e.design,d=e.html,m=JSON.stringify(r);t.flag=!1,t.FormSchema[1].Data[0].validationRules.required=!1;var c=t.stripHtmlTags(d);c.trim().length>=2?(t.flag=!0,t.FormSchema[1].Data[0].validationRules.required=!1):(t.flag=!1,t.FormSchema[1].Data[0].validationRules.required=!0);var u={TemplateId:t.EditItme.template_id>0?t.EditItme.template_id:t.Template_id,TemplateName:a,TemplateContent:d,StatusId:n,TemplateCategoryId:o,TemplateSubCategoryId:s,TemplateSubject:i,TemplateJson:m,TemplateType:!1},p=new FormData;p.append("postString",JSON.stringify(u)),t.flag&&l["a"].AddAdvancedEmailTemplate(p).then(async e=>{const a=JSON.parse(e.data);""==a[0].status&&"TemplateNameExists"==a[0].msg?(t.ShowAlert(t.$t("TemplateNameExists"),"warning",t.$t("Alert")),t.isLoading=!1):1==a[0].status_id&&"added"==a[0].status_msg?(await t.UploadFile(a[0].template_id),t.ShowAlert(t.$t("AddEmailSuccess"),"success",t.$t("Alert")),t.isLoading=!1,window.location.reload()):2==a[0].status_id&&"updated"==a[0].status_msg?(await t.UploadFile(t.EditItme.template_id),t.ShowAlert(t.$t("UpdateEmailTemplate"),"success",t.$t("Alert")),window.location.reload()):(t.ShowAlert(t.$t("UnknownError"),"failure",t.$t("Alert")),t.isLoading=!1)})})},stripHtmlTags:function(e){if(!e)return"";var t=e.replace(/<style([\s\S]*?)<\/style>/gi,"");return t=t.replace(/<[^>]*>?/gm,"").replace(/\n/g,""),t},BackButton(){window.location.reload()}}},v=g,S=(a("9b25"),a("2877")),C=Object(S["a"])(v,p,h,!1,null,null,null),y=C.exports,b=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"container-fluid mt-2 p-0"},[t("div",{staticClass:"w-100"},[t("div",{staticClass:"col-md-12 p-0"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.emailTemplateLabel))]),t("span",{staticClass:"p-actions float-right tablehead"},[t("a",{staticClass:"p-action-btn text-white",attrs:{href:"/EmailTemplate/Index"}},[t("i",{staticClass:"fa fa-angle-double-left"}),t("br"),e._v(e._s(e.$t("BacktoList")))])])])])])]),e._v(" "+e._s(e.editordata)+" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-8 col-xl-8 mb-3 mt-3"},[t("div",{staticClass:"border p-3"},[t("dynamic-form",{ref:"dynamicform",attrs:{schema:e.FormSchema,buttons:e.buttons},on:{OnSubmit:e.SubmitData},scopedSlots:e._u([{key:"tgslot-Content",fn:function({data:a}){return[t("TinyMCE",{ref:"editor",attrs:{value:e.Template_contents,"editor-id":"Email_Template",updateContent:e.updateContent}})]}}])}),t("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 text-left"},[t("div",{staticClass:"form-group text-danger m-0"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])],1)]),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-3 mt-3"},[t("div",{staticClass:"form-content-new"},[t("div",{staticClass:"table-heading-wb bg-transparent p-3 tblHeadingSpan"},[t("span",{staticClass:"font-14"},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("Offertemplateguide"))}})])]),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left pb-3",staticStyle:{"max-height":"400px","overflow-y":"auto",display:"block"},attrs:{id:"greetinguserguide"}},e._l(e.UserGuidData,(function(a,i){return t("div",{staticClass:"form-group col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mb-1",staticStyle:{cursor:"pointer"}},[t("div",{staticClass:"row border-dotted py-2 appendText etemplaterows noSelect",staticStyle:{"-moz-user-select":"none"}},[t("div",{staticClass:"col-10 col-sm-10 col-md- 10 col-lg-10 col-xl-10 float-left"},[t("label",{staticClass:"font-weight-light float-left p-0 m-0",staticStyle:{cursor:"pointer"}},[e._v(e._s(a.name))])]),t("div",{staticClass:"col-2 col-sm-2 col-md- 2 col-lg-2 col-xl-2 float-left text-right m-0"},[t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.BindFields(a.value)}}},[t("em",{staticClass:"fa fa-reply text-info"})])])])])})),0)])])])],1)},T=[],E=function(){var e=this,t=e._self._c;return t("div",[t("textarea",{attrs:{id:e.editorId}})])},D=[],_={name:"TinyMCEEditor",props:{editorId:{type:String,default:"editor"},value:{type:String,default:""},updateContent:{type:Function,required:!1}},mounted(){if(window.tinymce)this.initTinyMCE();else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/5.2.2/tinymce.min.js",e.onload=()=>this.initTinyMCE(),document.head.appendChild(e)}},methods:{initTinyMCE(){window.tinymce.init({selector:"#"+this.editorId,height:500,resize:!1,menubar:!0,automatic_uploads:!0,plugins:"advlist anchor autolink charmap fullscreen link lists preview save table  wordcount code image",toolbar:"undo redo | bold italic underline | alignleft aligncenter alignright  | bullist numlist | code | link image table | preview fullscreen",file_picker_types:"image",setup:e=>{e.on("change",()=>{this.syncContentWithParent(e)})},file_picker_callback:(e,t,a)=>{if("image"===a.filetype){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",t=>{const a=t.target.files[0],i=new FileReader;i.onload=t=>{const i="blobid"+Date.now(),o=tinymce.activeEditor.editorUpload.blobCache,l=t.target.result.split(",")[1],s=o.create(i,a,l);o.add(s),e(s.blobUri(),{title:a.name})},i.readAsDataURL(a)}),t.click()}},init_instance_callback:e=>{e.setContent(this.value)}})},syncContentWithParent(e){const t=e.getContent();"function"===typeof this.updateContent&&this.updateContent(t)},printEditorContent(){const e=tinymce.get(this.editorId);if(!e)return;const t=this.value,a=window.open("","","height=800,width=1000");a.document.write(`\n        <html>\n          <head>\n            <title>Print</title>\n            <style>\n              body {\n                margin: 20px;\n                font-family: sans-serif;\n              }\n              img {\n                max-width: 100%;\n              }\n              table {\n                width: 100%;\n                border-collapse: collapse;\n              }\n              table, th, td {\n                border: 1px solid black;\n              }\n                body{\n                width:80%;\n                heigth:81%;\n                }\n            </style>\n          </head>\n          <body>${t}</body>\n        </html>\n      `),a.document.close(),a.focus(),a.onload=()=>{a.print(),a.close()}}},watch:{value(e){const t=window.tinymce.get(this.editorId);t&&e!==t.getContent()&&t.setContent(e)}}},w=_,I=Object(S["a"])(w,E,D,!1,null,null,null),A=I.exports,L={components:{TinyMCE:A},props:{EditItme:{type:Array,required:!1}},data(){return{UserGuidData:[],id:null,isLoading:!1,editordata:"",Template_contents:"",FormSchema:[{layoutType:"triple",Data:[{astype:"TextField",label:this.$t("TemplateName"),name:"TemplateName",value:"",placeholder:"Template Name",validationRules:{required:!0},disabled:!1},{astype:"TextField",label:this.$t("Subject"),name:"Subject",value:"",placeholder:"Subject",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Category"),name:"Category",value:"",placeholder:"Category",config:{options:[],onChange:this.GetSubCategoryDDL},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SubCategory"),name:"SubCategory",value:"",placeholder:"Sub Category",config:{options:[],onChange:this.GetEmailTemplateColumn},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:"Status",config:{options:[]},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("TemplateContent"),name:"Content",value:"",visibility:!0,validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Cancel}],Offertemplateguide:[{name:"First Name",value:"FirstName"},{name:"Date Of Birth",value:"DateOfBirth"},{name:"Email",value:"Email"},{name:"Address",value:"Address"},{name:"Reporting Manager",value:"ReportingManager"},{name:"Last Name",value:"LastName"},{name:"Compensation stocks",value:"Compensationstocks"},{name:"Compensation period",value:"Compensationperiod"},{name:"Department",value:"Department"},{name:"Company Name",value:"CompanyName"},{name:"Job Location",value:"JobLocation"},{name:"Employement Type",value:"EmployementType"},{name:"Joining Date",value:"JoiningDate"},{name:"Company Url",value:"CompanyUrl"},{name:"Company Address",value:"CompanyAddress"},{name:"Company City",value:"CompanyCity"},{name:"Company State",value:"CompanyState"},{name:"Company ZipCode",value:"CompanyZipCode"},{name:"Job Title",value:"JobTitle"},{name:"Job Department",value:"JobDepartment"}],greetinguserguide:[{name:"First Name",value:"FirstName"},{name:"Last Name",value:"LastName"},{name:"Name",value:"Name"},{name:"Company Url",value:"CompanyUrl"},{name:"Company Address",value:"CompanyAddress"},{name:"Company City",value:"CompanyCity"},{name:"Company State",value:"CompanyState"},{name:"Company ZipCode",value:"CompanyZipCode"},{name:"Client Name",value:"ClientName"},{name:"FrontSiteUrl",value:"FrontSiteUrl"},{name:"Url",value:"Url"},{name:"Consumer Name",value:"ConsumerName"},{name:"Consumer Email",value:"ConsumerEmail"},{name:"Candidate Email",value:"CandidateEmail"},{name:"Job Title",value:"JobTitle"}],appointmentuserguide:[{name:"Consumer Name",value:"ConsumerName"},{name:"Consumer Email",value:"ConsumerEmail"}],appointmentregistrationuserguide:[{name:"Client Name",value:"ClientName"},{name:"FrontSite Url",value:"FrontSiteUrl"},{name:"Url",value:"Url"},{name:"Consumer Email",value:"ConsumerEmail"}],ticketinguserguide:[{name:"Site URL",value:"SiteURL"},{name:"Ip Address",value:"IpAddress"},{name:"Plateform",value:"Plateform"},{name:"Type",value:"Type"},{name:"Requesting Page",value:"RequestingPage"},{name:"Raised By Name",value:"RaisedByName"},{name:"Dear Name",value:"DearName"},{name:"Ticket Number",value:"TicketNumber"},{name:"Date",value:"Date"},{name:"Subject",value:"Subject"},{name:"Company Name",value:"CompanyName"},{name:"Phone",value:"Phone"},{name:"Email",value:"Email"},{name:"Priority",value:"Priority"},{name:"Department",value:"Department"},{name:"Comments",value:"Comments"},{name:"Assigned To Email",value:"AssignedToEmail"},{name:"Url",value:"Url"},{name:"ARaised By Email",value:"RaisedByEmail"},{name:"Closed By",value:"ClosedBy"},{name:"TicketType",value:"TicketType"},{name:"Contact Person",value:"ContactPerson"},{name:"Ticket Status",value:"TicketStatus"},{name:"Ticket Closed by Text",value:"TicketClosedbyText"},{name:"Ticket Previous Status",value:"TicketPreviousStatus"},{name:"Ticket Current Status",value:"TicketCurrentStatus"},{name:"Mergeor Split Ticket Numbers",value:"MergeorSplitTicketNumbers"}],interviewscheduletemplate:[{name:"First Name",value:"FirstName"},{name:"LastName",value:"LastName"},{name:"Company Name",value:"CompanyName"},{name:"Company Url",value:"CompanyUrl"},{name:"Company Address",value:"CompanyAddress"},{name:"Company City",value:"CompanyCity"},{name:"Company State",value:"CompanyState"},{name:"Company ZipCode",value:"CompanyZipCode"},{name:"Date Time",value:"DateTime"},{name:"Client Name",value:"ClientName"},{name:"Front Site Url",value:"FrontSiteUrl"},{name:"Url",value:"Url"},{name:"Consumer Name",value:"ConsumerName"},{name:"Consumer Email",value:"ConsumerEmail"}],editorData:"",SubCatData:[],currentCursorPosition:null,SetModuleId:0,tinyEditorInstance:null}},computed:{emailTemplateLabel(){return this.EditItme.template_id>0?this.$t("EditEmailTemplate"):this.$t("AddEmailTemplate")}},async created(){var e=this;this.userTypeId="CA"==this.GetUserInfo.UserType?1:"PM"==this.GetUserInfo.UserType?2:"NU"==this.GetUserInfo.UserType?3:4,await e.GetModuleList(),await e.GetStatusList(),e.EditItme.template_id>0&&(e.FormSchema[0].Data[0].value=e.EditItme.template_name,e.FormSchema[0].Data[0].disabled=!0,e.FormSchema[0].Data[1].value=e.EditItme.template_subject,e.FormSchema[0].Data[4].value=e.EditItme.status_id.value,e.Template_contents=e.EditItme.template_content,e.CatData.forEach(t=>{t.module_name===e.EditItme.module_id&&(e.FormSchema[0].Data[2].value=t.module_id)}),void 0!=e.FormSchema[0].Data[2].value&&""!=e.FormSchema[0].Data[2].value&&(await e.GetSubCategoryDDL(e.FormSchema[0].Data[2].value),e.SubCatData.forEach(t=>{t.NAME===e.EditItme.template_category_id&&(e.FormSchema[0].Data[3].value=t.SUB_MODULE_ID)})))},methods:{printContent(){this.$refs.editor.printEditorContent()},updateContent(e){this.Template_contents=e},GetModuleList:async function(){var e=this,t="userTypeId="+e.userTypeId;await l["a"].GetModuleList(t).then((function(t){t.data.Data.length>0&&(e.CatData=t.data.Data,e.CatData.forEach((t,a)=>{e.FormSchema[0].Data[2].config.options.push({name:t.module_name,value:t.module_id})}))})),e.$refs.dynamicform.UpdateKeyValue(),e.isLoading=!1},async GetStatusList(){var e=this;e.isLoading=!0,await l["a"].GetStatusList().then(t=>{null!=JSON.parse(t.data)&&(e.SubCatData=[],e.SubCatData=JSON.parse(t.data),e.SubCatData.forEach((t,a)=>{"Deleted"!=t.STATUS&&e.FormSchema[0].Data[4].config.options.push({name:t.STATUS,value:t.STATUS_ID})}),e.$refs.dynamicform.UpdateKeyValue(),e.isLoading=!1),e.isLoading=!1})},async GetEmailTemplateColumn(e){var t=this;t.isLoading=!0;var a=`moduleId=${t.SetModuleId}&submoduleId=${e.target.value}`;""==e.target.value||null==e.target.value||e.target.value;try{const e=await l["a"].GetEmailTemplateColumnList(a);if(e.data){const a=JSON.parse(e.data);if(a.length>0&&a[0].MAIN_DATA){const e=JSON.parse(a[0].MAIN_DATA);e.DATA&&Array.isArray(e.DATA)?t.UserGuidData=e.DATA.map(e=>({...e,name:e.name.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})):t.UserGuidData=[]}else t.UserGuidData=[]}else t.UserGuidData=[]}catch(i){console.error("Error parsing email template column data:",i),t.UserGuidData=[]}finally{t.isLoading=!1}},async GetSubCategoryDDL(e,t){var a,i=this;i.isLoading=!0;var o="ModuleID=0";o=e&&"object"===typeof e&&"target"in e&&""!==(null===(a=e.target)||void 0===a?void 0:a.value)?"ModuleID="+e.target.value:"ModuleID="+e;var s=parseInt(o.split("=")[1]);await l["a"].GetTemplateSubCategoryList(o).then(e=>{null!=JSON.parse(e.data)?(i.SubCatData=[],i.SubCatData=JSON.parse(e.data),i.FormSchema[0].Data[3].config.options=[],i.SubCatData.forEach((e,t)=>{i.FormSchema[0].Data[3].config.options.push({name:e.NAME,value:e.SUB_MODULE_ID})})):i.isLoading=!1,i.SetModuleId=s,i.SetTemplateVariable(s),i.FormSchema[0].Data[3].value="",i.$refs.dynamicform.UpdateKeyValue(),i.isLoading=!1})},BindFields(e){this.Template_contents+="{{"+e+"}} "},SubmitData(){var e=this,t=e.FormSchema[0].Data[0].value,a=e.FormSchema[0].Data[1].value,i=e.FormSchema[0].Data[2].value,o=e.FormSchema[0].Data[3].value,s=e.FormSchema[0].Data[4].value,n=this.Template_contents,r={TemplateId:e.EditItme.template_id>0?e.EditItme.template_id:0,TemplateName:t,TemplateContent:n,StatusId:s,TemplateCategoryId:i,TemplateSubCategoryId:o,TemplateSubject:a,TemplateJson:"",TemplateType:!0},d=new FormData;d.append("postString",JSON.stringify(r)),l["a"].AddAdvancedEmailTemplate(d).then(t=>{if(""==t.data.status&&"TemplateNameExists"==t.data.msg)e.ShowAlert(e.$t("TemplateNameExists"),"warning",e.$t("Alert"));else if("string"==typeof t.data){let a=JSON.parse(t.data)[0];1==a.status_id&&"added"==a.status_msg?(e.ShowAlert(e.$t("AddEmailSuccess"),"success",e.$t("Alert")),window.location.reload()):2==a.status_id&&"updated"==a.status_msg?(e.ShowAlert(e.$t("UpdateEmailTemplate"),"success",e.$t("Alert")),window.location.reload()):e.ShowAlert(e.$t("UnknownError"),"failure",e.$t("Alert"))}})},SetTemplateVariable(e){var t=this;t.isLoading=!0;var a=t.CatData.find(t=>t.module_id==e);if(a){t.UserGuidData=[];var i=a.module_name;t.UserGuidData="Appointment Calendar"==i?t.appointmentuserguide:"Appointment Registration"==i?t.appointmentregistrationuserguide:"Greeting"==i?t.greetinguserguide:"Ticketing"==i?t.ticketinguserguide:"CRM"==i||"EVENT"==i||"FSM"==i?[]:t.greetinguserguide}t.isLoading=!1},Cancel:function(){window.location.reload()}}},N=L,U=(a("1dce"),Object(S["a"])(N,b,T,!1,null,null,null)),x=U.exports,M={components:{LeftColumn:u["a"],AddCompanySetup:c["a"],AddAdvancedEmailTemplate:y,AddEmailTemplate:x},props:{sourcetype:{type:String,required:!0}},data(){return{recordId:0,showEmailTemplate:!1,noRecord:!1,isLoading:!1,CompanyId:null,UserId:null,EmailTemplateData:[],TotalRecords:0,listheaderbuttons:m.buttons,topSearchFields:m.topsearchSchema,ShowManageView:!1,ShowAddCustomReportView:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,listActions:m.listActions,searchCondition:"",conditionForInstantSearch:"",SortBy:"",SortExp:"",showsharereportview:!1,showemailreportview:!1,showschedulereportview:!1,ReportID:null,reportname:"",reportid:"",foldername:"",folderid:"",LeadStatusList:[],searchcondition:"",MODULENAME:"Company",SUBMODULECODE:"EmailTemplate",privilegeParams:null,sharetype:"",filteredHeaders:[],StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}],ShowAddAdvancedEmailTemplate:!1,Template_id:0,isShowList:!0,Emailcontent:"",Item:[],IsHide:!1,isEditReport:!1,isShowReport:!1,cloneTemName:"",_category_id:0}},async created(){this.userTypeId="CA"==this.GetUserInfo.UserType?1:"PM"==this.GetUserInfo.UserType?2:"NU"==this.GetUserInfo.UserType?3:4;var e=this;e.isLoading=!0,e.CompanyId=e.GetUserInfo.CompanyId,e.privilegeParams="controller=EmailTemplate&action=getCompanySetupModulePrivilege",await e.FetchData(),await e.GetModuleList(),e.getStatuslistForListing("Dynamic_Reporting","en")},computed:{filteredUserData(){return this.vueObj.UserData.map(e=>{const t={...e};return null!==t.USER_EMP_ID&&""!==t.USER_EMP_ID||(t.USER_EMP_ID="--"),t})}},updated(){const e=document.getElementsByClassName("theme-primary partition p-actions-expand");if(e[0]&&"p-name text-white"!=e[0].lastChild.className){const t=document.createElement("span");t.className="p-name text-white",t.textContent=this.$t("EmailTemplate"),e[0].appendChild(t)}},methods:{close(){this.isEditReport=!1,this.isShowReport=!1},GetTemplateCategoryListForCA(){var e=this;e.isLoading=!0,l["a"].GetTemplateCategoryListForCA().then(t=>{const a=JSON.parse(t.data);if(null!=a){var i;a.map(e=>({name:e.template_category_name,value:e.module_id}));null===(i=e.$forceUpdate)||void 0===i||i.call(e),e.isLoading=!1}})},GetModuleList:async function(){var e=this,t="userTypeId="+e.userTypeId;await l["a"].GetModuleList(t).then((function(e){const t=e.data.Data;if(null!=t){const e=t.map(e=>({name:e.module_name,value:e.module_id}));m.topsearchSchema.forEach(t=>{"SearchByCategory"===t.fieldName&&(t.listOptions=e)})}})),e.isLoading=!1},GetTemplateAllCategoryList(){try{l["a"].GetTemplateCategoryListForCA().then(e=>{const t=JSON.parse(e.data);if(null!=t){const e=t.map(e=>({name:e.template_category_name,value:e.template_category_id}));m.topsearchSchema.forEach(t=>{"SearchByCategory"===t.fieldName&&(t.listOptions=e)})}})}catch(e){alert(e)}},ClearFilter:function(){var e=this;m.topsearchSchema.forEach(e=>{e.value="",e.isSearch=!1}),e.searchCondition="",e.FetchData()},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"View":t.isVisible=!0;break;case"Edit":default:t.isVisible=!0}a.push(t)}),a},commonHeaderButtonClick:function(e){switch(console.log(e),e.callbackfunction){case"commonDeleteData":this.commonDeleteData();break;case"ActiveMultipleListing":this.UpdateStatus("Active");break;case"InactiveMultipleListing":this.UpdateStatus("Inactive");break;case"AddEmailTemplate":this.AddEmailTemplate();break;case"AddAdvancedEmailTemplate":this.AddAdvancedEmailTemplate();break}},AddEmailTemplate(){var e=this;e.ShowAddAdvancedEmailTemplate=!1,e.isShowList=!1,e.showEmailTemplate=!0},AddAdvancedEmailTemplate(){var e=this;e.showEmailTemplate=!1,e.isShowList=!1,e.ShowAddAdvancedEmailTemplate=!0},triggerEditReport(){this.cloneData&&this.actionButtonClick("clonereport",this.cloneData)},actionButtonClick:function(e,t,a,i){var o=this;switch(e){case"sharereport":o=this;l["a"].CheckPrivilege(o.privilegeParams+"ShareReport").then(a=>{if(!a.data)return o.ShowAlert(o.$t("UnAuthorized"),"warning",!0,"Alert"),!1;o.sharetype=e,o.folderid=t.FOLDER_ID,o.ReportID=t.REPORT_ID,o.foldername=t.REPORTNAME,o.showsharereportview=!0,$("#modalshareview").modal("show"),setTimeout((function(){$("#modalshareview").modal("show"),setTimeout((function(){o.SetBootstraptoolTip()}),200)}),1e3)});break;case"sendemail":o.sendemail(t.REPORT_ID,t.MODULENAME,t.SUBMODULECODE);break;case"clonereport":o.cloneData=t,o.isEditReport?o.clonereport(t):(o.cloneTemName=t.template_name,o.isEditReport=!0);break;case"setschedule":o.setschedule(t.REPORT_ID);break;case"ViewReport":o.ViewReport(t);break}},clonereport:async function(e){let t=this;var a={TemplateId:e.template_id,TemplateName:t.cloneTemName,TemplateContent:"",StatusId:0,TemplateCategoryId:0,TemplateSubCategoryId:0,TemplateSubject:"",TemplateJson:"",TemplateType:!0,Type:"CLONE"},i=new FormData;i.append("postString",JSON.stringify(a)),l["a"].AddAdvancedEmailTemplate(i).then(e=>{let a;if("string"===typeof e.data){try{a=JSON.parse(e.data)[0]}catch(i){return console.error("Invalid JSON response",i),void t.ShowAlert(t.$t("UnexpectedError"),"error",t.$t("Alert"))}1===a.status_id&&"added"===a.status_msg?(t.ShowAlert(t.$t("AddEmailSuccess"),"success",t.$t("Alert")),window.location.reload()):2===a.status_id&&"updated"===a.status_msg?(t.ShowAlert(t.$t("UpdateEmail"),"success",t.$t("Alert")),window.location.reload()):3===a.status_id&&"cloned"===a.status_msg?(t.ShowAlert(t.$t("EmailCloneSuccess"),"success",t.$t("Alert")),window.location.reload()):-2===a.status_id&&"TemplateNameExists"===a.status_msg?t.ShowAlert(t.$t("TemplateNameExists"),"warning",t.$t("Alert")):t.ShowAlert(t.$t("UnexpectedError"),"error",t.$t("Alert"))}else console.warn("Unexpected response format",e.data),t.ShowAlert(t.$t("UnexpectedError"),"error",t.$t("Alert"))})},async GetEmailTemplateContentbyId(e){var t=this;t.isLoading=!0;var a="emailcontentId="+e;await l["a"].GetEmailcontent(a).then(e=>{null==e.data&&""==e.data||(t.Emailcontent=e.data[0].TEMPLATE_CONTENT)}),t.isLoading=!1},ViewReport:async function(e){var t=this;t.isLoading=!0,await t.GetEmailTemplateContentbyId(e.template_id),t.isShowReport=!0,t.isLoading=!1},sortdata:async function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),await this.FetchData(),$("#th-"+e+"  span:first-child").attr("class",t)},pagerMethod:async function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,await this.FetchData()},leftCommonSearch:async function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",await this.FetchData()},ManageFolder:function(){var e=this;l["a"].CheckPrivilege(e.privilegeParams+"FolderListing").then(t=>{if(!t.data)return e.ShowAlert(e.$t("UnAuthorized"),"warning",!0,"Alert"),!1;var a;e.ShowManageView=!0,$("#modalManageView").modal("show"),setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3),null===(a=e.$refs.managefolder)||void 0===a||a.GetViewList()})},AddDesignation:function(){var e=this;console.log(e,"Add")},commonDeleteData:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Report"),(function(){var e={ids:a,moduleName:"Company",subModuleCode:"EmailTemplate",refCode:"COMPANYSETUP_DELETE"},i=JSON.stringify(e);l["a"].CommonDeleteData(i).then((async function(e){200==e.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("EmailTemplate")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),await t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("EmailTemplate")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"))},UpdateStatus:async function(e){var t=this;e="Active"==e?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&(t.listheaderbuttons[2].isdisabled=!1,t.listheaderbuttons[3].isdisabled=!1,t.listheaderbuttons[4].isdisabled=!1,t.confirmR(t.$t("AreYouSureToUpdateStatus"),!0,t.$t("update")+"  "+t.$t("status"),(function(){var i={ID:a,StatusId:e,IsFor:"COMPANYSETUP_UPDATE",Module:"Company",Submodule:"EmailTemplate"},o=JSON.stringify(i);console.log(o),l["a"].CommonUpdateStatus(o).then(e=>{200==e.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.listheaderbuttons[2].isdisabled=!0,t.listheaderbuttons[3].isdisabled=!0,t.listheaderbuttons[4].isdisabled=!0,t.ShowAlert(t.$t("RecordUpdatedSuccessfully"),"success",!0,t.$t("Alert")),t.FetchData())})})))},getRequestParams:function(e,t,a,i,o,l){let s={};return e&&(s["pageNumber"]=e),l&&(s["searchcondition"]=l),o&&(s["is_paged"]=o),a&&(s["sortBy"]=a),i&&(s["sortExp"]=i),t&&(s["pageSize"]=t),s},clickEventOfColumn:async function(e,t){var a=this;a.isLoading=!0,await a.GetEmailTemplateContentbyId(e.template_id),e.template_content=a.Emailcontent,"template_name"==t.COLUMN_NAME&&(1==e.template_type?(a.Item=e,a.showEmailTemplate=!0,a.ShowAddAdvancedEmailTemplate=!1,a.isShowList=!1):(a.Item=e,a.Template_id=e.template_id,a.ShowAddAdvancedEmailTemplate=!0,a.showEmailTemplate=!1,a.isShowList=!1)),"USERNAME"==t.COLUMN_NAME&&this.$router.push({name:"viewcustomreport",params:{ReportID:e.REPORT_ID,ACCESS:e.ACCESS}}),a.isLoading=!1},FetchData:async function(){var e=this;e.isLoading=!0;var t=`CompanyId=${e.CompanyId}&pageSize=${e.PageSize}&pageNum=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&searchQuery=${e.searchCondition.trim()}&module=Company&subModule=EmailTemplate`;await l["a"].EmailTemplateListing(t).then((function(t){e.Headers=t.data.FieldSchema;t.data.Data;const a=["template_name","template_subject","template_category_id","module_id","created_at","created_by","status_id"];e.filteredHeaders=e.Headers.filter(e=>a.includes(e.COLUMN_NAME)),e.filteredHeaders.forEach(e=>{e.settings=null,"template_name"==e.COLUMN_NAME&&(e.settings={isInSlot:!0}),"status_id"===e.COLUMN_NAME&&(e.settings={isInSlot:!0})}),""!=t.data.Data&&null!=t.data.Data?(t.data.Data.length>0?(e.EmailTemplateData=t.data.Data,e.EmailTemplateData.forEach(e=>{e.isCheckBoxDisabled=!1,null==e.company_id&&(e.isCheckBoxDisabled=!0),e.module_id=null!=JSON.parse(e.module_id).Name?JSON.parse(e.module_id).Name:"--",e.template_category_id=null!=JSON.parse(e.template_category_id).Name?JSON.parse(e.template_category_id).Name:"--",e.modified_by=JSON.parse(e.modified_by),e.status_id=JSON.parse(e.status_id),e.created_by=null!=JSON.parse(e.created_by).Name?JSON.parse(e.created_by).Name:"--"}),e.TotalRecords=e.EmailTemplateData[0].total_records,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.listheaderbuttons[2].isdisabled=!0,e.listheaderbuttons[3].isdisabled=!0,e.listheaderbuttons[4].isdisabled=!0,e.noRecord=!1):(e.EmailTemplateData=[],e.noRecord=!0,e.TotalRecords=0),void 0!=localStorage.SavedParameters&&localStorage.removeItem("SavedParameters")):(e.noRecord=!0,e.EmailTemplateData=[],e.TotalRecords=0),e.isLoading=!1}))},closeModalSharePopup:function(){$("#modalshareview").modal("hide"),this.showsharereportview=!1,this.vm.Emailcontent=""},getStatuslistForListing:function(e,t){var a=this,i="langCode="+t+"&statusType="+e+"&hasglobal=true";l["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))}}},k=M,F=(a("e74d"),Object(S["a"])(k,i,o,!1,null,null,null));t["default"]=F.exports},"894e":function(e,t,a){var i=a("9dc5");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("499e").default;o("64da9544",i,!0,{sourceMap:!1,shadowMode:!1})},"9b25":function(e,t,a){"use strict";a("1324")},"9dc5":function(e,t,a){var i=a("4bad");t=i(!1),t.push([e.i,".left-tab-container[data-v-79923adf]{max-height:70vh;overflow-y:auto}.left-tab .nav-link.left-menu a[data-v-79923adf]{width:100%;display:flex}.left-tab .nav-link.left-menu.active .listing[data-v-79923adf],.left-tab .nav-link.left-menu[data-v-79923adf]:hover,.listing[data-v-79923adf]:hover{color:#fff}",""]),e.exports=t},aae2:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-menu-tab mt-2"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"theme-primary partition"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("CompanySetup")))])]),t("div",{staticClass:"left-tab-container"},[t("div",{staticClass:"mb-0 d-lg-block p-2 border"},[t("div",{staticClass:"input-group customsearchbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.moduleSearchElement,expression:"moduleSearchElement"}],staticClass:"form-control searchcustomfilter border-right-0",attrs:{type:"text",maxlength:"50",id:"searchinput",placeholder:"Search by Name",autocomplete:"off"},domProps:{value:e.moduleSearchElement},on:{keyup:e.ListFiltering,input:function(t){t.target.composing||(e.moduleSearchElement=t.target.value)}}}),e._m(0)])]),t("div",{staticClass:"mt-2 mCustomScrollbar _mCS_4"},[t("a",{staticClass:"card mobile-tab-accordian active",attrs:{href:"javascript:;","data-controllername":"billingrule","data-actionname":"ImportFormatListing"},on:{click:function(t){e.showMobileTabs=!e.showMobileTabs}}},[t("div",{staticClass:"card-header",attrs:{role:"tab"}},[t("h5",[t("span",{staticClass:"mb-0"},[t("i",{class:e.GetSelectedModuleItem.icon}),e._v(" "+e._s(e.$t(e.GetSelectedModuleItem.title))),t("i",{staticClass:"fa fa-angle-down rotate-icon float-right",attrs:{"aria-hidden":"true"}})])])])]),e.showMobileTabs?t("div",e._l(e.leftTabList,(function(a){return e.GetSelectedModuleItem.title!=a.title?t("a",{staticClass:"card mobile-tab-accordian",attrs:{href:"javascript:;",title:a.title},on:{click:function(t){e.SetCurrentTab(a.title),e.showMobileTabs=!1}}},[t("div",{staticClass:"card-header",attrs:{role:"tab"}},[t("h5",[t("span",{staticClass:"mb-0"},[t("em",{class:a.icon}),e._v(e._s(e.TruncateStr(a.title,25))),t("em",{staticClass:"fa fa-angle-down rotate-icon float-right",attrs:{"aria-hidden":"true"}})])])])]):e._e()})),0):e._e(),t("ul",{staticClass:"nav nav-pills flex-column left-tab responivecustomtab lefttabiconfix"},e._l(e.leftTabList,(function(a){return t("li",{directives:[{name:"show",rawName:"v-show",value:a.isVisible,expression:"list.isVisible"}],attrs:{title:a.title}},[t("router-link",{class:{"nav-link left-menu":!0,active:a.goTo===e.$route.path},staticStyle:{"align-items":"center"},attrs:{to:a.goTo}},[t("em",{staticClass:"mr-2",class:a.icon}),e._v(e._s(e.$t(e.TruncateStr(a.title,25)))+" ")])],1)})),0)])])],1)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-group-append"},[t("span",{staticClass:"input-group-text bg-transparent bg-white border-left-0"},[t("em",{staticClass:"fa fa-search"})])])}],l=a("9769"),s={name:"listing-status",props:{HeaderText:{type:String,required:!0}},data:function(){return{CompanyId:null,userId:null,isLoading:!1,MainSearchmodel:"",GetSelectedValue:"",Header:this.HeaderText,searchColumnfilter:[],moduleSearchElement:"",currentTab:"AnnouncementMessage",Header:this.HeaderText,showMobileTabs:!0,defaultTabs:["AnnouncementMessage","Department","Designation","EmailTemplate","CompanyHoliday","CurrencyManagement","UserTitle","CompanyNotification","Greeting","LoginAuthorization","Shift","Status"],leftTabList:[{title:"AnnouncementMessage",icon:"fa fa-bullhorn",goTo:"/AnnouncementMessage/Index",isShow:!1},{title:"Break",icon:"fa fa-clock-o",goTo:"/Break/Index",isShow:!1},{title:"Category",icon:"fa fa-tasks",goTo:"/Category/Index",isShow:!1},{title:"Channel",icon:"fa fa-television",goTo:"/Channel/Index",isShow:!1},{title:"CompanyHoliday",icon:"fa fa-calendar",goTo:"/CompanyHoliday/Index",isShow:!1},{title:"CompanyNotification",icon:"fa fa-bell",goTo:"/CompanyNotification/Index",isShow:!1},{title:"ContactType",icon:"fa fa-list-alt",goTo:"/ContactType/Index",isShow:!1},{title:"CurrencyManagement",icon:"fa fa-money",goTo:"/CurrencyManagement/Index",isShow:!1},{title:"Department",icon:"fa fa-users",goTo:"/Department/Index",isShow:!1},{title:"Designation",icon:"fa fa-address-card",goTo:"/Designation/Index",isShow:!1},{title:"Discounts",icon:"fa fa-usd",goTo:"/ClientBill/CreateDeductions",isShow:!1},{title:"EmailTemplate",icon:"fa fa-file-text-o",goTo:"/EmailTemplate/Index",isShow:!1},{title:"Feedback",icon:"fa fa-quote-left",goTo:"/Feedback/Index",isShow:!1},{title:"Greeting",icon:"fa fa-thumbs-o-up",goTo:"/Greeting/Index",isShow:!1},{title:"IndustryType",icon:"fa fa-building-o",goTo:"/IndustryType/Index",isShow:!1},{title:"Immigration",icon:"fa fa-address-card",goTo:"/Immigration/Index",isShow:!1},{title:"Location",icon:"fa fa-map-marker",goTo:"/Location/Index",isShow:!1},{title:"LoginAuthorization",icon:"fa fa-lock",goTo:"/LoginAuthorization/Index",isShow:!1},{title:"Priority",icon:"fa fa-check-square-o",goTo:"/Priority/Index",isShow:!1},{title:"PaymentGateway",icon:"fa fa-credit-card",goTo:"/PaymentGateway/Index",isShow:!1},{title:"ProvisionalRight",icon:"fa fa-check",goTo:"/ProvisionalRight/Index",isShow:!1},{title:"ReviewTemplate",icon:"fa fa-file-text-o",goTo:"/ReviewTemplate/Index",isShow:!1},{title:"Service",icon:"fa fa-newspaper-o",goTo:"/Service/Index",isShow:!1},{title:"Shift",icon:"fa fa-clock-o",goTo:"/Shift/Index",isShow:!1},{title:"Skill",icon:"fa fa-star",goTo:"/Skill/Index",isShow:!1},{title:"Status",icon:"fa fa-bar-chart",goTo:"/Status/Index",isShow:!1},{title:"UserTitle",icon:"fa fa-address-card-o",goTo:"/UserTitle/Index",isShow:!1},{title:"CheckList",icon:"fa fa-address-card-o",goTo:"/Company/CheckList",isShow:!1},{title:"TrainingFeedback",icon:"fa fa-wpforms",goTo:"/feedbackoption/Index",isShow:!1}]}},created:function(){var e=this;e.CompanyId=e.GetUserInfo.CompanyId,e.userId=e.GetUserInfo.ID;var t=`companyId=${e.CompanyId}&userId=${e.userId}`;this.getCompanySetupModulePrivilege(t)},computed:{GetSelectedModuleItem(){var e=this,t=e.leftTabList.filter(t=>t.title.toLowerCase()==e.currentTab.toLowerCase());return t[0]}},methods:{SetCurrentTab:function(e){this.currentTab=e.toLowerCase()},getCompanySetupModulePrivilege:async function(e){let t=this;t.isLoading=!0;try{const a=await l["a"].getCompanySetupModulePrivilege(e);if(null!=a&&null!=a.data&&a.data.length>0){t.isLoading=!1;a.data;t.leftTabList.forEach((function(e){e.title.toLowerCase().includes(t.moduleSearchElement.toLowerCase())?e.isVisible=!0:e.isVisible=!1}))}}catch(a){console.error("Error fetching company setup module privilege:",a),t.isLoading=!1,t.showErrorMessage("An error occurred while fetching company setup module privilege. Please try again later.")}},SelectAllSearch(){var e=this;e.GetSelectedValue=window.getSelection().toString()},ListFiltering:function(){var e=this;""!=e.moduleSearchElement?e.leftTabList.forEach((function(t){t.title.toLowerCase().includes(e.moduleSearchElement.toLowerCase())?t.isVisible=!0:t.isVisible=!1})):e.leftTabList.forEach((function(e){e.isVisible=!0}))}}},n=s,r=(a("41ef"),a("2877")),d=Object(r["a"])(n,i,o,!1,null,"79923adf",null);t["a"]=d.exports},de6a:function(e,t,a){var i=a("4bad");t=i(!1),t.push([e.i,".tox-statusbar,.tox-statusbar__text-container{visibility:hidden!important}",""]),e.exports=t},e74d:function(e,t,a){"use strict";a("1a0f")}}]);
//# sourceMappingURL=chunk-46a9da04.js.map