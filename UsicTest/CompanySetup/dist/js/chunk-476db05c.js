(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-476db05c"],{"1afd":function(t,e,a){var s=a("fea2");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("48b9df42",s,!0,{sourceMap:!1,shadowMode:!1})},"1ecc":function(t,e,a){var s=a("f16f");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("ff1e9088",s,!0,{sourceMap:!1,shadowMode:!1})},"573f":function(t,e,a){var s=a("8a39");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("6d54b84b",s,!0,{sourceMap:!1,shadowMode:!1})},"5a3f":function(t,e,a){"use strict";a("1afd")},"8a39":function(t,e,a){var s=a("4bad");e=s(!1),e.push([t.i,".scrollable-container{height:385px;overflow-x:auto}",""]),t.exports=e},b2e5:function(t,e,a){"use strict";a("573f")},d85a:function(t,e,a){"use strict";a("1ecc")},e361:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"container-fluid tab-style p-0 mt-3 clientwallet"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.ClientId?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-4 col-lg-4"},[e("div",{staticClass:"form-group mb-0"},[e("label",[t._v(t._s(t.$t("ChooseCompany"))+":")]),e("div",{staticClass:"input-group form-control p-0 border-0"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCompany,expression:"selectedCompany"}],staticClass:"form-control",attrs:{id:"ddlcompanylist",tabindex:"1"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedCompany=e.target.multiple?a:a[0]},t.onCompanyChange]}},[e("option",{attrs:{disabled:"",value:""}},[t._v(" "+t._s(t.$t("SelectCompany"))+" ")]),t._l(t.companyListData,(function(a){return e("option",{key:a.value,domProps:{value:a.value}},[t._v(" "+t._s(a.name)+" ")])}))],2)])])])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"card profile-card border p-3 ai_base"},[e("div",{staticClass:"d-flex align-items-center"},[t._m(0),e("div",{staticClass:"profile-infoo"},[e("h2",{staticClass:"mb-1"},[t._v("Wallet Balance")]),e("div",{staticClass:"font-18"},[t._v(t._s(t.BaseCurrencyCode)+" "+t._s(t.CurrentAmount?parseFloat(t.CurrentAmount).toFixed(2):"0.00")+" ")]),e("div",{staticClass:"mt-0"},[e("p",{staticClass:"mt-2 text-muted"},[t._v(" Low balance threshold: "+t._s(t.BaseCurrencyCode)+" "+t._s(t.thresholdCurrency?parseFloat(t.thresholdCurrency).toFixed(2):"0.00")+" ")])])]),e("div",{staticClass:"float-right ml-auto"},[e("a",{staticClass:"btn btn-primary mr-2",on:{click:function(e){return t.clkTransactionHistory()}}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("Transaction History")]),t.ClientId?t._e():e("a",{staticClass:"btn btn-warning",on:{click:function(e){return t.clkRechargeNow()}}},[e("em",{staticClass:"fa fa-money mr-2"}),t._v("Recharge Now")])])])])]),t.ClientId?t._e():e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"card profile-card border ai_base p-3"},[e("div",{staticClass:"d-flex align-items-center"},[t._m(1),e("div",{staticClass:"profile-infoo"},[e("h2",{staticClass:"mb-1"},[t._v(t._s(t.GetUserInfo.Name))]),e("div",{staticClass:"font-14"},[t._v(t._s(t.GetUserInfo.Email))]),e("div",{staticClass:"mt-3"},[t._v(" Customer ID: "),e("strong",[t._v(t._s(t.AccountNumber))])])])])])])]),e("div",{staticClass:"col-12 p-0 float-left",class:{"d-none":t.isHidden}},[e("div",{staticClass:"col-12 p-0 float-left"},[t._m(2),e("div",{staticClass:"utilities-grid"},[e("div",{staticClass:"utility-card electricity scrollable-container"},[t._m(3),0===t.ElectricData.length?e("div",{staticClass:"infogrid_base"},[e("div",[t._v("Meter: --")]),t._m(4),e("div",{staticClass:"info-grid"},[t._m(5),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title red-t"},[t._v("Est. Charge")]),e("div",{staticClass:"inner-value red-t"},[t._v(" "+t._s(t.BaseCurrencyCode)+" 0 ")])])]),t._m(6),t._m(7)]):t.ElectricData.length>0?t._l(t.ElectricData,(function(a){return e("div",{key:a.related_info_id,staticClass:"infogrid_base"},[e("div",[t._v("Meter: "+t._s(a.unique_name))]),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Current Reading")]),e("div",{staticClass:"inner-value"},[t._v(" "+t._s(a.electric_current_reading)+" "),e("small",[t._v("kWh")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Previous Reading")]),e("div",{staticClass:"inner-value"},[t._v(" "+t._s(a.electric_prev_reading)+" "),e("small",[t._v("kWh")])])])]),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Consumption")]),e("div",{staticClass:"inner-value green"},[t._v(" "+t._s(a.electric_consumption)+" "),e("small",[t._v("kWh")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title red-t"},[t._v("Est. Charge")]),e("div",{staticClass:"inner-value red-t"},[t._v(" "+t._s(t.BaseCurrencyCode)+" 0 ")])])]),e("div",{staticClass:"info-grid"},[e("label",[e("span",{staticClass:"font-weight-medium"},[t._v("Last Reading Date:")]),t._v(" "+t._s(t.$d(t.formatDate(a.current_last_reading_date)))+" ")])]),e("div",{staticClass:"text-center mt-3"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.ViewHistory("Electric",a.related_info_id)}}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Usage History ")])])])})):t._e()],2),e("div",{staticClass:"utility-card water h2o scrollable-container"},[e("div",{staticClass:"utility-title"},[e("svg",{staticClass:"bi bi-droplet text-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"}})]),t._v(" Water ")]),0===t.WaterData.length?e("div",{staticClass:"infogrid_base"},[e("div",[t._v("Meter: --")]),t._m(8),e("div",{staticClass:"info-grid"},[t._m(9),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title red-t"},[t._v("Est. Charge")]),e("div",{staticClass:"inner-value red-t"},[t._v(" "+t._s(t.BaseCurrencyCode)+" 0 ")])])]),t._m(10),t._m(11)]):t.WaterData.length>0?t._l(t.WaterData,(function(a){return e("div",{key:a.related_info_id,staticClass:"infogrid_base"},[e("div",[t._v("Meter: "+t._s(a.unique_name))]),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Current Reading")]),e("div",{staticClass:"inner-value"},[t._v(" "+t._s(a.water_current_reading)+" "),e("small",[t._v("m³")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Previous Reading")]),e("div",{staticClass:"inner-value"},[t._v(" "+t._s(a.water_prev_reading)+" "),e("small",[t._v("m³")])])])]),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Consumption")]),e("div",{staticClass:"inner-value green"},[t._v(" "+t._s(a.water_consumption)+" "),e("small",[t._v("m³")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title red-t"},[t._v("Est. Charge")]),e("div",{staticClass:"inner-value red-t"},[t._v(" "+t._s(t.BaseCurrencyCode)+" 0 ")])])]),e("div",{staticClass:"info-grid"},[e("label",[e("span",{staticClass:"font-weight-medium"},[t._v("Last Reading Date:")]),t._v(" "+t._s(t.$d(t.formatDate(a.current_last_reading_date)))+" ")])]),e("div",{staticClass:"text-center mt-3"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.ViewHistory("Water",a.related_info_id)}}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Usage History ")])])])})):t._e()],2),e("div",{staticClass:"utility-card gas scrollable-container"},[t._m(12),0===t.GasData.length?e("div",[e("div",[t._v("Meter: --")]),t._m(13),e("div",{staticClass:"info-grid"},[t._m(14),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title red-t"},[t._v("Est. Charge")]),e("div",{staticClass:"inner-value red-t"},[t._v(" "+t._s(t.BaseCurrencyCode)+" 0 ")])])]),t._m(15),t._m(16)]):t.GasData.length>0?t._l(t.GasData,(function(a){return e("div",{key:a.related_info_id,staticClass:"infogrid_base"},[e("div",[t._v("Meter: "+t._s(a.unique_name))]),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Current Reading")]),e("div",{staticClass:"inner-value"},[t._v(" "+t._s(a.gas_current_reading)+" "),e("small",[t._v("CCF")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Previous Reading")]),e("div",{staticClass:"inner-value"},[t._v(" "+t._s(a.gas_prev_reading)+" "),e("small",[t._v("CCF")])])])]),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Consumption")]),e("div",{staticClass:"inner-value green"},[t._v(" "+t._s(a.gas_consumption)+" "),e("small",[t._v("CCF")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title red-t"},[t._v("Est. Charge")]),e("div",{staticClass:"inner-value red-t"},[t._v(" "+t._s(t.BaseCurrencyCode)+" 0 ")])])]),e("div",{staticClass:"info-grid"},[e("label",[e("span",{staticClass:"font-weight-medium"},[t._v("Last Reading Date:")]),t._v(" "+t._s(t.$d(t.formatDate(a.current_last_reading_date)))+" ")])]),e("div",{staticClass:"text-center mt-3"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.ViewHistory("Gas",a.related_info_id)}}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Usage History ")])])])})):t._e()],2)])])])],1),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups clientwallet"},[t.isRechargeNow?e("div",{staticClass:"modal d-block dialog"},[e("div",{staticClass:"modal-dialog modal-lg",staticStyle:{width:"600px !important"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Recharge Wallet")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.closeModal}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body recharge_popup"},[e("div",{staticClass:"card recharge mt-0"},[e("label",[t._v("Enter Amount ("+t._s(t.BaseCurrencyCode)+"):")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.RechargeAmount,expression:"RechargeAmount"}],attrs:{type:"number",step:"0.01",min:"0",placeholder:"0.00"},domProps:{value:t.RechargeAmount},on:{input:[function(e){e.target.composing||(t.RechargeAmount=e.target.value)},function(e){return t.onAmountInput(e)}]}}),t.RechargeAmount&&!t.isRechargeAmountValid?e("div",{staticClass:"text-danger small mt-1"},[t._v("Please enter a valid amount (up to 10 digits, optional 2 decimals) greater than 0.")]):t._e(),e("div",{staticClass:"quick-select"},t._l([10,25,50,100],(function(a){return e("button",{key:a,class:{active:t.RechargeAmount==a},on:{click:function(e){return t.setAmount(a)}}},[t._v(" "+t._s(t.BaseCurrencyCode)+" "+t._s(a)+" ")])})),0),e("button",{staticClass:"btn btn-success",on:{click:t.WalletRecharge}},[e("em",{staticClass:"fa fa-credit-card"}),t._v(" Recharge Now")]),e("div",{staticClass:"note float-left"},[e("strong",[t._v("Note:")]),t._v(" Funds will be available immediately after successful payment processing. ")])])])])])]):t._e()])]),t.IsClientWalletRechargePayNow?e("ClientWalletRechargePayNow",{attrs:{RechargeAmount:t.RechargeAmount,BaseCurrencyCode:t.BaseCurrencyCode}}):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar mr-3"},[e("em",{staticClass:"fa fa-wallet"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar mr-3"},[e("img",{attrs:{src:"https://talygenv.github.io/Vue-UI-Content/images/avatar-icon.jpg"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-12 my-4 p-0"},[e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Your Utilities")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"utility-title"},[e("em",{staticClass:"fa fa-lightbulb-o text-danger"}),t._v(" Electricity ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Current Reading")]),e("div",{staticClass:"inner-value"},[t._v(" 0 "),e("small",[t._v("kWh")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Previous Reading")]),e("div",{staticClass:"inner-value"},[t._v(" 0 "),e("small",[t._v("kWh")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Consumption")]),e("div",{staticClass:"inner-value green"},[t._v(" 0 "),e("small",[t._v("kWh")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-grid"},[e("label",[e("span",{staticClass:"font-weight-medium"},[t._v("Last Reading Date:")]),t._v(" -- ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-3"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:void(0)"}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Usage History ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Current Reading")]),e("div",{staticClass:"inner-value"},[t._v(" 0 "),e("small",[t._v("m³")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Previous Reading")]),e("div",{staticClass:"inner-value"},[t._v(" 0 "),e("small",[t._v("m³")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Consumption")]),e("div",{staticClass:"inner-value green"},[t._v(" 0 "),e("small",[t._v("m³")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-grid"},[e("label",[e("span",{staticClass:"font-weight-medium"},[t._v("Last Reading Date: --")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-3"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:void(0)"}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Usage History ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"utility-title"},[e("em",{staticClass:"fa fa-fire text-warning"}),t._v(" Gas ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-grid"},[e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Current Reading")]),e("div",{staticClass:"inner-value"},[t._v("0 "),e("small",[t._v("CCF")])])]),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Previous Reading")]),e("div",{staticClass:"inner-value"},[t._v("0 "),e("small",[t._v("CCF")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"inner-box"},[e("div",{staticClass:"inner-title"},[t._v("Consumption")]),e("div",{staticClass:"inner-value green"},[t._v("0 "),e("small",[t._v("CCF")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-grid"},[e("label",[e("span",{staticClass:"font-weight-medium"},[t._v("Last Reading Date: --")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center mt-3"},[e("a",{staticClass:"btn btn-info",attrs:{href:"javascript:void(0)"}},[e("em",{staticClass:"fa fa-eye mr-2"}),t._v("View Usage History ")])])}],r=(a("14d9"),a("9769")),n=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[e("h5",{staticClass:"modal-title"},[t._v("Recharge Pay")]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.CloseClientWalletRecharge()}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"container-fluid invoice-payment p-0"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-12 col-xl-12 p-0"},[e("div",{staticClass:"card probx mt-0 recharge_payment"},[e("div",{staticClass:"card-header"},[e("h2",{staticClass:"mb-0"},[t._v(t._s(t.$t("PaymentGateway")))])]),e("div",{staticClass:"card-body"},[e("div",{attrs:{id:"ProcessPayment"}},[e("div",{staticClass:"clientwalletsprite"},[t._l(t.paymentGateways,(function(a,s){return"Wallet"!==a.PaymantGatewayType?e("div",{key:s,staticClass:"col-sm-12 col-lg-12 col-md-12 mb-0 p-0"},[e("button",{staticClass:"btn w-100 py-3",class:[a.PaymantGatewayType,"",{active:t.selectedGateway===a.PaymentGatewayCode}],attrs:{type:"button"},on:{click:function(e){return t.selectGateway(a.PaymentGatewayCode)}}},[e("em",{class:t.selectedGateway===a.PaymentGatewayCode?"fa fa-check-circle float-left font-20 text-success":"fa fa-circle-thin float-left font-20"})])]):t._e()})),t.PaymentLink?e("div",{staticClass:"col-md-4 mb-3"},[e("a",{staticClass:"btn btn-outline-info w-100 py-3",attrs:{href:t.PaymentLink,target:"_blank"}},[t._v(" "+t._s(t.$t("ExternalLink")||"External Link")+" ")])]):t._e()],2),e("input",{attrs:{type:"hidden",name:"PaymentGatewayCode"},domProps:{value:t.selectedGateway}}),e("div",{staticClass:"right-forms"},["Stripe"==t.selectedGateway?e("div",[e("form",{ref:"paymentForm",on:{submit:function(e){return e.preventDefault(),t.submitPayment.apply(null,arguments)}}},[e("div",{staticClass:"row py-3"},[e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"cardholder-name"}},[t._v("Name On Card:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.billingDetails.name,expression:"billingDetails.name"}],staticClass:"stripe-input w-100 form-control",attrs:{type:"text",placeholder:"Name On Card"},domProps:{value:t.billingDetails.name},on:{input:function(e){e.target.composing||t.$set(t.billingDetails,"name",e.target.value)}}})])]),t._m(0),t._m(1),t._m(2),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Recharge Amount ("+t._s(t.BaseCurrencyCode)+"):")]),e("input",{staticClass:"form-control font-weight-bold",attrs:{type:"text",disabled:""},domProps:{value:t.RechargeAmount?parseFloat(t.RechargeAmount).toFixed(2):"0.00"}})])]),e("div",{staticClass:"stripe-error",attrs:{id:"card-errors"}},[t._v(" "+t._s(t.errorMessage))])]),e("div",{staticClass:"col-12 mt-3 p-0"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("input",{ref:"stripeToken",attrs:{type:"hidden"}}),e("input",{ref:"hdnCardType",attrs:{type:"hidden"}}),e("input",{ref:"hdnNameonCard",attrs:{type:"hidden"}}),e("input",{ref:"hdnCardNumber",attrs:{type:"hidden"}}),e("input",{ref:"hdnCardMonth",attrs:{type:"hidden"}}),e("input",{ref:"hdnCardYear",attrs:{type:"hidden"}}),e("input",{ref:"hdnCvv",attrs:{type:"hidden"}}),e("a",{staticClass:"btn btn-info mr-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.submitPayment()}}},[e("em",{staticClass:"fa fa-credit-card-alt pr-2"}),t._v(t._s(t.$t("PayNow"))+" ")]),e("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.RechargeCancel()}}},[e("em",{staticClass:"fa fa-times pr-2"}),t._v(t._s(t.$t("Cancel"))+" ")])]),t._m(3)])])])]):"PayU"==t.selectedGateway||"Razorpay"==t.selectedGateway?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[e("div",{staticClass:"row py-3"},[e("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Recharge Amount ("+t._s(t.BaseCurrencyCode)+"):")]),e("input",{staticClass:"form-control font-weight-bold",attrs:{type:"text",disabled:""},domProps:{value:t.RechargeAmount?parseFloat(t.RechargeAmount).toFixed(2):"0.00"}})])]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-info mr-1",attrs:{href:"javascript:;"},on:{click:t.RechargePayNow}},[e("em",{staticClass:"fa fa-credit-card-alt pr-2"}),t._v(t._s(t.$t("PayNow")))]),e("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:function(e){return t.RechargeCancel()}}},[e("em",{staticClass:"fa fa-times pr-2"}),t._v(t._s(t.$t("Cancel"))+" ")])]),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"py-2 mandatory"},[t._v(t._s(t.$t("MandatoryString")))])])])])])]):e("div",[e("div",{staticClass:"row mb-3 py-3"},[e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("CardType"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.card.cardType,expression:"card.cardType"}],staticClass:"form-control",class:{"is-invalid":t.cardErrors.cardType},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.card,"cardType",e.target.multiple?a:a[0])},function(e){t.cardErrors.cardType=""}]}},[e("option",{attrs:{value:"Visa"}},[t._v("Visa")]),e("option",{attrs:{value:"Master"}},[t._v("Master Card")]),e("option",{attrs:{value:"Discover"}},[t._v("Discover")]),e("option",{attrs:{value:"Amex"}},[t._v("American Express")])]),t.cardErrors.cardType?e("small",{staticClass:"text-danger"},[t._v(t._s(t.cardErrors.cardType))]):t._e()])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("CardNumber"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.card.number,expression:"card.number"}],staticClass:"form-control",class:{"is-invalid":t.cardErrors.number},attrs:{type:"text",placeholder:"1234 1234 1234 1234"},domProps:{value:t.card.number},on:{input:[function(e){e.target.composing||t.$set(t.card,"number",e.target.value)},function(e){t.cardErrors.number=""}]}}),t.cardErrors.number?e("small",{staticClass:"text-danger"},[t._v(t._s(t.cardErrors.number))]):t._e()])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("NameOnCard"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.card.name,expression:"card.name"}],staticClass:"form-control",class:{"is-invalid":t.cardErrors.name},attrs:{type:"text"},domProps:{value:t.card.name},on:{input:[function(e){e.target.composing||t.$set(t.card,"name",e.target.value)},function(e){t.cardErrors.name=""}]}}),t.cardErrors.name?e("small",{staticClass:"text-danger"},[t._v(t._s(t.cardErrors.name))]):t._e()])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("ExpirationDate"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-6 pr-1"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.card.expMonth,expression:"card.expMonth"}],staticClass:"form-control",class:{"is-invalid":t.cardErrors.expMonth},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.card,"expMonth",e.target.multiple?a:a[0])},function(e){t.cardErrors.expMonth=""}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Month")]),t._l(t.months,(function(a,s){return e("option",{key:s,domProps:{value:(s+1).toString().padStart(2,"0")}},[t._v(" "+t._s(a)+" ")])}))],2),t.cardErrors.expMonth?e("small",{staticClass:"text-danger"},[t._v(t._s(t.cardErrors.expMonth))]):t._e()]),e("div",{staticClass:"col-6 pl-1"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.card.expYear,expression:"card.expYear"}],staticClass:"form-control",class:{"is-invalid":t.cardErrors.expYear},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.card,"expYear",e.target.multiple?a:a[0])},function(e){t.cardErrors.expYear=""}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("Year")]),t._l(t.years,(function(a){return e("option",{key:a},[t._v(t._s(a)+" ")])}))],2),t.cardErrors.expYear?e("small",{staticClass:"text-danger"},[t._v(t._s(t.cardErrors.expYear))]):t._e()])])])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Recharge Amount ("+t._s(t.BaseCurrencyCode)+"):")]),e("input",{staticClass:"form-control font-weight-bold",attrs:{type:"text",disabled:""},domProps:{value:t.RechargeAmount?parseFloat(t.RechargeAmount).toFixed(2):"0.00"}})])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 d-none"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"d-block mb-2"},[t._v(t._s(t.$t("PaymentType"))+":")]),e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"form-check mr-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentType,expression:"paymentType"}],staticClass:"form-check-input",attrs:{type:"radio",id:"full",value:"f"},domProps:{checked:t._q(t.paymentType,"f")},on:{change:function(e){t.paymentType="f"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"full"}},[t._v(" "+t._s(t.$t("FullBalance"))+" ")])]),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentType,expression:"paymentType"}],staticClass:"form-check-input",attrs:{type:"radio",id:"partial",value:"p"},domProps:{checked:t._q(t.paymentType,"p")},on:{change:function(e){t.paymentType="p"}}}),e("label",{staticClass:"form-check-label",attrs:{for:"partial"}},[t._v(" "+t._s(t.$t("PartialPaid"))+" ")])])])])]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4 d-none"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Enter Amount :")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentAmount,expression:"paymentAmount"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.paymentAmount},on:{input:function(e){e.target.composing||(t.paymentAmount=e.target.value)}}})])])]),e("div",{staticClass:"col-12 mt-3 p-0"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-info mr-1",attrs:{href:"javascript:;"},on:{click:t.RechargePayNow}},[e("em",{staticClass:"fa fa-credit-card-alt pr-2"}),t._v(t._s(t.$t("PayNow"))+" ")]),e("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.RechargeCancel()}}},[e("em",{staticClass:"fa fa-times pr-2"}),t._v(t._s(t.$t("Cancel"))+" ")])]),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"py-2 mandatory"},[t._v(t._s(t.$t("MandatoryString"))+" ")])])])])])])])])])])],1)])])])])],1),t.IsRechargeReceiptShow?e("ClientWalletRechargeReceipt",{attrs:{TransactionId:t.TransactionId}}):t._e()],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Card Number: "),e("span",{staticClass:"mandatory"},[t._v("*")])]),e("div",{staticClass:"stripe-input form-control",attrs:{id:"card-number-element"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Expiry Date: "),e("span",{staticClass:"mandatory"},[t._v("*")])]),e("div",{staticClass:"stripe-input form-control",attrs:{id:"card-expiry-element"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("CVC: "),e("span",{staticClass:"mandatory"},[t._v("*")])]),e("div",{staticClass:"stripe-input form-control",attrs:{id:"card-cvc-element"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"py-2 mandatory"},[t._v("Fields marked with * are mandatory.")])])}],c=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex justify-content-between align-items-center"},[e("h5",{staticClass:"modal-title"},[t._v("Payment Receipt")]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.CloseClientWalletRechargeReceipt()}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{ref:"printArea",staticClass:"invoice-container mt-3 border p-2"},[t._m(0),e("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","padding-bottom":"5px","border-bottom":"1px dashed rgb(217, 216, 216)","margin-bottom":"10px"}},[t.ReceiptData.company_logo?e("img",{staticStyle:{width:"200px"},attrs:{src:t.ReceiptData.company_logo,alt:"Company Logo"}}):t._e(),e("div",{staticStyle:{color:"rgb(0, 0, 0)","font-family":"Arial, Helvetica, sans-serif","font-size":"1em"}},[e("p",{staticStyle:{"font-weight":"600","font-size":"16px"}},[t._v(t._s(t.ReceiptData.company_name||"Company Name"))]),e("p",[t._v(t._s(t.ReceiptData.company_address||"No Address Provided"))]),e("p",[t._v(t._s((t.ReceiptData.company_zipcode||"No Zip Code Provided")+", "+(t.ReceiptData.company_country||"No Country Provided")))])])]),e("div",{staticClass:"header float-left w-100 p-2 mb-0"},[e("div",{staticClass:"float-left col-md-6 p-0",staticStyle:{color:"rgb(0, 0, 0)","font-family":"Arial, Helvetica, sans-serif","font-size":"1em"}},[e("p",[e("strong",[t._v("Client Name:")]),t._v(" "+t._s(t.ReceiptData.FirstName||"---"))]),e("p",[e("strong",[t._v("Address:")]),t._v(" "+t._s(t.address||"---"))])]),e("div",{staticClass:"float-left col-md-6 p-0",staticStyle:{color:"rgb(0, 0, 0)","font-family":"Arial, Helvetica, sans-serif","font-size":"1em",display:"flex","justify-content":"flex-end"}},[t.ReceiptData.bill_id?e("p",[e("b",[t._v("Invoice Number:")]),t._v(" "+t._s(t.ReceiptData.bill_id||"---")+" ")]):t._e()])]),e("div",{staticStyle:{clear:"both"}}),e("table",{staticClass:"table table-bordered mt-0 border mb-2 secondtable"},[e("tbody",[t._m(1),e("tr",[e("td",[t._v(t._s(t.ReceiptData.payment_gateway_name||"---"))]),e("td",[t._v(t._s(t.ReceiptData.TransactionID||"---"))]),e("td",[t._v(t._s(t.ReceiptData.created_at?t.$options.filters.formatDateTime(t.ReceiptData.created_at):"---"))]),e("td",{style:{color:t.isPaymentSuccess?"green":"red"}},[t._v(t._s(t.ReceiptData.Message||"---"))])])])]),e("table",{staticClass:"table table-bordered mt-2 text-right border float-right secondtable",staticStyle:{width:"400px"}},[e("tbody",[e("tr",[e("td",{staticStyle:{"font-weight":"600",color:"#737373","font-family":"Arial, Helvetica, sans-serif","font-size":"1em",background:"rgb(249 249 249)"}},[t._v(" Recharge Amount ")]),e("td",{staticStyle:{"text-align":"right",color:"#000","font-family":"Arial, Helvetica, sans-serif","font-size":"1.20em","font-weight":"600"}},[t._v(" Rs "+t._s(parseFloat(t.ReceiptData.Amount||0).toFixed(2))+" ")])])])]),e("div",{staticStyle:{clear:"both"}}),e("p",{class:["mt-1","fw-bold",t.isPaymentSuccess?"alert alert-success text-center":"alert alert-danger text-center"]},[t.isPaymentSuccess?e("span",[t._v(" Thank you! Your transaction has been processed successfully. ")]):e("span",[t._v(" Your transaction has failed. Please try again. ")])]),e("div",{staticClass:"text-right mt-3 no-print"},[e("button",{staticClass:"btn btn-success mr-2",on:{click:t.downloadReceipt}},[e("em",{staticClass:"fa fa-print"}),t._v(" Download Receipt ")]),e("button",{staticClass:"btn btn-danger",on:{click:t.goBack}},[e("em",{staticClass:"fa fa-close"}),t._v(" Back to Wallet ")])])])])])])])],1)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("h4",{staticStyle:{"margin-top":"0",color:"#000","font-family":"Arial, Helvetica, sans-serif","font-size":"18px",background:"#f2f2f2",padding:"10px"}},[t._v(" Wallet Recharge Receipt ")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{staticStyle:{"font-weight":"600",color:"#737373",background:"#f9f9f9"}},[t._v("Payment Method")]),e("td",{staticStyle:{"font-weight":"600",color:"#737373",background:"#f9f9f9"}},[t._v("Transaction ID")]),e("td",{staticStyle:{"font-weight":"600",color:"#737373",background:"#f9f9f9"}},[t._v("Payment Date")]),e("td",{staticStyle:{"font-weight":"600",color:"#737373",background:"#f9f9f9"}},[t._v("Status")])])}],d={props:{TransactionId:{type:Number,required:!0}},data(){return{isLoading:!1,RechargeReceipt:null,ReceiptData:{},ResponceMsg:null,CurrencyCode:"",isPrinting:!1,address:""}},computed:{isPaymentSuccess(){if(!this.ReceiptData.Message)return!1;const t=this.normalizeMessage(this.ReceiptData.Message);return"success"===t||t.includes("approved")}},created:async function(){var t=this;t.CurrencyCode=t.GetUserInfo.Currency.replace(/[()]/g,"");try{if("string"===typeof t.TransactionId){const e=JSON.parse(t.TransactionId);t.RechargeReceipt=e.TransactionId}else t.RechargeReceipt=t.TransactionId}catch(e){console.error("Error parsing TransactionId:",e),t.RechargeReceipt=t.TransactionId}t.GetClientReceiptData()},methods:{normalizeMessage(t){return(t||"").toLowerCase().trim().replace(/[.\s]+$/g,"")},CloseClientWalletRechargeReceipt(){this.$parent.IsRechargeReceiptShow=!1},downloadReceipt(){this.isPrinting=!0,setTimeout(()=>{window.print(),this.isPrinting=!1},100)},goBack(){const t=this.normalizeMessage(this.ResponceMsg);("success"===t||t.includes("approved"))&&this.$parent.$parent.onCompanyChange(),this.$parent.$parent.RechargeAmount=null,this.$parent.$parent.isRechargeNow=!1,this.$parent.$parent.IsClientWalletRechargePayNow=!1},GetClientReceiptData(){let t=this;t.isLoading=!0;const e="TransactionId="+t.RechargeReceipt,a=t=>null!==t&&void 0!==t?t:"";r["a"].GetClientReceiptData(e).then(e=>{var s;if(!e.data)return void(t.ReceiptData={});let i=e.data,r={};try{i.response_Json&&(r=JSON.parse(i.response_Json))}catch(n){console.error("JSON parse error:",n)}t.ReceiptData={...i,...r,company_logo:a(i.company_Logo),company_name:a(i.company_Name),company_address:a(i.company_Address),company_city:a(i.company_City),company_state:a(i.company_State),company_country:a(i.company_Country),company_zipcode:a(i.company_ZipCode),user_address_1:a(r.user_address_1),user_address_2:a(r.user_address_2),user_city:a(r.user_city),user_state:a(r.user_state),user_zipcode:a(r.user_zipcode),user_country:a(r.user_country),payment_gateway_name:a(r.payment_gateway_name||i.payment_gateway_name||"N/A")},t.ReceiptData.created_at=r.created_at||i.created_At||null,t.ReceiptData.TransactionID=t.ReceiptData.TransactionID||t.RechargeReceipt,t.ReceiptData.FirstName=t.ReceiptData.FirstName||(null===(s=t.GetUserInfo)||void 0===s?void 0:s.Name)||"",t.ReceiptData.Amount=t.ReceiptData.Amount||t.ReceiptData.field3||0,t.ReceiptData.Message=a(t.ReceiptData.Message||t.ReceiptData.status||"N/A"),t.address=t.formatFullAddress(t.ReceiptData)||"N/A",t.ResponceMsg=t.ReceiptData.Message}).catch(e=>{console.error("Error fetching receipt data:",e),t.ReceiptData={}}).finally(()=>{t.isLoading=!1})},formatFullAddress(t){return[t.user_address_1,t.user_address_2,t.user_city,t.user_state,t.user_zipcode,t.user_country].filter(t=>t&&""!==t.trim()).join(", ")}}},m=d,u=(a("5a3f"),a("2877")),v=Object(u["a"])(m,c,o,!1,null,"51987ad9",null),p=v.exports,C={components:{ClientWalletRechargeReceipt:p},props:{RechargeAmount:{type:Number,required:!0},BaseCurrencyCode:{type:String,required:!1}},watch:{async selectedGateway(t){"Stripe"===t&&(await this.loadStripeScript(),this.initializeStripe())}},async mounted(){await this.createdDone,"Stripe"===this.selectedGateway&&(await this.loadStripeScript(),this.initializeStripe())},data(){return{isLoading:!1,IsUtilityBilling:!1,paymentHistoryData:[],paymentList:[],MainInvocieNetAmount:0,totalPayments:0,templatedata:[],companies:[],selectedCompanyId:"",paymentGateways:[],selectedGateway:"",PaymentLink:"",paymentAmount:"",paymentType:"f",card:{cardType:"Visa",number:"",name:"",expMonth:"",expYear:""},years:[],months:["January","February","March","April","May","June","July","August","September","October","November","December"],UserId:"",BillIdEnc:"",BillId:"",cardErrors:{cardType:"",number:"",name:"",expMonth:"",expYear:""},CompanyName:null,JsonResponse:null,TransactionId:null,IsRechargeReceiptShow:!1,UniqueId:null,ClientEmail:null,ClientName:null,stripe:null,elements:null,cardNumber:null,cardExpiry:null,cardCvc:null,errorMessage:"",billingDetails:{name:""},isStripePaymentGateway:!0,stripePublishableKey:"pk_test_51RjfwB4C6gUvp1ei45F8RMBEUh9vCrFMZgb6Qgrs78Rs9ED9gX2H0HpVm0Pv7NlHiGOc7wdJ1OtH7phwoxpJMgMY00tzECaTbs",createdDone:null}},created:async function(){this.createdDone=(async()=>{var t=this;await t.AddPaymentTranaction(),t.UserId=t.GetUserInfo.ID,t.CompanyName=t.GetUserInfo.CompanyName,t.ClientEmail=t.GetUserInfo.Email,t.ClientName=t.GetUserInfo.Name,t.generateYears(),await t.GetActiveGatewayDetail()})()},methods:{CloseClientWalletRecharge(){this.$parent.IsClientWalletRechargePayNow=!1},async AddPaymentTranaction(){var t=this;const e=`Amount=${t.RechargeAmount}&Description=WALLET_RECHARGE`;await r["a"].AddPaymentTranaction(e).then(e=>{e.data?(t.UniqueId=e.data[0].UniqueId,t.TransactionId=e.data[0].TransactionId):(t.UniqueId=null,t.TransactionId=null)})},generateYears(){const t=(new Date).getFullYear();for(let e=0;e<15;e++)this.years.push(t+e)},async GetActiveGatewayDetail(){try{var t,e=this;e.isLoading=!0;const a=await r["a"].GetActiveGatewayDetail();if(null!==(t=a.data)&&void 0!==t&&t.result){const t=JSON.parse(a.data.result);t.forEach(t=>{if(t.parameters)try{t.parameters=JSON.parse(t.parameters)}catch(e){console.warn("Invalid parameters JSON:",t.parameters),t.parameters={}}}),e.paymentGateways=t,e.paymentGateways.length>0&&(e.selectedGateway=e.paymentGateways[0].PaymentGatewayCode,e.isLoading=!1)}else e.paymentGateways=[],e.isLoading=!1}catch(a){console.error("Error loading gateways:",a),e.paymentGateways=[],e.isLoading=!1}},selectGateway(t){this.selectedGateway=t},RechargePayNow(){var t=this;if(t.isLoading=!0,"Authorize"==t.selectedGateway){let s=!0;if(t.card.cardType||(t.cardErrors.cardType="Card type is required.",s=!1),t.card.number?/^\d{13,19}$/.test(t.card.number)||(t.cardErrors.number="Invalid card number.",s=!1):(t.cardErrors.number="Card number is required.",s=!1),t.card.name||(t.cardErrors.name="Name on card is required.",s=!1),t.card.expMonth||(t.cardErrors.expMonth="Expiration month is required.",s=!1),t.card.expYear||(t.cardErrors.expYear="Expiration year is required.",s=!1),!s)return void(t.isLoading=!1);var e={CardMonth:t.card.expMonth,CardNum:t.card.number,CardType:t.card.cardType,CardYear:t.card.expYear,CompanyName:t.CompanyName,CustomerId:"",InvoiceId:0,NameOnCard:t.card.name,NetAmount:t.RechargeAmount,PaidAmount:t.RechargeAmount,PaymentGatewayCode:t.selectedGateway,RefId:"",BillIdEnc:0,Description:"WALLET_RECHARGE",StripeToken:null,UniqueId:t.UniqueId,TransactionId:t.TransactionId,ClientEmail:t.ClientEmail},a=JSON.stringify(e);r["a"].MakeRealPartialpayment(a).then((function(e){t.TransactionId=e.data.data,1==e.data.status?t.ShowAlert(t.$t("AddedSuccess",[t.$t("Payment")]),"success",!0,t.$t("Alert")):2==e.data.status?t.ShowAlert("Payment not completed","failure",!0,t.$t("Alert")):t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert")),t.IsRechargeReceiptShow=!0})).catch(e=>{console.error(e),t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))}).finally(()=>{t.isLoading=!1})}else if("Razorpay"===t.selectedGateway){var s,i,n,l={amount:(null===(s=t.RechargeAmount)||void 0===s?void 0:s.toString())||"0",currency:"USD",name:t.ClientName||"",email:t.ClientEmail||"",transactionId:(null===(i=t.TransactionId)||void 0===i?void 0:i.toString())||"0",notes:"WALLET_RECHARGE",invoice_id:0,user_id:t.GetUserInfo.ID,company_id:t.GetUserInfo.CompanyId,reference_no:(null===(n=t.UniqueId)||void 0===n?void 0:n.toString())||"0"};t.isLoading=!1,t.$router.push({name:"RazorpayCheckout",params:{razorpayData:l}})}else{var c,o,d={txnid:(null===(c=t.TransactionId)||void 0===c?void 0:c.toString())||"0",udf1:t.UniqueId||"",amount:(null===(o=t.RechargeAmount)||void 0===o?void 0:o.toString())||"0",productinfo:"WALLET_RECHARGE",firstname:t.ClientName||"",email:t.ClientEmail||"",phonenumber:"",udf2:"",udf3:t.selectedGateway};r["a"].MakeRealPartialpaymentPAYU(d).then((function(e){e.data&&"string"===typeof e.data?window.location.href=e.data:t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))})).catch(e=>{console.error(e),t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))}).finally(()=>{t.isLoading=!1})}},async submitPayment(){var t=this;const{token:e,error:a}=await t.stripe.createToken(t.cardNumber,{name:t.billingDetails.name});if(a)t.errorMessage=t.mapStripeError(a);else{t.$refs.stripeToken.value=e.id,t.$refs.hdnCardType.value=e.card.brand,t.$refs.hdnNameonCard.value=e.card.name,t.$refs.hdnCardNumber.value=e.card.last4,t.$refs.hdnCardMonth.value=e.card.exp_month,t.$refs.hdnCardYear.value=e.card.exp_year,t.$refs.hdnCvv.value=123;var s={CardMonth:t.$refs.hdnCardMonth.value,CardNum:t.$refs.hdnCardNumber.value,CardType:t.$refs.hdnCardType.value,CardYear:t.$refs.hdnCardYear.value,CompanyName:"UtilityBilling",CustomerId:"",InvoiceId:0,NameOnCard:t.$refs.hdnNameonCard.value,NetAmount:t.RechargeAmount,PaidAmount:t.RechargeAmount,PaymentGatewayCode:"Stripe",RefId:"",BillIdEnc:0,Description:"WALLET_RECHARGE",StripeToken:t.$refs.stripeToken.value,UniqueId:t.UniqueId,TransactionId:t.TransactionId,ClientEmail:t.ClientEmail},i=JSON.stringify(s);r["a"].MakeRealPartialpayment(i).then((function(e){t.isLoading=!1,1==e.data.status?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("Payment")]),"success",!0,t.$t("Alert")),t.IsRechargeReceiptShow=!0):(e.data.status,t.IsRechargeReceiptShow=!0)}))}},RechargeCancel(){this.CloseClientWalletRecharge()},loadStripeScript(){return new Promise((t,e)=>{if(document.querySelector('script[src="https://js.stripe.com/v3/"]'))return void t();const a=document.createElement("script");a.src="https://js.stripe.com/v3/",a.onload=()=>t(),a.onerror=()=>e("Stripe failed to load"),document.head.appendChild(a)})},initializeStripe(){this.stripe=Stripe(this.stripePublishableKey),this.elements=this.stripe.elements();const t={base:{fontSize:"14px",color:"#212529","::placeholder":{color:"#888"}},invalid:{color:"#dc3545"}};this.cardNumber=this.elements.create("cardNumber",{style:t}),this.cardExpiry=this.elements.create("cardExpiry",{style:t}),this.cardCvc=this.elements.create("cardCvc",{style:t}),this.cardNumber.mount("#card-number-element"),this.cardExpiry.mount("#card-expiry-element"),this.cardCvc.mount("#card-cvc-element"),[this.cardNumber,this.cardExpiry,this.cardCvc].forEach(t=>{t.on("change",t=>{this.errorMessage=t.error?t.error.message:""})})},mapStripeError(t){const e={incomplete_number:"Please enter a complete card number.",invalid_number:"The card number you entered is invalid.",incomplete_cvc:"Please enter your card's CVC.",invalid_cvc:"The CVC code you entered is incorrect.",incomplete_expiry:"Please enter the full expiration date.",invalid_expiry_year_past:"Your card's expiration year is in the past.",card_declined:"Your card was declined. Please try another payment method.",expired_card:"Your card has expired."};return e[t.code]||t.message||"Something went wrong."}}},h=C,_=(a("d85a"),Object(u["a"])(h,n,l,!1,null,null,null)),f=_.exports,y={props:{ClientId:{type:Number,required:!0},parentId:{type:Number,required:!0}},components:{ClientWalletRechargePayNow:f},data(){return{isLoading:!1,Currency:"",TotalRecords:0,RechargeAmount:null,HistoryData:[],isRechargeNow:!1,isHidden:!1,UtilityUsageData:[],TotalCousumption:null,TotalAmount:null,AverageCousumption:null,CurrentAmount:null,companyListData:[],selectedCompany:"",IsClientWalletRechargePayNow:!1,thresholdCurrency:0,ElectricData:[],WaterData:[],GasData:[],selectedCurrency:null,BaseCurrencyCode:null,UserId:"",AccountNumber:""}},async created(){this.Currency=this.GetUserInfo.Currency.replace(/[()]/g,""),await this.GetBaseCurrency(),await this.GetBaseCurrencyCode(),this.GetConfigurationValueByKey("Client","MinimumWalletBalance"),this.GetCompanyDDlData(),this.ClientId>0?this.selectedCompany=this.GetUserInfo.CompanyId:this.UserId=this.GetUserInfo.ID,this.GetClientCurrentBalence(this.selectedCompany),this.GetClientDashboardData(this.selectedCompany)},computed:{isRechargeAmountValid(){if(null===this.RechargeAmount||void 0===this.RechargeAmount||""===this.RechargeAmount)return!1;const t=String(this.RechargeAmount),e=/^\d{1,10}(?:\.\d{1,2})?$/;return e.test(t)&&Number(t)>0}},watch:{companyListData(t){t&&t.length>0&&!this.selectedCompany&&(this.selectedCompany=t[0].value,this.onCompanyChange())}},methods:{async GetBaseCurrency(){var t=this,e="configkey=Currency";await r["a"].GetBaseCurrency(e).then(e=>{t.selectedCurrency=e.data.CONFIG_DATA_VALUE}).catch(t=>{console.log(t)})},async GetBaseCurrencyCode(){var t=this;const e="CurrencyId="+t.selectedCurrency;await r["a"].GetBaseCurrencyCode(e).then(e=>{e.data?t.BaseCurrencyCode=e.data[0].iso_code:t.BaseCurrencyCode=null})},GetConfigurationValueByKey(t,e){var a=`moduleName=${t}&configkey=${e}`;r["a"].GetBaseCurrency(a).then(t=>{this.thresholdCurrency=t.data.CONFIG_DATA_VALUE})},GetClientCurrentBalence(t){var e=this.ClientId>0?this.ClientId:this.UserId;const a=`Client_Company_Id=${t}&ClientId=${e}`;r["a"].GetClientCurrentBalence(a).then(t=>{t.data?(this.CurrentAmount=t.data.current_Balance,this.AccountNumber=t.data.crm_Account_No):(this.CurrentAmount="",this.AccountNumber="")})},setAmount(t){this.RechargeAmount=String(t)},onAmountInput(t){let e=t.target.value||"";e=e.replace(/[^0-9.]/g,"");const a=e.split(".");let s=a[0]||"";s.length>10&&(s=s.slice(0,10));let i=a[1]||"";i.length>2&&(i=i.slice(0,2));let r=s;""!==i&&(r=s+"."+i),/^0{2,}$/.test(r)&&-1===r.indexOf(".")&&(r="0"),this.RechargeAmount=r},WalletRecharge(){this.isRechargeAmountValid?this.IsClientWalletRechargePayNow=!0:this.ShowAlert("Please enter a valid amount greater than zero.","failure",!0,this.$t("Alert"))},clkRechargeNow(){var t=this.ClientId>0?this.ClientId:this.UserId;const e="ClientId="+t;r["a"].GetClientWalletRechargeStatus(e).then(t=>{t.data&&("ACTIVE"==t.data?this.isRechargeNow=!0:"INACTIVE"==t.data?this.ShowAlert("Wallet has been inactive. Please contact the administrator.","warning",!0,this.$t("Alert")):"NOT EXIST"==t.data&&this.ShowAlert("Wallet access has been disabled. Please contact the administrator.","warning",!0,this.$t("Alert")))})},async GetClientDashboardData(t){var e=this;e.isLoading=!0;var a=this.ClientId>0?this.ClientId:this.UserId;const s=`Client_Company_Id=${t}&ClientId=${a}`;await r["a"].GetClientDashboardDetail(s).then(t=>{""!=t.data?(e.ElectricData=t.data.filter(t=>"electric"===t.meter_type),e.WaterData=t.data.filter(t=>"water"===t.meter_type),e.GasData=t.data.filter(t=>"gas"===t.meter_type)):(e.ElectricData=[],e.WaterData=[],e.GasData=[]),this.isLoading=!1})},BackDashboard(){var t=this;t.isHidden=!1,t.UtilityUsageData=[],t.TotalAmount="",t.TotalCousumption="",t.AverageCousumption=""},closeModal(){this.isLoading=!0,this.isRechargeNow=!1,this.onCompanyChange(),this.isLoading=!1},GetCompanyDDlData(){const t=this,e="id=&moduleName=&type=GET_COMPANY_LIST&search=&refId=";r["a"].GetDDLData(e).then(e=>{e.data&&e.data.DATA&&e.data.DATA.length>0?t.companyListData=e.data.DATA:(t.companyListData=[],t.selectedCompany="")})},async onCompanyChange(){this.isLoading=!0;var t=""===this.selectedCompany?this.GetUserInfo.CompanyId:this.selectedCompany;this.GetClientCurrentBalence(t),this.GetClientDashboardData(t),this.isLoading=!1},clkTransactionHistory(){var t=this;this.ClientId>0?t.$router.push({name:"TransactionWalletHistory",params:{id:""===this.selectedCompany?this.GetUserInfo.CompanyId:this.selectedCompany,client_id:this.ClientId?this.ClientId:"",parentId:this.parentId?this.parentId:""}}):t.$router.push({name:"TransactionHistory",params:{id:""===this.selectedCompany?this.GetUserInfo.CompanyId:this.selectedCompany}})},ViewHistory(t,e){var a=this;this.ClientId>0?a.$router.push({name:"UsageWalletHistory",params:{id:e,clientId:this.ClientId?this.ClientId:"",parentId:this.parentId?this.parentId:""}}):a.$router.push({name:"UsageHistory",params:{id:e}})}}},g=y,b=(a("b2e5"),Object(u["a"])(g,s,i,!1,null,null,null));e["default"]=b.exports},f16f:function(t,e,a){var s=a("4bad");e=s(!1),e.push([t.i,".recharge_payment .stripe-input.form-control.StripeElement{padding:14.8px 12px}",""]),t.exports=e},fea2:function(t,e,a){var s=a("4bad");e=s(!1),e.push([t.i,".receipt-section[data-v-51987ad9]{background:#f7f9fc}table.secondtable[data-v-51987ad9]{width:100%;border-collapse:collapse;margin-top:10px}table.secondtable td[data-v-51987ad9],table.secondtable th[data-v-51987ad9]{border:1px solid #ddd!important;padding:10px;text-align:left}table.secondtable th[data-v-51987ad9]{background-color:#f4f4f4}",""]),t.exports=e}}]);
//# sourceMappingURL=chunk-476db05c.js.map