(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a04b6c6","chunk-2d229bbb"],{"0fb6":function(e,t,a){var s=a("3a0e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("b9182508",s,!0,{sourceMap:!1,shadowMode:!1})},"14ca":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"tab-pane border p-0 pb-3 active",attrs:{id:"team-structure"}},[t("div",{attrs:{id:"tab7Data"}},[t("div",{staticClass:"col-md-12 p-0 mt-2"},[t("div",{staticClass:"tab-pane fade show activity-tab active",attrs:{id:"tAs",role:"tabpanel","aria-labelledby":"Profile-tab"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 col-lg-3"},[t("div",{staticClass:"user-detail bg-light p-2 w-100 border ml-3 mt-2 ipadmr-3"},[e._m(0),t("div",{staticClass:"user-name"},[e._v(e._s(e.userDetail.User_Name))]),t("div",{staticClass:"user-profession text-dark"},[e._v("Designation : "),t("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(e.userDetail.designation))])]),t("div",{staticClass:"user-contactinfo"},[t("p",[t("span",{staticStyle:{"font-weight":"500"}},[e._v("Department : ")]),e._v(e._s(e.userDetail.department))]),t("p",[t("span",{staticStyle:{"font-weight":"500"}},[e._v("Shift : ")]),e._v(e._s(e.userDetail.shift))])])])]),t("div",{staticClass:"col-lg-9"},[t("div",{staticClass:"searchpanel",attrs:{id:"divTeamStructure"}},[t("div",{staticClass:"form-content"},[t("div",{staticClass:"tab-pane active mb-0",attrs:{id:"tab_note"}},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[t("div",{staticClass:"col-lg-12 mt-3 mb-3 p-0"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.$t("YourReportingManager"))+"'")]),"myprofile"!=e.reqform?t("small",{staticClass:"float-right"},[t("a",{staticClass:"pr-3",attrs:{href:"javascript:;",title:"Add",id:"AddPrimaryManager"},on:{click:function(t){return e.AddPrimaryManager("Primary")}}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v("Add Primary Manager")]),t("a",{staticClass:"pr-3",attrs:{href:"javascript:;",title:"Add",id:"AddSecondaryManager"},on:{click:e.AddSecondaryManager}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v("Add Secondary Manager")])]):e._e()])])]),t("div",{staticClass:"form-content border"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0",attrs:{id:"Manager"}},[t("div",{staticClass:"container-fluid p-0"},[t("div",{staticClass:"listing mb-3"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"MemeberList"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",[t("span",[e._v(e._s(e.$t("name")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Designation")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Department")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Edit")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[e._l(e.reportManagerDetail,(function(a){return t("tr",{key:a.USER_ID,staticClass:"teamstructurebase"},[t("td",[e._m(1,!0),t("span",{staticStyle:{"line-height":"3"}},[e._v(e._s(a.USER_NAME)+" ")]),t("strong",{class:{"text-info":"Primary"===a.Manager,"text-success":"Secondary"===a.Manager,"font-weight-bold":a.Manager},staticStyle:{"font-weight":"bold"}},[e._v("- "+e._s(a.Manager)+" ")])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.designation_name))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.department_name))])]),t("td",{staticClass:"text-center"},[t("a",{staticClass:"single-action",class:{disabled:"myprofile"==e.reqform},attrs:{href:"javascript:;"},on:{click:function(t){return e.EditManager("Secondary",a)}}},[t("em",{staticClass:"fa fa-pencil text-success pr-2",class:{disabled:"myprofile"==e.reqform}})])]),"Primary"!=a.Manager?t("td",{staticClass:"text-center"},[t("a",{staticClass:"single-action",class:{disabled:"myprofile"==e.reqform},attrs:{href:"javascript:;"},on:{click:function(t){return e.DeleteMember("SecondaryManager",a.user_id)}}},[t("em",{staticClass:"fa fa-trash text-danger pr-2",class:{disabled:"myprofile"==e.reqform}})])]):e._e(),"Primary"==a.Manager?t("td",{staticClass:"text-center"},[t("a",{staticClass:"single-action",class:{disabled:"myprofile"==e.reqform},attrs:{href:"javascript:;"},on:{click:function(t){return e.DeleteMember("PrimaryManager",a.user_id)}}},[t("em",{staticClass:"fa fa-trash text-danger pr-2",class:{disabled:"myprofile"==e.reqform}})])]):e._e()])})),0==e.reportManagerDetail.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"8"}},[e._v(" No record(s) found")])]):e._e()],2)])])])]),t("input",{attrs:{type:"hidden",id:"hdnsecondaryid",value:""}})])])]),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[t("div",{staticClass:"col-lg-12 mt-3 mb-3 p-0"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(" "+e._s(e.$t("TeamMembersWhoReportsThisUserPrimaryTeam"))+" ")]),"myprofile"!=e.reqform?t("small",{staticClass:"float-right"},[t("a",{staticClass:"pr-3",attrs:{href:"javascript:;",title:"Add",id:"AddMember"},on:{click:function(t){return e.AddMembers("Primary")}}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v("Add Members")]),t("a",{class:{disabled:!e.isPrimaryDeletebuttonVisible},attrs:{href:"javascript:;",title:"Delete"},on:{click:function(t){e.isPrimaryDeletebuttonVisible&&e.DeleteMember("Primary",e.primaryUserIds)}}},[t("em",{staticClass:"fa fa-trash pr-2"}),e._v("Delete ")])]):e._e()])])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchPriName,expression:"searchPriName"}],staticClass:"form-control mb-3",attrs:{id:"inputReportTeam",placeholder:"Search by Member Name"},domProps:{value:e.searchPriName},on:{input:function(t){t.target.composing||(e.searchPriName=t.target.value)}}}),t("div",{staticClass:"form-content"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0",attrs:{id:"divReportTeam"}},[t("div",{staticClass:"container-fluid p-0"},[t("div",{staticClass:"listing mb-3"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"primaryMemeberList"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center",staticStyle:{width:"3% !important"}},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allPrimaryTeamSelect,expression:"allPrimaryTeamSelect"}],staticClass:"primarydiv custom-control-input",attrs:{type:"checkbox",id:"chkAll_0",name:"checkbox"},domProps:{checked:Array.isArray(e.allPrimaryTeamSelect)?e._i(e.allPrimaryTeamSelect,null)>-1:e.allPrimaryTeamSelect},on:{click:function(t){return e.selectAllPrimaryMemeber(t)},change:function(t){var a=e.allPrimaryTeamSelect,s=t.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=e._i(a,o);s.checked?r<0&&(e.allPrimaryTeamSelect=a.concat([o])):r>-1&&(e.allPrimaryTeamSelect=a.slice(0,r).concat(a.slice(r+1)))}else e.allPrimaryTeamSelect=i}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkAll_0"}})])]),t("th",[t("span",[e._v(e._s(e.$t("name")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Designation")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Department")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[0==e.primaryReportTeam.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"8"}},[e._v(" No record(s) found")])]):e._e(),e._l(e.filteredPrimaryList,(function(a){return t("tr",{key:a.user_id,staticClass:"teamstructurebase"},[t("td",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.isSelected,expression:"item.isSelected"}],staticClass:"secondarydiv custom-control-input",attrs:{id:a.user_id,type:"checkbox",name:"checkbox"},domProps:{checked:Array.isArray(a.isSelected)?e._i(a.isSelected,null)>-1:a.isSelected},on:{change:[function(t){var s=a.isSelected,i=t.target,o=!!i.checked;if(Array.isArray(s)){var r=null,n=e._i(s,r);i.checked?n<0&&e.$set(a,"isSelected",s.concat([r])):n>-1&&e.$set(a,"isSelected",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"isSelected",o)},function(t){return e.selectPrimaryMemeber(t,a)}]}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:a.user_id}})])]),t("td",[e._m(2,!0),t("span",{staticStyle:{"line-height":"3"}},[e._v(" "+e._s(a.USER_NAME)+" ")])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.designation_name))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.department_name))])]),t("td",{staticClass:"text-center"},[t("a",{staticClass:"single-action",class:{disabled:"myprofile"==e.reqform},attrs:{href:"javascript:;"},on:{click:function(t){return e.DeleteMember("Primary",a.user_id)}}},[t("em",{staticClass:"fa fa-trash text-danger pr-2",class:{disabled:"myprofile"==e.reqform}})])])])}))],2)])])])])])])]),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[t("div",{staticClass:"col-lg-12 mt-3 mb-3 p-0"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(" "+e._s(e.$t("TeamMembersWhoReportsThisUserSecondaryTeam"))+" ")]),"myprofile"!=e.reqform?t("small",{staticClass:"float-right"},[t("a",{staticClass:"pr-3",attrs:{href:"javascript:;",title:"Add",id:"AddMemberForSecondary"},on:{click:function(t){return e.AddMembers("Secondary")}}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v("Add Members")]),t("a",{class:{disabled:!e.isSecondaryDeletebuttonVisible},attrs:{href:"javascript:;",title:"Delete"},on:{click:function(t){e.isSecondaryDeletebuttonVisible&&e.DeleteMember("Secondary",e.secondaryUserIds)}}},[t("em",{staticClass:"fa fa-trash pr-2"}),e._v("Delete ")])]):e._e()])])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchSecName,expression:"searchSecName"}],staticClass:"form-control mb-3",attrs:{id:"inputSecondaryTeam",placeholder:"Search by Member Name"},domProps:{value:e.searchSecName},on:{input:function(t){t.target.composing||(e.searchSecName=t.target.value)}}}),t("div",{staticClass:"form-content border"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0",attrs:{id:"divSecondaryTeam"}},[t("div",{staticClass:"container-fluid p-0"},[t("div",{staticClass:"listing mb-3"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered dt-responsive mt-0",attrs:{id:"seconaryMemeberList"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center",staticStyle:{width:"3% !important"}},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allSecondaryTeamSelect,expression:"allSecondaryTeamSelect"}],staticClass:"custom-control-input seconAll",attrs:{type:"checkbox",id:"chkAll_1",name:"checkbox"},domProps:{checked:Array.isArray(e.allSecondaryTeamSelect)?e._i(e.allSecondaryTeamSelect,null)>-1:e.allSecondaryTeamSelect},on:{click:function(t){return e.selectAllSecondayMemeber("secondary")},change:function(t){var a=e.allSecondaryTeamSelect,s=t.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=e._i(a,o);s.checked?r<0&&(e.allSecondaryTeamSelect=a.concat([o])):r>-1&&(e.allSecondaryTeamSelect=a.slice(0,r).concat(a.slice(r+1)))}else e.allSecondaryTeamSelect=i}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkAll_1"}})])]),t("th",[t("span",[e._v(e._s(e.$t("name")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Designation")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Department")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[0==e.secondaryReportTeam.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"8"}},[e._v(" No record(s) found")])]):e._e(),e._l(e.filteredSecondaryList,(function(a){return t("tr",{key:a.user_id,staticClass:"teamstructurebase"},[t("td",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.isSelected,expression:"element.isSelected"}],staticClass:"custom-control-input",attrs:{id:a.user_id,type:"checkbox",name:"checkbox"},domProps:{value:a.user_id,checked:Array.isArray(a.isSelected)?e._i(a.isSelected,a.user_id)>-1:a.isSelected},on:{change:[function(t){var s=a.isSelected,i=t.target,o=!!i.checked;if(Array.isArray(s)){var r=a.user_id,n=e._i(s,r);i.checked?n<0&&e.$set(a,"isSelected",s.concat([r])):n>-1&&e.$set(a,"isSelected",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"isSelected",o)},function(t){return e.selectSecondaryMemeber(t,a)}]}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:a.user_id}})])]),t("td",[e._m(3,!0),t("span",{staticStyle:{"line-height":"3"}},[e._v(" "+e._s(a.USER_NAME))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(" "+e._s(a.designation_name)+" ")])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.department_name))])]),t("td",{staticClass:"text-center"},[t("a",{staticClass:"single-action",class:{disabled:"myprofile"==e.reqform},attrs:{href:"javascript:;"},on:{click:function(t){return e.DeleteMember("Secondary",a.user_id)}}},[t("em",{staticClass:"fa fa-trash text-danger pr-2"})])])])}))],2)])])])])])])])])])])])])])])]),e.isVisibleSecondaryManagerPopUP?t("AddSecondaryManager",{attrs:{isAddEditSecondaryPopup:e.isAddEditSecondaryPopup,CurrentUserDetails:e.userDetail,UserId:e.UserId,secondaryUserId:e.secondaryUserId}}):e._e(),e.isVisibleAddMemberPopUp?t("AddMembers",{attrs:{type:e.type,UserId:e.UserId}}):e._e(),e.isVisibleAssigManager?t("AssignManager",{attrs:{CurrentUserDetails:e.userDetail,type:e.type,UserId:e.UserId,managertype:e.managertype}}):e._e()],1)])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-image"},[t("img",{attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:"Profile Image",onerror:"this.src = '/Content/images/DefaultImages/avatar-icon.jpg'",loading:"lazy"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"org_manager_base"},[t("div",{staticClass:"pull-left image"},[t("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:"Profile Image"}})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"org_manager_base"},[t("div",{staticClass:"pull-left image"},[t("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:"Profile Image"}})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"org_manager_base"},[t("div",{staticClass:"pull-left image"},[t("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:"Profile Image"}})])])}],o=(a("14d9"),function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle pt-2"},[t("h4",{staticClass:"modal-title mt-2 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.isAddEditSecondaryPopup?e.$t("EditSecondarymanager"):e.$t("AddSecondarymanager"))+" ")]),t("button",{staticClass:"close",on:{click:e.ClosePopUp}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"listing py-3 px-3"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("dynamic-form",{ref:"refSecondarySchema",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])])])}),r=[],n=a("9769"),l={props:{isAddEditSecondaryPopup:{type:Boolean},UserId:{type:Number},secondaryUserId:{type:Number},CurrentUserDetails:{}},data(){return{FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:"Users",name:"User",value:"",placeholder:"",validationRules:{required:!0,max:250},config:{options:[],onChange:this.checkAssignManager}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2 '></i>Save"}],userList:[]}},created(){var e=this;e.GetSecondaryManager()},methods:{ClosePopUp(){var e=this;e.$parent.isVisibleSecondaryManagerPopUP=!1},async checkUserDetailById(e){var t=this;t.userDetail=[];try{const a="userId="+e.value,s=await n["a"].GetUserDetailById(a);return null==s.data&&""==s.data||t.userDetail.push(s.data),s.data}catch(a){throw console.error("Error fetching user details:",a),a}},async checkAssignManager(e,t){var a=this;try{const e=await a.checkUserDetailById(t);if(e){const e=await a.checkUserAbleToAddTeam(a.CurrentUserDetails.USER_TYPE_NAME);if(e.length>0)return a.FormSchema[0].Data[0].value="",a.ShowAlert(a.$t(`You cannot add a (${e}) user under ${this.userDetail[0].User_Name} team.`),"failure",a.$t("Alert")),!1}}catch(s){console.error("Error checking assignment manager:",s)}},checkUserAbleToAddTeam(e){const t=[];return this.userDetail.forEach(a=>{void 0!==a.USER_TYPE_NAME&&("CA"===e&&"CA"!==a.USER_TYPE_NAME&&"PM"!==a.USER_TYPE_NAME&&"NU"!==a.USER_TYPE_NAME||"PM"===e&&"PM"!==a.USER_TYPE_NAME&&"NU"!==a.USER_TYPE_NAME||"NU"===e&&"NU"!==a.USER_TYPE_NAME)&&t.push(`${a.User_Name} - ${a.USER_TYPE_NAME}`)}),t.join(", ")},async GetSecondaryManager(){var e=this;try{let t="userIds="+e.UserId;await n["a"].GetSecondaryManager(t).then(t=>{let a=JSON.parse(t.data[0].Value).Data;a.forEach(t=>{e.FormSchema[0].Data[0].config.options.push({name:""+t.USER_NAME,value:""+t.USER_ID})}),e.$refs.refSecondarySchema.UpdateKeyValue()})}catch(t){console.log("error message",t)}},async onSubmit(e){var t=this;try{let a="";a=""!=t.secondaryUserId?`newManager=${parseInt(e.User)}&userid=${t.UserId}&type=Secondary&secid=${t.secondaryUserId}`:`newManager=${parseInt(e.User)}&userid=${t.UserId}&type=AddSecondary&secid=${t.secondaryUserId}`,await n["a"].AddSecondaryManagerData(a).then(e=>{"1"==e.data[0].Value&&(t.$parent.GetReportManager(),t.ShowAlert(t.$t("Secondary Manager has been added successfully"),"success",t.$t("Alert")),t.ClosePopUp()),"2"==e.data[0].Value&&(t.$parent.GetReportManager(),t.ShowAlert(t.$t("Secondary Manager has been changed successfully"),"success",t.$t("Alert")),t.ClosePopUp())})}catch(a){console.log("error message",a)}}}},c=l,d=a("2877"),p=Object(d["a"])(c,o,r,!1,null,null,null),m=p.exports,u=function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle pt-2"},[t("h4",{staticClass:"modal-title mt-1 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("Members"))+" ")]),t("button",{staticClass:"close",on:{click:e.ClosePopUp}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"listing"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 modal-body",staticStyle:{height:"auto","min-height":"0px","max-height":"none"},attrs:{id:"divTeamMembers"}},[e._m(0),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchUserName,expression:"searchUserName"}],staticClass:"form-control mb-3",attrs:{id:"inputEmployee",placeholder:"Search by Employee Name"},domProps:{value:e.searchUserName},on:{input:[function(t){t.target.composing||(e.searchUserName=t.target.value)},e.onSearchInput]}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left",attrs:{id:"divEmployee"}},[t("div",{staticClass:"col-lg-12 p-0 float-left"},[t("div",{staticClass:"listing"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"MemeberList"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center",staticStyle:{width:"3% !important"}},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],staticClass:"addmember custom-control-input",attrs:{type:"checkbox",id:"chkAll_8",name:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{click:function(t){return e.selectAll(t)},change:function(t){var a=e.allSelected,s=t.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=e._i(a,o);s.checked?r<0&&(e.allSelected=a.concat([o])):r>-1&&(e.allSelected=a.slice(0,r).concat(a.slice(r+1)))}else e.allSelected=i}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkAll_8"}})])]),e._m(1),e._m(2),e._m(3),e._m(4)])]),t("tbody",[0==e.filteredUserList.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"5"}},[e._v(" No record(s) found")])]):e._e(),e._l(e.filteredUserList,(function(a){return t("tr",{key:a.user_id,staticClass:"teamstructurebase"},[t("td",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.isSelected,expression:"item.isSelected"}],staticClass:"custom-control-input",attrs:{id:a.user_id,type:"checkbox",name:"checkbox"},domProps:{value:a.user_id,checked:Array.isArray(a.isSelected)?e._i(a.isSelected,a.user_id)>-1:a.isSelected},on:{change:[function(t){var s=a.isSelected,i=t.target,o=!!i.checked;if(Array.isArray(s)){var r=a.user_id,n=e._i(s,r);i.checked?n<0&&e.$set(a,"isSelected",s.concat([r])):n>-1&&e.$set(a,"isSelected",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"isSelected",o)},function(t){return e.select(t,a)}]}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:a.user_id}})])]),t("td",[e._m(5,!0),t("span",{staticStyle:{"line-height":"3"}},[e._v(" "+e._s(a.USER_NAME))]),t("input",{staticClass:"hdnEmpId",attrs:{type:"hidden",source:"EmployeeTeam",value:"80720"}})]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.designation_name))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.department_name))])]),t("td",{staticClass:"text-center"},[t("span",[e._v(e._s(a.USER_TYPE_NAME))])])])}))],2)])])])]),t("input",{attrs:{type:"hidden",id:"hdnsecondaryid",value:""}})])]),t("div",{staticClass:"row flex-row-reverse mt-3"},[t("div",{staticClass:"col-lg-6 text-right"},[t("a",{staticClass:"btn btn-success float-right mt-2",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:function(t){return e.SavePrimaryMember()}}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v("Save")])])])])],1)])])])])])},g=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-12 mb-3 p-0"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v("Other Employee(s) in Company:")])])])])},function(){var e=this,t=e._self._c;return t("th",[t("span",[e._v("Name")])])},function(){var e=this,t=e._self._c;return t("th",{staticClass:"text-center"},[t("span",[e._v("Designation")])])},function(){var e=this,t=e._self._c;return t("th",{staticClass:"text-center"},[t("span",[e._v("Department")])])},function(){var e=this,t=e._self._c;return t("th",{staticClass:"text-center"},[t("span",[e._v("User Type")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"org_manager_base"},[t("div",{staticClass:"pull-left image"},[t("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:"Profile Image"}})])])}],h={props:{UserId:{type:Number},type:{type:String}},data(){return{isLoading:!1,userList:[],userIds:"",allSelected:!1,searchUserName:""}},watch:{userList:{deep:!0,handler(e,t){console.log("User list has changed:",t)}}},created(){var e=this;e.GetAllEmployee()},computed:{filteredUserList(){const e=this.searchUserName.toLowerCase();return this.userList.filter(t=>t.USER_NAME.toLowerCase().includes(e))}},methods:{ClosePopUp(){var e=this;e.$parent.isVisibleAddMemberPopUp=!1},selectAll(){var e=this;let t=[],a="",s={};e.allSelected=!e.allSelected,e.allSelected?e.userList.forEach(e=>{e.isSelected=!0}):e.userList.forEach(e=>{e.isSelected=!1}),e.userList.forEach(e=>{1==e.isSelected&&(s={USER_NAME:e.USER_NAME,userId:e.user_id},t.push(s))}),a=t.map(e=>e.userId).join(","),e.getAddressValue(a)},select(e,t){var a=this;let s=[],i="",o={};1==e.target.checked?a.userList.forEach(e=>{e.user_id==t.user_id&&(e.isSelected=!0,a.allSelected=!1)}):a.userList.forEach(e=>{e.user_id==t.user_id&&(e.isSelected=!1,a.allSelected=!1)}),a.userList.forEach(e=>{1==e.isSelected&&(o={USER_NAME:e.USER_NAME,userId:e.user_id},s.push(o))}),a.userList.length==s.length?a.allSelected=!0:a.allSelected=!1,i=s.map(e=>e.userId).join(","),a.getAddressValue(i)},getAddressValue(e){var t=this;t.userIds="",t.userIds=e,console.log("vm.userIds",t.userIds)},async GetAllEmployee(){var e=this;try{let t=`userId=${e.UserId}&type=${e.type}`;await n["a"].GetAllEmployee(t).then(t=>{let a=JSON.parse(t.data[0].Value).Data;a.forEach(t=>{e.userList.push(t)}),e.userList.forEach(e=>{e.isSelected=!1}),console.log("vm.userList",e.userList)})}catch(t){console.log("error message",t)}},async SavePrimaryMember(){var e=this;if(""!=e.userIds)try{let t=`Pid=${e.UserId}&EmpId=${e.userIds}&Type=${e.type}`,a=await n["a"].AddPrimaryAndSecondaryTeamMember(t);a.data&&""!==a.data&&"Data Saved Sucessfully!"==a.data[0].Status&&("Primary"===e.type?(e.$parent.GetOrgReportTeam(),e.ClosePopUp()):(e.$parent.GetOrgReportSecondaryTeam(),e.ClosePopUp()))}catch(t){console.error("Error while saving primary member:",t)}else e.ShowAlert(e.$t("Please select one/multiple checkbox(s)"),"warning",!0,e.$t("Alert"))}}},f=h,v=Object(d["a"])(f,u,g,!1,null,null,null),y=v.exports,b=a("1548"),_={components:{AddSecondaryManager:m,AddMembers:y,AssignManager:b["a"]},props:{UserId:{type:Number},reqform:{type:String,required:!1}},computed:{filteredPrimaryList(){const e=this.searchPriName.toLowerCase();return this.primaryReportTeam.filter(t=>t.USER_NAME.toLowerCase().includes(e))},filteredSecondaryList(){const e=this.searchSecName.toLowerCase();return this.secondaryReportTeam.filter(t=>t.USER_NAME.toLowerCase().includes(e))}},data(){return{searchPriName:"",searchSecName:"",secondaryUserIds:"",primaryUserIds:"",allPrimaryTeamSelect:!1,allSecondaryTeamSelect:!1,isVisibleSecondaryManagerPopUP:!1,isVisibleAddMemberPopUp:!1,userDetail:{},reportManagerDetail:[],isAddEditSecondaryPopup:!1,secondaryReportTeam:[],primaryReportTeam:[],secondaryUserId:"",isPrimaryDeletebuttonVisible:!1,isSecondaryDeletebuttonVisible:!1,managertype:"",isVisibleAssigManager:!1}},async created(){var e=this;await e.GetUserDetailByUserId(),await e.GetReportManager(),await e.GetOrgReportTeam(),await e.GetOrgReportSecondaryTeam()},methods:{selectAllPrimaryMemeber(){var e=this;let t=[],a="",s={};e.allPrimaryTeamSelect=!e.allPrimaryTeamSelect,e.allPrimaryTeamSelect?(e.primaryReportTeam.forEach(e=>{e.isSelected=!0}),e.isPrimaryDeletebuttonVisible=!0):(e.primaryReportTeam.forEach(e=>{e.isSelected=!1}),e.isPrimaryDeletebuttonVisible=!1),e.primaryReportTeam.forEach(e=>{1==e.isSelected&&(s={USER_NAME:e.USER_NAME,userId:e.user_id},t.push(s))}),a=t.map(e=>e.userId).join(","),e.getPrimaryMemberIds(a)},selectPrimaryMemeber(e,t){var a=this;let s=[],i="",o={};1==e.target.checked?a.primaryReportTeam.forEach(e=>{e.user_id==t.user_id&&(e.isSelected=!0,a.allPrimaryTeamSelect=!1)}):a.primaryReportTeam.forEach(e=>{e.user_id==t.user_id&&(e.isSelected=!1,a.allPrimaryTeamSelect=!1)}),a.primaryReportTeam.forEach(e=>{1==e.isSelected&&(o={USER_NAME:e.USER_NAME,userId:e.user_id},s.push(o))}),a.primaryReportTeam.length==s.length?a.allPrimaryTeamSelect=!0:a.allPrimaryTeamSelect=!1,i=s.map(e=>e.userId).join(","),a.isPrimaryDeletebuttonVisible=""!=i,a.getPrimaryMemberIds(i)},getPrimaryMemberIds(e){var t=this;t.primaryUserIds="",t.primaryUserIds=e,console.log("getPrimaryMemberIds",t.primaryUserIds)},selectAllSecondayMemeber(){var e=this;let t=[],a="",s={};e.allSecondaryTeamSelect=!e.allSecondaryTeamSelect,e.allSecondaryTeamSelect?(e.secondaryReportTeam.forEach(e=>{e.isSelected=!0}),e.isSecondaryDeletebuttonVisible=!0):(e.secondaryReportTeam.forEach(e=>{e.isSelected=!1}),e.isSecondaryDeletebuttonVisible=!1),e.secondaryReportTeam.forEach(e=>{1==e.isSelected&&(s={USER_NAME:e.USER_NAME,userId:e.user_id},t.push(s))}),a=t.map(e=>e.userId).join(","),e.getSecondaryMemberIds(a)},selectSecondaryMemeber(e,t){var a=this;let s=[],i="",o={};1==e.target.checked?a.secondaryReportTeam.forEach(e=>{e.user_id==t.user_id&&(e.isSelected=!0,a.allSecondaryTeamSelect=!1)}):a.secondaryReportTeam.forEach(e=>{e.user_id==t.user_id&&(e.isSelected=!1,a.allSecondaryTeamSelect=!1)}),a.secondaryReportTeam.forEach(e=>{1==e.isSelected&&(o={USER_NAME:e.USER_NAME,userId:e.user_id},s.push(o))}),a.secondaryReportTeam.length==s.length?a.allSecondaryTeamSelect=!0:a.allSecondaryTeamSelect=!1,i=s.map(e=>e.userId).join(","),a.isSecondaryDeletebuttonVisible=""!=i,a.getSecondaryMemberIds(i)},getSecondaryMemberIds(e){var t=this;t.secondaryUserIds="",t.secondaryUserIds=e,console.log("getSecondaryMemberIds",t.secondaryUserIds)},AddPrimaryManager(e){var t=this;"Primary"==e&&(t.managertype=e,t.isVisibleAssigManager=!0)},AddSecondaryManager(){var e=this;e.secondaryUserId="",e.isAddEditSecondaryPopup=!1,e.isVisibleSecondaryManagerPopUP=!0},AddMembers(e){var t=this;t.type=e,t.isVisibleAddMemberPopUp=!0},async DeleteMember(e,t){var a=this;try{const s=await new Promise(e=>{a.confirmR(a.$t("Are you sure you want to delete these record(s)?"),!0,!1,e)});if(void 0!=s)return;let i=`EmpId=${t}&type=${e}&userid=${a.UserId}`,o=await n["a"].DeletePrimarySecondaryMember(i);"1"==o.data[0].Value?(a.ShowAlert(a.$t("Primary Member(s) has been Deleted Successfully"),"success",a.$t("Alert")),a.primaryReportTeam=[],a.allPrimaryTeamSelect=!1,a.isPrimaryDeletebuttonVisible=!1,await a.GetOrgReportTeam()):"2"==o.data[0].Value?(a.ShowAlert(a.$t("Secondary Member(s) has been Deleted Successfully"),"success",a.$t("Alert")),a.secondaryReportTeam=[],a.allSecondaryTeamSelect=!1,a.isSecondaryDeletebuttonVisible=!1,await a.GetOrgReportSecondaryTeam()):"3"==o.data[0].Value&&(await a.GetReportManager(),a.ShowAlert(a.$t("Primary Manager has been Deleted Successfully"),"success",a.$t("Alert")))}catch(s){console.log("error message",s)}},async GetUserDetailByUserId(){var e=this;try{let t="userId="+e.UserId;await n["a"].GetUserDetailById(t).then(t=>{e.userDetail=t.data})}catch(t){console.log("error message",t)}},async GetReportManager(){var e=this;try{let t="userId="+e.UserId;await n["a"].GetReportManager(t).then(t=>{e.reportManagerDetail=t.data.result})}catch(t){console.log("error message",t)}},async GetOrgReportTeam(){var e=this;try{let t="userId="+e.UserId;await n["a"].GetOrgReportTeam(t).then(t=>{e.primaryReportTeam=[];let a=JSON.parse(t.data[0].Value).Data;a.forEach(t=>{e.primaryReportTeam.push(t)}),e.primaryReportTeam.forEach(e=>{e.isSelected=!1})})}catch(t){console.log("error message",t)}},async GetOrgReportSecondaryTeam(){var e=this;try{let t="userId="+e.UserId;await n["a"].GetOrgReportSecondaryTeam(t).then(t=>{e.secondaryReportTeam=[];let a=JSON.parse(t.data[0].Value).Data;a.forEach(t=>{e.secondaryReportTeam.push(t)}),e.secondaryReportTeam.forEach(e=>{e.isSelected=!1})})}catch(t){console.log("error message",t)}},EditManager(e,t){var a=this;"Primary"==t.Manager?(a.managertype=t.Manager,a.secondaryUserId=t.user_id,a.isVisibleAssigManager=!0):(a.managertype=t.Manager,a.secondaryUserId=t.user_id,a.isAddEditSecondaryPopup=!0,a.isVisibleSecondaryManagerPopUP=!0)}}},C=_,S=Object(d["a"])(C,s,i,!1,null,null,null);t["a"]=S.exports},1548:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle pt-2"},["Primary"==e.managertype?t("h4",{staticClass:"modal-title mt-2 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.$t(" Manage Primary Manager"))+" ")]):t("h4",{staticClass:"modal-title mt-2 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("AssignManager"))+" ")]),t("button",{staticClass:"close",on:{click:e.ClosePopUp}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"listing py-3 px-3"},[t("dynamic-form",{ref:"refPrimaryManager",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])])])},i=[],o=(a("14d9"),a("9769")),r={props:{UserId:{type:Number},CurrentUserDetails:{},managertype:{type:String}},data(){return{FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:"Users",name:"User",value:"",placeholder:"",validationRules:{required:!0,max:250},config:{options:[]}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2 '></i>Save"}],userList:[],userDetail:[],primaryManagerDetail:[],defaultManagerDetail:{}}},async created(){var e=this;await e.GetManagerDetails()},methods:{ClosePopUp(){var e=this;e.$parent.isVisibleAssigManager=!1},async getPrimaryManagerDetail(){var e=this;try{let t="userId="+e.UserId;await o["a"].GetReportManager(t).then(t=>{e.primaryManagerDetail=t.data.result,e.primaryManagerDetail.forEach(t=>{"Primary"==t.Manager&&(e.defaultManagerDetail=t)})})}catch(t){console.log("error message",t)}},async GetManagerDetails(){var e=this;try{let t="userIds="+e.UserId;await o["a"].GetSecondaryManager(t).then(t=>{let a=JSON.parse(t.data[0].Value).Data;a.forEach(t=>{e.FormSchema[0].Data[0].config.options.push({name:""+t.USER_NAME,value:""+t.USER_ID})}),e.$refs.refPrimaryManager.UpdateKeyValue()})}catch(t){console.log("error message",t)}},async checkUserDetailById(e){var t=this;t.userDetail=[];try{const a="userId="+e.value,s=await o["a"].GetUserDetailById(a);return null==s.data&&""==s.data||t.userDetail.push(s.data),s.data}catch(a){throw console.error("Error fetching user details:",a),a}},async onSubmit(e){var t=this;try{let a="";a=`newManager=${parseInt(e.User)}&userid=${t.UserId}&type=AddPrimary&secid=`,await o["a"].AddSecondaryManagerData(a).then(e=>{"1"==e.data[0].Value&&(t.ShowAlert(t.$t("Primary Manager has been added successfully"),"success",t.$t("Alert")),"Primary"==t.managertype&&t.$parent.GetReportManager(),t.ClosePopUp(),t.$parent.listheaderbuttons[2].isdisabled=!0,t.$parent.FetchUserData()),"2"==e.data[0].Value&&(t.ShowAlert(t.$t("Primary Manager has been changed successfully"),"success",t.$t("Alert")),"Primary"==t.managertype&&t.$parent.GetReportManager(),t.ClosePopUp(),t.$parent.listheaderbuttons[2].isdisabled=!0,t.$parent.FetchUserData())})}catch(a){console.log("error message",a)}}}},n=r,l=a("2877"),c=Object(l["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},"34e8":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"border col-lg-12 pt-3 pb-3"},[t("dynamic-form",{ref:"refCommunication",attrs:{lang:"en",mandatorytext:e.MandatoryString,buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1),t("div",{staticClass:"listing mt-3"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"Addresslist"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[e._m(0),e._m(1),t("th",{staticClass:"text-left"},[t("span",[e._v(e._s(e.$t("CommunicationType")))])]),t("th",{staticClass:"text-left"},[t("span",[e._v(e._s(e.$t("AddressOrScreenName")))])]),t("th",{staticClass:"text-left"},[t("span",[e._v(e._s(e.$t("NotesDescription")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("IsinCompanyDirectory")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Edit")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[0===e.EmailData.data.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"8"}},[e._v("No Record Found")])]):e._e(),e._l(e.EmailData.data,(function(a,s){return t("tr",{key:a.ROWNUMBER},[e._m(2,!0),t("td",{staticClass:"text-center"},[e._v(e._s(s+1))]),t("td",{staticClass:"text-left"},[e._v(e._s(a.CARRIER_TYPE_NAME))]),t("td",{staticClass:"text-left"},[e._v(e._s(a.CARRIER_VALUE))]),t("td",{staticClass:"text-left"},[e._v(e._s(a.USER_EMAIL_DESC))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.ADD_TO_DIRECTORY?"Yes":"No"))]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"enable",attrs:{"data-placement":"left",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Edit"},on:{click:function(t){return e.Edit(a)}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon"})])]),t("td",{staticClass:"text-center single-action"},[t("a",{class:{enable:!0,disabled:e.isDiabled},attrs:{"data-placement":"left",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Delete","aria-describedby":"tooltip845041"},on:{click:function(t){return e.Delete(a)}}},[t("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])}))],2)])])])])},i=[function(){var e=this,t=e._self._c;return t("th",{staticClass:"text-center",staticStyle:{width:"3% !important"}},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{staticClass:"custom-control-input",staticStyle:{display:"none"},attrs:{type:"checkbox",id:"chkAll_5",name:"checkbox"}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkAll_5"}})])])},function(){var e=this,t=e._self._c;return t("th",{staticClass:"text-center"},[t("span",[e._v("#")])])},function(){var e=this,t=e._self._c;return t("td",{staticClass:"text-center"},[t("div",[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{staticClass:"chkItems custom-control-input",staticStyle:{display:"none"},attrs:{type:"checkbox",value:"80720",name:"membercheckbox",id:"chk_6"}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chk_6"}})])])])}],o=(a("14d9"),a("9769")),r={components:{},props:{GetConfiguration:{type:Array},IsClient:{type:String}},data(){return{EmailData:[],MandatoryString:this.$t("MandatoryString"),FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("CommunicationType"),name:"CommunicationType",value:"",placeholder:"",validationRules:{required:!0,max:250},config:{options:[]}},{astype:"TextField",label:this.$t("AddressOrScreenName"),name:"AddressScreenName",value:"",placeholder:"",validationRules:{required:!0}},{astype:"TextField",label:this.$t("NotesDescription"),name:"NoteDescription",value:"",placeholder:"",disabled:!1,validationRules:{required:!1}}]},{layoutType:"triple",Data:[{astype:"toggleField",label:this.$t("IsinCompanyDirectory"),name:"CompanyDirectory",value:"",placeholder:""},{astype:"toggleField",label:this.$t("VisibleToClient"),name:"VisibleToClient",value:"",placeholder:"",config:{onChange:this.visibleToClient}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.onCancel}],CommunicationTypes:[],pageNo:1,pageSize:10,EmailId:0,isDiabled:!1}},created(){var e=this;e.getCommunicationTypes(),e.FetchData(),"Client"==e.IsClient?e.FormSchema[1].Data[1].visibility=!1:e.FormSchema[1].Data[1].visibility=!0},methods:{async getCommunicationTypes(){try{var e=this;await o["a"].GetCommunicationTypes().then(t=>{e.CommunicationTypes=t.data,e.CommunicationTypes.length>0&&(e.CommunicationTypes.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({name:t.text,value:t.value})}),e.$refs.refCommunication.UpdateKeyValue())})}catch(t){console.error("Error in getCommunicationTypes:",t)}},FetchData:function(){var e=this;e.isLoading=!0;var t=`pageNum=${e.pageNo}&pageSize=${e.pageSize}&sortBy=&sortExp=&userId=${e.GetConfiguration.user_id}`;o["a"].GetUserEmailList(t).then((function(t){e.EmailData=JSON.parse(t.data)}))},Edit:function(e){var t=this;t.EmailId=e.USER_EMAIL_ID,t.FormSchema[0].Data[0].value=e.CARRIER_TYPE_ID,t.FormSchema[0].Data[1].value=e.CARRIER_VALUE,t.FormSchema[0].Data[2].value=e.USER_EMAIL_DESC,t.FormSchema[1].Data[0].value=e.ADD_TO_DIRECTORY,t.FormSchema[1].Data[1].value=e.IS_VISIBLE,t.isDiabled=!0},Delete:function(e){var t=this;t.EmailId=e.USER_EMAIL_ID,t.EmailId>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("AddtionalEmail"),(function(){var e=`EmailId=${t.EmailId}&userId=${t.GetConfiguration.user_id}`;o["a"].DeleteAddtionalEmail(e).then((function(e){200==e.status?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Record")]),"success",!0,t.$t("Alert")),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Record")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete")),t.isLoading=!1},visibleToClient(){var e=this;e.confirmR(e.$t("Are you sure you want to make this Visible to Client?"),!0,!1,(function(e){}),(function(){e.cancelAction()}))},cancelAction(){this.FormSchema[1].Data[1].value=1!=this.FormSchema[1].Data[1].value},async onSubmit(e){var t=this;t.isLoading=!0;let a={EmailId:t.EmailId,CommunicationType:e.CommunicationType,AddressScreenName:e.AddressScreenName,NoteDescription:e.NoteDescription,AddToDirectory:e.CompanyDirectory,VisibleTo:""!=e.VisibleToClient&&e.VisibleToClient,configUserId:t.GetConfiguration.user_id};var s=JSON.stringify(a);await o["a"].AddUpdateAdditionalEmail(s).then((function(e){null!=e&&null!=e.data&&e.data>0?(t.ShowAlert(t.$t("RecordsSavedSuccessfully"),"success"),t.Clear(),t.FetchData()):(t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert")),t.FetchData())})),t.isLoading=!1},onCancel:function(){this.Clear()},Clear:function(){var e=this;e.EmailId=0,e.isDiabled=!1,e.FormSchema[0].Data[0].value="",e.FormSchema[0].Data[1].value="",e.FormSchema[0].Data[2].value="",e.FormSchema[1].Data[0].value="",e.FormSchema[1].Data[1].value="",e.$refs.refCommunication.validateForm.reset()}}},n=r,l=a("2877"),c=Object(l["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},"3a0e":function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,'.mapboxgl-popup-content button.mapboxgl-popup-close-button{font-size:23px;top:3px}.mapboxgl-popup{width:340px;max-width:340px!important}.leaflet-popup-content .popupcontent{background:#fff}.leaflet-left .leaflet-control-zoom{display:none}.leaflet-marker-icon{border-radius:100%!important}.leaflet-popup-content p{margin:auto!important}.leaflet-popup-content-wrapper{padding:0!important}.leaflet-popup-content{margin:auto!important;line-height:1.4!important;width:340px!important}.leaflet-container a.leaflet-popup-close-button{color:#5c5c5c!important;padding:6px 5px 0 0!important}.gm-style-iw.gm-style-iw-c{background-color:#fff!important;padding-right:0!important;padding-bottom:0!important;max-width:648px!important;min-height:150px!important;padding:0!important;width:340px!important;border-radius:0}.gm-style-iw.gm-style-iw-c button.gm-ui-hover-effect{background:0 0!important;display:block!important;font-size:18px!important;border:0!important;margin:0!important;padding:0!important;position:absolute!important;cursor:pointer!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;top:-6px!important;right:-6px!important;width:36px!important;height:40px!important}.gm-style-iw.gm-style-iw-c .gm-style-iw-d{overflow:hidden!important;width:100%!important}.gm-style-iw.gm-style-iw-c #content{padding:0!important;transition:all .3s;width:100%}.gm-style-iw.gm-style-iw-c .map-pop-header{color:#fff}.gm-style-iw.gm-style-iw-c .map-pop-header.Medium{background:#4cb4fb}.gm-style-iw.gm-style-iw-c .map-pop-header.Low{background:#4db567}.gm-style-iw.gm-style-iw-c .map-pop-header.High{background:#fbc648}.gm-style-iw.gm-style-iw-c .map-pop-header.Critical{background:#ef8934}.gm-style-iw.gm-style-iw-c .map-pop-header.highprofile{background:#de0303}.gm-style-iw.gm-style-iw-c .firstHeading{font-size:16px;display:flex;align-items:center;padding:5px 10px}.gm-style-iw.gm-style-iw-c .status{font-size:12px;background:#5c5c5c;font-weight:400;color:#fff;padding:4px 6px;margin-left:5px}.gm-style-iw.gm-style-iw-c p.details{display:flex;width:100%;font-weight:bolder;font-size:14px;padding:5px 10px;margin-bottom:4px}.gm-style-iw.gm-style-iw-c p.details span{font-size:12px;font-weight:400;text-transform:capitalize}.gm-style-iw.gm-style-iw-c .view-details{display:flex;width:100%;font-weight:bolder;font-size:14px;margin-bottom:0;border-top:2px solid #bfbfbf;flex-direction:row}.gm-style-iw.gm-style-iw-c .view-details a{padding:0 5px;margin-right:5px;color:#525e65}.mapboxgl-popup-content{padding:0!important}.mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.mail-box-pop .modal-dialog{max-width:570px!important;min-height:500px!important}.mail-box-pop.eta .modal-dialog{max-width:1200px!important;min-height:500px!important}.mail-box-pop.eta .modal-body{max-height:800px!important;height:800px!important}.motabod{border-right:10px solid #e5e5e5}.movedivider{background-repeat:no-repeat;background-position:0 0;width:37px;height:57px;position:absolute;z-index:999;right:-24px;top:160px;display:none}tr.bg-danger{background-color:#f7ccd0!important}.ui-resizable-handle{z-index:9999}.custom-tab-content ul.responsive-tabs.fsmtabcontrol li a{padding:10px}.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input-remove:after,.tags-input-remove:before{background:#fff!important}.tags-input span{margin-bottom:.3em}.circle-leaflet{width:55px!important;height:55px!important;line-height:55px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m2.png)!important;text-align:center!important;font-weight:700!important;position:absolute!important;top:-22px!important;left:-19px!important}.table-heading-wb .table-head-btn{padding:.5rem}.gmnoprint{right:0!important;left:auto!important}.bg-gray-faint{position:relative;background-color:#fff!important;font-family:Open Sans,sans-serif;padding:8px 16px!important;margin-top:55px!important;border:1px solid #2196f3;margin-left:12px!important}.bg-gray-faint:after{color:#2196f3;content:"\\f0d8";position:absolute;font:normal normal normal 14px/1 FontAwesome;top:-19px;left:10%;font-size:27px}.txt-m{font-size:15px;line-height:24px;margin-top:0;margin-bottom:0}.sliderchk{cursor:pointer;top:0;left:3px;right:0;bottom:0;background-color:#ccc}.sliderchk,.sliderchk:before{position:absolute;transition:.4s}.sliderchk:before{content:"";height:24px;width:24px;left:6px;bottom:4px;background-color:#fff}input:focus+.sliderchk{box-shadow:0 0 1px #2196f3}.sliderchk.round{border-radius:34px!important}.sliderchk.round:before{border-radius:50%;top:0}.textname{top:29px;position:absolute;left:4px;font-size:13px;color:#999;font-weight:700}.timelegend{height:10px;padding:0 15px;display:inline-block}.timelegend.min10{background-color:#96d52d}.timelegend.min20{background-color:#f0c141}.timelegend.min30{background-color:#f18d76}.showduration{float:left;color:#565656!important;position:absolute;left:4px;top:0;cursor:pointer;font-size:18px;background-color:#fff;padding:7px 18px;margin:10px;margin-left:8px;font-family:Roboto,Arial,sans-serif;z-index:999}.tags-input-root .typeahead-badges{padding-top:.25rem!important}#divmapdata .map-result img{width:auto!important}.filterscrollForCardView{scrollbar-width:thin;scrollbar-color:#848484}.filterscrollForCardView::-webkit-scrollbar{width:8px;height:8px}.filterscrollForCardView::-webkit-scrollbar-track{background-clip:content-box;border:2px solid transparent}.filterscrollForCardView::-webkit-scrollbar-thumb{background-color:#848484}.filterscrollForCardView::-webkit-scrollbar-corner,.scrollbar-1::-webkit-scrollbar-track{background-color:#848484}.typeahead-badges>span{max-width:195px}[data-color_code]:after{background-color:attr(data-color_code)}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#f5f1ef!important}.pinscreenMap{background:#17a2b8;border-left:0!important}.pinscreenMap,.unpinscreenMap{padding:15px 0!important;width:50px;cursor:pointer}.unpinscreenMap{background:#525f65}.unpinscreenMap i{transform:rotate(-45deg)}.map-actions span.esri_prof:hover{transform:none!important}.map-actions span.esri_prof a{color:#212529}.mCustomScrollBox,.mCustomScrollBox .mCS-light{max-height:inherit!important}#scrollbarreplyuserguide{max-height:350px}.theme-primary.partition{overflow:visible}',""]),e.exports=t},"3bc9":function(e,t,a){var s=a("4bbd");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("491e0b88",s,!0,{sourceMap:!1,shadowMode:!1})},"4bbd":function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".switch.dynamic-form{width:74px}.slider.round.toggle-no .slider-no{padding-left:6px}",""]),e.exports=t},"4ea2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"right-content right-content-expand"},[t("section",{staticClass:"main-content",attrs:{id:"main-content"}},[t("section",{staticClass:"main-content"},[t("div",{staticClass:"container-fluid p-0"},[t("div",{staticClass:"border p-3 col-lg-12"},[t("dynamic-form",{ref:"dynamicForm",attrs:{lang:"en",buttons:e.buttons,mandatorytext:e.$t("MandatoryString"),schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1),t("div",{staticClass:"listing mt-2"},[t("div",{staticClass:"conversation-date heading-border"},[t("span",[e._v(e._s(e.$t("ContactNumber")))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"d-inline-block"},[t("span",{staticClass:"legend-pending colorboxsquare"}),e._v(e._s(e.$t("Communication"))+" "+e._s(e.$t("VisibleToClient"))+" ")])])]),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"Addresslist"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],staticClass:"AddressChkAll custom-control-input",attrs:{type:"checkbox",id:"chkAll_0",name:"checkbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{change:[function(t){var a=e.selectAll,s=t.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=e._i(a,o);s.checked?r<0&&(e.selectAll=a.concat([o])):r>-1&&(e.selectAll=a.slice(0,r).concat(a.slice(r+1)))}else e.selectAll=i},e.toggleSelectAll]}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkAll_0"}})])]),e._m(0),t("th",{staticClass:"text-left"},[t("span",[e._v(e._s(e.$t("ContactNumber")))])]),t("th",{staticClass:"text-left"},[t("span",[e._v(e._s(e.$t("PhoneDescription")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("CompanyDirectory"))+" ")])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Edit")))])]),t("th",{staticClass:"text-center"},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[e._l(e.PhoneData.data,(function(a,s){return t("tr",{key:a.user_phone_id,class:1==a.is_visible?"text-center high-bar":"text-center"},[t("td",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.selected,expression:"phone.selected"}],staticClass:"chkItems custom-control-input",attrs:{type:"checkbox",id:"chk_"+a.user_phone_id},domProps:{checked:Array.isArray(a.selected)?e._i(a.selected,null)>-1:a.selected},on:{change:function(t){var s=a.selected,i=t.target,o=!!i.checked;if(Array.isArray(s)){var r=null,n=e._i(s,r);i.checked?n<0&&e.$set(a,"selected",s.concat([r])):n>-1&&e.$set(a,"selected",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"selected",o)}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chk_"+a.user_phone_id}})])]),t("td",{staticClass:"text-center"},[e._v(e._s(a.ROWNUMBER))]),t("td",{staticClass:"text-left"},[e._v(e._s(a.user_phone))]),t("td",{staticClass:"text-left"},[e._v(e._s(a.user_phone_desc))]),t("td",{staticClass:"text-center"},[e._v(e._s(a.add_to_directory?"Yes":"No"))]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"enable",attrs:{"data-placement":"left",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Edit"},on:{click:function(t){return e.Edit(a)}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon"})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"enable",attrs:{"data-placement":"left",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Delete","aria-describedby":"tooltip845041"},on:{click:function(t){return e.Delete(a)}}},[t("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),0==e.PhoneData.data.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"7"}},[e._v(" "+e._s(e.$t("NoRecordfound")))])]):e._e()],2)])])])])])])])},i=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("th",{staticClass:"text-center"},[t("span",[e._v("#")])])}],o=a("ed09"),r=a("7bb1"),n=a("9769");Object(r["d"])("required",{validate(e){return console.log("checkk"),{required:!0,valid:-1===["",null,void 0].indexOf(e)}},message:"The {_field_} is required"});var l=Object(o["b"])({name:"Manage Contact",components:{ValidationObserver:r["b"],ValidationProvider:r["c"]},props:{UserId:{type:Number},IsClient:{type:String}},data(){return{FormSchema:[{layoutType:"double",Data:[{astype:"NumericField",label:this.$t("ContactNumber"),name:"ContactNumber",value:"",placeholder:this.$t("ContactNumber"),validationRules:{required:!0},disabled:!1},{astype:"TextField",label:this.$t("PhoneDescription"),name:"PhoneDescription",value:"",placeholder:this.$t("PhoneDescription"),validationRules:{required:!0},disabled:!1},{astype:"toggleField",label:this.$t("IsinCompanyDirectory"),name:"CompanyDirectory",value:"",placeholder:"",validationRules:{required:!1}},{astype:"toggleField",label:this.$t("VisibleToClient"),name:"VisibleToClient",value:"",placeholder:"",validationRules:{required:!1},config:{onChange:this.VisibleToClient}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",isVisible:!0},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Clear}],isLoading:!1,phoneId:0,pageNo:1,pageSize:10,PhoneData:[]}},created:function(){var e=this;e.FetchData(),"Client"==e.IsClient?e.FormSchema[0].Data[3].visibility=!1:e.FormSchema[0].Data[3].visibility=!0},methods:{FetchData:function(){var e=this;e.isLoading=!0;var t=`pageNum=${e.pageNo}&pageSize=${e.pageSize}&sortBy=&sortExp=&userId=${e.UserId}`;n["a"].GetUserPhoneList(t).then((function(t){e.PhoneData=JSON.parse(t.data)}))},Edit:function(e){var t=this;t.phoneId=e.user_phone_id,t.FormSchema[0].Data[0].value=e.user_phone,t.FormSchema[0].Data[1].value=e.user_phone_desc,t.FormSchema[0].Data[2].value=e.add_to_directory,"Client"==t.IsClient?t.FormSchema[0].Data[3].visibility=!1:t.FormSchema[0].Data[3].value=e.is_visible},Delete:function(e){var t=this;t.phoneId=e.user_phone_id,t.phoneId>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("AddtionalPhone"),(function(){var e=`phoneId=${t.phoneId}&userId=${t.UserId}`;n["a"].DeleteAddtionalPhone(e).then((function(e){"Deletion successful"==e.data.Message?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Record")]),"success",!0,t.$t("Alert")),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Record")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete")),t.isLoading=!1},onSubmit:function(e){var t=this,a={userPhoneId:t.phoneId>0?t.phoneId:0,userid:t.UserId,phone:e.ContactNumber,Description:e.PhoneDescription,isVisible:e.VisibleToClient,addToDir:e.CompanyDirectory,isVisibletoCA:!0},s=JSON.stringify(a);n["a"].AddUpdateContact(s).then(e=>{if(null!=e.data){JSON.parse(e.data);null!=e&&null!=e.data&&e.data>0?(t.ShowAlert(t.$t("RecordsSavedSuccessfully"),"success"),t.isLoading=!1,t.Clear(),t.FetchData()):(t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert")),t.isLoading=!1,t.FetchData())}})},Clear:function(){var e=this;e.phoneId=0,e.FormSchema[0].Data[0].value="",e.FormSchema[0].Data[1].value="",e.FormSchema[0].Data[2].value="",e.FormSchema[0].Data[3].value="",e.$refs.dynamicForm.validateForm.reset()},closePopup(){this.$emit("close")},VisibleToClient(){var e=this;e.confirmR(e.$t("Are you sure you want to make this Visible to Client?"),!0,!1,(function(e){}),(function(){e.cancelAction()}))},cancelAction(){this.FormSchema[0].Data[3].value=1!=this.FormSchema[0].Data[3].value}}}),c=l,d=(a("8f73"),a("2877")),p=Object(d["a"])(c,s,i,!1,null,null,null);t["a"]=p.exports},"5dbc":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"container-fluid mt-2"},[t("div",[t("div",{staticClass:"row mt-0.5",attrs:{id:"checkForZone"}},["Google"==e.mapType&&1==e.config.isShowSearchBox?t("div",{staticClass:"col-lg-5 col-sm-12"},[t("div",{staticClass:"form-group d-flex"},[t("div",{staticClass:"input-group customsearchbox divcityshown"},[1==e.config.isShowSearchBox?t("input",{staticClass:"form-control",attrs:{type:"text",id:"pac-input",maxlength:"50",placeholder:"Enter Your Location or Zip Code"}}):e._e()])])]):e._e(),t("div",{staticClass:"col-lg-3 col-sm-12"},[void 0!=e.config&&1==e.config.isShowCurrentLocation?t("div",{staticClass:"form-group"},[t("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:e.CurrentLocation}},[e._v("Use my location")]),e._v(" OR "),t("a",{staticClass:"btn btn-warning float-right",attrs:{href:"javascript:;"},on:{click:e.ImportFilePopup}},[t("i",{staticClass:"fa fa-upload mr-2"}),e._v("Click To import Geo JSON File.")])]):e._e()])]),t("div",{staticClass:"search"},[t("div",{staticClass:"map-result"},[t("div",{staticClass:"map-actions"},[void 0!=e.config&&1==e.config.isShowGetDirection?t("span",{staticClass:"save legends_low"},[1==e.config.isShowGetDirection?t("a",{class:{"mp-active":0==e.showSetting,"mg-success":1==e.showSetting},attrs:{href:"javascript:;",title:"GetDirection"},on:{click:e.GetDirection}},[t("em",{staticClass:"fa fa-map-marker"})]):e._e()]):e._e(),e._v(" "),void 0!=e.config&&1==e.config.isShowLocator?t("span",{staticClass:"save legends_low"},[1==e.config.isShowLocator?t("a",{class:{"mp-active":0==e.showSetting,"mg-success":1==e.showSetting},attrs:{href:"javascript:;",title:"View Locator on map"},on:{click:e.ViewLocatorOnMap}},[t("em",{staticClass:"fa fa-map-marker"})]):e._e()]):e._e(),e._v(" "),void 0!=e.config&&1==e.config.isShowEtaMap?t("span",{staticClass:"edit legends_profile"},[1==e.config.isShowEtaMap?t("a",{attrs:{href:"javascript:;",title:"ETA Map"},on:{click:function(t){return e.LoadLocatorDataonMap("locator")}}},[t("em",{staticClass:"fa fa-map"})]):e._e()]):e._e(),void 0!=e.config&&1==e.config.isShowEtaPipeLines?t("span",{staticClass:"edit legends_high esri_prof"},[e._m(0),t("div",{staticClass:"dropdown"},[e._m(1),t("div",{staticClass:"dropdown-menu esri_prof_data",staticStyle:{display:"block"}},[e._m(2),t("div",{staticClass:"w-100 mb-2"},e._l(e.UtilityMapData,(function(a,s){return t("a",{key:s,staticClass:"dropdown-item p-0",attrs:{href:"javascript:;"}},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[t("input",{staticClass:"custom-control-input dynamic customcheckboxUtilityMap",attrs:{type:"checkbox"}}),t("label",{staticClass:"custom-control-label pt-1",attrs:{type:"checkbox"}},[t("label",{staticClass:"font-weight-bold"},[e._v(e._s(a.LAYER_NAME))])])])])})),0),t("div",[t("a",{staticClass:"btn btn-primary d-block text-white py-2",attrs:{href:"javascript:;",title:"Go"},on:{click:e.ShowUtilityMap}},[e._v("Go"),t("i",{staticClass:"fa fa-angle-double-right pl-2"})])])])])]):e._e()]),e.showSaveZone?t("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"0px","z-index":"9999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:e.OpenSaveZone}},[e._m(3)]):e._e(),e.showDeleteFeature?t("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"1670px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:e.DeleteFeature}},[e._m(4)]):e._e(),t("div",{staticClass:"map"},[t("div",{staticClass:"map_canvas map_ipadcontrol",style:{"min-height":void 0==e.mapHeight?"500px":e.mapHeight,"min-width":void 0==e.mapWidth?"100%":e.mapWidth},attrs:{id:e.mapContainer}}),t("div",{staticClass:"w-100 float-left",staticStyle:{position:"absolute",top:"0px"}},[0==e.showSetting?t("a",{staticClass:"showduration anchideduration",attrs:{title:"Hide"},on:{click:e.ShowTravelMode}},[e._v("Hide")]):e._e(),1==e.showSetting?t("a",{staticClass:"showduration ancshowduration",attrs:{title:"Show Setting"},on:{click:e.ShowTravelMode}},[e._v("Show Setting")]):e._e(),t("div",{staticClass:"position-absolute float-left my24 mx24 bg-gray-faint round settingPopup d-none",staticStyle:{"z-index":"999999"}},[t("div",{attrs:{id:"params"}},[e._m(5),t("h4",{staticClass:"txt-m font-weight-bold"},[e._v("Choose Travel Mode:")]),e._m(6),t("h4",{staticClass:"txt-m font-weight-bold"},[e._v("Choose Maximum Duration:")]),t("div",{staticClass:"w-100 float-left",staticStyle:{"margin-bottom":"15px"}},[t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:e.time},on:{onChange:function(t){return e.TravelMode(e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes10")])]),t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:2*e.time},on:{onChange:function(t){return e.TravelMode(2*e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes20")])]),t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:3*e.time},on:{onChange:function(t){return e.TravelMode(3*e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes30")])])])])])])])])])])])],1)},i=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[t("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[t("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100 bg-grey"},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[t("input",{staticClass:"custom-control-input dynamic customcheckboxselectall",attrs:{id:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}}),t("label",{staticClass:"custom-control-label pt-1",attrs:{for:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}},[e._v("SelectAll")])])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"background-color":"rgb(40, 167, 69)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Save Zone"}},[t("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v("Save Zone")])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{left:"-121px","background-color":"rgb(240, 4, 4)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-right":"122px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Delete Save Zone"}},[t("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[t("i",{staticClass:"fa fa-trash pr-2"}),e._v("Delete Selected Shape")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row float-left"},[t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min10"}),e._v(" Minutes10 ")]),t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min20"}),e._v(" Minutes20 ")]),t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min30"}),e._v(" Minutes30 ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"mr12 toggle-group text-center"},[t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"foot-walking"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Walking")])]),t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"cycling-regular"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Cycling")])]),t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"driving-car",checked:"checked"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Driving")])])])}],o=(a("14d9"),a("e192")),r=a.n(o),n=(a("ac6d"),a("e11e")),l=a.n(n),c=(a("6cc5"),a("cae8")),d=a.n(c),p=(a("bdd0"),a("885b")),m=a.n(p),u=(a("c307"),a("2573"),a("20d6"),a("5fbf"),a("ac00")),g=(a("1615"),a("9769")),h=(a("5bfd"),a("125d"),a("afaa")),f={components:{},props:{mapType:{required:!0},Data:{required:!0},isShowDrawButton:{required:!0,type:String},config:{required:!1},mapWidth:{required:!1},mapHeight:{required:!1},latLng:{required:!1},mapContainer:{required:!0},selectedUser:{required:!0},UtilityMapData:{required:!0},editZone:{required:!0},zoneId:{required:!0}},data:function(){return{isLoading:!1,zoneEditData:[],showDeleteFeature:!1,showSaveZonePopUp:!1,showSaveZone:!1,showAddZone:!1,time:600,colors:"",showSetting:null,address:[],UserName:null,UserEmailId:null,imageMarker:[],mapLayer:[],map:null,locations:[],locationPriority:[],locationname:[],ticketNumberList:[],LocationwithPriority:null,markers:[],mapZoom:!1,mapMarker:[],markerCluster:null,startingPoint:null,showSettingPopup:!1,lngLatData:[],fullAddress:[],leafLetReferenceNumber:[],polygonData:[],polygonNewShapeId:null,zoneData:[],drawingManager:null,currentSelectedShape:null,myPolygon:null,editableLayers:null,showHideEtaMap:!1,showImportFilePopup:!1,emailString:"",ZoneType:""}},watch:{Data:{handler:function(){setTimeout(()=>{this.ShowLocationOnGoogleMap(),"LeafLet"==this.mapType&&this.initLeafletMap(this.Data)},500)},deep:!0},config:{handler:function(){this.ShowDrawingManager()},deep:!0},selectedUser:{handler:function(){this.ViewLocatorOnMap(this.selectedUser)},deep:!0},latLng:{handler:function(){this.ViewOnMap()}}},mounted:function(){"Google"==this.mapType?setTimeout(()=>{},2e3):"MapBox"==this.mapType?this.initMapBox(this.Data,"pk.eyJ1IjoiaGFycmlzbHVtZW4iLCJhIjoiY2s2dWtrMzJ3MDk2NTNncXMxMjlxa29mcCJ9.riRtpclzr9XfExHhclre8A"):"Esri"==this.mapType?setTimeout(()=>{this.initLeafletMap(this.Data)},2e3):"LeafLet"!=this.mapType&&"Esri"!=this.mapType||setTimeout(()=>{this.initLeafletMap(this.Data)},2e3)},created:function(){this.UserName=this.GetUserInfo.Name,this.UserEmailId=this.GetUserInfo.Email,void 0!=this.myPolygon&&null!=this.myPolygon&&this.myPolygon.setMap(null);let e=document.createElement("script");e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyAJdx4gmhGKWjPTBBVk5riFgpbE0lGS-xM&callback=initAutocompletes&libraries=geometry,drawing,places&v=weekly"),document.head.appendChild(e);let t=document.createElement("script");t.setAttribute("src","https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"),document.head.appendChild(t);let a=document.createElement("script");a.setAttribute("src","~/Scripts/FsmMaps/fontawesome-markers.min.js"),document.head.appendChild(a),this.ShowLocationOnGoogleMap(),this.MapExtendLocation()},methods:{MapExtendLocation:function(){var e=this;if("Google"==e.mapType){let o=[];e.Data[0].mapExtendLatLong.forEach((function(e){o.push(new google.maps.LatLng(e[1],e[0]))}));for(var t=new google.maps.LatLngBounds,a=o,s=0,i=a.length;s<i;s++)t.extend(a[s]);e.map.fitBounds(t)}else if("MapBox"==e.mapType){let t=[];e.Data[0].mapExtendLatLong.forEach((function(e){t.push(e)})),e.map.fitBounds(t)}else{let t=[];e.Data[0].mapExtendLatLong.forEach((function(e){t.push([e[1],e[0]])}));var o=l.a.polygon(t);e.map.fitBounds(o.getBounds())}},ImportFilePopup:function(){var e=this;e.showImportFilePopup=!0},initAutocompletes:function(){var e=this;const t=document.getElementById("pac-input"),a=new google.maps.places.SearchBox(t);e.map.addListener("bounds_changed",()=>{a.setBounds(e.map.getBounds())}),google.maps.event.addListener(a,"places_changed",(function(){var t,s,i=a.getPlaces(),o=new google.maps.LatLngBounds;for(t=0;s=i[t];t++)(function(e){o.extend(e.geometry.location)})(s);e.map.fitBounds(o),a.set("map",e.map),e.map.setZoom(Math.min(e.map.getZoom(),12))}))},CurrentLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.GetCurrentLocation,e.geoError):alert("Geolocation is not supported by this browser.")},GetCurrentLocation:function(e){var t=this;if(e){var a=e.coords.latitude,s=e.coords.longitude,i=new google.maps.LatLng(a,s);t.map.setCenter(i),t.map.setZoom(18)}},SaveMapExtent:function(){var e=this;e.$emit("SaveMapExtent",e.fullAddress,e.mapType)},ShowUtilityMap:function(){var e=this,t=JSON.parse(localStorage.getItem("coordinates"));null==t&&(t={x:"43.133971",x1:"43.132812",y:"-76.088009",y1:"-76.087183"}),Object(h["loadModules"])(["esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/layers/GraphicsLayer"]).then(([a,s,i,o,r])=>{var n=new a({basemap:"hybrid"});new s({container:"utilitymap",map:e.map,extent:{xmin:-13856051.7748509,ymin:2821931.08215458,xmax:-7488766.97004404,ymax:6364777.09974285,spatialReference:102100}});""!=layerUrl&&null!=layerUrl&&(Colors={},Colors.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00"},Colors.random=function(){var e,t=0;for(var a in this.names)Math.random()<1/++t&&(e=a);return{name:e,rgb:this.names[e]}},String(layerUrl).split(",").forEach((function(e){var t=String(e).split("^")[1];""!=t&&null!=t&&"null"!=t&&"undefined"!=typeof t||(t=String(Colors.random().rgb).toUpperCase());const a={type:"simple",symbol:{color:t,type:"simple-line",style:"solid"},visualVariables:[{type:"size",field:"ELEV_GAIN",minDataValue:0,maxDataValue:2300,minSize:"3px",maxSize:"7px"}]};var s=String(e).split("^")[0];n.add(new i({url:s,renderer:a}))})));new s({container:"utilitymap",map:n,basemap:"hybrid",center:[t.y,t.x],zoom:17});var l=new r;n.add(l);var c=null;void 0!=t&&null!=t&&(c=[[t.y1,t.x1],[t.y1,t.x],[t.y,t.x],[t.y,t.x1]]);c={type:"polygon",rings:c};var d={type:"simple-fill",color:[255,0,0,.35],outline:{color:[255,0,0],width:1}},p=new o({geometry:c,symbol:d});l.add(p)}).catch(e=>{console.error(e)})},GetDirection:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.showRoutePosition,e.geoError):alert("Geolocation is not supported by this browser.")},geoError:function(){},showRoutePosition:function(e){var t=this;if(e){var a=e.coords.latitude,s=e.coords.longitude,i=new google.maps.LatLng(a,s),o=new google.maps.LatLng(t.Data[0].pinLatLong.latitude.split(",")[0],t.Data[0].pinLatLong.latitude.split(",")[1]),n=localStorage.getItem("UserImage");String(n).indexOf("blob")<=0&&(n="https://app.talygen.com/Content/images/Black/user.png");var c={lat:a,lng:s};if("Google"==t.mapType){var d={url:n,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},p=new google.maps.Marker({position:c,icon:d,map:t.map}),m=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+n+"' class='marker' /> <div style='display:block;width: 270px;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"});p.addListener("click",(function(){m.open(t.map,this)})),t.imageMarker.push(p);var u={path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,scale:3},g={strokeColor:"#ff0000",strokeOpacity:0,fillOpacity:0,icons:[{icon:u,offset:"0",repeat:"4px"}]},h={map:t.map,suppressMarkers:!1,polylineOptions:g},f=new google.maps.DirectionsService,v=new google.maps.DirectionsRenderer(h),y=new google.maps.LatLng(a,s);function b(e,t){var a="DRIVING";e.route({origin:i,destination:o,travelMode:google.maps.TravelMode[a]},(function(e,a){if("OK"==a){t.setDirections(e);var s='<span style="font-weight:bold;">Distance: </span>'+e["routes"][0].legs[0].distance.text+'<br /><span style="font-weight:bold;">Time: </span>'+e["routes"][0].legs[0].duration.text,i=new google.maps.InfoWindow({content:s});google.maps.event.addListener(g,"click",(function(e){i.setPosition(e.latLng),i.open(map)})),google.maps.event.addListener(map,"click",(function(){i.close()}))}else window.alert("Directions request failed due to "+a+". Route exceeds maximum distance limitation.")}))}v.setMap(t.map),b(f,v)}else if("MapBox"==t.mapType){var _={lon:parseFloat(c.lng,10),lat:parseFloat(c.lat,10)},C='<img src="'+n+'" style="width:100px;height:100px;" />',S=new r.a.Popup({offset:25}).setHTML(C),w=document.createElement("div");w.className="marker",w.style.backgroundImage="url("+n+")",w.style.backgroundSize="cover",w.style.width="40px",w.style.height="40px";p=new r.a.Marker(w).setPopup(S).setLngLat(_).addTo(t.map);t.imageMarker.push(p);var x="https://api.mapbox.com/directions/v5/mapbox/driving/"+s+","+a+";"+t.Data[0].pinLatLong.latitude.split(",")[1]+","+t.Data[0].pinLatLong.latitude.split(",")[0]+"?steps=true&geometries=geojson&access_token="+r.a.accessToken;t.map.getLayer("point")||t.map.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:y}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}});var A=new XMLHttpRequest;A.open("GET",x,!0),A.onload=function(){var e=JSON.parse(A.response);if(""!=typeof e.code&&"InvalidInput"!=e.code){var a=e.routes[0],s=a.geometry.coordinates,i={type:"Feature",properties:{distance:a.distance,duration:a.duration},geometry:{type:"LineString",coordinates:s}};t.map.getSource("route")?t.map.getSource("route").setData(i):(t.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),t.map.on("click","route",(function(e){t.map.queryRenderedFeatures(e.point,{layers:["route"]});var a=e.features[0].properties,s=a.distance;s=parseFloat(.000621371192*s,10).toFixed(2);var i='<span style="font-weight:bold;">Distance: </span>'+s+' mi<br /><span style="font-weight:bold;">Time: </span>'+timeConvert(a.duration);(new r.a.Popup).setLngLat(e.lngLat).setHTML(i).addTo(t.map)})))}else try{ShowMsgWithMsg("Route exceeds maximum distance limitation.","failure")}catch(o){alert("Route exceeds maximum distance limitation.")}},A.send()}else{var L=l.a.icon({iconUrl:n,iconSize:[40,40]});S=l.a.popup().setContent("<img src="+n+" />");l.a.marker([a,s],{icon:L}).bindPopup(S).openPopup().addTo(t.map);var k=l.a.Routing.control({waypoints:[l.a.latLng(a,s),l.a.latLng(t.Data[0].pinLatLong.latitude.split(",")[0],t.Data[0].pinLatLong.latitude.split(",")[1])],routeWhileDragging:!1,createMarker:function(){return null}}).addTo(t.map);k.on("routesfound",(function(e){var t=e.routes;t[0].summary}))}}},DeleteFeature:function(){var e=this;null!=e.currentSelectedShape&&"undefined"!=typeof e.currentSelectedShape&&(e.currentSelectedShape.setMap(null),e.currentSelectedShape=null,e.showAddZone=!1,e.showDeleteFeature=!1)},ShowDrawingManager:function(){var e=this;null==e.drawingManager&&void 0!=e.config&&1==e.config.isShowDrawButton&&(e.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["polygon"],setEditable:!0},polylineOptions:{editable:!0}}),e.drawingManager.setMap(e.map),google.maps.event.addListener(e.drawingManager,"overlaycomplete",e.GetGoogleAddressToDraw))},ViewLocatorOnMap:function(e){var t,a=this;a.isLoading=!0,t=void 0!=a.selectedUser?`selectedUser=${e}&reqFrom=`:"reqFrom=ETAMAP",g["a"].TrackByUserId(t).then((function(e){if(null!=e.data.data&&e.data.data.length>0){var t=e.data.data;a.ShowUserOnMap(t,a.map),a.isLoading=!1}else a.ShowAlert(a.$t("CurrentLocationNotFound"),"warning",!0,a.$t("Alert")),a.isLoading=!1}))},ShowUserOnMap:function(e,t){var a=this,s=[];$.each(e,(function(e,t){var i=t.IMAGE_PATH,o={lat:parseFloat(t.LATITUDE,10),lng:parseFloat(t.LONGITUDE,10)};s.push([o.lat,o.lng]);new google.maps.LatLng(o.lat,o.lng);String(i).indexOf("blob")<=0&&(i="/Content/images/user_avtar.png");var n='<div class="w-100 float-left popupcontent" style="padding:0px 6px 0px 0px;">';if(n+='<img src="'+i+'" class="float-left" style="width:50px;height:50px; border-radius: 100%;border: 3px solid #f2f2f2;" />',n+='<div style="padding-left:8px; padding-top:5px;width:80%;" class="float-left">',n+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Name: </b>"+t.NAME+" </p>",n+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Department: </b>"+t.DEPARTMENT_NAME+" </p></div>",t.TRACK_ID>0&&(n+="<p style='margin-bottom:2px;' class='px-2 float-left'><b style='font-weight:bold;'>"+t.NAME+" </b> is going to ticket number: "+t.TICKET_NUMBER+" </p>"),n+="</div>","Google"==a.mapType){var c={url:i,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},d=new google.maps.Marker({position:o,icon:c,map:a.map});a.imageMarker.push(d);var p=new google.maps.InfoWindow({content:n});try{d.addListener("click",(function(){p.open(a.map,this)}))}catch(f){console.log(f)}}else if("MapBox"==a.mapType){var m={lon:parseFloat(o.lng,10),lat:parseFloat(o.lat,10)},u=new r.a.Popup({offset:25}).setHTML(n),g=document.createElement("div");g.className="marker",g.style.backgroundImage="url("+i+")",g.style.backgroundSize="cover",g.style.width="50px",g.style.height="50px";d=new r.a.Marker(g).setPopup(u).setLngLat(m).addTo(a.map);a.map.flyTo({center:[m.lon,m.lat],essential:!0}),a.imageMarker.push(d)}else{var h=l.a.icon({iconUrl:i,iconSize:[40,40]});u=l.a.popup().setContent(n),d=l.a.marker([o.lat,o.lng],{icon:h}).bindPopup(u).openPopup().addTo(a.map);a.imageMarker.push(d),a.map.fitBounds(s)}}))},removeMarker(){this.markers.forEach(e=>e.remove()),this.markers=[];const e=this.draw.getAll().features;e.forEach(e=>{this.draw.delete(e.id)}),this.map.flyTo({center:[78.9629,20.5937],zoom:1,essential:!0})},deleteMarker(){this.markers.forEach(e=>e.remove()),this.markers=[];const e=this.draw.getAll().features;e.forEach(e=>{this.draw.delete(e.id)})},removeAllMarkersExceptCurrent(e){this.markers.forEach(t=>{t!==e&&t.remove()}),this.markers=[]},drawLocationPointer(e){const t=new r.a.Marker({color:"red"}).setLngLat([e.location_nw.split(",")[1],e.location_nw.split(",")[0]]).addTo(this.map);return this.markers.push(t),t},ViewOnMap:function(){var e=this;"MapBox"==e.mapType&&("AddTicket"!=e.mapContainer?(1==e.markers.length&&e.removeAllMarkersExceptCurrent(e.markers),e.markers.length>0?e.markers[0].features.forEach((function(t,a){e.map.flyTo({center:[e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]],zoom:16,essential:!0}),t.properties.ticketNumber==(e.latLng.TicketNumber||e.latLng.ticket_number)&&new r.a.Popup({closeOnClick:!0}).setLngLat([e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]]).setHTML(t.properties.address).addTo(e.map)})):(e.map.flyTo({center:[e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]],zoom:16,essential:!0}),e.drawLocationPointer(e.latLng))):setTimeout(()=>{e.map.flyTo({center:[e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]],zoom:16,essential:!0});var t={lon:e.latLng.location_nw.split(",")[1],lat:e.latLng.location_nw.split(",")[0]},a="",s="https://unpkg.com/leaflet@1.3.4/dist/images/marker-icon.png",i=document.createElement("div");i.className="marker",i.style.backgroundImage="url("+s+")",i.style.backgroundPosition="top center",i.style.backgroundSize="cover",i.style.width="40px",i.style.height="40px",new r.a.Marker(i).setLngLat(t).setPopup(a).addTo(e.map)},1e3))},gpxData:function(e,t,a){var s=this;s.Data=[],s.mapType="Google",s.emailString=t,s.ZoneType=a,s.Data.push(e),s.ShowLocationOnGoogleMap()},ShowLocationOnGoogleMap:function(){if("Google"==this.mapType){var e,t=this,a=null;const n=[];var s,i=null,o=new google.maps.InfoWindow;t.map=null,t.showLoader=!0,t.map=new google.maps.Map(document.getElementById(t.mapContainer),{zoom:7,zoomControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},center:new google.maps.LatLng(30.7333,76.7794),mapTypeId:google.maps.MapTypeId.ROADMAP}),void 0!=t.config&&1==t.config.isShowDrawButton&&(t.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["polygon"]},polylineOptions:{editable:!0}}),t.drawingManager.setMap(t.map),google.maps.event.addListener(t.drawingManager,"overlaycomplete",(function(e,a,s){var i=e.overlay;t.currentSelectedShape=i,t.GetGoogleAddressToDraw(e)}))),(this.mapType="Google")&&$.each(t.Data,(function(r,l){null!=l.pinLatLong.latitude&&(a=l.pinLatLong.latitude.split(",")[0],i=l.pinLatLong.latitude.split(",")[1]),s="Critical"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png":"High"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png":"Medium"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png":"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png";let c='<div id="content"><div class="map-pop-header '+l.priority+'" style="background-color:'+l.color_code+'"><div id="siteNotice"></div>'+l.popupHeaderHtml+'</div><div id="bodyContent">'+l.popupBodyHtml+'<p class="view-details">'+l.popupFooterHtml+"</p></div></div>";e=new google.maps.Marker({position:new google.maps.LatLng(a,i),icon:s,title:l.refValue,map:t.map,address:c}),n.push(e),t.markers.push(e);let d=[];if(void 0!=t.Data[r]&&t.Data[r].polygons.forEach((function(e){e.latLong.forEach((function(e){d.push(new google.maps.LatLng(e.longitude,e.latitude))})),t.myPolygon=new google.maps.Polygon({paths:d,draggable:!1,editable:1==t.config.isEditable,strokeColor:"undefined"!=typeof e.strokeColor?e.strokeColor:"#FF0000",strokeOpacity:"undefined"!=typeof e.strokeOpacity?e.strokeOpacity:"#FF0000",strokeWeight:"undefined"!=typeof e.strokeWeight?e.strokeWeight:"#FF0000",fillColor:"undefined"!=typeof e.fillColor?e.fillColor:"#FF0000",fillOpacity:"undefined"!=typeof e.opacity?e.opacity:.35,Id:t.Data[r].refValue,FormName:e.FormName,Description:e.Description,ZoneType:e.ZoneType,locatorids:e.locatorids}),t.zoneEditData.push({FormName:e.FormName,Description:e.Description,Refrence:"View",ZoneType:e.ZoneType,YardEmails:e.YardEmails,locatorids:e.locatorids}),t.myPolygon.setMap(t.map),google.maps.event.addListener(t.myPolygon,"click",(function(e,a){t.currentSelectedShape=this,t.currentSelectedShape.setOptions({editable:!0,ShapeId:t.polygonNewShapeId}),t.showDeleteFeature=!0,"zoneMapDiv"==t.mapContainer&&(t.showAddZone=!0)}))})),"zoneMapDiv"==t.mapContainer||"mapExtend"==t.mapContainer){for(var p=new google.maps.LatLngBounds,m=d,u=0,g=m.length;u<g;u++)p.extend(m[u]);t.map.fitBounds(p)}google.maps.event.addListener(t.myPolygon.getPath(),"set_at",(function(e,a){let s={FullAddress:""};if(t.lngLatData=[],"zoneMapDiv"==t.mapContainer){t.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),t.myPolygon.setOptions({ShapeId:t.polygonNewShapeId}),t.showAddZone=!0,r=t.myPolygon.getPath().getArray(),r.forEach((function(e,a){t.lngLatData.push({latitude:e.lat(),longitude:e.lng()})})),s={FullAddress:""};var i=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),o=new google.maps.Geocoder;o.geocode({latLng:i},(function(e,t){s.FullAddress=e[0].formatted_address})),t.polygonData.push({Id:t.polygonNewShapeId,latLong:t.lngLatData,CompleteAddress:s,strokeOpacity:t.myPolygon.strokeOpacity,strokeWeight:t.myPolygon.strokeWeight,strokeColor:t.myPolygon.strokeColor,fillColor:t.myPolygon.fillColor,locatorids:""}),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:s})}else{var r;t.lngLatData=[],r=t.myPolygon.getPath().getArray(),r.forEach((function(e,a){t.lngLatData.push({Lat:e.lat(),Lng:e.lng()})})),s={FullAddress:""};i=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),o=new google.maps.Geocoder;o.geocode({latLng:i},(function(e,t){s.FullAddress=e[0].formatted_address})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:s})}})),google.maps.event.addListener(e,"click",function(e,a){return function(){o.setContent(c),o.open(t.map,e),"WorkOrderDetail"!=t.mapContainer&&"detailMapDiv"!=t.mapContainer||o.close()}}(e));var h=new google.maps.LatLng(t.Data[0].latlong.split(",")[0],t.Data[0].latlong.split(",")[1]);t.map.panTo(h),t.map.setZoom(4)}));var r={gridSize:40,maxZoom:15,styles:[{width:30,height:30,url:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m1.png",textColor:"white",textSize:12}]};t.markerCluster=new MarkerClusterer(t.map,n,r)}},LoadLocatorDataonMap:function(){var e=this,t=null,a=null;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,a=e.coords.longitude})):console.log("Geolocation is not supported by this browser."),e.showSetting=!0,"Google"==e.mapType?setTimeout(()=>{e.LoadGoogleHeatMap(t,a)},2e3):"MapBox"==e.mapType?setTimeout(()=>{e.LoadMapboxHeatMap(t,a)},4e3):setTimeout(()=>{e.ShowEtaMap(t,a)},4e3)},initMapBox:function(e,t,a,s){var i=this,o="";let n=3;if(e){var l=$.grep(e,(function(e,t){return""!==e.location_nw&&null!==e.location_nw&&void 0!==typeof e.location_nw&&","!==e.location_nw}));l=l[0],l&&(o=[parseFloat(String(l.location_nw).split(",")[1],10),parseFloat(String(l.location_nw).split(",")[0],10)])}i.startingPoint=o,r.a.accessToken=t,i.map=new r.a.Map({container:i.mapContainer,style:"mapbox://styles/mapbox/streets-v11",zoom:n,zoomControl:!0,scrollZoom:!0,boxZoom:!0}),void 0!==i.config&&i.config.isShowSearchBox&&(i.geocoder=new m.a({accessToken:t,mapboxgl:r.a,marker:!1,placeholder:"Search for places in Barbados"}),i.map.addControl(i.geocoder)),void 0!==i.config&&i.config.isShowDrawButton&&(i.draw=new d.a({displayControlsDefault:!1,controls:{line_string:!1,polygon:!1,point:!0,trash:!0}}),i.map.addControl(i.draw),i.map.on("draw.create",i.GetMapBoxAddressToDraw),i.map.on("draw.delete",i.deleteMarker),i.navTopLeft=new r.a.NavigationControl,i.map.addControl(i.navTopLeft,"top-left")),i.navBottomRight=new r.a.NavigationControl,i.map.addControl(i.navBottomRight,"bottom-right")},resetMap(){var e=this;e.map&&e.draw&&e.draw.deleteAll()},clearSearchField(){var e=this;if(e.geocoder){var t=document.querySelector(".mapboxgl-ctrl-geocoder input");t&&(t.value="")}},initLeafletMap:function(e,t,a){var s,i=this;if(void 0!=e){if(i.map){i.map.off();try{i.map.remove()}catch{}}let t="",a="";if(null!=e&&e.length>0){var o=$.grep(e,(function(e,t){return""!=e.location_nw&&null!=e.location_nw&&"undefined"!=typeof e.location_nw&&","!=e.location_nw}));if(null!=o&&o.length>0){var r=o[0].location_nw;a=r.split(",")[1],t=r.split(",")[0]}}var n=l.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Points &copy '+(new Date).getFullYear()+" LINZ"}),c=(l.a.tileLayer("https://{s}.tiles.mapbox.com/v3/spatial.b625e395/{z}/{x}/{y}.png",{attribution:'<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'}),l.a.latLng(t,a));i.startingPoint=[t,a];var d=10;if(""==t&&""==a&&(d=2),i.map=l.a.map(i.mapContainer,{zoom:d,center:c,layers:[n],zoomControl:!1}),l.a.control.zoom({position:"topright"}).addTo(i.map),void 0!=i.config&&1==i.config.isShowDrawButton&&i.GetLeafLetAddressToDraw(),void 0!=i.config&&1==i.config.isShowSearchBox){const e=new u["b"],t=new u["a"]({provider:e});i.map.addControl(t)}i.markers=l.a.markerClusterGroup({iconCreateFunction:function(e){return l.a.divIcon({html:'<div class="circle-leaflet">'+e.getChildCount()+"</div>"})}});var p=l.a.Icon.extend({options:{shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}});1==i.Data.length&&void 0!=i.Data[0].latlong&&i.map.flyTo([i.Data[0].latlong.split(",")[0],i.Data[0].latlong.split(",")[1]],16,{animate:!0,duration:2});new p({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png"}),new p({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png"}),new p({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png"}),new p({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png"}),new p({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_fill.png"});function m(e){var o="",r="";if($.each(e,(function(e,n){if(""!=n.pinLatLong.latitude&&null!=n.pinLatLong.latitude&&void 0!=typeof n.pinLatLong.latitude||n.polygons.length>0){o=n.pinLatLong.latitude;let f=[];r=n.priority;if("[]"!=n.attachmentCountWithExt&&""!=n.attachmentCountWithExt&&null!=n.attachmentCountWithExt){var c=JSON.parse(n.attachmentCountWithExt);$.each(c,(function(e,t){"Video"==t.TYPE?t.COUNT:"Image"==t.TYPE?t.COUNT:parseInt(t.COUNT)}))}if(i.Data[e].polygons.forEach((function(e){e.latLong.forEach((function(e){f.push([e.longitude,e.latitude])}))})),void 0!=n.polygons[e]){if(i.Data[0].polygons[0].latLong.length>1){var d=l.a.polygon(f,{fill:!0}).addTo(i.editableLayers);i.map.fitBounds(d.getBounds())}}let v='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+n.priority+'" style="background-color:'+n.color_code+'"><div id="siteNotice"></div>'+n.popupHeaderHtml+'</div><div id="bodyContent">'+n.popupBodyHtml+'<p class="view-details">'+n.popupFooterHtml+"</p></div></div></div></div></div>";a=o.split(",")[1],t=o.split(",")[0],a=parseFloat(a,10),t=parseFloat(t,10);var p=n.ticket_number,m=".leafleticoncustom_"+r+"{background-color:"+n.color_code+" }",u=document.createElement("style");u.innerHTML=m,document.head.appendChild(u);var g=l.a.icon({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png",iconSize:[30,30],color:n.color_code,"icon-color":n.color_code,"background-color":n.color_code,className:"leafleticoncustom_"+r});""!=o&&(s=l.a.marker(l.a.latLng(t,a),{icon:g}),s.bindPopup(v),i.markers.addLayer(s),i.leafLetReferenceNumber.push({TicketNumber:n.refValue,Address:v}),i.mapMarker.push(i.markers));try{s.on("click",(function(e){var t=$("a.ticketnumber[data-ticketnumber='"+p+"']");if("WorkOrderDetail"!=i.mapContainer&&"detailMapDiv"!=i.mapContainer||s.getPopup().getElement().classList.add("d-none"),t.length>0&&"true"==localStorage.getItem("isMapView")){var a=t.closest(".lists");a.addClass("alert-info"),setTimeout((function(){a.removeClass("alert-info")}),5e3)}t=$("a.ticketnumberlist[data-ticketnumber='"+p+"']"),t.length>0&&"false"==localStorage.getItem("isMapView")&&(t=t.closest("tr"),t.addClass("alert-info"),setTimeout((function(){t.removeClass("alert-info")}),5e3))}))}catch(h){console.log("err")}}})),null!=e.mapdetail&&e.mapdetail.length>0)if("MapBox"==e.mapdetail[0].MAP_TYPE){if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var n=JSON.parse(e.mapdetail[0].LAT_LNG),c=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(e,t){var a=[];a.push(t[1],t[0]),c.push(a)})),map.fitBounds(c)}}else if("Google"==e.mapdetail[0].MAP_TYPE&&""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var d=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(e,t){var a=[];a.push(t.lat,t.lng),d.push(a)}));n=d;var p=[];p.push(n),map.fitBounds(n)}i.map.addLayer(i.markers)}null!=e&&e.length>0&&m(e)}else i.map=l.a.map(i.mapContainer,{layers:[l.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data  <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'})],center:[0,0],zoom:5});void 0!=i.latLng&&i.ViewOnMap()},ShowEtaMap:function(e,t){var a=this,s=null,i=null,o="driving-car",r=600;if(a.showHideEtaMap)return $.each(a.mapLayer,(function(e,t){a.map.removeLayer(t)})),a.showHideEtaMap=!1,!1;function n(){navigator.geolocation?navigator.geolocation.getCurrentPosition(d,c,{timeout:1e4}):alert("Geolocation is not supported by this browser")}function c(e){e.code;var t=e.message;alert(t)}n();function d(e){e=$.post("geocoordinates.php",{lat:e.coords.latitude,lng:e.coords.longitude})}function p(e,t){if(a.map){$.each(a.mapLayer,(function(e,t){a.map.removeLayer(t)})),a.showHideEtaMap=!0;var s=new l.a.latLng(e,t);a.map.panTo(s),a.map.setZoom(11)}var i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var o=l.a.icon({iconUrl:i,iconSize:[40,40]}),r=l.a.popup().setContent("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"),n=l.a.marker([e,t],{icon:o},{layers:""}).bindPopup(r).openPopup().addTo(a.map);a.imageMarker.push(n),m(!0)}function m(e){var t=[];$("input[name=duration]:checked").each((function(){t.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+o,data:JSON.stringify({location_type:"start",range_type:"time",range:t,interval:r,locations:[[s,i],[s,i]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(e){l.a.geoJson(e,{onEachFeature:function(e,t){t.bindPopup("Isochrone: "+e.properties.value),a.mapLayer.push(t)},style:function(e){var t=e.properties.value;return a.SetColor(t),{fillColor:a.colors,color:a.colors,weight:1,fillOpacity:.35}}}).addTo(a.map)}})}s=parseFloat(t,10)+.02,i=parseFloat(e,10)+.004,p(i,s),document.getElementById("params").addEventListener("change",(function(e){if("profile"===e.target.name)o=e.target.value,p(i,s);else if("duration"===e.target.name){var t="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){t.length>0&&(t+=",");var e=$(this).val();t+=e}));var a=String(t).split(",");r=a[0],a[a.length-1]}else r="600","1800";p(i,s)}}))},SetColor:function(e){var t=this;if(e=parseInt(e,10),"MapBox"!=t.mapType?e/=60:t.time=10,"MapBox"==t.mapType)switch(e){case 10:t.colors="3CEA19";break;case 20:t.colors="EFF60B";break;case 30:t.colors="F6320B";break;default:t.colors="F6320B"}else switch(e){case 10:t.colors="green";break;case 20:t.colors="yellow";break;case 30:t.colors="red";break;default:t.colors="red"}},LoadGoogleHeatMap:function(e,t){var a=this,s="driving-car",i=600;if(a.showHideEtaMap)return a.map.data.forEach((function(e){a.map.data.remove(e)})),a.showHideEtaMap=!1,!1;function o(o,r){if(a.map){$.each(a.map,(function(e,t){try{a.map.removeLayer(t)}catch(s){}})),a.showHideEtaMap=!0;var n=new l.a.latLng(o,r);a.map.panTo(n),a.map.setZoom(11)}var c={lat:e,lng:t},d=(n=new google.maps.LatLng(e,t),localStorage.getItem("UserImage"));String(d).indexOf("blob")<=0&&(d="https://app.talygen.com/Content/images/Black/user.png");var p={url:d,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},m=new google.maps.Marker({position:c,icon:p,map:a.map}),u=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+d+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"});m.addListener("click",(function(){u.open(a.map,this)})),a.imageMarker.push(m);var g=[];$("input[name=duration]:checked").each((function(){g.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+s,data:JSON.stringify({location_type:"start",range_type:"time",range:g,interval:i,locations:[[r,o],[r,o]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(e){a.map.data.addGeoJson(e)}}),a.map.data.setStyle((function(e){var t=e.getProperty("value");return a.SetColor(t),{fillColor:a.colors,opacity:.35,strokeWeight:1}}))}o(e,t),document.getElementById("params").addEventListener("change",(function(a){if("profile"===a.target.name)s=a.target.value,o(e,t);else if("duration"===a.target.name){var r="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){r.length>0&&(r+=",");var e=$(this).val();r+=e}));var n=String(r).split(",");i=n[0],n[n.length-1]}else i="600","1800";o(e,t)}}))},Close:function(){var e=this;e.showAddZone=!1,e.showSaveZonePopUp=!1,e.showImportFilePopup=!1},GetZoneManagementData:function(e){var t=this;t.currentSelectedShape.setOptions({strokeOpacity:e.strokeOpacity,strokeColor:e.strokeColor,fillOpacity:.35,strokeWeight:e.strokeWeight,fillColor:e.fillColor}),t.polygonData.forEach((function(a,s){a.Id==e.Id&&(t.polygonData[s].strokeOpacity=e.strokeOpacity,t.polygonData[s].strokeWeight=e.strokeWeight,t.polygonData[s].fillColor=e.fillColor,t.polygonData[s].locatorids=e.locatorids,t.polygonData[s].strokeColor=e.strokeColor,t.polygonData[s].locatorids=e.locatorids,t.showAddZone=!1,t.showSaveZone=!0)}))},OpenSaveZone:function(){var e=this;e.showSaveZonePopUp=!0},SaveZoneData:function(e){var t=this;let a={ZoneId:0==t.zoneId?e.ZoneId:t.zoneId,ResolverUserId:null,JsonData:{type:"FeatureCollection",features:[]},ZoneName:e.Name,description:e.Description,ZoneType:null==e.ZoneType?t.ZoneType:e.ZoneType,YardEmails:null==e.YardEmails?t.emailString:e.YardEmails};t.polygonData.forEach((function(e,t){a.JsonData.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[]]},properties:{stroke:e.strokeWeight,"stroke-opacity":e.strokeOpacity,"stroke-width":e.strokeWeight,fillColor:e.fillColor,"fill-opacity":e.fillOpacity,locatorname:null,locatorids:e.locatorids,userids:null}}),e.latLong.forEach((function(e,s){void 0!=a.JsonData.features[t]&&a.JsonData.features[t].geometry.coordinates[0].push([e.longitude,e.latitude])})),void 0!=a.JsonData.features[t]&&a.JsonData.features[t].geometry.coordinates[0].push([a.JsonData.features[t].geometry.coordinates[0][0][0],a.JsonData.features[t].geometry.coordinates[0][0][1]])})),t.zoneData.push(a);var s=JSON.stringify(t.zoneData);g["a"].UploadGeoJSON(s).then((function(e){0==t.zoneId?t.ShowAlert("Zone Succesfully Added.","success"):t.ShowAlert("Zone Succesfully Updated.","success"),t.showSaveZonePopUp=!1,t.currentSelectedShape=null,t.$emit("FetchData")}))},GetLeafLetAddressToDraw:function(){var e=this;let t={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};l.a.featureGroup().addTo(e.map);e.editableLayers=(new l.a.FeatureGroup).addTo(e.map);new l.a.Control.Draw({edit:{featureGroup:e.editableLayers,poly:{allowIntersection:!0}},draw:{polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:"#bada55"}},polyline:!1,circle:!1,marker:!1,circlemarker:!1}}).addTo(e.map);e.map.addLayer(e.editableLayers),e.map.on("draw:editvertex",(function(a){var s=a.poly;s.getLatLngs(),s.getLatLngs()[0].forEach((function(a,s){e.lngLatData.push({Lat:a.lat,Lng:a.lng});var i=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),o=new google.maps.Geocoder;o.geocode({latLng:i},(function(e,a){t.FullAddress=e[0].formatted_address})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t})}))})),e.map.on("draw:created",(function(a){var s=a.layerType,i=a.layer;if("polygon"===s){i.on("mouseover",(function(){console.log(i.getLatLngs())})),e.editableLayers.addLayer(i),i.getLatLngs()[0].forEach((function(t,a){e.lngLatData.push({Lat:t.lat,Lng:t.lng})}));var o=new google.maps.LatLng(i.getLatLngs()[0][0].lat,i.getLatLngs()[0][0].lng),r=new google.maps.Geocoder;r.geocode({latLng:o},(function(a,s){t.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,s){"country"==a.types[0]?(t.Country.Name=a.short_name,t.Country.LongName=a.long_name):"postal_code"==a.types[0]?t.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(t.AdministrativeAreaLevel1.LongName=a.long_name,t.AdministrativeAreaLevel1.Name=a.short_name,t.State.LongName=a.long_name,t.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(t.AdministrativeAreaLevel2.LongName=a.long_name,t.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(e.address.push({AdministrativeArea3:a.long_name}),t.AdministrativeAreaLevel3.LongName=a.long_name,t.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(e.address.push({City:a.long_name}),t.City.LongName=a.long_name,t.City.Name=a.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t}),e.$emit("GetAddress",e.fullAddress)}))}else{e.lngLatData.push({Lat:a.layer._latlng.lat,Lng:a.layer._latlng.lng});o=new google.maps.LatLng(a.layer._latlng.lat,a.layer._latlng.lng),r=new google.maps.Geocoder;r.geocode({latLng:o},(function(a,s){t.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,s){"country"==a.types[0]?(t.Country.Name=a.short_name,t.Country.LongName=a.long_name):"postal_code"==a.types[0]?t.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(t.AdministrativeAreaLevel1.LongName=a.long_name,t.AdministrativeAreaLevel1.Name=a.short_name,t.State.LongName=a.long_name,t.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(t.AdministrativeAreaLevel2.LongName=a.long_name,t.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(e.address.push({AdministrativeArea3:a.long_name}),t.AdministrativeAreaLevel3.LongName=a.long_name,t.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(e.address.push({City:a.long_name}),t.City.LongName=a.long_name,t.City.Name=a.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t}),e.$emit("GetAddress",e.fullAddress)}))}}))},GetGoogleAddressToDraw:function(e){var t=this,a=e.overlay;t.currentSelectedShape=a;let s={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};if("polygon"==e.type){var i=e.overlay;i.type=e.type,t.lngLatData=[],"zoneMapDiv"==t.mapContainer&&(t.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),t.showAddZone=!0),e.overlay.getPath().getArray().map(e=>{t.lngLatData.push({latitude:e.lat(),longitude:e.lng()})}),i["ShapeId"]=t.polygonNewShapeId,google.maps.event.addListener(i,"click",(function(e,a,s){"zoneMapDiv"==t.mapContainer&&(t.polygonNewShapeId=this.ShapeId,t.showAddZone=!0,t.currentSelectedShape=this)}));var o=new google.maps.LatLng(t.lngLatData[0].latitude,t.lngLatData[0].longitude),r=new google.maps.Geocoder;r.geocode({latLng:o},(function(e,a){s.FullAddress=e[0].formatted_address,a==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,a){"country"==e.types[0]?(s.Country.Name=e.short_name,s.Country.LongName=e.long_name):"postal_code"==e.types[0]?s.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(s.AdministrativeAreaLevel1.LongName=e.long_name,s.AdministrativeAreaLevel1.Name=e.short_name,s.State.LongName=e.long_name,s.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(s.AdministrativeAreaLevel2.LongName=e.long_name,s.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),s.AdministrativeAreaLevel3.LongName=e.long_name,s.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),s.City.LongName=e.long_name,s.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:s}),t.$emit("GetAddress",t.fullAddress),t.polygonData.push({Id:t.polygonNewShapeId,latLong:t.lngLatData,CompleteAddress:s,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}))}))}else if("marker"==e.type){t.lngLatData.push({name:"",latLong:[{latitude:e.overlay.getPosition().lat(),longitude:e.overlay.getPosition().lng()}]});o=new google.maps.LatLng(e.overlay.getPosition().lat(),e.overlay.getPosition().lng()),r=new google.maps.Geocoder;r.geocode({latLng:o},(function(e,a){a==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,a){"country"==e.types[0]?(s.Country.Name=e.short_name,s.Country.LongName=e.long_name):"postal_code"==e.types[0]?s.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(s.AdministrativeAreaLevel1.LongName=e.long_name,s.AdministrativeAreaLevel1.Name=e.short_name,s.State.LongName=e.long_name,s.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(s.AdministrativeAreaLevel2.LongName=e.long_name,s.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),s.AdministrativeAreaLevel3.LongName=e.long_name,s.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),s.City.LongName=e.long_name,s.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:s}),t.$emit("GetAddress",t.fullAddress))}))}},LoadMapboxHeatMap:function(e,t){var a=this;if("undefined"!=typeof a.map.getLayer("isoLayer")&&a.map.removeLayer("isoLayer"),"undefined"!=typeof a.map.getSource("iso"))return a.map.removeSource("iso"),!1;var s=document.getElementById("params"),i="https://api.mapbox.com/isochrone/v1/mapbox/",o=null,n=null,l=(i="https://api.mapbox.com/isochrone/v1/mapbox/",parseFloat(n,10),parseFloat(o,10),"driving"),c="10,20,30";function p(){var s=i+l+"/"+t+","+e+"?contours_minutes="+c+"&contours_colors="+a.colors+"&polygons=true&access_token="+r.a.accessToken;$.ajax({method:"GET",url:s}).done((function(e){a.map.getSource("iso").setData(e)}))}a.colors="3CEA19,EFF60B,F6320B",u(),a.map.flyTo({center:[t,e],zoom:10,essential:!0});var m=new d.a;function u(){a.map.addSource("iso",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),a.map.addLayer({id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":["get","fillColor"],"fill-opacity":.5}},"poi-label");var s={lon:t,lat:e},i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var o=new r.a.Popup({offset:25}).setHTML("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"),n=document.createElement("div");n.className="marker",n.style.backgroundImage="url("+i+")",n.style.backgroundPosition="top center",n.style.backgroundSize="cover",n.style.width="40px",n.style.height="40px";var l=new r.a.Marker(n).setLngLat(s).setPopup(o).addTo(a.map);a.imageMarker.push(l),p()}a.map.addControl(m,"bottom-left"),s.addEventListener("change",(function(e){if("profile"===e.target.name)l=e.target.value,"foot-walking"==l?l="walking":"cycling-regular"==l?l="cycling":"driving-car"==l&&(l="driving"),p();else if("duration"===e.target.name){var t="",i="";$(s).find("input:checkbox:checked").length>0?($(s).find("input:checkbox:checked").each((function(){t.length>0&&(t+=","),i.length>0&&(i+=",");var e=$(this).val();t+=e,a.SetColor(e),i+=a.colors})),c=t,a.colors=i,p()):(c="10,20,30",a.colors="3CEA19,EFF60B,F6320B",p())}})),a.map.on("load",(function(){u()}))},TravelMode:function(e){var t=this;t.time=t.time-e,"LeafLet"==t.mapType?t.ShowEtaMap():"Google"==t.mapType?t.LoadGoogleHeatMap():"MapBox"==t.mapType&&t.LoadMapboxHeatMap()},ShowTravelMode:function(){var e=this;0==e.showSettingPopup?($(".settingPopup").removeClass("d-none"),e.showSetting=!1,e.showSettingPopup=!0):($(".settingPopup").addClass("d-none"),e.showSetting=!0,e.showSettingPopup=!1)},GetMapBoxAddressToDraw:function(e){var t=this;let a={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},PinCode:"",State:{Name:"",LongName:""},FullAddress:""};const s=t.draw.getAll().features;if(s.length>1){const a=e.features[0].id;s.forEach((function(e){e.id!==a&&t.draw.delete(e.id)}));let i={location_nw:e.features[0].geometry.coordinates[0]+","+e.features[0].geometry.coordinates[1]};const o=t.drawLocationPointer(i);t.removeAllMarkersExceptCurrent(o)}if("Polygon"==e.features[0].geometry.type){e.features[0].geometry.coordinates[0].forEach((function(e,a){t.lngLatData.push({Lat:e[1],Lng:e[0]})}));var i=new google.maps.LatLng(e.features[0].geometry.coordinates[0][0][1],e.features[0].geometry.coordinates[0][0][0]),o=new google.maps.Geocoder;o.geocode({latLng:i},(function(e,s){a.FullAddress=e[0].formatted_address,s==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,s){"country"==e.types[0]?(a.Country.Name=e.short_name,a.Country.LongName=e.long_name):"postal_code"==e.types[0]?a.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(a.AdministrativeAreaLevel1.LongName=e.long_name,a.AdministrativeAreaLevel1.Name=e.short_name,a.State.LongName=e.long_name,a.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(a.AdministrativeAreaLevel2.LongName=e.long_name,a.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),a.AdministrativeAreaLevel3.LongName=e.long_name,a.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),a.City.LongName=e.long_name,a.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:a}),t.$emit("GetAddress",t.fullAddress))}))}else{t.lngLatData.push({Lat:e.features[0].geometry.coordinates[1],Lng:e.features[0].geometry.coordinates[0]});i=new google.maps.LatLng(e.features[0].geometry.coordinates[1],e.features[0].geometry.coordinates[0]),o=new google.maps.Geocoder;o.geocode({latLng:i},(function(e,s){a.FullAddress=e[0].formatted_address,s==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,s){"country"==e.types[0]?(a.Country.Name=e.short_name,a.Country.LongName=e.long_name):"postal_code"==e.types[0]?a.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(a.AdministrativeAreaLevel1.LongName=e.long_name,a.AdministrativeAreaLevel1.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(a.AdministrativeAreaLevel2.LongName=e.long_name,a.AdministrativeAreaLevel2.Name=e.short_name,a.State.LongName=e.long_name,a.State.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),a.AdministrativeAreaLevel3.LongName=e.long_name,a.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),a.City.LongName=e.long_name,a.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:a}),t.$emit("GetAddress",t.fullAddress))}))}}}},v=f,y=(a("d42b"),a("2877")),b=Object(y["a"])(v,s,i,!1,null,null,null);t["a"]=b.exports},"8f73":function(e,t,a){"use strict";a("ef94")},acbf:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-content right-content-expand border p-3"},[t("div",{staticClass:"container-fluid pt-2 p-0",attrs:{id:"divAddressfields"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("dynamic-form",{ref:"refAddress",attrs:{lang:"en",buttons:!1,schema:e.FormSchema}})],1),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("MapComponent",{ref:"mapComponnet",staticClass:"row",attrs:{mapType:"MapBox",mapContainer:"addAddress",config:e.config,mapHeight:"355px",latLng:e.latLngValues},on:{GetAddress:e.GetAddress}}),t("div",{staticClass:"row flex-row-reverse mt-2"},[t("div",{staticClass:"col-lg-6 text-right"},[1==e.isUpdateForm?t("a",{staticClass:"btn btn-success mr-2",attrs:{href:"javascript:;",title:"",id:"addAddress","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:e.onSubmit}},[t("i",{staticClass:"fa fa-refresh"}),t("span",{attrs:{id:"btnAddressText"}},[e._v(" "+e._s(e.$t("Update")))])]):t("a",{staticClass:"btn btn-success mr-2",attrs:{href:"javascript:;",title:"",id:"addAddress","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:e.onSubmit}},[t("i",{staticClass:"fa fa-save mr-2"}),t("span",{attrs:{id:"btnAddressText"}},[e._v(" "+e._s(e.$t("Save")))])]),t("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:"",id:"CancelAddress","data-toggle-tooltip":"tooltip","data-original-title":"Cancel"},on:{click:function(t){return e.cancelAddress()}}},[t("i",{staticClass:"fa fa-times mr-2"}),e._v(e._s(e.$t("Cancel")))])])])],1)])])]),t("div",{staticClass:"row col-lg-6"},[t("div",{staticClass:"py-2"},[t("span",{staticClass:"mandatory"},[e._v(e._s(e.$t("Mandatory")))])])]),e.AddressList.length>1?t("div",{staticClass:"mt-3 mb-2"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.$t("AdditionalAddresses")))]),t("small",{staticClass:"float-right"},[t("a",{class:{"table-head-btn":!0,disabled:!e.isdeleteButtonVisible},attrs:{title:"",id:"DeleteMultipleAddress","data-toggle-tooltip":"tooltip","data-original-title":"Please select one/multiple check box(s) to remove additional addresses(s)"},on:{click:function(t){return e.removeaddress("MultipleDelete")}}},[t("i",{staticClass:"fa fa-trash pr-2"}),e._v(e._s(e.$t("Delete"))+" ")])])])])]):e._e(),t("div",{staticClass:"row p-2"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"ml-3 d-inline-block"},[t("span",{staticClass:"legend-pending colorboxsquare"}),e._v(e._s(e.$t("AddressIsVisibleToclient"))+" ")])])]),t("div",{staticClass:"listing"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"Addresslist"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center",staticStyle:{width:"3%","min-width":"55px","max-width":"55px"},attrs:{scope:"col",width:"36px",id:"nonresize"}},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],staticClass:"AddressChkAll custom-control-input",attrs:{type:"checkbox",id:"chkAll_0",name:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{click:function(t){return e.selectAll(t)},change:function(t){var a=e.allSelected,s=t.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=e._i(a,o);s.checked?r<0&&(e.allSelected=a.concat([o])):r>-1&&(e.allSelected=a.slice(0,r).concat(a.slice(r+1)))}else e.allSelected=i}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkAll_0"}})])]),e._m(0),t("th",{staticClass:"ui-resizable text-left",staticStyle:{width:"85px","min-width":"85px","max-width":"85px"},attrs:{id:"th-ADDRESS"}},[t("span",{staticStyle:{"min-width":"67px"}},[e._v(e._s(e.$t("Address")))]),t("div",{staticClass:"sizer",attrs:{id:"th-ADDRESS-sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})]),t("th",{staticClass:"text-left ui-resizable",staticStyle:{width:"192px","min-width":"192px","max-width":"192px"},attrs:{id:"th-NOTEDESCRIPTION"}},[t("span",{staticStyle:{"min-width":"174px"}},[e._v(e._s(e.$t("NotesDescription")))]),t("div",{staticClass:"sizer",attrs:{id:"th-NOTEDESCRIPTION-sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})]),t("th",{staticClass:"text-center ui-resizable",staticStyle:{width:"312px","min-width":"312px","max-width":"312px"},attrs:{id:"th-ITISINCOMPANYDIRECTORY"}},[t("span",{staticStyle:{"min-width":"294px"}},[e._v(e._s(e.$t("IsinCompanyDirectory")))]),t("div",{staticClass:"sizer",attrs:{id:"th-ITISINCOMPANYDIRECTORY-sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})]),t("th",{staticClass:"ui-resizable text-center",staticStyle:{width:"204px","min-width":"204px","max-width":"204px"},attrs:{id:"th-ISPRIMARYADDRESS"}},[t("span",{staticStyle:{"min-width":"186px"}},[e._v(e._s(e.$t("IsPrimary"))+" "+e._s(e.$t("Address")))]),t("div",{staticClass:"sizer",attrs:{id:"th-ISPRIMARYADDRESS-sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})]),t("th",{staticClass:"text-center ui-resizable",staticStyle:{width:"85px","min-width":"85px","max-width":"85px"},attrs:{id:"th-EDIT"}},[t("span",{staticStyle:{"min-width":"67px"}},[e._v(e._s(e.$t("Edit")))]),t("div",{staticClass:"sizer",attrs:{id:"th-EDIT-sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})]),t("th",{staticClass:"text-center ui-resizable",staticStyle:{width:"85px","min-width":"85px","max-width":"85px"},attrs:{id:"th-DELETE"}},[t("span",{staticStyle:{"min-width":"67px"}},[e._v(e._s(e.$t("Delete")))]),t("div",{staticClass:"sizer",attrs:{id:"th-DELETE-sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})])])]),t("tbody",[e._l(e.AddressList,(function(a,s){return t("tr",{class:1==a.is_client_address?"text-center high-bar":"text-center",attrs:{Key:s}},[t("td",{staticClass:"textaligncenter"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.isSelected,expression:"item.isSelected"}],staticClass:"custom-control-input",attrs:{id:a.user_address_id,type:"checkbox",name:"checkbox"},domProps:{value:a.user_address_id,checked:Array.isArray(a.isSelected)?e._i(a.isSelected,a.user_address_id)>-1:a.isSelected},on:{change:[function(t){var s=a.isSelected,i=t.target,o=!!i.checked;if(Array.isArray(s)){var r=a.user_address_id,n=e._i(s,r);i.checked?n<0&&e.$set(a,"isSelected",s.concat([r])):n>-1&&e.$set(a,"isSelected",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"isSelected",o)},function(t){return e.select(t,a)}]}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:a.user_address_id}})])]),t("td",{staticClass:"text-center"},[t("strong",[e._v(e._s(s+1))])]),t("td",{staticClass:"text-left"},[e._v(" "+e._s((a.user_address_1||"")+" "+(a.user_address_2&&"null"==a.user_address_2.toLowerCase()?"":a.user_address_2||""))+" ")]),t("td",{staticClass:"text-left"},[e._v(" "+e._s(a.user_address_desc)+" ")]),1==a.add_to_directory?t("td",{staticClass:"text-center"},[e._v(" Yes ")]):t("td",{staticClass:"text-center"},[e._v(" NO ")]),t("td",[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{staticClass:"custom-control-input",staticStyle:{"z-index":"1",width:"19px","margin-top":"6px"},attrs:{type:"checkbox"},domProps:{checked:a.is_primary_address},on:{change:function(t){return e.setPrimaryAddress(t,a)}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1"})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"enable",attrs:{"data-placement":"left",title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Edit"},on:{click:function(t){return e.editAddress(a)}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon"})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"enable",attrs:{"data-placement":"left",title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Delete"},on:{click:function(t){return e.removeaddress("singleDelete",a)}}},[t("em",{staticClass:"fa fa-trash text-danger action-icon"})])])])})),0==e.AddressList.length?t("tr",[t("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"8"}},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2)])])])])])},i=[function(){var e=this,t=e._self._c;return t("th",{staticClass:"text-center ui-resizable",staticStyle:{width:"55px","min-width":"55px","max-width":"55px"},attrs:{id:"th-"}},[t("span",{staticStyle:{"min-width":"55px"}},[e._v("#")]),t("div",{staticClass:"sizer",attrs:{id:"th--sizer"}}),t("div",{staticClass:"ui-resizable-handle ui-resizable-e",staticStyle:{"z-index":"90"}})])}],o=(a("14d9"),a("5dbc")),r=a("9769"),n={name:"Address",components:{MapComponent:o["a"]},props:{UserId:{type:Number},IsClient:{type:String}},data(){return{config:{isShowDrawButton:!0,isShowSearchBox:!0},isUpdateForm:!1,userAddressId:null,countryList:[],isdeleteButtonVisible:!1,AddressList:[],Longitude:null,Latitude:null,latLngValues:"",allSelected:!1,addressIds:null,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("AddressLine1"),name:"Address Line 1:",value:"",placeholder:"",validationRules:{max:200,required:!0}},{astype:"TextField",label:this.$t("AddressLine2"),name:"Address Line 2:",value:"",placeholder:"",validationRules:{max:200,required:!1}},{astype:"SelectField",label:this.$t("COUNTRY"),name:"Country",value:"",placeholder:"",disabled:!0,validationRules:{required:!0,max:250},config:{options:[]}},{astype:"TextField",label:this.$t("StateProvince"),name:"State/Province",value:"",placeholder:"",disabled:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("City"),name:"City:",value:"",placeholder:"",disabled:!0,validationRules:{required:!1},config:{options:[]}},{astype:"TextField",label:this.$t("ZIPCODE"),name:"Zip Code:",value:"",placeholder:"",disabled:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("NotesDescriptionAbtAddress"),name:"Note/Description About Address",userGuide:"Example: office Address",value:"",placeholder:"",validationRules:{max:200,required:!1}},{astype:"toggleField",label:this.$t("AddToCompanyDirectory"),name:"Show in Company Directory",value:"",placeholder:""},{astype:"toggleField",label:this.$t("isVisibleToClient"),name:"Visible To Client",value:"",placeholder:"",config:{onChange:this.visibleToClient}}]}]}},created(){var e=this;e.GetCountryDDL(),e.getAdditionalAddressList(),"Client"==e.IsClient?e.FormSchema[0].Data[8].visibility=!1:e.FormSchema[0].Data[8].visibility=!0},methods:{visibleToClient(e,t){var a=this;1==e?(a.confirmR(a.$t("VisibleToClientValidation"),!0,!1,(function(e){if(void 0==e)return a.FormSchema[0].Data[8].value=!0})),a.FormSchema[0].Data[8].value=!1):a.FormSchema[0].Data[8].value=e},cancelAddress(){var e=this;e.clearForm(),e.isUpdateForm=!1,e.userAddressId=null,e.$refs.mapComponnet.removeMarker()},async setPrimaryAddress(e,t){var a=this;try{let i={Num:e.target.checked?1:0,userAddressID:t.user_address_id};var s="postString="+JSON.stringify(i);await r["a"].SetPrimaryAddress(s).then(e=>{"Success"==e.data.status&&(a.ShowAlert(a.$t("LeadOwnerChanged",[a.$t("PrimaryAddress")]),"success",!0,a.$t("Alert")),a.getAdditionalAddressList())})}catch(i){console.log("error message",i)}},clearForm(){var e=this;e.FormSchema[0].Data[0].value="",e.FormSchema[0].Data[1].value="",e.FormSchema[0].Data[2].value="",e.FormSchema[0].Data[3].value="",e.FormSchema[0].Data[4].value="",e.FormSchema[0].Data[5].value="",e.FormSchema[0].Data[6].value="",e.FormSchema[0].Data[7].value="",e.FormSchema[0].Data[8].value="",e.$refs.refAddress.validateForm.reset()},selectAll(){var e=this;let t=[],a="",s={};e.allSelected=!e.allSelected,e.allSelected?(e.AddressList.forEach(e=>{e.isSelected=!0}),e.isdeleteButtonVisible=!0):(e.AddressList.forEach(e=>{e.isSelected=!1}),e.isdeleteButtonVisible=!1),e.AddressList.forEach(e=>{1==e.isSelected&&(s={addressId:e.user_address_id,userId:e.user_id},t.push(s))}),a=t.map(e=>e.addressId).join(","),e.getAddressValue(a)},select(e,t){var a=this;let s=[],i="",o={};1==e.target.checked?(a.AddressList.forEach(e=>{e.user_address_id==t.user_address_id&&(e.isSelected=!0,a.allSelected=!1)}),a.isdeleteButtonVisible=!0):a.AddressList.forEach(e=>{e.user_address_id==t.user_address_id&&(e.isSelected=!1,a.allSelected=!1)}),a.AddressList.forEach(e=>{1==e.isSelected&&(o={addressId:e.user_address_id,userId:e.user_id},s.push(o))}),a.AddressList.length==s.length?a.allSelected=!0:a.allSelected=!1,i=s.map(e=>e.addressId).join(","),""==i&&(a.isdeleteButtonVisible=!1),a.getAddressValue(i)},getAddressValue(e){var t=this;t.addressIds="",t.addressIds=e},removeaddress(e,t){var a=this;t.is_primary_address?a.ShowAlert(a.$t("CheckRemovePrimaryAddress"),"warning",a.$t("Alert")):a.confirmR(a.$t("ConfirmDelete"),!0,!1,(function(s){let i="";try{i="MultipleDelete"==e?`ids=${a.addressIds}&userId=${a.UserId}`:`ids=${t.user_address_id}&userId=${a.UserId}`,r["a"].DeleteUserAddress(i).then(e=>{"Deleted"==JSON.parse(e.data).statuscode&&(a.allSelected=!1,a.$refs.mapComponnet.removeMarker(),a.clearForm(),a.isUpdateForm=!1,a.getAdditionalAddressList(),a.ShowAlert(a.$t("DeletedSuccess",[a.$t("Address")]),"Success",!0,a.$t("Alert")))})}catch(o){console.log("error message",o)}}))},editAddress(e){var t=this;t.latLngValues="",t.isUpdateForm=!0,t.FormSchema[0].Data[0].value=e.user_address_1,t.FormSchema[0].Data[1].value="null"==e.user_address_2.toLowerCase()?"":e.user_address_2||"",t.FormSchema[0].Data[2].value=e.country_id,t.FormSchema[0].Data[3].value=e.user_city,t.FormSchema[0].Data[4].value=e.user_state,t.FormSchema[0].Data[5].value=e.user_zipcode,t.FormSchema[0].Data[6].value=e.user_address_desc,t.FormSchema[0].Data[7].value=e.add_to_directory,t.FormSchema[0].Data[8].value=e.is_client_address,t.longitude=e.longitude,t.latitude=e.latitude,t.userAddressId=e.user_address_id;let a={location_nw:e.longitude.replace(",","")+e.latitude.replace(",",",")};t.latLngValues=a},async getAdditionalAddressList(){var e=this,t=`userId=${e.UserId}&userAddressId=0`;await r["a"].GetAdditionalAddressList(t).then(t=>{null!=t.data&&(e.AddressList=[],t.data.result.length>0&&(e.AddressList=t.data.result,e.AddressList.forEach(t=>{if(t.isSelected=!1,1==t.is_primary_address){let a={location_nw:t.longitude.replace(",","")+t.latitude.replace(",",",")};e.latLngValues=a}})))})},GetCountryDDL(){var e="moduleName=CRM&type=COUNTRIES",t=this;r["a"].GetCountryDDL(e).then(e=>{t.countryList=e.data.DATA,t.countryList.forEach(e=>{t.FormSchema[0].Data[2].config.options.push({name:""+e.name,value:""+e.value})}),this.$refs.refAddress.UpdateKeyValue()})},GetAddress(e){var t=this;t.Latitude="",t.Longitude="",t.$refs.mapComponnet.fullAddress=[],t.$refs.mapComponnet.lngLatData=[];var a=e.length-1;let s=t.countryList.filter(t=>t.name===e[a].CompleteAddress.Country.LongName);t.FormSchema[0].Data[0].value=e[a].CompleteAddress.FullAddress;var i=""==s?"":s[0].value;t.FormSchema[0].Data[2].value=i,t.FormSchema[0].Data[3].value=t.FormSchema[0].Data[4].value=e[a].CompleteAddress.State.LongName,t.FormSchema[0].Data[4].value=e[a].CompleteAddress.City.LongName,t.FormSchema[0].Data[5].value=e[a].CompleteAddress.PinCode;var o="",r="",n="",l="";e[a].LatLng.forEach((e,t)=>{0==t&&(o=e.Lat,r=e.Lng)}),t.Latitude=n+","+r,t.Longitude=o+","+l;let c={location_nw:t.Longitude.replace(",","")+t.Latitude.replace(",",",")};t.latLngValues=c},onSubmit(){var e=this;e.$refs.refAddress.validateForm.validate().then(async t=>{if(t){e.isLoading=!0;let t={user_id:e.UserId,user_address_id:null===e.userAddressId?0:e.userAddressId,user_address_1:e.FormSchema[0].Data[0].value,user_address_2:e.FormSchema[0].Data[1].value,country_id:parseInt(e.FormSchema[0].Data[2].value),user_city:e.FormSchema[0].Data[3].value,user_state:e.FormSchema[0].Data[4].value,user_zipcode:e.FormSchema[0].Data[5].value,user_address_desc:e.FormSchema[0].Data[6].value,is_client_address:e.FormSchema[0].Data[8].value,add_to_directory:e.FormSchema[0].Data[7].value,latitude:e.Latitude,longitude:e.Longitude};var a=new FormData;a.append("postString",JSON.stringify(t)),r["a"].AddupdateAdditionalAddress(a).then(t=>{e.isLoading=!1,null!=t.data?1==t.data?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Address")]),"success",!0,e.$t("Alert")),e.clearForm(),e.clearForm(),e.$refs.mapComponnet.removeMarker(),e.$refs.mapComponnet.clearSearchField(),e.$refs.mapComponnet.resetMap(),e.getAdditionalAddressList()):2==t.data&&(e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Address")]),"success",!0,e.$t("Alert")),e.clearForm(),e.clearForm(),e.isUpdateForm=!1,e.userAddressId=null,e.$refs.mapComponnet.removeMarker(),e.$refs.mapComponnet.clearSearchField(),e.$refs.mapComponnet.resetMap(),e.getAdditionalAddressList()):e.ShowAlert(e.$t("SomethingWentWrong"),"success",e.$t("Alert"))})}}).catch(e=>{console.error("Error validating form:",e)})},onCancel(){}}},l=n,c=(a("e109"),a("2877")),d=Object(c["a"])(l,s,i,!1,null,null,null);t["a"]=d.exports},ca21:function(e,t,a){var s=a("4bad");t=s(!1),t.push([e.i,".singleselectlook .multiselect__select:before{z-index:99}.singleselectlook .multiselect__tags{padding:8px 30px 0 8px!important;min-height:36px!important}.singleselectlook .multiselect__input{margin-bottom:0}",""]),e.exports=t},d42b:function(e,t,a){"use strict";a("0fb6")},df69:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle py-1"},[t("h4",{staticClass:"modal-title mt-2 pt-2 mb-2",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("ResetPasswordHeading"))+" ")]),t("button",{staticClass:"close",on:{click:e.ClosePopUp}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide p-2"},[e._m(0),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UserGuideResetPassword"))}})])])])]),t("div",{staticClass:"listing py-3 px-3"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("dynamic-form",{ref:"refResetPassword",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema}})],1)])])])])])},i=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v("User Guide")])}],o=a("9769"),r={props:{UserResetPasswordData:{type:Object}},data(){return{ResetPasswordByAdmin:[],token:null,FormSchema:[{layoutType:"triple",Data:[{astype:"TextField",label:this.$t("Email"),name:"Email",value:"",placeholder:"Enter Title",visibility:!0,config:{options:[],showAddIcon:!1},disabled:!0,validationRules:""},{astype:"PasswordField",label:this.$t("NewPassword"),name:"NewPassword",value:"",placeholder:"Enter New Password",visibility:!0,config:{options:[],showAddIcon:!1},validationRules:{required:!0,min:6,regex:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;"'<>,.?/\\|`~]).*$/}},{astype:"PasswordField",label:this.$t("ConfirmPassword"),name:"ConfirmPassword",value:"",placeholder:"Enter Confirm Password",visibility:!0,config:{options:[],showAddIcon:!1},validationRules:{required:!0,min:6,regex:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;"'<>,.?/\\|`~]).*$/}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Reset Password",onClick:this.onSubmit},{type:"submit",class:"btn btn-primary disabled",text:"<i class='fa fa-key pr-2'></i>Random Password",onClick:this.GenerateRandomPassword}],isLoading:!1}},async created(){var e=this;e.token=this.GetUserInfo.Token,e.FormSchema[0].Data[0].value=e.UserResetPasswordData.email_id,await e.GetPasswordPolicyByCompanyId()},methods:{ClosePopUp(){var e=this;e.$parent.CloseUserResetPasswordPopUp()},async onSubmit(e,t){var a=this;a.$refs.refResetPassword.validateForm.validate().then((async function(e){if(e){const e=a.FormSchema[0].Data[1].value,s=a.FormSchema[0].Data[2].value;if(e!==s)return void a.ShowAlert(a.$t("Passwords do not match Please enter the correct password!"),"danger",a.$t("Alert"));a.isLoading=!0;try{let t={UserId:a.UserResetPasswordData.user_id,Email:a.UserResetPasswordData.email_id,Token:a.token,NewPassword:e,ConfirmPassword:s};await o["a"].ResetPasswordByAdmin(t).then(e=>{"Success"===e.data.status&&a.ShowAlert(a.$t("Your password has been reset successfully. Please login with your new password"),"success",a.$t("Alert")),console.log(e),a.isLoading=!1,a.ClosePopUp()})}catch(t){a.isLoading=!1}}}))},async GetPasswordPolicyByCompanyId(){var e=this;await o["a"].GetPasswordPolicyByCompanyId().then(t=>{""!=t.data&&null!=t.data&&void 0!=t.data&&(e.buttons[1].class=t.data.is_generate_random_password_required?"btn btn-primary":"btn btn-primary disabled")}).catch(e=>{console.log(e)})},GenerateRandomPassword(e,t){var a=this,s={UserId:a.UserResetPasswordData.user_id,Email:a.UserResetPasswordData.email_id,Token:"",NewPassword:a.FormSchema[0].Data[1].value,ConfirmPassword:a.FormSchema[0].Data[2].value};a.isLoading=!0,o["a"].GenerateRandomPassword(s).then(e=>{0==e.data.status&&"Email"==e.data.result?a.ShowAlert(a.$t("RandomPasswordSuccessMsg"),"success",!0,a.$t("Alert")):0!=e.data.status&&"Email"==e.data.result?a.ShowAlert(a.$t("RandomPasswordMailFailureMsg",[a.$t(e.data.password)]),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedError",[a.$t("User")]),"failure",!0,a.$t("Alert")),a.isLoading=!1}).catch(e=>{console.log(e)})}}},n=r,l=a("2877"),c=Object(l["a"])(n,s,i,!1,null,null,null);t["a"]=c.exports},e109:function(e,t,a){"use strict";a("3bc9")},ef94:function(e,t,a){var s=a("ca21");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("499e").default;i("7aeb7f3c",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-9a04b6c6.js.map