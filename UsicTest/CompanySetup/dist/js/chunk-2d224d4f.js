(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d224d4f"],{e28d:function(a,r,t){"use strict";t.r(r);var e=function(){var a=this,r=a._self._c;return r("div",[r("button",{ref:"autoButton",staticStyle:{display:"none"},on:{click:a.createOrder}},[a._v(" Open PayU ")])])},o=[],n=(t("14d9"),t("9769")),i={name:"PaymentResult",mounted(){this.$nextTick(()=>{this.$refs.autoButton.click()})},created(){let a=this.$route.params.razorpayData;a||(a=JSON.parse(localStorage.getItem("razorpayData"))),this.razorpayData=a},methods:{async loadScript(a){return new Promise(r=>{const t=document.createElement("script");t.src=a,t.onload=()=>r(!0),t.onerror=()=>r(!1),document.body.appendChild(t)})},async createOrder(){try{var a;const r=await this.loadScript("https://checkout.razorpay.com/v1/checkout.js");if(!r)return void alert("Razorpay SDK failed to load.");this.razorpayData;const t={amount:this.razorpayData.amount,currency:this.razorpayData.currency,name:this.razorpayData.name,email:this.razorpayData.email,order_id:(null===(a=this.razorpayData.order_id)||void 0===a?void 0:a.toString())||"0",notes:this.razorpayData.notes,transactionId:this.razorpayData.transactionId,invoice_id:this.razorpayData.invoice_id,user_id:this.GetUserInfo.ID,company_id:this.GetUserInfo.CompanyId,reference_no:this.razorpayData.reference_no,billId:this.razorpayData.BillIdEnc},e=await n["a"].CreatepaymentRAZORPAY(t);console.log("Razorpay Order Response:",e.data),this.openRazorpayCheckout(e.data.razorpayOrderId,e.data.amount,e.data.name,e.data.email,e.data.contact,e.data.notes.keyId,e.data.currency,e.data.oid)}catch(r){console.error("Razorpay API Error:",r),this.ShowAlert("Server Error","failure",!0,"Alert")}},async openRazorpayCheckout(a,r,t,e,o,i,c,d){var s=this;const p=this.razorpayData.invoice_id,y=this.razorpayData.BillIdEnc,l={key:i,amount:r,currency:c,name:t,description:"BILL_PAYMENT",order_id:a,prefill:{name:t,email:e,contact:o},modal:{ondismiss:function(){s.$router.push({name:"PayNow",params:{InvoiceId:p,billId:y}})}},handler:async a=>{const r={razorpayPaymentId:a.razorpay_payment_id,razorpayOrderId:a.razorpay_order_id,razorpaySignature:a.razorpay_signature,transactionId:d};try{return void n["a"].VerifyPaymentRazorpay(r).then((function(a){s.isLoading=!1,a.data?window.location.href=a.data.redirectUrl:s.ShowAlert(s.$t("UnknownErrorOccur"),"failure",!0,s.$t("Alert"))}))}catch(t){console.error("Verification API Error:",t),this.paymentStatus="Failed"}},theme:{color:"#3399cc"}},u=new Razorpay(l);u.on("payment.failed",a=>{this.paymentStatus="Failed",this.paymentId=a.error.metadata.payment_id}),u.open()}}},c=i,d=t("2877"),s=Object(d["a"])(c,e,o,!1,null,null,null);r["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d224d4f.js.map