(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMCampaign"],{5579:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_CAMPAIGNS",IdentityColumn:"campaign_id",HeaderText:e.$t("Campaign"),ListData:e.CampaignData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,IsFilterApplied:!!e.searchCondition,SortExp:e.SortExp,SortBy:e.SortBy,CurrentPageNumber:e.PageNumber},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["status_id"==i.column.COLUMN_NAME?[e.isCRMShowStausDrop(i.row.status_id,"CRM_CAMPAIGNS")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_CAMPAIGNS",dataid:i.row.campaign_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(i.row.status_id,"CRM_CAMPAIGNS")?e._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:e.getStatusClass(i.row.status_id,"status_id")},[e._v(" "+e._s(i.row[i.column.COLUMN_NAME])+" ")])])]:e._e()]}}])}),e.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_CAMPAIGNS",modulename:"CRM",callbackfunction:e.FetchData},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showAddEventModal?a("modalfollowupslist",{attrs:{srcId:e.souceID,modulename:"CRM",submodulecode:"CRM_CAMPAIGNS",userid:e.userid},on:{close:e.closeEventViewModal}}):e._e(),e.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_CAMPAIGNS",modulename:"CRM",callbackfunction:e.FetchData,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}}):e._e()],1)},n=[],s=a("53ca"),o=a("5530"),r=a("c7eb"),l=a("1da1"),c=(a("d3b7"),a("159b"),a("c740"),a("e9c4"),a("9769")),d=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Manage View",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add a Campaign",iconClass:"fa-plus",href:"/CRM/ManageCampaign/0/No/CRM/CRM_CAMPAIGNS",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addCampaign_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",isdisabled:!1,isvisible:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],u=[{fieldName:"Campaign Name",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["CAMPAIGN_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CampaignOwner",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["CAMPAIGN_OWNER"],isSearch:!1,value:"",listOptions:[]}],h=[{title:"View",href:"/CRM/ViewCampaignDetails/{campaign_id}/CRM/CRM_CAMPAIGNS",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageCampaign/{campaign_id}/Yes/CRM/CRM_CAMPAIGNS",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Follow-Ups",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""}];function p(e,t,a){return m.apply(this,arguments)}function m(){return m=Object(l["a"])(Object(r["a"])().mark((function e(t,a,i){var n,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,s={},s["moduleName"]=a,s["type"]=i,e.next=6,c["a"].GetLeftSearchStatus(s).then((function(e){var t=e.data;if(null!=t&&"CAMPAIGN_OWNER_SEARCH"==i)return n.leftSearchFields[1].listOptions=t.DATA,n.LeadStatusList=t.DATA,n.LeadStatusList}));case 6:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}var C={buttons:d,listActions:h,leftsearchSchema:u,bindleftCommonSearchdropdown:p},f=a("fc0b"),g=a("cdd5"),b=a("e29d"),S=a("2aeb"),v={components:{TgList:S["a"],searchfilter:f["a"],viewlayout:g["a"],modalfollowupslist:b["a"]},data:function(){return{isLoading:!1,leftSearchFields:C.leftsearchSchema,listheaderbuttons:C.buttons,listActions:C.listActions,CampaignData:null,StatusListForListing:[],Headers:null,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,Status:"",ModuleType:"",txtcampaign:"",selectedCampaignOwner:[],CampaignOwnerList:null,souceID:0,showAddEventModal:!1,campaignName:"",StatusIds:"",campaignOwner:"",campaignType:"",campaignDateFrom:"",campaignDateTo:"",langCode:"en",showAddEmailTemplate:!1,noRecord:!1,showFilter:!1,searchCondition:"",IsAnySearch:!1,ShowManageView:!1,userid:null,usertype:null,companyId:null,privilegeParams:null,LegendArray:[],appliedFilter:[]}},created:function(){var e=Object(l["a"])(Object(r["a"])().mark((function e(){var t;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,this.privilegeParams="controller=CRM&action=",t=this,t.getStatuslistForListing("CRM","en"),e.next=8,C.bindleftCommonSearchdropdown(t,"CRM","CAMPAIGN_OWNER_SEARCH");case 8:t.FetchData(),t.LegendArray=[{class:"bg-primary colorboxsquare",text:t.$t("CloseLeadLegend",["Campaign"])}];case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{renderActions:function(e){var t=this,a=[];return t.listActions.forEach((function(t){var i=Object(o["a"])({},t);switch(i.title){case"View":i.isVisible=!0;break;case"Edit":case"FollowUps":i.isVisible="Closed"!=e.status_id;break;default:i.isVisible=!0;break}a.push(i)})),a},clickEventOfColumn:function(e,t){"campaign_name"==t.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewCampaignDetails/"+e.campaign_id+"/CRM/CRM_CAMPAIGNS"})},getStatuslistForListing:function(e,t){var a=this,i="langCode="+t+"&statusType="+e+"&hasglobal=true";c["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"openFilterPopUp":this.openFilterPopUp();break;case"ManageView":this.ManageView();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var t=this;this.searchCondition="";var a=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[a].isvisible=!1;var i=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[i].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(n){}t.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break}},actionButtonClick:function(e,t,a,i){var n=this;switch(e){case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openNoteListPopUp":n.openNoteListPopUp(t,a);break;case"openAddNewEvent":n.openAddNewEvent(t.campaign_id,t);break}},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},openFilterPopUp:function(e){this.cancelOrRefresh(),this.showFilter=!0},cancelOrRefresh:function(){this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.FetchData()},commonDeleteData:function(e){var t=this;c["a"].CheckPrivilege(t.privilegeParams+"Delete").then((function(e){if(e.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Campaign"),(function(){var e={ids:a,moduleName:"CRM",subModuleCode:"CRM_CAMPAIGNS"},i=JSON.stringify(e);c["a"].CommonDeleteData(i).then((function(e){var a="";200==e.status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),a=t.ShowAlert(t.$t("DeletedSuccessfully",[t.$t("Campaign")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.FetchData()):a=t.ShowAlert(t.$t("DeletedError",[t.$t("Campaign")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):alert(t.$t("Selectanyrecordtodelete"))}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},openAddNewEvent:function(e,t){var a=this;a.souceID=t.campaign_id,a.selectedItem=e,a.showAddEventModal=!a.showAddEventModal},closeEventViewModal:function(){this.showAddEventModal=!1},ManageView:function(){var e=this;this.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},getRequestParams:function(e,t,a,i,n,s){var o={};return e&&(o["pageNum"]=e),s&&(o["searchcondition"]=s),n&&(o["isPaged"]=n),a&&(o["sortBy"]=a),i&&(o["sortExp"]=i),t&&(o["pageSize"]=t),o},FilterData:function(e,t,a,i,n,o){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=i,this.searchCondition=n,null!=Object(s["a"])(o)&&this.appliedFilter.push(o),this.FetchData()},FetchData:function(e){var t=this.getRequestParams(this.pageNum,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchCondition),a=this;a.isLoading=!0,t.pageSize=e?a.TotalRecords:a.PageSize,t.pageNumber=a.PageNumber,t.langCode=a.langCode,t.searchCondition=a.searchCondition,a.PageNumber?t.pageNum=a.PageNumber:a.PageNumber=t.pageNum=1,t.sortBy=a.SortBy,t.sortExp=a.SortExp;var i="";if(a.isBlank(a.searchCondition)||(i+=a.searchCondition),a.isBlank(a.conditionForInstantSearch)||(i+=a.isBlank(a.searchCondition)?a.conditionForInstantSearch:" AND "+a.conditionForInstantSearch),""!=i){if(t.searchCondition=i,a.appliedFilter.length>0){var n=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[n].isvisible=!0;var s=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[s].iconClass="fa fa-filter text-success"}}else if(0==a.appliedFilter.length){var o=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[o].isvisible=!1;var r=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[r].iconClass="fa fa-filter"}e?(t.isPaged=0,c["a"].CampaignListing(t).then((function(e){a.isLoading=!1,""!=e.data?a.JSONToCSVConvertor(e.data,"Campaign-Detail",!0):a.ModelnoRecord=!0,a.isLoading=!1}))):c["a"].CampaignListing(t).then((function(e){a.isLoading=!1,null!=e.data?(a.Headers=e.data.schema,a.Headers.forEach((function(e){e.settings=null,"campaign_name"==e.COLUMN_NAME&&(e.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})),e.data.data.length>0?(a.CampaignData=e.data.data,a.CampaignData.forEach((function(e){e.isCheckBoxDisabled=!1,e.additionalClass="","Closed"==e.status_id&&(e.isCheckBoxDisabled=!0,e.additionalClass="medium-bar"),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/CRM/ViewCampaignDetails/"+e.campaign_id+"/CRM/CRM_CAMPAIGNS")})),a.TotalRecords=e.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteCampaign").addClass("disabled"),$("#Sendbulkmail").addClass("disabled"),a.noRecord=!1):(a.noRecord=!0,a.CampaignData=[],a.TotalRecords=0)):(a.noRecord=!0,a.CampaignData=[],a.Headers=[],a.TotalRecords=0),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),a.isLoading=!1}))}},updated:function(){this.BindActionButtonEvent()}},w=v,M=a("2877"),A=Object(M["a"])(w,i,n,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=CRMCampaign.js.map