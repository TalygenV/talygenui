(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e03314f"],{"13d5":function(t,e,a){"use strict";var s=a("23e7"),i=a("d58f").left,o=a("a640"),r=a("2d00"),l=a("605d"),n=!l&&r>79&&r<83,c=n||!o("reduce");s({target:"Array",proto:!0,forced:c},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},"4b28":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("TimeSheetListing")],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"col-md-12 p-0 mt-2"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("Timesheet")))]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white ",attrs:{id:"AddManually",href:"javascript:;"}},[a("em",{staticClass:"fa fa-list"}),a("br"),a("span",[t._v(t._s(t.$t("Export")))])]),a("a",{staticClass:"p-action-btn text-white ",attrs:{id:"AddManually",href:"javascript:;"}},[a("em",{staticClass:"fa fa-calendar"}),a("br"),a("span",[t._v(t._s(t.$t("thisWeek")))])]),t._m(0)])])]),a("div",{staticClass:"listing py-3"},[t.DataLoaded?a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons1,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-slotdate",fn:function(e){e.data;return[a("div",{staticClass:"col-12 input-group timesheetdatepicker bg-white border-0 p-0"},[a("div",{staticClass:"form-control"},[a("label",[t._v(t._s(t.$t("DateRange"))+":")]),t._v("Â "),a("a",{staticClass:"pr-2 text-dark",staticStyle:{cursor:"default"},attrs:{id:"aDateLable"}},[t._v(t._s(t.DisplayWeekDate))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dateselect,expression:"dateselect"}],staticClass:"textfield2 ie_crossicon_none ToDate form-control p-1 hasdatetimepicker notvue",attrs:{id:"date_range",value:"2023/12/12 - 2023/12/12",name:"date_range",type:"date",autocomplete:"off","data-toggle":"datetimepicker",title:t.$t("DateRange"),placeholder:t.$t("DateRange")},domProps:{value:t.dateselect},on:{input:[function(e){e.target.composing||(t.dateselect=e.target.value)},t.GetStartEndDates]}})])])]}},{key:"tgslot-slotbutton",fn:function(e){e.data;return[a("button",{staticClass:"btn btn-success",attrs:{title:t.$t("ShowTimeSheet")},on:{click:t.FetchData}},[t._v(t._s(t.$t("ShowTimeSheet"))+" ")])]}},{key:"tgslot-slotstartenddate",fn:function(e){e.data;return[a("p",{staticStyle:{top:"-74px","margin-left":"104px"}},[t._v(t._s(t.DisplayWeekDate))])]}}],null,!1,3036101644)}):t._e(),a("div",{staticClass:"listing"},[a("div",{staticClass:"col-10 mb-2 float-left p-0"},[a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends-purple colorboxsquare"}),t._v(t._s(t.$t("AuditableRecords"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_profile colorboxsquare"}),t._v(" "+t._s(t.$t("LeaveHoliday"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_low colorboxsquare"}),t._v(t._s(t.$t("UnPaidLeaveRecords"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_high colorboxsquare"}),t._v(t._s(t.$t("HolidayLeaveAuditableRecords"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"lg-pausedresumed colorboxsquare"}),t._v(t._s(t.$t("PausedResumedTrackEntries"))+" ")])]),a("div",{staticClass:"col-2 mb-2 float-right p-0"},[a("a",{staticClass:"btn btn-primary formbtn",staticStyle:{float:"right"},attrs:{id:"btnAddNewEntry",name:"btnAddNewEntry",title:t.$t("AddNewEntry")},on:{click:t.showAddTaskModal}},[a("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddNewEntry")))])])]),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0"},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"align-middle d-none"},[t._v(t._s(t.$t("ProjectId"))+" ")]),a("th",{staticStyle:{"min-width":"200px"}},[t._v(t._s(t.$t("ProjectName")))]),a("th",{staticClass:"align-middle d-none"},[t._v(t._s(t.$t("TaskId")))]),a("th",{staticClass:"align-middle d-none"},[t._v(t._s(t.$t("TaskName")))]),t._l(t.HeaderList,(function(e,s){return a("th",{key:s},[t._v(" "+t._s(t.getPreviousDay(e))+" ")])})),a("th",{attrs:{id:"RowTotal"}},[t._v(t._s(t.$t("Total")))]),a("th",[t._v(t._s(t.$t("Action")))])],2)]),t.computedTimesheetList.length>0?a("tbody",t._l(t.computedTimesheetList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"align-middle d-none"},[t._v(t._s(e["ProjectId"]))]),a("td",[a("div",{staticClass:"d-inline-block"},[a("span",{staticStyle:{width:"90%",float:"left"}},[a("span",{staticClass:"d-block font-14 font-weight-medium",staticStyle:{float:"left"}},[t._v(" "+t._s(e["ProjectName"])+": "),a("span",{staticClass:"text-dark d-block font-12",staticStyle:{float:"right"}},[t._v(t._s(e["TaskDetail"]))])]),a("span",{staticClass:"text-dark d-block font-12"},[t._v(t._s(e.TaskDescription))]),t.indexEdit===s+1?a("span",[a("input",{attrs:{type:"text"},domProps:{value:e["TaskDescription"]},on:{change:function(a){return t.editChange(e,s+1,a)}}})]):t._e()]),a("a",{staticClass:"float-right",on:{click:function(e){return t.Edit(s+1)}}},[a("em",{staticClass:"fa fa-pencil"})])])]),a("td",{staticClass:"align-middle d-none"},[t._v(t._s(e["TaskId"]))]),a("td",{staticClass:"align-middle d-none"},[t._v(t._s(e["TaskDetail"]))]),t._l(t.HeaderList,(function(s,i){return a("td",{key:i,staticClass:"align-middle",class:{"table-danger":null!=e["IsValid"]&&1!=e["IsValid"]&&e["IsValid"].Date==s},attrs:{title:null!=e["IsValid"]&&1!=e["IsValid"]&&e["IsValid"].Date==s?e["IsValid"].Status:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e[s],expression:"dataItem[item]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e[s]},on:{input:[function(a){a.target.composing||t.$set(e,s,a.target.value)},function(a){return t.ChangeCurrentDateTime(e,s)}]}})])})),a("td",{staticClass:"align-middle"},[t._v(t._s(t.rowSum(e)))]),a("td",{staticClass:"single-action text-center"},[a("i",{staticClass:"fa fa-times text-danger",on:{click:function(e){return t.SingleDeleteData(s)}}})])],2)})),0):a("tbody",[a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"8"}},[t._v(t._s(t.$t("NoRecordfound")))])])]),t.computedTimesheetList.length>0?a("tfoot",[a("td",{staticClass:"align-middle d-none"}),a("td",[t._v(t._s(t.$t("Total"))+":")]),a("td",{staticClass:"align-middle d-none"}),a("td",{staticClass:"align-middle d-none"}),t._l(t.totalData,(function(e,s){return a("td",{key:s},[t._v(t._s(e.value))])})),a("td",[t._v(t._s(t.SumOfFooterRows))])],2):t._e()])]),a("a",{staticClass:"btn btn-warning formbtn mr-2 text-dark",staticStyle:{float:"right"},attrs:{id:"btnCopyLastWeek",isapprover:"0",name:"",title:t.$t("CopyToOtherUser")},on:{click:t.showCopyTimesheet}},[a("i",{staticClass:"fa fa-copy pr-2"}),t._v(t._s(t.$t("CopyToOtherUser"))+" ")]),a("a",{staticClass:"btn btn-warning formbtn mr-2 text-dark",staticStyle:{float:"right"},attrs:{id:"btnCopyLastWeek",isapprover:"0",name:"",title:t.$t("CopyLastWeek")},on:{click:t.CopyLastWeek}},[a("i",{staticClass:"fa fa-copy pr-2"}),t._v(t._s(t.$t("CopyLastWeek"))+" ")]),a("a",{staticClass:"btn btn-warning formbtn text-dark mr-2",staticStyle:{float:"right"},attrs:{id:"btnSaveAsDraft",isapprover:"0",name:"",title:t.$t("SaveAsDraft")},on:{click:function(e){return t.SaveAsDraft(1,0)}}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("SaveAsDraft")))])],1),t.addTaskShow?a("AddTaskTimeSheetModal",{attrs:{store:t.store},on:{close:function(e){t.addTaskShow=!1},saveTaskEntry:t.saveTaskEntry}}):t._e(),t.openModal?a("copyTimesheet",{on:{close:function(e){t.openModal=!1}}}):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"p-action-btn text-white",attrs:{id:"DeleteMultiple",title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Delete"}},[a("i",{staticClass:"fa fa-trash"}),a("br"),a("span",[t._v("Delete")])])}],l=(a("13d5"),a("14d9"),a("9769")),n=a("b9b9"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.handleSubmit;return[a("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),s(t.submit)}}},[a("div",{staticClass:"w-100 d-flex dynamic-multiselect",attrs:{id:"divModalTimetrack"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){e.errors;return[a("multiselect",{staticClass:"form-group tt_ddr_1 col border-0 ",class:"Break"==t.store.getProjectDetails.trackType?"tt_disabled":"",attrs:{placeholder:t.$t("searchProject"),options:t.store.getProjectsByUser,label:"projectName","track-by":"projectId","show-labels":!1,id:"exampleFormControlSelect1"},on:{input:t.taskByProject},model:{value:t.formRecord.projectId,callback:function(e){t.$set(t.formRecord,"projectId",e)},expression:"formRecord.projectId"}}),a("span",{staticClass:"val_msg"})]}}],null,!0)})],1),a("multiselect",{staticClass:"form-control tt_ddr col border-0 ",class:"Break"==t.store.getProjectDetails.trackType?"tt_disabled":"",attrs:{placeholder:t.$t("searchTask"),id:"exampleFormControlSelect2",options:t.store.getTasksFromProject,label:"firstAttribute","track-by":"value","show-labels":!1},scopedSlots:t._u([{key:"option",fn:function(e){return[a("div",{staticClass:"option__desc"},[a("span",{staticClass:"option__title",attrs:{disabled:!0}},[t._v(t._s(e.option.firstAttribute))]),a("label",{staticClass:"float-right text-light px-2 ml-1 taskcount"},[t._v(t._s(e.option.subTasksCount))]),a("label",{staticClass:"float-right"},[t._v(" "+t._s(e.option.thirdAttribute)+"% ")])])]}}],null,!0),model:{value:t.formRecord.taskId,callback:function(e){t.$set(t.formRecord,"taskId",e)},expression:"formRecord.taskId"}}),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"text-end text-right col-12"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-left":"5px"},attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])])])],1)]}}])})],1)])},d=[],u=a("ed09"),p=a("8e5f"),m=a.n(p),h=(a("c1df"),a("7bb1"));Object(h["c"])("required",{validate(t){return console.log("check",t),{required:!0,valid:-1===["",null,t.length>0].indexOf(t)}},message:"{_field_} is required",computesRequired:!0});var f=Object(u["defineComponent"])({name:"Add Task",components:{Multiselect:m.a,ValidationProvider:h["b"],ValidationObserver:h["a"]},props:{store:{type:Object}},data(){return{formRecord:{projectId:"",taskId:""}}},setup(){},created:async function(){await this.store.getProjects()},methods:{taskByProject(){this.formRecord.projectId&&this.store.loadTasks(this.formRecord.projectId.projectId),this.store.$state.tasks=[]},submit:function(){this.$emit("saveTaskEntry",{TaskId:void 0==this.formRecord.taskId.value?0:this.formRecord.taskId.value,ProjectId:this.formRecord.projectId.projectId,ProjectName:this.formRecord.projectId.projectName,TaskDetail:this.formRecord.taskId.firstAttribute,IsAddNewEntry:"yes"})}}}),v=f,D=a("2877"),b=Object(D["a"])(v,c,d,!1,null,null,null),y=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"modal fade dialog my-popups ui-draggable show",staticStyle:{height:"auto",width:"auto",display:"block",top:"0px",left:"0px"},attrs:{"data-keyboard":"false","data-backdrop":"static",role:"dialog"}},[a("div",{staticClass:"modal-dialog maxwidth500",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title text-truncate pb-1",attrs:{id:"myModalLabel"}},[t._v(t._s(t.$t("CopyTimesheet")))]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.closePopup}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left",staticStyle:{width:"43%"}},[a("div",{staticClass:"col-12 p-0 mb-2 d-flex"},[a("span",[t._v(t._s(t.$t("SelectUserFrom"))+" : ")]),a("div",{staticClass:"ml-3 custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input custom-control-input",attrs:{type:"radio",value:"Department",id:"Department",name:"Department"},domProps:{checked:t._q(t.Type,"Department")},on:{change:function(e){t.Type="Department"}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"Department"}},[t._v(t._s(t.$t("Department")))])]),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input  custom-control-input",attrs:{type:"radio",value:"User",id:"User",name:"User"},domProps:{checked:t._q(t.Type,"User")},on:{change:function(e){t.Type="User"}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"User"}},[t._v(t._s(t.$t("Users")))])]),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input  custom-control-input",attrs:{type:"radio",value:"Project",id:"Project",name:"project"},domProps:{checked:t._q(t.Type,"Project")},on:{change:function(e){t.Type="Project"}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"Project"}},[t._v(t._s(t.$t("Project")))])]),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input  custom-control-input",attrs:{type:"radio",value:"Location",id:"Location",name:"Location"},domProps:{checked:t._q(t.Type,"Location")},on:{change:function(e){t.Type="Location"}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"Location"}},[t._v(t._s(t.$t("Location")))])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[t.IsShowDiv?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.LabelName)+" "),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ParentValue,expression:"ParentValue"}],class:{"form-control":!0},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ParentValue=e.target.multiple?a:a[0]},function(e){return t.UsersByParentId(t.ParentValue)}]}},[a("option",{attrs:{value:"",disabled:"",selected:"Selected"}},[t._v(t._s(t.$t("Select")))]),t._l(t.UserParentList,(function(e,s){return a("option",{key:s,domProps:{value:e.Id}},[t._v(" "+t._s(e.Name)+" ")])}))],2)]):t._e()]),1==t.chkValidate?a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Users: "),t.IsRequiredDiv?a("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),a("Multiselect",{attrs:{label:"label","track-by":"value",options:t.Options,mode:"tag","close-on-select":!1,searchable:!0,multiple:!0,taggable:!1,placeholder:"All"},model:{value:t.SeletcedValue,callback:function(e){t.SeletcedValue=e},expression:"SeletcedValue"}})],1)]):t._e(),0==t.chkValidate?a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Users: "),t.IsRequiredDiv?a("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),a("Multiselect",{attrs:{label:"label","track-by":"value",options:t.Options,mode:"tag","close-on-select":!1,searchable:!0,multiple:!0,taggable:!1,placeholder:"All"},model:{value:t.SeletcedValue,callback:function(e){t.SeletcedValue=e},expression:"SeletcedValue"}})],1)]):t._e()]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("button",{staticClass:"btn btn-success",on:{click:t.submit}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-left":"5px"},attrs:{type:"button"},on:{click:t.closePopup}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[t._v(t._s(t.$t("MandatoryString")))])])])])])])])])])])},k=[],_={data(){return{IsShowDiv:!1,Type:"User",LabelName:"Users",IsRequiredDiv:!1,ParentValue:"",UserParentList:[],Options:[],chkValidate:!1,SeletcedValue:[],users:""}},created:function(){this.BindUsersDDL("Users")},watch:{Type:function(t){var e=this;e.onChange()}},methods:{closePopup(){this.$parent.openModal=!1},submit(){console.log("users",this.SeletcedValue),this.SeletcedValue.forEach(t=>{this.users=t.value,console.log(" this.users",this.users)})},onChange:function(){var t=this;this.SeletcedValue=[],this.ParentValue="","Department"==t.Type?(this.BindDepartmentDDL("Department"),this.IsShowDiv=!0,this.IsRequiredDiv=!1,this.LabelName="Department",this.chkValidate=!1):"User"==t.Type?(this.IsShowDiv=!1,this.IsRequiredDiv=!0,this.LabelName="Users",this.chkValidate=!0):"Project"==t.Type?(this.BindDepartmentDDL("Project"),this.IsShowDiv=!0,this.IsRequiredDiv=!1,this.LabelName="Project",this.chkValidate=!1):"Location"==t.Type&&(this.LabelName="Location",this.IsShowDiv=!0,this.IsRequiredDiv=!1,this.chkValidate=!1)},UsersByParentId(t){var e=this;"Department"==e.LabelName&&e.BindUsersDDL("Department",e.ParentValue),"Project"==e.LabelName&&e.BindUsersDDL("Project",e.ParentValue),"Users"==e.LabelName&&e.BindUsersDDL("Users",e.ParentValue)},BindUsersDDL:function(t,e){var a=this;a.Options=[];let s={};s["refCode"]=t,s["parentId"]=e,l["a"].SharedUsersParentListByParentId(s).then((function(t){a.UserListData=JSON.parse(t.data),a.UserList=a.UserListData.DocParentUserListing,null!=a.UserList.length&&(a.UserList.forEach((t,e)=>{a.Value=t.Id,a.first_value=t.Name,a.Options.push({value:a.Value,label:a.first_value})}),null!=a.GroupData&&(a.BindGroupsData(a.GroupData),a.IsBindEdited=!1))}))},BindDepartmentDDL:function(t,e){var a=this;a.isLoading=!0,a.Options=[];let s={};s["refCode"]=t,s["parentId"]=e,l["a"].SharedUsersParentList(s).then((function(t){null!=t.data?(a.UserListData=JSON.parse(t.data),a.UserParentList=a.UserListData.DocParentListing):a.UserParentList=[],a.isLoading=!1}))},BindUsersDDL:function(t,e){var a=this;a.Options=[];let s={};s["refCode"]=t,s["parentId"]=e,l["a"].SharedUsersParentListByParentId(s).then((function(t){a.UserListData=JSON.parse(t.data),a.UserList=a.UserListData.DocParentUserListing,null!=a.UserList.length&&(a.UserList.forEach((t,e)=>{a.Value=t.Id,a.first_value=t.Name,a.Options.push({value:a.Value,label:a.first_value})}),null!=a.GroupData&&(a.BindGroupsData(a.GroupData),a.IsBindEdited=!1))}))}}},C=_,S=Object(D["a"])(C,g,k,!1,null,null,null),T=S.exports,L=a("ce29"),w={components:{AddTaskTimeSheetModal:y,copyTimesheet:T},setup(){const t=Object(L["a"])();return{store:t}},data(){return{getPreviousDay:n["f"],dateselect:"",deletedArray:[],totalData:[],DataLoaded:0,noRecord:!1,TotalRecords:0,isLoading:!1,TimesheetList:[],HeaderList:[],UserId:null,StartDate:null,EndDate:null,DisplayWeekDate:"This Week",StartWeekDay:null,totalSeconds:0,addTaskShow:!1,openModal:!1,SumOfRows:[],SumOfFooterRows:0,FormSchema:[{layoutType:"triple",Data:[{astype:"SlotField",label:"",name:"slotdate",value:"",placeholder:"Date Range"},{astype:"SelectField",label:"User",name:"user_id",value:"",placeholder:"",config:{options:[]},validationRules:{}},{astype:"SlotField",label:"",name:"slotbutton",value:"",placeholder:""}]}],IsValidDate:[],isedit:!1,indexEdit:"",carryItems:[],oldTaskDesc:[],isOldTaskDesc:[]}},created:async function(){var t=this;this.DataLoaded=1,await t.GetStartEndDatesNew(),await t.GetUsersForTimesheet(),t.FormSchema[0].Data[1].value=t.GetUserInfo.ID,await t.FetchData()},mounted:async function(){var t=this;t.SaveAsDraft(),console.log("mounted")},computed:{computedTimesheetList(){return this.TimesheetList},filteredDeletedArray(){return this.deletedArray},rowSums(){return this.TimesheetList.map(t=>this.rowSum(t))},footerSums(){return this.totalData.map(t=>this.footerSums(t))}},methods:{footerSums(t){const e=["ProjectId","ProjectName","TaskDetail","TaskId"];let a=0;e.includes(t)||this.dataArray.forEach(e=>{const s=e[t];if(/^([01]\d|2[0-3]):([0-5]\d)$/.test(s)){const[t,e]=this.getHoursAndMinutes(s);a+=3600*t+60*e}});const s=Math.floor(a/3600),i=Math.floor(a%3600/60);return String(s).padStart(2,"0")+":"+String(i).padStart(2,"0")},columnSums(){const t=["ProjectId","ProjectName","TaskDetail","TaskId"],e={};return this.HeaderList.forEach(a=>{if(!t.includes(a)){const t=this.TimesheetList.map(t=>{const e=t[a];return/^([01]\d|2[0-3]):([0-5]\d)$/.test(e)?this.getHoursAndMinutes(e):0}),s=t.reduce((t,[e,a])=>t+3600*e+60*a,0),i=Math.floor(s/3600),o=Math.floor(s%3600/60);e[a]=String(i).padStart(2,"0")+":"+String(o).padStart(2,"0")}}),e},rowSum(t){var e=0;return Object.values(t).filter(t=>"ProjectId"!==t&&"ProjectName"!==t&&"TaskDetail"!==t&&"TaskId"!=t&&"RowTotal"!==t).reduce((t,a)=>{const s=/^([01]\d|2[0-3]):([0-5]\d)$/.test(a);if(s){let[t,s]=null!=a?a.split(":"):"00:00".split(":");e+=3600*parseInt(t)+60*parseInt(s)}let i=Math.floor(e/3600),o=Math.floor(e%3600/60);return t=String(i).padStart(2,"0")+":"+String(o).padStart(2,"0"),t},0)},saveTaskEntry(t){var e=this,a={};e.HeaderList.map(t=>{a[t]="00:00"});let s=e.TimesheetList.find(e=>e.ProjectId==t.ProjectId&&e.TaskId==t.TaskId);s?alert("Already Exist"):(Object.assign(a,t),e.TimesheetList.push(a),this.addTaskShow=!1)},showAddTaskModal(){this.addTaskShow=!0},showCopyTimesheet(){this.openModal=!0},ChangeCurrentDateTime(t,e){const a=/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;a.test(t[e]);t[e].includes(":")&&""!=t[e].split(":")[1]&&null!=t[e].split(":")[1]&&(this.SumRowColTotalList(),this.SumOfRows(),this.SumOfFooterRows())},async GetUsersForTimesheet(){var t=this;t.isLoading=!0;var e=`companyId=${t.GetUserInfo.CompanyId}&loggedUserId=${t.GetUserInfo.ID}&userType=CA&userId=${t.FormSchema[0].Data[1].value}&moduleName=`;await l["a"].GetUsersForTimesheet(e).then((function(e){e.data.result.forEach(e=>{t.obj={name:e.username,value:e.useR_ID},t.FormSchema[0].Data[1].config.options.push(t.obj)}),t.isLoading=!1}))},OnChange:function(){var t=$(".chkItems:checked").not("[id^='chkAll']").length;t>0?$("#DeleteMultiple").removeClass("disabled"):$("#DeleteMultiple").addClass("disabled")},async onSubmit(t,e){var a=this;a.FetchData()},GetStartEndDates:async function(t,e,a){var s=this;let i="DateSpan=thisweek&report=";await l["a"].GetStartEndDate(i).then(t=>{s.StartDate=t.data.dateStart,s.EndDate=t.data.dateEnd,s.DisplayWeekDate="",s.DisplayWeekDate=t.data.displayText,s.StartWeekDay=t.data.startWeekDay});var o=1;switch(s.StartWeekDay.toLowerCase()){case"tuesday":o=2;break;case"wednesday":o=3;break;case"thursday":o=4;break;case"friday":o=5;break;case"satureday":o=6;break;case"sunday":o=0;break;default:o=1;break}var r=new Date(this.dateselect);""==r&&(r=new Date);var n=r.getDay()-o,c=new Date(r.getFullYear(),r.getMonth(),r.getDate()-n),d=new Date(r.getFullYear(),r.getMonth(),r.getDate()-n+6),u=s.$options.filters.formatDate(c)+"-"+s.$options.filters.formatDate(d);s.StartDate=s.$options.filters.formatDate(c),s.EndDate=s.$options.filters.formatDate(d),s.DisplayWeekDate="",s.DisplayWeekDate=u},GetStartEndDatesNew:async function(t){var e=this;let a="DateSpan=thisweek&report=";await l["a"].GetStartEndDate(a).then(t=>{e.StartDate=t.data.dateStart,e.EndDate=t.data.dateEnd,e.DisplayWeekDate=t.data.displayText,e.StartWeekDay=t.data.startWeekDay}),e.FormSchema[0].Data[0].placeholder="Date Range: "+e.DisplayWeekDate,e.DisplayWeekDate="This Week"},FetchData:async function(){var t=this;t.isLoading=!0;var e=t.StartDate,a=t.EndDate,s=`companyId=${t.GetUserInfo.CompanyId}&userId=${t.FormSchema[0].Data[1].value}&dateFrom=${e}&dateTo=${a}`;await l["a"].ListTimesheetForWeek(s).then(e=>{if(null!=e.data&&""!=e.data&&e.data.length>0){let a=Object.keys(e.data[0]).filter(t=>"ProjectId"!==t&&"ProjectName"!==t&&"TaskId"!==t&&"TaskDetail"!==t&&"TaskDescription"!=t);t.isLoading=!1,this.HeaderList=a,t.TotalRecords=e.data.length,t.TimesheetList=e.data,t.TimesheetList.forEach((t,e)=>{this.isOldTaskDesc[e]=!0});t.SumRowColTotalList()}else t.noRecord=!0,t.TimesheetList=[]})},SumRowColTotalList:async function(){var t=this;t.totalData=[],t.HeaderList.forEach(e=>{var a=0;if("ProjectName"!==e.COLUMN_NAME&&"TaskDetail"!==e.COLUMN_NAME&&"TaskId"!==e.COLUMN_NAME&&"ProjectId"!==e.COLUMN_NAME){t.TimesheetList.forEach((t,s)=>{const[i,o]=null!=t[e]?t[e].split(":"):"00:00".split(":");a+=3600*parseInt(null!=i&&""===i.trim()?0:i)+60*parseInt(null!=o&&""===o.trim()?0:o)});let i=Math.floor(a/3600),o=Math.floor(a%3600/60);var s=String(i).padStart(2,"0")+":"+String(o).padStart(2,"0")}t.totalData.push({value:s}),t.totalSeconds=a}),console.log("totalData",t.totalData),console.log("SumOfRows",t.SumOfRows);var e=0;t.totalData.forEach((t,a)=>{let[s,i]=null!=t.value?t.value.split(":"):"00:00".split(":");e+=3600*parseInt(s)+60*parseInt(i)});let a=Math.floor(e/3600),s=Math.floor(e%3600/60);t.SumOfFooterRows=String(a).padStart(2,"0")+":"+String(s).padStart(2,"0"),console.log("after rowcount 1st time",t.TimesheetList)},SingleDeleteData:function(t){var e=this;e.StartDate,e.EndDate;e.TimesheetList.forEach(a=>{var s=e.TimesheetList.indexOf(a);s==t&&(a.IsAddNewEntry||e.deletedArray.push(a),e.TimesheetList.splice(t,1))})},SaveAsDraft:async function(t,e){var a=this;this.oldTaskDesc.forEach(t=>{console.log(t)}),a.TimesheetList.forEach((t,e)=>{console.log(t),this.oldTaskDesc.forEach(a=>{a.itemIndex==e+1&&this.$set(t,"OldTaskDescription",a.discription)})});let s={TimesheetList:a.TimesheetList,deletedData:a.deletedArray,userId:a.FormSchema[0].Data[1].value,dateFrom:a.StartDate,dateTo:a.EndDate};var i=new FormData;i.append("jsonData",JSON.stringify(s)),await l["a"].SaveTimeSheetEntry(s).then(t=>{null!=t.data&&""!=t.data&&t.data.length>0&&(a.TimesheetList=t.data,a.TimesheetList.forEach(t=>{t.IsValid=JSON.parse(t.IsValid)}),console.log("Is Valid date item",a.TimesheetList),a.SumRowColTotalList())})},CopyLastWeek:async function(){var t=this.StartDate,e=this.EndDate;let a=`dateFrom=${t}&dateTo=${e}&selectedUserId=${this.FormSchema[0].Data[1].value}`;l["a"].CopyLastWeekTimesheet(a).then(t=>{console.log("copylastweek ",t)})},CopyLastWeek:async function(){var t=this.StartDate,e=this.EndDate;let a=`dateFrom=${t}&dateTo=${e}&selectedUserId=${this.FormSchema[0].Data[1].value}`;l["a"].CopyLastWeekTimesheet(a).then(t=>{console.log("copylastweek ",t),this.FetchData()})},CopyToUserWeekTimesheet:async function(){var t=this.StartDate,e=this.EndDate;let a=`dateFrom=${t}&dateTo=${e}&selectedUserId=${this.FormSchema[0].Data[1].value}`;l["a"].CopyToUserWeekTimesheet(a).then(t=>{console.log("CopyToUserWeekTimesheet ",t),this.FetchData()})},Edit:function(t){this.indexEdit!=t?this.indexEdit=t:this.indexEdit=""},editChange:function(t,e,a){console.log("e",a.target.value);let s=this.oldTaskDesc.find(t=>t.itemIndex===e);s||(this.oldTaskDesc.push({itemIndex:e,discription:t.TaskDescription}),this.isOldTaskDesc[e]=!1),t.TaskDescription=a.target.value,console.log(this.oldTaskDesc)}}},I=w,x=(a("f3a5"),Object(D["a"])(I,o,r,!1,null,null,null)),P=x.exports,U={components:{TimeSheetListing:P},data(){return{}},created:function(){}},j=U,E=Object(D["a"])(j,s,i,!1,null,null,null);e["default"]=E.exports},"605d":function(t,e,a){"use strict";var s=a("da84"),i=a("c6b6");t.exports="process"===i(s.process)},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){return 1},1)}))}},bb88:function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,".red-border{border-color:red}",""]),t.exports=e},d58f:function(t,e,a){"use strict";var s=a("59ed"),i=a("7b0b"),o=a("44ad"),r=a("07fa"),l=TypeError,n=function(t){return function(e,a,n,c){var d=i(e),u=o(d),p=r(d);s(a);var m=t?p-1:0,h=t?-1:1;if(n<2)while(1){if(m in u){c=u[m],m+=h;break}if(m+=h,t?m<0:p<=m)throw new l("Reduce of empty array with no initial value")}for(;t?m>=0:p>m;m+=h)m in u&&(c=a(c,u[m],m,d));return c}};t.exports={left:n(!1),right:n(!0)}},ede9:function(t,e,a){var s=a("bb88");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("fcd7e30e",s,!0,{sourceMap:!1,shadowMode:!1})},f3a5:function(t,e,a){"use strict";a("ede9")}}]);
//# sourceMappingURL=chunk-2e03314f.js.map