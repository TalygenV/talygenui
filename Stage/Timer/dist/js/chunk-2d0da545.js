(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da545"],{"6aae":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{attrs:{IsShowAction:!1,showCheckBox:!0,listType:[e.DetailListType],ModuleName:"Approval",SubModuleCode:"Approval",IdentityColumn:"TRACK_ID",HeaderText:e.$t("TimesheetApprovals"),ListData:e.TimesheetApprovalList,HeaderData:e.Headers,widgets:e.widgets,callbackfunction:e.FetchData,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var s=t.data;return["COMMENTSCOUNT"==s.column.COLUMN_NAME?[a("a",{attrs:{"data-toggle":"modal","data-target":"#tsacomment","data-toggle-tooltip":"tooltip","data-original-title":"Comments(0)"},on:{click:function(t){return e.AddCommentPopUp(s.row)}}},[a("i",{staticClass:"fa fa-comment-o text-dark action-icon"}),a("span",{staticClass:"noti-circle noti-blue text-center"},[e._v(e._s(s.row.COMMENTSCOUNT))])])]:e._e(),"View"==s.column.COLUMN_NAME?[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.GeneralTimesheetPopup(s.row)}}},[a("em",{staticClass:"fa fa-eye text-info action-icon"})])]:e._e(),"STATUS_CODE"==s.column.COLUMN_NAME?[a("span",[e._v(e._s("TRACK_ENTRY_REJECTED"==s.row.STATUS_CODE?"Rejected":"TRACK_ENTRY_ADD_MANUAL_PENDING"==s.row.STATUS_CODE?"Pending":"Approved")+" ")])]:e._e()]}}])}),e.openModal?a("AddComment",{attrs:{SingleUserData:e.SingleUserData,UserData:e.UserData,headerValue:e.headerValue}}):e._e(),e.isshowgeneralModal?a("modalGeneralTimesheet",{attrs:{SingleUserData:e.SingleUserData,Timesheetdata:e.Timesheetdata}}):e._e()],1)},i=[],o=(a("14d9"),a("9769"));let l=[{title:"Approve",iconClass:"fa fa-check",callbackfunction:"Approve",additionalClass:"",isdisabled:!0,isvisible:!0,id:"AddNewGroup",checkPrivilege:!1,isEnabledOnSelectedRow:!0},{title:"Reject",iconClass:"fa fa-close",callbackfunction:"Reject",additionalClass:"",isdisabled:!0,isvisible:!0,id:"AddNewGroup",checkPrivilege:!1,isEnabledOnSelectedRow:!0},{title:"View History",iconClass:"fa fa-history",callbackfunction:"ViewHistory",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1}],r=[{fieldName:"From Date",fieldType:"date",fieldIcon:"fa fa-calendar",paramName:"dtFrom",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"To Date",fieldType:"date",fieldIcon:"fa fa-calendar",paramName:"dtTo",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},{fieldName:"User",fieldType:"radio",fieldIcon:"fa fa-users",paramName:"SearchuserId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]}];function n(e,t){var a=e;"CA"==t&&o["a"].GetUsersByCompanyId().then(e=>{e.data.forEach(e=>{let t={name:e.username,value:e.user_id};a.leftSearchFields[2].listOptions.push(t)})}).catch(e=>{console.log(e)})}var c={buttons:l,leftsearchSchema:r,bindleftCommonSearchdropdown:n},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block "},[a("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle  py-2"},[""!=e.UserData?a("h4",{staticClass:"modal-title mt-2 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("Comments"))+" for "+e._s(this.UserData[0].USER_NAME)+" "+e._s(e.$t("TimesheetApprovals"))+" ")]):a("h4",{staticClass:"modal-title mt-2 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("Comments"))+" ")]),a("button",{staticClass:"close",on:{click:e.closePopup}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e._m(0),a("div",{staticClass:"listing py-3 px-3"},[a("dynamic-form",{ref:"PostCommentForm",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])])])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"heading-border mb-3 "},[a("h5",{staticClass:"h5"},[a("span",{staticClass:"py-2"},[e._v("Post Comment")])])])}],h={props:{SingleUserData:{required:!1},UserData:{required:!1},headerValue:{type:String}},data(){return{FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Title"),name:"Title",value:"",placeholder:"",config:{},validationRules:{required:!0,max:250}},{astype:"RadioField",label:this.$t("Visibilty"),name:"Visibilty",value:1,placeholder:"",visibility:!0,validationRules:{required:!1},config:{options:[{value:1,name:"Public"},{value:0,name:"Private"}]}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"description",value:"",mode:"tag",placeholder:"",config:{options:[]},validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-danger aSkip",text:"Skip <i class='fa fa-forward pl-2'></i>",isVisible:!1},{type:"submit",name:"AddComment",class:"btn btn-success",text:"<i class='fa fa-send pr-2'></i>Post New Comment",isVisible:!1},{type:"submit",name:"Approve",class:"btn btn-success",text:"<i class='fa fa-send pr-2'></i>Post New Comment",isVisible:!1},{type:"submit",name:"Reject",class:"btn btn-success",text:"<i class='fa fa-send pr-2'></i>Post New Comment",isVisible:!1}],trackId:0,isLoading:!1}},created:function(){this.SingleUserData;"Approve"==this.headerValue?(this.buttons[0].isVisible=!0,this.buttons[2].isVisible=!0,this.buttons[1].isVisible=!1,this.buttons[3].isVisible=!1):"Reject"==this.headerValue?(this.buttons[0].isVisible=!0,this.buttons[2].isVisible=!1,this.buttons[1].isVisible=!1,this.buttons[3].isVisible=!0):(this.buttons[1].isVisible=!0,this.buttons[0].isVisible=!1,this.buttons[2].isVisible=!1,this.buttons[3].isVisible=!1);this.headerValue},methods:{closePopup(){var e=this;e.$parent.CloseComment()},onSubmit:function(e,t){var a=this;if("AddComment"==t){var s=`weekDaterange=${a.SingleUserData.TIMESHEET_NAME}&title=${e.Title}&description=${e.description}&access=${e.Visibilty}&statusCode=`;o["a"].AddTimesheetComment(s).then(e=>{0==e.data&&a.ShowAlert("Comment SuccessFully added ","success",!0,a.$t("Alert"))})}else"Approve"==t?a.confirmR(a.$t("TimesheetApproved"),!0,a.$t("Delete")+"  "+a.$t("Group_Item"),(function(){var t=`ids=${a.UserData[0].TIMESHEET_NAME}&statusCode=EXP_APPROVED&Resourcemsg=&approvalTypeId=4&commentTitle=${e.Title}&commentDesc=${e.description}&commentAccess=${e.Visibilty}\n                &isForciable=0&isOverridable=0&reimburseBy=`;o["a"].AddApproverStatus(t).then(e=>{"success"==e.data.status&&a.ShowAlert("Approved SuccessFully added ","success",!0,a.$t("Alert"))})})):"Reject"==t&&a.confirmR(a.$t("Timesheetreject"),!0,a.$t("Delete")+"  "+a.$t("Group_Item"),(function(){var t=`ids=${a.UserData[0].TIMESHEET_NAME}&statusCode=EXP_REJECTED&Resourcemsg=&approvalTypeId=4&commentTitle=${e.Title}&commentDesc=${e.description}&commentAccess=${e.Visibilty}\n                    &isForciable=0&isOverridable=0&reimburseBy=`;o["a"].AddApproverStatus(t).then(e=>{"success"==e.data.status&&a.ShowAlert("SuccessFully Reject","success",!0,a.$t("Alert"))})}))}}},u=h,p=a("2877"),A=Object(p["a"])(u,d,m,!1,null,null,null),C=A.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block "},[a("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle  py-0"},[a("h4",{staticClass:"modal-title mt-2 pt-1",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("GeneralTimesheet"))+" ")]),a("button",{staticClass:"close",on:{click:e.ClosePopup}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 searchpanel tablehead search float-left"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 Search-panel float-left py-2 p-0"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"row mt-0"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-5 col-xl-5 float-left pr-1 pl-0 mb-1"},[a("div",{staticClass:"col-12 input-group timesheetdatepicker bg-white border-0 p-0"},[a("div",{staticClass:"form-control"},[a("label",[e._v("Date Range: "+e._s(this.Timesheetdata.TIMESHEET_NAME))]),e._v("Â "),a("a",{staticClass:"pr-2 text-dark",staticStyle:{cursor:"default"},attrs:{id:"aDateLable"}})])])]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4 float-left pr-1 pl-0 mb-1"},[a("div",{staticClass:"form-group dpddown"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.modeluser,expression:"modeluser"}],staticClass:"form-control",attrs:{id:"ddlUser",name:"ddlUser"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.modeluser=t.target.multiple?a:a[0]}}},[a("option",[e._v("Select User")]),e._l(e.DataRec,(function(t){return a("option",{attrs:{selected:""},domProps:{value:t.value}},[e._v(e._s(t.name))])}))],2)])]),e._m(0)])])]),a("div",{staticClass:"listing"},[a("div",{staticClass:"col-10 mb-2 float-left p-0"},[a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"lg-orange colorboxsquare"}),e._v(e._s(e.$t("PausedResumedTrackEntries"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends-purple colorboxsquare"}),e._v(" "+e._s(e.$t("LeaveHoliday"))+" ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"lg-flaggedentry colorboxsquare"}),e._v(e._s(e.$t("UnPaidLeaveRecords"))+" ")])])])])])])])])])])},S=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-12 col-md-4 col-lg-3 col-xl-3 float-left pr-1 pl-0 mb-1"},[a("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline"})])}],b={props:{Timesheetdata:{type:Array,required:!0},SingleUserData:{type:Array,required:!0}},data(){return{UserData:[],modeluser:null,objData:{},DataRec:[],UserIdd:null}},created(){this.DataRec=[{value:this.GetUserInfo.ID,name:this.GetUserInfo.Name}],this.modeluser=this.DataRec[0].value,this.UserData},methods:{GetListData(){var e=this,t=`companyId=${e.GetUserInfo.CompanyId}&userId=${e.modeluser}&dateFrom=${fDate}&dateTo=${tDate}`;e.buttonShowHide(),o["a"].ListTimesheetForWeekNew(t).then(t=>{if(null!=t.data&&""!=t.data&&t.data.length>0){let a=Object.keys(t.data[0]).filter(e=>"Type"!==e&&"ProjectId"!==e&&"ProjectName"!==e&&"TaskId"!==e&&"TaskDetail"!==e&&"TaskDescription"!=e);e.isLoading=!1,this.HeaderList=a,e.TotalRecords=t.data.length,e.TimesheetList=t.data.filter(e=>"TimeTrack"==e.Type),e.BreakList=t.data.filter(e=>"Break"==e.Type),e.LeaveList=t.data.filter(e=>"Leave"==e.Type),e.TimesheetList.map((e,t)=>(this.$set(e,"RowNumber",t+1),e.OldTaskDescription=e.TaskDescription,e)),console.log("With Row Number",e.TimesheetList);e.SumRowColTotalList(),e.checkHolidayDate()}else e.noRecord=!0,e.isLoading=!1,e.TimesheetList=[]})},ClosePopup(){var e=this;e.$parent.GeneralTimesheetClosePopup()}}},f=b,v=Object(p["a"])(f,T,S,!1,null,null,null),D=v.exports,E={components:{AddComment:C,modalGeneralTimesheet:D},data(){return{isshowgeneralModal:!1,widgets:[],openModal:!1,isLoading:!1,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,listheaderbuttons:c.buttons,LegendArray:[],TimesheetApprovalList:[],Headers:[{COLUMN_NAME:"USER_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("UserName"),DISPLAY_ORDER:1},{COLUMN_NAME:"TIMESHEET_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("TimesheetPeriod"),DISPLAY_ORDER:2},{COLUMN_NAME:"TRACK_HOURS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("TrackedHour"),DISPLAY_ORDER:3},{COLUMN_NAME:"BREAK_DURATION",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("BreakHour"),DISPLAY_ORDER:4},{COLUMN_NAME:"TRACK_HOURS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("FinalTrackedHour"),DISPLAY_ORDER:5},{COLUMN_NAME:"",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("PerDiem"),DISPLAY_ORDER:6},{COLUMN_NAME:"BONUS_AMOUNT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("BonusAmount"),DISPLAY_ORDER:7},{COLUMN_NAME:"STATUS_CODE",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Status"),DISPLAY_ORDER:8,settings:{isInSlot:!0}},{COLUMN_NAME:"COMMENTSCOUNT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Comment"),DISPLAY_ORDER:9,settings:{isInSlot:!0}},{COLUMN_NAME:"View",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("View"),DISPLAY_ORDER:10,settings:{isInSlot:!0}}],noRecord:!0,SortBy:"",SortExp:"",GroupData:[],TotalRecords:0,CurrentPage:1,TotalPages:0,SearchuserId:"",userType:"CA",DateTime:"",showData:"",statusCode:"",sortExp:"",sortBy:"",pageSize:10,pageNumber:1,projectId:"",DetailListType:"List",weekDateRange:"",UserData:[],Timesheetdata:[],DataRec:{},SingleUserData:"",headerValue:""}},created(){var e=this;c.bindleftCommonSearchdropdown(this,"CA","USERS"),e.FetchData(),e.LegendArray=[{class:"legend-pending colorboxsquare",text:"Auditable Records"},{class:"legends_profile colorboxsquare",text:"Unpaid Leave Records "},{text:"| The total break hours are shown only if the break is non-billable."}]},methods:{pagerMethod:function(e){this.pageSize=e.PageSize,this.pageNumber=e.PageNumber,this.FetchData()},async FetchData(){var e=this;e.isLoading=!0;var t=`userType=${e.userType}&DateTime=${e.DateTime}&showData=${e.showData}&statusCode=${e.statusCode}&sortBy=${e.sortBy}&sortExp=${e.sortExp}&pageSize=${e.pageSize}&pageNum=${e.pageNumber}&projectId=${e.projectId}&${e.searchCondition}`;await o["a"].TimesheetApprovalList(t).then(t=>{t.data.length>0?(e.TimesheetApprovalList=t.data,e.TimesheetApprovalList.forEach(t=>{var a=e.TimesheetApprovalList.find(e=>e.TRACK_HOURS===t.TRACK_HOURS);a.TRACK_HOURS=e.secondsToTime(t.TRACK_HOURS)}),e.isLoading=!1,e.TotalRecords=t.data[0].TotalRecords,e.TotalPages=Math.ceil(e.TotalRecords/e.pageSize),e.CurrentPage=e.pageNumber,e.noRecord=!1,$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked")):e.TimesheetApprovalList=[],e.isLoading=!1}),setTimeout((function(){e.CheckBoxBootstrap()}),100)},ViewHistory(){this.$router.push({name:"ApprovalHistory"})},commonHeaderButtonClick(e){switch(e.callbackfunction){case"Approve":this.AddCommentPopUp(this._data,"Approve");break;case"Reject":this.AddCommentPopUp(this._data,"Reject");break;case"ViewHistory":this.ViewHistory();break}},AddCommentPopUp(e,t){var a="",s=this;s.SingleUserData=e,void 0!=e.TimesheetApprovalList?($(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val(),s.DataRec=e.TimesheetApprovalList.find(e=>e.TRACK_ID==a)})),s.UserData.push(s.DataRec)):this.UserData=[],this.headerValue=t,this.openModal=!0},CloseComment(){this.UserData=[],this.openModal=!1},GeneralTimesheetPopup(e){this.Timesheetdata=e,this.isshowgeneralModal=!0},GeneralTimesheetClosePopup(){this.isshowgeneralModal=!1},actionButtonClick(e,t){},renderActions(e){},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchConditionJson:this.searchCondition="",this.FetchData()},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},secondsToTime(e){var t=Math.floor(e/3600),a=e%3600,s=Math.floor(a/60),i=a%60,o=(Math.ceil(i),t+":"+s);return o}}},g=E,_=Object(p["a"])(g,s,i,!1,null,null,null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0da545.js.map