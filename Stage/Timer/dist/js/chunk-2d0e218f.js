(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e218f"],{"7cf3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("EntryFlagList",{attrs:{store:t.store}})],1)},o=[],i=a("05a5"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",[a("loader",{attrs:{"is-visible":t.store.getLoadingStatus}}),a("tg-list",{attrs:{RenderRowActionMethod:t.renderActions,IdentityColumn:"trackId",ModuleName:"Timer",listType:[t.DetailListType],HeaderText:"Flag Track Entry",SubModuleCode:"Timer",SortExp:t.SortExp,callbackfunction:t.FetchData,LegendArray:t.LegendArray,SortBy:t.SortBy,IsShowAction:!1,ListData:t.store.getTrackEntryFlag,HeaderData:t.Headers,TotalRecords:t.TotalRecords,showCheckBox:!0,ListDataCallBackFunction:t.FetchData,NorecordfoundText:t.$t("NoRecordfound"),HeaderButtons:t.entryButton,widgets:[],SearchFields:t.leftSearchFields},on:{HeaderButtonClick:t.commonHeaderButtonClick,PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata,LeftsearchButtonClick:t.leftCommonSearch},scopedSlots:t._u([{key:"slotdata",fn:function(e){var s=e.data;return["comment"==s.column.COLUMN_NAME?[a("div",{on:{click:function(e){return t.commentModalShow(s.row,!0)}}},[a("em",{staticClass:"fa fa-comment-o  text-primary",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"noti-circle noti-blue text-center"},[t._v(t._s(s.row.commentsCount))])])]:t._e(),"projectName"==s.column.COLUMN_NAME?[a("a",{staticClass:"text-center"},[t._v(t._s(s.row.projectName)+"- "+t._s(s.row.taskName))])]:t._e(),"startTime"==s.column.COLUMN_NAME?[a("span",{staticClass:"text-center",domProps:{innerHTML:t._s(s.row.startTime)}}),t._v("- "),a("span",{staticClass:"text-center",domProps:{innerHTML:t._s(s.row.stopTime)}})]:t._e(),"pausedHours"==s.column.COLUMN_NAME&&0!=s.row.pausedHours?[a("span",{staticClass:"text-center"},[t._v(t._s(t.convertSecondToHHMMSS(s.row.pausedHours)))])]:t._e(),"totalHours"==s.column.COLUMN_NAME?[a("span",{staticClass:"text-center"},[t._v(t._s(t.convertSecondToHHMMSS(s.row.totalHours)))])]:t._e()]}}])})],1),t.commentShow?a("Comments",{attrs:{store:t.store,flagData:t.flagData,trackIds:t.checkBoxVal},on:{close:function(e){t.commentShow=!1},refreshList:t.FetchData}}):t._e()],1)},n=[],l=(a("14d9"),a("ed09")),c=a("9769");const d=[{COLUMN_NAME:"projectName",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Project - Task",DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"createdByName",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"User Name",DISPLAY_ORDER:1},{COLUMN_NAME:"trackDescription",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:3},{COLUMN_NAME:"totalHours",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Time Track",DISPLAY_ORDER:3},{COLUMN_NAME:"newStartDate",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:4},{COLUMN_NAME:"startTime",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Start Time - Stop Time",DISPLAY_ORDER:4,settings:{isInSlot:!0}},{COLUMN_NAME:"timeZoneName",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Time Zone",DISPLAY_ORDER:3},{COLUMN_NAME:"pausedHours",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"PausedHours",DISPLAY_ORDER:3,settings:{isInSlot:!0}},{COLUMN_NAME:"comment",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Comment",DISPLAY_ORDER:5,settings:{isInSlot:!0}}];let m=[{title:"Flag",iconClass:"fa fa-flag",callbackfunction:"Flag",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,isEnabledOnSelectedRow:!0},{title:"UnFlag",iconClass:"fa fa-close",callbackfunction:"UnFlag",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,isEnabledOnSelectedRow:!0}],u=[{fieldName:"User",fieldType:"ddl-radio",fieldIcon:"fa fa-user",paramName:"userId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Project",fieldType:"ddl-radio",fieldIcon:"fa fa-suitcase",paramName:"projectId",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Date From",fieldType:"date",fieldIcon:"fa-calendar",paramName:"dateFrom",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Date To",fieldType:"date",fieldIcon:"fa-calendar",paramName:"dateTo",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]}];function h(t,e){var a=t;"CA"==e?c["a"].GetUsersByCompanyId().then(t=>{t.data.forEach(t=>{let e={name:t.username,value:t.user_id};a.leftSearchFields[0].listOptions.push(e)})}).catch(t=>{console.log(t)}):"PM"==e&&c["a"].ListTeamUsersByPM().then(t=>{t.data.forEach(t=>{let e={name:t.username,value:t.user_id};a.leftSearchFields[0].listOptions.push(e)})}),c["a"].GetProjectListByUserIdAndUserType().then(t=>{t.data.forEach(t=>{let e={name:t.projectname,value:t.projectid};a.leftSearchFields[1].listOptions.push(e)})})}var p={Headers:d,buttons:m,leftsearchSchema:u,bindleftCommonSearchdropdown:h},C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block "},[a("div",{staticClass:"modal-dialog ui-draggable",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle"},[a("h5",{staticClass:"modal-title",attrs:{id:"ui-id-26"}},[t._v(t._s(t.$t("Comments"))+" "+t._s(t.commentData.commentTitle))]),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body",staticStyle:{height:"auto","min-height":"0px","max-height":"none"},attrs:{id:"backgroundPopup"}},[a("section",{staticClass:"main-content",attrs:{id:"main-content"}},[a("section",{staticClass:"main-content"},[a("div",{staticClass:"container-fluid p-0"},[a("div",{staticClass:"p-0"},[a("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.handleSubmit;return[a("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),s(t.submit)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ValidationProvider",{staticClass:"tt_textarea_span position-relative",attrs:{rules:"required",name:"title"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("label",[t._v("Title:"),a("span",{staticClass:"mandatory"},[t._v("*")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentData.commentTitle,expression:"commentData.commentTitle"}],staticClass:"form-control ",class:s[0]?"is-invalid":"",attrs:{placeholder:t.$t("WriteAComment"),name:"title"},domProps:{value:t.commentData.commentTitle},on:{input:function(e){e.target.composing||t.$set(t.commentData,"commentTitle",e.target.value)}}}),t._v(" "),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]?t.$t("CommentIsReq"):""))])]}}],null,!0)})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ValidationProvider",{staticClass:"tt_textarea_span position-relative",attrs:{rules:"required",name:"Comment"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("label",[t._v("Comments:"),a("span",{staticClass:"mandatory"},[t._v("*")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentData.comment,expression:"commentData.comment"}],staticClass:"form-control ",class:s[0]?"is-invalid":"",staticStyle:{"border-color":"#BDBCBD",resize:"none"},attrs:{placeholder:t.$t("WriteAComment"),name:"Comment",maxlength:"2000"},domProps:{value:t.commentData.comment},on:{input:function(e){e.target.composing||t.$set(t.commentData,"comment",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]?t.$t("CommentIsReq"):""))])]}}],null,!0)})],1)]),a("div",{staticClass:"row flex-row-reverse mt-2"},[a("div",{staticClass:"text-end text-right col-12"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save"))+" ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-left":"5px"},attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel"))+" ")])])])])]}}])})],1)])]),a("div",{staticClass:" col-12 tab-pane fade active show"},[0==t.commentList.length.length?a("div",{staticClass:"row ticket-card-container card-view bg-border p-3"},[t._m(0)]):t._e()]),t.commentList.length>0?a("div",{staticClass:"listing mt-4",attrs:{id:"divconversationbox"}},[a("div",{staticClass:"listing tab-content"},[a("div",{staticClass:"col-12 d-flex border border-bottom-0 bg-f5f5f5"},[t._m(1),a("div",{staticClass:"col-md-6 text-right pr-0 bottom_filter_button"},[a("a",{staticClass:"position-relative",staticStyle:{"z-index":"999"},attrs:{href:"javascript:;",id:"ancreplyExpandAllCollapseAll",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Expand All or Collapse All"},on:{click:t.expendOrcollapse}},[t._v("Expand All or Collapse All")])])]),t._l(t.commentList,(function(e,s){return a("div",{key:s,staticClass:"tab-pane fade show activity-tab active pt-2",staticStyle:{"overflow-y":"auto","max-height":"500px"}},[a("div",{staticClass:"w-100",attrs:{id:"accordion"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("a",{staticClass:"card-link",attrs:{"data-toggle":"collapse",href:"#collapseOne1requestcomment1","aria-expanded":"true"},on:{click:function(e){return t.toggleCollapse(s)}}},[a("div",{staticClass:"conversation-date heading-border"},[a("span",[a("i",{staticClass:"fa fa-angle-down rotate-icon pr-1",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.dateFormat(e.dateGroup)))])])])]),t.isCollapsed(s)?a("div",{staticClass:"collapse show",attrs:{id:"collapseOne11","data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},t._l(e.trackEntryCommentList,(function(e,s){return a("div",{key:s,staticClass:"conversation-main"},[a("div",{staticClass:"conversation-time"},[a("span",[t._v(t._s(t.timeFormat(e.createD_AT)))])]),a("div",{staticClass:"conversation-box-con"},[a("div",{staticClass:"conversation-box"},[a("div",{staticClass:"name-circle light-yellow"},[a("img",{staticClass:"img-circle avatar",attrs:{src:e.avatar,width:"51",height:"51",alt:"Image"}})]),a("div",{staticClass:"conversation-header addednote-ticket"},[a("span",[a("span",{staticClass:"sender-name"},[t._v(t._s(e.tracK_ENTRY_COMMENT_TITLE))]),a("span",{staticClass:"sender-department"},[t._v(" ("+t._s(e.tracK_ENTRY_COMMENT_DESC)+")")])])]),a("div",{staticClass:"conversation-content"},[a("div",{staticClass:"col-12 p-0 notesdata"},[a("h6",{staticClass:"text-muted time"},[a("i",[a("b",[t._v(t._s(e.createD_BY))]),t._v(", Posted on: "),a("span",{staticClass:"text-danger",attrs:{title:"12/21/2023 10:09:17 AM UTC"}},[t._v(t._s(e.createD_AT))])])])])])])])])})),0)]):t._e()])])])}))],2)]):t._e()])])])])])])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 text-center"},[a("span",{staticClass:"text-danger "},[t._v("NoComments")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6 pl-0"},[a("h6",{staticClass:"py-3 mb-0"},[t._v(" Comments ")])])}],f=a("7bb1"),b=a("97fc"),v=a.n(b),g=a("b9b9"),S=a("c1df"),E=a.n(S);Object(f["c"])("required",{validate(t){return console.log("checkk"),{required:!0,valid:-1===["",null,void 0].indexOf(t)}}});var A=Object(l["defineComponent"])({name:"Flag comment",components:{ValidationProvider:f["b"],ValidationObserver:f["a"],VueTimepicker:v.a},props:{flagData:{type:Object},store:{type:Object},trackIds:{type:String}},data(){return{collapsedSections:[!1],expendCollapsedSections:[!1],commentList:[],commentData:{commentTitle:"",comment:"",type:"singleComment"}}},created:function(){this.fetchData(this.trackIds),this.toggleCollapse(0)},methods:{async submit(){this.commentData.trackIds=this.trackIds;try{const{data:t}=await c["a"].FlagsPostComment(this.commentData);console.log("data",t),null!=t?(this.ShowAlert(this.$t("CommentHasBeenPostedSuccessfully"),"Success",!0,this.$t("Alert")),this.$emit("refreshList")):vm.ShowAlert($t("Something_Wrong"),"failure",!0,$t("Alert")),this.$emit("close")}catch(t){}},isCollapsed(t){return this.collapsedSections[t]},toggleCollapse(t){this.$set(this.collapsedSections,t,!this.collapsedSections[t])},fetchData(t){var e="trackId="+t;c["a"].GetCommentListBytrackId(e).then(t=>{this.commentList=t.data,console.log("comments",this.commentList)})},dateFormat(t){return Object(g["f"])(t)},timeFormat(t){return E()(t).format("HH:mm")},expendOrcollapse(){let t=!0;this.collapsedSections.map(e=>{e&&(t=!1)}),t?(this.collapsedSections=[],this.commentList.map((t,e)=>{this.toggleCollapse(e)})):this.collapsedSections=[]}}}),k=A,T=a("2877"),D=Object(T["a"])(k,C,_,!1,null,null,null),y=D.exports,N=a("be92"),x=a("b0ac");const{GetUserInfo:L}=Object(N["d"])(Object(x["b"])());var I=Object(l["defineComponent"])({components:{Comments:y},props:{store:{type:Object}},created:async function(){p.bindleftCommonSearchdropdown(this,L.value.UserType),this.LegendArray=[{class:"legends_profile colorboxsquare",text:this.$t("Pending")},{class:"lg-approved colorboxsquare",text:this.$t("Approved")},{class:"legends_high colorboxsquare",text:this.$t("AddedManually")},{class:"legends_medium colorboxsquare",text:this.$t("BulkTimeEntry")},{class:"lg-pausedresumed colorboxsquare",text:this.$t("ThirdParty")},{class:"legends_Critical colorboxsquare",text:this.$t("FlaggedEntry")},{class:"legends_low colorboxsquare",text:this.$t("Timesheet")}],this.FetchData()},methods:{async FetchData(){var t=this,e=`pageSize=${t.pageSize}&pageNum=${t.pageNum}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&${t.searchCondition}`;await this.store.trackEntryFlag(e),t.TotalRecords=this.store.getTrackEntryFlag[0].total,t.trackId=this.store.getTrackEntryFlag[0].trackId;let a=!1;if(t.store.getTrackEntryFlag.map(e=>("TRACK_ENTRY_APPROVED"==e.statusCode.toUpperCase()||"TRACK_ENTRY_REJECTED"==e.statusCode.toUpperCase()||"TRACK_ENTRY_DELETE_PENDING"==e.statusCode||0!=e.approversCount||"INACT"==e.projectStatus||"DEL"==e.projectStatus||e.createdByName==L.value.Name?e.isCheckBoxDisabled=!0:(a=!0,e.isCheckBoxDisabled=!1),e.additionalClass=t.addClass(e.statusCode,e.trackAgent,e.trackBy),e)),0==a){let t=document.querySelector(".chkItems");t.disabled=!0}},commentModalShow(t,e){this.checkBoxVal=t.trackId,this.flagData=t,this.commentShow=e},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;default:e.isVisible=!0;break}a.push(e)}),a},commonHeaderButtonClick(t){switch(t.callbackfunction){case"Flag":this.openModal();break;case"UnFlag":this.openModal();break}},openModal(){this.checkBoxVal="";for(var t=document.getElementsByClassName("chkItems"),e=0;t[e];++e)t[e].checked&&(this.checkBoxVal.length>0&&(this.checkBoxVal+=","),this.checkBoxVal+=t[e].value);this.commentShow=!0},pagerMethod:function(t){this.pageSize=t.PageSize,this.pageNum=t.PageNumber,this.FetchData()},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchConditionJson:this.searchCondition="",this.modelinputdate=null,this.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.sortBy=t,t===this.sortBy&&(""==this.sortExp?(this.sortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.sortExp?(this.sortExp="DESC",e="sort tb_headerSortUp"):(this.sortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},addClass(t,e,a){var s=t.toUpperCase(),o="",i="",r="";switch(s){case"TRACK_ENTRY_REJECTED":o="delpending";break;case"TRACK_ENTRY_UPDATE_PENDING":o="high-profile-bar";break;case"TRACK_ENTRY_DELETE_PENDING":o="high-profile-bar";break;case"TRACK_ENTRY_ADD_MANUAL_PENDING":o="high-profile-bar";break;case"TRACK_ENTRY_APPROVED":o="lgtr-approved";break;case"SCREEN_FLAGED":o="critical-bar";break;default:o="";break}if(e&&(e.indexOf("Manual")>0?i="high-bar":"bulk"==e.toLowerCase()?i="medium-bar":"timesheet"==e.toLowerCase()?i="low-bar":"third_party"==e.toLowerCase()&&(i="lgtr-pausedresumed")),a)switch(a.ToLower()){case"desktop":case"Linux":r="trackby_desktop";break;case"web":r="trackby_web";break;case"web_manual":r="trackby_web";break;case"third_party":r="trackby_thirdparty";break;case"android":case"iphone":r="trackby_mobile";break;case"desktop_offline":r="trackby_desktop_offline";break;case"bulk":r="bulkentry_web";break;case"timesheet":r="trackby_timesheet";break;case"timesheet_mobile":r="trackby_tsmobile";break;default:r="trackby_mobile";break}return o+" "+r+" "+i},convertSecondToHHMMSS(t){return Object(g["c"])(t)}},data(){return{Headers:p.Headers,SortBy:"",SortExp:"",pageSize:20,pageNum:1,TotalRecords:0,TotalPages:1,leftSearchFields:p.leftsearchSchema,entryButton:p.buttons,projectId:"",userid:"",trackId:0,showCommentModal:!1,commentShow:!1,DetailListType:"List",flagData:"",checkBoxVal:"",LegendArray:[]}}}),w=I,O=Object(T["a"])(w,r,n,!1,null,null,null),M=O.exports,P=a("ce29"),R={components:{leftSearch:i["a"],EntryFlagList:M},data(){return{}},async created(){},methods:{},setup(){const t=Object(P["a"])();return{store:t}}},B=R,F=Object(T["a"])(B,s,o,!1,null,null,null);e["default"]=F.exports}}]);
//# sourceMappingURL=chunk-2d0e218f.js.map