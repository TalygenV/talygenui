(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cba6a"],{"4b28":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("TimeSheetListing")],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e._m(0),a("div",{staticClass:"listing py-3 px-3"},[e.DataLoaded?a("dynamic-form",{attrs:{lang:"en",buttons:e.buttons1,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-slotdate",fn:function(t){t.data;return[a("div",{staticClass:"col-12 input-group timesheetdatepicker bg-white border-0 p-0"},[a("div",{staticClass:"form-control"},[a("label",[e._v("DateRange:")]),e._v("Â "),a("a",{staticClass:"pr-2 text-dark",staticStyle:{cursor:"default"},attrs:{id:"aDateLable"}},[e._v(e._s(e.DisplayWeekDate))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateselect,expression:"dateselect"}],staticClass:"textfield2 ie_crossicon_none ToDate form-control p-1 hasdatetimepicker notvue",attrs:{id:"date_range",value:"2023/12/12 - 2023/12/12",name:"date_range",type:"date",autocomplete:"off","data-toggle":"datetimepicker",title:"Select Date",placeholder:"Date Range"},domProps:{value:e.dateselect},on:{input:[function(t){t.target.composing||(e.dateselect=t.target.value)},e.GetStartEndDates]}})])])]}},{key:"tgslot-slotbutton",fn:function(t){t.data;return[a("button",{staticClass:"btn btn-success",on:{click:e.FetchData}},[e._v(e._s(e.$t("ShowTimeSheet")))])]}},{key:"tgslot-slotstartenddate",fn:function(t){t.data;return[a("p",{staticStyle:{top:"-74px","margin-left":"104px"}},[e._v(e._s(e.DisplayWeekDate))])]}}],null,!1,4192730181)}):e._e(),e.DataLoaded?a("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.ListSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-TimeSheetTable",fn:function(t){t.data;return[a("div",{staticClass:"listing"},[a("div",{staticClass:"col-12 mb-2"},[a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends-purple colorboxsquare"}),e._v("Auditable Records ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_low colorboxsquare"}),e._v("Unpaid / Leave Records ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_medium colorboxsquare"}),e._v("TimeSheet ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_profile colorboxsquare"}),e._v("Leave / Holiday ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_high colorboxsquare"}),e._v("Holiday / Leave Auditable Records ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"lg-pausedresumed colorboxsquare"}),e._v("Paused / Resumed Track Entries ")])])]),a("tg-list",{attrs:{RenderRowActionMethod:e.renderActions,IdentityColumn:"ProjectId",ModuleName:"TimeTrack",HeaderText:e.$t("Brand"),SubModuleCode:"Timesheet",LegendArray:e.LegendArray,SortExp:e.SortExp,SortBy:e.SortBy,IsShowAction:!0,ListData:e.TimesheetList,HeaderData:e.Headers,showCheckBox:!0,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var s=t.data;return[[a("input",{directives:[{name:"model",rawName:"v-model",value:s.row[s.column.COLUMN_NAME],expression:"data.row[data.column.COLUMN_NAME]"}],domProps:{value:s.row[s.column.COLUMN_NAME]},on:{input:function(t){t.target.composing||e.$set(s.row,s.column.COLUMN_NAME,t.target.value)}}})]]}}],null,!0)})]}}],null,!1,1846864252)}):e._e(),a("a",{staticClass:"btn btn-warning formbtn text-dark mr-2",attrs:{id:"btnSaveAsDraft",isapprover:"0",name:"",title:"SaveAsDraft"},on:{click:function(t){return e.SaveBonus(1,0)}}},[a("i",{staticClass:"fa fa-save pr-2"}),e._v("SaveAsDraft")])],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-12 p-0 mt-2"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v("Timesheet")]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white addman btn-info",attrs:{id:"AddManually",href:"javascript:;"}},[a("span",[e._v("Expert")])]),a("a",{staticClass:"p-action-btn text-white addman btn-info",attrs:{id:"AddManually",href:"javascript:;"}},[a("span",[e._v("This week")])]),a("a",{staticClass:"p-action-btn text-white addman btn-info",attrs:{id:"AddManually",href:"javascript:;"}},[a("i",{staticClass:"fa fa-delete mx-2"})])])])])}],r=(a("14d9"),a("9769")),l=a("b9b9"),c={data(){return{getPreviousDay:l["e"],dateselect:"",FormSchema:[{layoutType:"triple",Data:[{astype:"SlotField",label:"",name:"slotdate",value:"",placeholder:"Date Range"},{astype:"SelectField",label:"User",name:"user_id",value:"",placeholder:"",config:{options:[]},validationRules:{}},{astype:"SlotField",label:"",name:"slotbutton",value:"",placeholder:""}]}],ListSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:"",name:"TimeSheetTable",value:"",placeholder:"",config:{options:[]},validationRules:{}}]}],buttons:[{type:"submit",class:"btn btn-warning formbtn mr-2 text-dark",text:"<i class='fa fa-copy pr-2'></i>Copy Last Week",isVisible:!0},{type:"submit",class:"btn btn-warning formbtn mr-2 text-dark",text:"<i class='fa fa-save pr-2'></i>Save As Draft",callbackfunction:"SaveBonus(1,0)",isVisible:!0},{type:"submit",class:"btn btn-success text-white formbtn mr-2",text:"<i class='fa fa-save pr-2'></i>Send For Approval",isVisible:!0}],listActions:[{title:"Delete",icon:"fa fa-trash",callbackfunction:"DeleteData",additionalSpan:"",isVisible:!0}],LegendArray:[{class:"",backgroundColor:"rgb(245 234 222)",name:"Recurring Tickets"},{class:"",backgroundColor:"rgb(245 234 222)",name:"Recurring Tickets"}],DataLoaded:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",noRecord:!1,TotalRecords:0,isLoading:!1,TimesheetList:[],UserId:null,StartDate:null,EndDate:null,DisplayWeekDate:"This Week",StartWeekDay:null,Headers:[]}},created:async function(){var e=this;this.DataLoaded=1,await e.GetStartEndDatesNew(),await e.GetUsersForTimesheet(),e.FormSchema[0].Data[1].value=e.GetUserInfo.ID,e.FetchData()},mounted:function(){console.log("mounted")},methods:{async GetUsersForTimesheet(){var e=this;e.isLoading=!0;var t=`companyId=${e.GetUserInfo.CompanyId}&loggedUserId=${e.GetUserInfo.ID}&userType=CA&userId=${e.FormSchema[0].Data[1].value}&moduleName=`;await r["a"].GetUsersForTimesheet(t).then((function(t){t.data.result.forEach(t=>{e.obj={name:t.username,value:t.useR_ID},e.FormSchema[0].Data[1].config.options.push(e.obj)}),e.isLoading=!1}))},OnChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;e>0?$("#DeleteMultiple").removeClass("disabled"):$("#DeleteMultiple").addClass("disabled")},commonHeaderButtonClick:function(e){},async onSubmit(e,t){var a=this;a.FetchData()},RdatePickerForWeekRange:async function(e){},GetStartEndDates:async function(e,t,a){console.log("date",this.dateselect);var s=this;let n="DateSpan=thisweek&report=";await r["a"].GetStartEndDate(n).then(e=>{s.StartDate=e.data.dateStart,s.EndDate=e.data.dateEnd,s.DisplayWeekDate="",s.DisplayWeekDate=e.data.displayText,s.StartWeekDay=e.data.startWeekDay});var i=1;switch(s.StartWeekDay.toLowerCase()){case"tuesday":i=2;break;case"wednesday":i=3;break;case"thursday":i=4;break;case"friday":i=5;break;case"satureday":i=6;break;case"sunday":i=0;break;default:i=1;break}var o=new Date(this.dateselect);""==o&&(o=new Date);var l=o.getDay()-i,c=new Date(o.getFullYear(),o.getMonth(),o.getDate()-l),d=new Date(o.getFullYear(),o.getMonth(),o.getDate()-l+6),u=s.$options.filters.formatDate(c)+"-"+s.$options.filters.formatDate(d);s.StartDate=s.$options.filters.formatDate(c),s.EndDate=s.$options.filters.formatDate(d),s.DisplayWeekDate="",s.DisplayWeekDate=u},GetStartEndDatesNew:async function(e){var t=this;let a="DateSpan=thisweek&report=";await r["a"].GetStartEndDate(a).then(e=>{t.StartDate=e.data.dateStart,t.EndDate=e.data.dateEnd,t.DisplayWeekDate=e.data.displayText,t.StartWeekDay=e.data.startWeekDay}),t.FormSchema[0].Data[0].placeholder="Date Range: "+t.DisplayWeekDate,t.DisplayWeekDate="This Week"},FetchData:async function(){var e=this;e.isLoading=!0;var t=e.StartDate,a=e.EndDate,s=`companyId=${e.GetUserInfo.CompanyId}&userId=${e.FormSchema[0].Data[1].value}&dateFrom=${t}&dateTo=${a}`;await r["a"].ListTimesheetForWeek(s).then(t=>{if(null!=t.data&&""!=t.data&&t.data.length>0){const s=Object.keys(t.data[0]);var a;e.isLoading=!1,this.Headers=[],s.forEach(e=>{a++,"ProjectId"==e||"TaskId"==e?this.Headers.push({COLUMN_NAME:e,DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!1,DISPLAY_NAME:e,DISPLAY_ORDER:a}):"TaskDetail"==e||("ProjectName"==e?this.Headers.push({COLUMN_NAME:e,DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Projects",DISPLAY_ORDER:1}):this.Headers.push({COLUMN_NAME:e,DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:Object(l["e"])(e),DISPLAY_ORDER:a}))}),e.Headers.forEach(e=>{e.settings=null,s.forEach(t=>{e.COLUMN_NAME==t&&"ProjectName"!==e.COLUMN_NAME&&"TaskDetail"!==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})}),e.TotalRecords=t.data.length,e.TimesheetList=t.data,e.TotalPages=1,e.CurrentPage=1,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.noRecord=!1,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.noRecord=!1}else e.noRecord=!0,e.TimesheetList=[]})},SingleDeleteData:function(e){var t=this,a=t.StartDate,s=t.EndDate;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("projectId"),(function(){let n=`companyId=${t.GetUserInfo.CompanyId}&userId=${t.FormSchema[0].Data[1].value}&projectId=${e.ProjectId||"0"}&taskId=${e.TaskId||"0"}&dateFrom=${a}&dateTo=${s}`;r["a"].DeleteTrackEntryByProjectAndTaskId(n).then(e=>{"1"==e.data?(t.ShowAlert(t.$t("DeletedSuccessfully"),"Success",!0,t.$t("Alert")),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("val")]),"failure",!0,t.$t("Alert"))})}))},actionButtonClick(e,t){var a=this;switch(e){case"Editdata":this.EditAssignCategoryClick(t);break;case"DeleteData":a.SingleDeleteData(t);break}},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Edit":t.isVisible=!0;break;case"Delete":t.isVisible=!0;break;default:t.isVisible=!0;break}a.push(t)}),a},SaveBonus:async function(e,t){var a=this;let s={TimesheetList:a.TimesheetList,userId:a.FormSchema[0].Data[1].value,dateFrom:a.StartDate,dateTo:a.EndDate};var n=new FormData;n.append("jsonData",JSON.stringify(s)),await r["a"].SaveTimeSheetEntry(s).then(e=>{console.log("SaveBonus",e)})}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,o,!1,null,null,null),p=m.exports,h={components:{TimeSheetListing:p},data(){return{}},created:function(){}},D=h,f=Object(u["a"])(D,s,n,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0cba6a.js.map