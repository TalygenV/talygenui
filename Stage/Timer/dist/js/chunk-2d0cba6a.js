(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cba6a"],{"4b28":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("TimeSheetListing")],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e._m(0),a("div",{staticClass:"listing py-3 px-3"},[e.DataLoaded?a("dynamic-form",{attrs:{lang:"en",buttons:e.buttons1,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-slotbutton",fn:function(t){t.data;return[a("button",{staticClass:"btn btn-success",on:{click:e.FetchData}},[e._v(e._s(e.$t("ShowTimeSheet")))])]}}],null,!1,2383099786)}):e._e(),e.DataLoaded?a("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.ListSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-TimeSheetTable",fn:function(t){t.data;return[a("div",{staticClass:"listing"},[a("div",{staticClass:"col-12 mb-2"},[a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends-purple colorboxsquare"}),e._v("Automatic ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_low colorboxsquare"}),e._v("Manual ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_medium colorboxsquare"}),e._v("TimeSheet ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_profile colorboxsquare"}),e._v("Leave ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"legends_high colorboxsquare"}),e._v("Holiday ")]),a("div",{staticClass:"mr-2 d-inline-block"},[a("span",{staticClass:"lg-pausedresumed colorboxsquare"}),e._v("PausedResumed ")])])]),a("tg-list",{attrs:{RenderRowActionMethod:e.renderActions,IdentityColumn:"ProjectId",ModuleName:"TimeTrack",HeaderText:e.$t("Brand"),SubModuleCode:"Timesheet",LegendArray:e.LegendArray,SortExp:e.SortExp,SortBy:e.SortBy,IsShowAction:!0,ListData:e.TimesheetList,HeaderData:e.Headers,showCheckBox:!0,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function(t){var s=t.data;return[[a("input",{directives:[{name:"model",rawName:"v-model",value:s.row[s.column.COLUMN_NAME],expression:"data.row[data.column.COLUMN_NAME]"}],domProps:{value:s.row[s.column.COLUMN_NAME]},on:{input:function(t){t.target.composing||e.$set(s.row,s.column.COLUMN_NAME,t.target.value)}}})]]}}],null,!0)})]}}],null,!1,4232794401)}):e._e()],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-12 p-0 mt-2"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v("Timesheet")]),a("span",{staticClass:"p-actions float-right"},[a("a",{staticClass:"p-action-btn text-white addman btn-info",attrs:{id:"AddManually",href:"javascript:;"}},[a("span",[e._v("Expert")])]),a("a",{staticClass:"p-action-btn text-white addman btn-info",attrs:{id:"AddManually",href:"javascript:;"}},[a("span",[e._v("This week")])]),a("a",{staticClass:"p-action-btn text-white addman btn-info",attrs:{id:"AddManually",href:"javascript:;"}},[a("i",{staticClass:"fa fa-delete mx-2"})])])])])}],r=(a("14d9"),a("9769")),l=a("b9b9"),c={data(){return{getPreviousDay:l["e"],FormSchema:[{layoutType:"triple",Data:[{astype:"DateField",label:"Date Range",name:"date_range",value:new Date,placeholder:"This week",id:"week-picker",config:{mode:"dateTime",is24hr:!0,format:"YYYY-MM-DD - hh:mm",minDate:new Date,onChange:function(e,t){}}},{astype:"SelectField",label:"User",name:"user_id",value:"",placeholder:"",config:{options:[]},validationRules:{}},{astype:"SlotField",label:"",name:"slotbutton",value:"",placeholder:""}]}],ListSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:"",name:"TimeSheetTable",value:"",placeholder:"",config:{options:[]},validationRules:{}}]}],buttons:[{type:"submit",class:"btn btn-warning formbtn mr-2 text-dark",text:"<i class='fa fa-copy pr-2'></i>Copy Last Week",isVisible:!0},{type:"submit",class:"btn btn-warning formbtn mr-2 text-dark",text:"<i class='fa fa-save pr-2'></i>Save As Draft",isVisible:!0},{type:"submit",class:"btn btn-success text-white formbtn mr-2",text:"<i class='fa fa-save pr-2'></i>Send For Approval",isVisible:!0}],listActions:[{title:"Delete",icon:"fa fa-trash",callbackfunction:"DeleteData",additionalSpan:"",isVisible:!0}],LegendArray:[{class:"",backgroundColor:"rgb(245 234 222)",name:"Recurring Tickets"},{class:"",backgroundColor:"rgb(245 234 222)",name:"Recurring Tickets"}],DataLoaded:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",noRecord:!1,TotalRecords:0,isLoading:!1,TimesheetList:[],UserId:null,Headers:[]}},created:async function(){this.DataLoaded=1,await this.GetUsersForTimesheet();var e=this;e.FormSchema[0].Data[1].value=e.GetUserInfo.ID,e.FetchData()},mounted:function(){var e=this;e.RdatePickerForWeekRange("date-range"),console.log("mounted")},methods:{async GetUsersForTimesheet(){var e=this;e.isLoading=!0;var t="companyId=270936&loggedUserId=769083&userType=CA&userId=769083&moduleName=";await r["a"].GetUsersForTimesheet(t).then((function(t){t.data.result.forEach(t=>{e.obj={name:t.username,value:t.useR_ID},e.FormSchema[0].Data[1].config.options.push(e.obj)}),e.isLoading=!1}))},OnChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;e>0?$("#DeleteMultiple").removeClass("disabled"):$("#DeleteMultiple").addClass("disabled")},commonHeaderButtonClick:function(e){},async onSubmit(e,t){var a=this;a.FetchData()},async GetStartEndDates(e){GetStartEndDate_New(e,null)},async GetStartEndDate_New(e,t){},async RdatePickerForWeekRange(e){new Date;$("#"+e).keydown((function(e){"StartDate",e.preventDefault()}));var t=$("<div>").addClass("input-group-append float-right").attr({"data-target":"#"+e,"data-toggle":"datetimepicker"}),a=$("<span>").addClass("input-group-text").append('<i class="fa fa-calendar"></i>');t.append(a),t.insertAfter($("#"+e)),$("#"+e).on("change.datetimepicker",(function(t){var a=1,s="@weekStart".toLowerCase();switch(s){case"tuesday":a=2;break;case"wednesday":a=3;break;case"thursday":a=4;break;case"friday":a=5;break;case"satureday":a=6;break;case"sunday":a=0;break;default:}var n=new Date(t.date),i=n.getDay()-a,o=new Date(n.getFullYear(),n.getMonth(),n.getDate()-i),r=new Date(n.getFullYear(),n.getMonth(),n.getDate()-i+6),l=moment(o).format("L")+"-"+moment(r).format("L");$("#txtFromDate").val(moment(o).format("L")),$("#txtToDate").val(moment(r).format("L")),$("#aDateLable").text(l),$("#"+e).datetimepicker("autochange")}))},FetchData:async function(){var e=this;e.isLoading=!0;var t=e.$options.filters.formatDateTime(e.FormSchema[0].Data[0].value),a=e.$options.filters.formatDateTime(e.FormSchema[0].Data[0].value),s=`companyId=270936&userId=${e.FormSchema[0].Data[1].value}&dateFrom=${t}&dateTo=${a}`;await r["a"].ListTimesheetForWeek(s).then(t=>{if(null!=t.data&&""!=t.data&&t.data.length>0){const s=Object.keys(t.data[0]);var a;e.isLoading=!1,s.forEach(e=>{a++,"ProjectId"==e||"TaskId"==e?this.Headers.push({COLUMN_NAME:e,DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!1,DISPLAY_NAME:e,DISPLAY_ORDER:a}):"TaskDetail"==e||("ProjectName"==e?this.Headers.push({COLUMN_NAME:e,DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Projects",DISPLAY_ORDER:1}):this.Headers.push({COLUMN_NAME:e,DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:Object(l["e"])(e),DISPLAY_ORDER:a}))}),e.Headers.forEach(e=>{e.settings=null,s.forEach(t=>{e.COLUMN_NAME==t&&"ProjectName"!==e.COLUMN_NAME&&"TaskDetail"!==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})}),e.TotalRecords=t.data.length,e.TimesheetList=t.data,e.TotalPages=1,e.CurrentPage=1,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.noRecord=!1,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.noRecord=!1}else e.noRecord=!0,e.TimesheetList=[]})},SingleDeleteData:function(e){var t=this,a=t.$options.filters.formatDateTime(t.FormSchema[0].Data[0].value),s=t.$options.filters.formatDateTime(t.FormSchema[0].Data[0].value);t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("projectId"),(function(){let n=`companyId=270936&userId=${t.FormSchema[0].Data[1].value}&projectId=${e.ProjectId}&taskId=${e.TaskId}&dateFrom=${a}&dateTo=${s}`;r["a"].DeleteTrackEntryByProjectAndTaskId(n).then(e=>{"1"==e.data?(t.ShowAlert(t.$t("DeletedSuccessfully"),"Success",!0,t.$t("Alert")),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("val")]),"failure",!0,t.$t("Alert"))})}))},actionButtonClick(e,t){var a=this;switch(e){case"Editdata":this.EditAssignCategoryClick(t);break;case"DeleteData":a.SingleDeleteData(t);break}},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Edit":t.isVisible=!0;break;case"Delete":t.isVisible=!0;break;default:t.isVisible=!0;break}a.push(t)}),a}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,o,!1,null,null,null),h=m.exports,p={components:{TimeSheetListing:h},data(){return{}},created:function(){}},b=p,f=Object(u["a"])(b,s,n,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0cba6a.js.map